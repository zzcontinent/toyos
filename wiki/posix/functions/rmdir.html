<!-- Copyright 2001-2013 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group's rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2013 The Open Group, All Rights Reserved -->
<title>rmdir</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/rint.html" accesskey="P">&lt;&lt;&lt; Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/round.html" accesskey="N">Next &gt;&gt;&gt;</a></td>
</tr>
</table>

<hr align="LEFT" width="100%">
</div>

<script type="text/javascript" language="JavaScript" src="../jscript/codes.js">
</script>

<basefont size="3"> 

<center><font size="2">The Open Group Base Specifications Issue 7, 2018 edition<br>
IEEE Std 1003.1-2017 (Revision of IEEE Std 1003.1-2008)<br>
Copyright &copy; 2001-2018 IEEE and The Open Group</font></center>

<hr size="2" noshade>
<a name="top"></a> <a name="rmdir"></a> <a name="tag_16_491"></a><!-- rmdir -->
 

<h4 class="mansect"><a name="tag_16_491_01"></a>NAME</h4>

<blockquote>rmdir - remove a directory</blockquote>

<h4 class="mansect"><a name="tag_16_491_02"></a>SYNOPSIS</h4>

<blockquote class="synopsis">
<p><code><tt>#include &lt;<a href="../basedefs/unistd.h.html">unistd.h</a>&gt;<br>
<br>
 int rmdir(const char *</tt><i>path</i><tt>);<br>
</tt></code></p>
</blockquote>

<h4 class="mansect"><a name="tag_16_491_03"></a>DESCRIPTION</h4>

<blockquote>
<p>The <i>rmdir</i>() function shall remove a directory whose name is given by <i>path</i>. The directory shall be removed only if
it is an empty directory.</p>

<p>If the directory is the root directory or the current working directory of any process, it is unspecified whether the function
succeeds, or whether it shall fail and set <i>errno</i> to [EBUSY].</p>

<p>If <i>path</i> names a symbolic link, then <i>rmdir</i>() shall fail and set <i>errno</i> to [ENOTDIR].</p>

<p>If the <i>path</i> argument refers to a path whose final component is either dot or dot-dot, <i>rmdir</i>() shall fail.</p>

<p>If the directory's link count becomes 0 and no process has the directory open, the space occupied by the directory shall be
freed and the directory shall no longer be accessible. If one or more processes have the directory open when the last link is
removed, the dot and dot-dot entries, if present, shall be removed before <i>rmdir</i>() returns and no new entries may be created
in the directory, but the directory shall not be removed until all references to the directory are closed.</p>

<p>If the directory is not an empty directory, <i>rmdir</i>() shall fail and set <i>errno</i> to [EEXIST] or [ENOTEMPTY].</p>

<p>Upon successful completion, <i>rmdir</i>() shall mark for update the last data modification and last file status change
timestamps of the parent directory.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_491_04"></a>RETURN VALUE</h4>

<blockquote>
<p>Upon successful completion, the function <i>rmdir</i>() shall return 0. Otherwise, -1 shall be returned, and <i>errno</i> set to
indicate the error. If -1 is returned, the named directory shall not be changed.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_491_05"></a>ERRORS</h4>

<blockquote>
<p>The <i>rmdir</i>() function shall fail if:</p>

<dl compact>
<dt>[EACCES]</dt>

<dd>Search permission is denied on a component of the path prefix, or write permission is denied on the parent directory of the
directory to be removed.</dd>

<dt>[EBUSY]</dt>

<dd>The directory to be removed is currently in use by the system or some process and the implementation considers this to be an
error.</dd>

<dt>[EEXIST]&nbsp;or&nbsp;[ENOTEMPTY]</dt>

<dd>
The <i>path</i> argument names a directory that is not an empty directory, or there are hard links to the directory other than dot
or a single entry in dot-dot.</dd>

<dt>[EINVAL]</dt>

<dd>The <i>path</i> argument contains a last component that is dot.</dd>

<dt>[EIO]</dt>

<dd>A physical I/O error has occurred.</dd>

<dt>[ELOOP]</dt>

<dd>A loop exists in symbolic links encountered during resolution of the <i>path</i> argument.</dd>

<dt>[ENAMETOOLONG]</dt>

<dd>
The length of a component of a pathname is longer than {NAME_MAX}.</dd>

<dt>[ENOENT]</dt>

<dd>A component of <i>path</i> does not name an existing file, or the <i>path</i> argument names a nonexistent directory or points
to an empty string.</dd>

<dt>[ENOTDIR]</dt>

<dd>A component of <i>path</i> names an existing file that is neither a directory nor a symbolic link to a directory.</dd>

<dt>[EPERM]&nbsp;or&nbsp;[EACCES]</dt>

<dd><sup>[<a href="javascript:open_code('XSI')">XSI</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border=
"0"><br>
The S_ISVTX flag is set on the directory containing the file referred to by the <i>path</i> argument and the process does not
satisfy the criteria specified in XBD <a href="../basedefs/V1_chap04.html#tag_04_03"><i>Directory Protection</i></a>. <img src=
"../images/opt-end.gif" alt="[Option End]" border="0"></dd>

<dt>[EROFS]</dt>

<dd>The directory entry to be removed resides on a read-only file system.</dd>
</dl>

<p>The <i>rmdir</i>() function may fail if:</p>

<dl compact>
<dt>[ELOOP]</dt>

<dd>More than {SYMLOOP_MAX} symbolic links were encountered during resolution of the <i>path</i> argument.</dd>

<dt>[ENAMETOOLONG]</dt>

<dd>
The length of a pathname exceeds {PATH_MAX}, or pathname resolution of a symbolic link produced an intermediate result with a
length that exceeds {PATH_MAX}.</dd>
</dl>
</blockquote>

<hr>
<div class="box"><em>The following sections are informative.</em></div>

<h4 class="mansect"><a name="tag_16_491_06"></a>EXAMPLES</h4>

<blockquote>
<h5><a name="tag_16_491_06_01"></a>Removing a Directory</h5>

<p>The following example shows how to remove a directory named <b>/home/cnd/mod1</b>.</p>

<pre>
<tt>#include &lt;unistd.h&gt;
<br>
int status;
...
status = rmdir("/home/cnd/mod1");
</tt>
</pre>
</blockquote>

<h4 class="mansect"><a name="tag_16_491_07"></a>APPLICATION USAGE</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_491_08"></a>RATIONALE</h4>

<blockquote>
<p>The <i>rmdir</i>() and <a href="../functions/rename.html"><i>rename</i>()</a> functions originated in 4.2 BSD, and they used
[ENOTEMPTY] for the condition when the directory to be removed does not exist or <i>new</i> already exists. When the 1984
/usr/group standard was published, it contained [EEXIST] instead. When these functions were adopted into System V, the 1984
/usr/group standard was used as a reference. Therefore, several existing applications and implementations support/use both forms,
and no agreement could be reached on either value. All implementations are required to supply both [EEXIST] and [ENOTEMPTY] in <a
href="../basedefs/errno.h.html"><i>&lt;errno.h&gt;</i></a> with distinct values, so that applications can use both values in
C-language <b>case</b> statements.</p>

<p>The meaning of deleting <i>pathname</i> <b>/dot</b> is unclear, because the name of the file (directory) in the parent directory
to be removed is not clear, particularly in the presence of multiple links to a directory.</p>

<p>The POSIX.1-1990 standard was silent with regard to the behavior of <i>rmdir</i>() when there are multiple hard links to the
directory being removed. The requirement to set <i>errno</i> to [EEXIST] or [ENOTEMPTY] clarifies the behavior in this case.</p>

<p>If the current working directory of the process is being removed, that should be an allowed error.</p>

<p>Virtually all existing implementations detect [ENOTEMPTY] or the case of dot-dot. The text in <a href=
"../functions/V2_chap02.html#tag_15_03"><i>Error Numbers</i></a> about returning any one of the possible errors permits that
behavior to continue. The [ELOOP] error may be returned if more than {SYMLOOP_MAX} symbolic links are encountered during resolution
of the <i>path</i> argument.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_491_09"></a>FUTURE DIRECTIONS</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_491_10"></a>SEE ALSO</h4>

<blockquote>
<p><a href="../functions/V2_chap02.html#tag_15_03"><i>Error Numbers</i></a>, <a href=
"../functions/mkdir.html#tag_16_325"><i>mkdir</i></a>, <a href="../functions/remove.html#"><i>remove</i></a>, <a href=
"../functions/rename.html#"><i>rename</i></a>, <a href="../functions/unlink.html#tag_16_635"><i>unlink</i></a></p>

<p>XBD <a href="../basedefs/V1_chap04.html#tag_04_03"><i>Directory Protection</i></a>, <a href=
"../basedefs/unistd.h.html"><i>&lt;unistd.h&gt;</i></a></p>
</blockquote>

<h4 class="mansect"><a name="tag_16_491_11"></a>CHANGE HISTORY</h4>

<blockquote>
<p>First released in Issue 3. Included for alignment with the POSIX.1-1988 standard.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_491_12"></a>Issue 6</h4>

<blockquote>
<p>The following new requirements on POSIX implementations derive from alignment with the Single UNIX Specification:</p>

<ul>
<li>
<p>The DESCRIPTION is updated to indicate the results of naming a symbolic link in <i>path</i>.</p>
</li>

<li>
<p>The [EIO] mandatory error condition is added.</p>
</li>

<li>
<p>The [ELOOP] mandatory error condition is added.</p>
</li>

<li>
<p>A second [ENAMETOOLONG] is added as an optional error condition.</p>
</li>
</ul>

<p>The following changes were made to align with the IEEE&nbsp;P1003.1a draft standard:</p>

<ul>
<li>
<p>The [ELOOP] optional error condition is added.</p>
</li>
</ul>
</blockquote>

<h4 class="mansect"><a name="tag_16_491_13"></a>Issue 7</h4>

<blockquote>
<p>Austin Group Interpretation 1003.1-2001 #143 is applied.</p>

<p>Austin Group Interpretation 1003.1-2001 #181 is applied, updating the requirements for operations when the S_ISVTX bit is
set.</p>

<p>Changes are made related to support for finegrained timestamps.</p>

<p>POSIX.1-2008, Technical Corrigendum 1, XSH/TC1-2008/0519 [324] is applied.</p>
</blockquote>

<div class="box"><em>End of informative text.</em></div>

<hr>
<p>&nbsp;</p>

<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX &reg; is a registered Trademark of The Open Group.<br>
POSIX &reg; is a registered Trademark of The IEEE.<br>
Copyright &copy; 2001-2018 IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>

<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/rint.html" accesskey="P">&lt;&lt;&lt; Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/round.html" accesskey="N">Next &gt;&gt;&gt;</a></td>
</tr>
</table>

<hr align="LEFT" width="100%">
</div>
</body>
</html>

