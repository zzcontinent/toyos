<!-- Copyright 2001-2013 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group's rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2013 The Open Group, All Rights Reserved -->
<title>sigqueue</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/sigpending.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/sigsetjmp.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>

<hr align="LEFT" width="100%">
</div>

<script type="text/javascript" language="JavaScript" src="../jscript/codes.js">
</script>

<basefont size="3"> 

<center><font size="2">The Open Group Base Specifications Issue 7, 2018 edition<br>
IEEE Std 1003.1-2017 (Revision of IEEE Std 1003.1-2008)<br>
Copyright &copy; 2001-2018 IEEE and The Open Group</font></center>

<hr size="2" noshade>
<a name="top"></a> <a name="sigqueue"></a> <a name="tag_16_553"></a><!-- sigqueue -->
 

<h4 class="mansect"><a name="tag_16_553_01"></a>NAME</h4>

<blockquote>sigqueue - queue a signal to a process</blockquote>

<h4 class="mansect"><a name="tag_16_553_02"></a>SYNOPSIS</h4>

<blockquote class="synopsis">
<div class="box"><code><tt><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt=
"[Option Start]" border="0"> #include &lt;<a href="../basedefs/signal.h.html">signal.h</a>&gt;<br>
<br>
 int sigqueue(pid_t</tt> <i>pid</i><tt>, int</tt> <i>signo</i><tt>, union sigval</tt> <i>value</i><tt>); <img src=
"../images/opt-end.gif" alt="[Option End]" border="0"></tt></code></div>

<tt><br>
</tt></blockquote>

<h4 class="mansect"><a name="tag_16_553_03"></a>DESCRIPTION</h4>

<blockquote>
<p>The <i>sigqueue</i>() function shall cause the signal specified by <i>signo</i> to be sent with the value specified by
<i>value</i> to the process specified by <i>pid</i>. If <i>signo</i> is zero (the null signal), error checking is performed but no
signal is actually sent. The null signal can be used to check the validity of <i>pid</i>.</p>

<p>The conditions required for a process to have permission to queue a signal to another process are the same as for the <a href=
"../functions/kill.html"><i>kill</i>()</a> function.</p>

<p>The <i>sigqueue</i>() function shall return immediately. If SA_SIGINFO is set for <i>signo</i> and if the resources were
available to queue the signal, the signal shall be queued and sent to the receiving process. If SA_SIGINFO is not set for
<i>signo</i>, then <i>signo</i> shall be sent at least once to the receiving process; it is unspecified whether <i>value</i> shall
be sent to the receiving process as a result of this call.</p>

<p>If the value of <i>pid</i> causes <i>signo</i> to be generated for the sending process, and if <i>signo</i> is not blocked for
the calling thread and if no other thread has <i>signo</i> unblocked or is waiting in a <a href=
"../functions/sigwait.html"><i>sigwait</i>()</a> function for <i>signo</i>, either <i>signo</i> or at least the pending, unblocked
signal shall be delivered to the calling thread before the <i>sigqueue</i>() function returns. Should any multiple pending signals
in the range SIGRTMIN to SIGRTMAX be selected for delivery, it shall be the lowest numbered one. The selection order between
realtime and non-realtime signals, or between multiple pending non-realtime signals, is unspecified.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_553_04"></a>RETURN VALUE</h4>

<blockquote>
<p>Upon successful completion, the specified signal shall have been queued, and the <i>sigqueue</i>() function shall return a value
of zero. Otherwise, the function shall return a value of -1 and set <i>errno</i> to indicate the error.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_553_05"></a>ERRORS</h4>

<blockquote>
<p>The <i>sigqueue</i>() function shall fail if:</p>

<dl compact>
<dt>[EAGAIN]</dt>

<dd>No resources are available to queue the signal. The process has already queued {SIGQUEUE_MAX} signals that are still pending at
the receiver(s), or a system-wide resource limit has been exceeded.</dd>

<dt>[EINVAL]</dt>

<dd>The value of the <i>signo</i> argument is an invalid or unsupported signal number.</dd>

<dt>[EPERM]</dt>

<dd>The process does not have appropriate privileges to send the signal to the receiving process.</dd>

<dt>[ESRCH]</dt>

<dd>The process <i>pid</i> does not exist.</dd>
</dl>
</blockquote>

<hr>
<div class="box"><em>The following sections are informative.</em></div>

<h4 class="mansect"><a name="tag_16_553_06"></a>EXAMPLES</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_553_07"></a>APPLICATION USAGE</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_553_08"></a>RATIONALE</h4>

<blockquote>
<p>The <i>sigqueue</i>() function allows an application to queue a realtime signal to itself or to another process, specifying the
application-defined value. This is common practice in realtime applications on existing realtime systems. It was felt that
specifying another function in the <i>sig</i>... name space already carved out for signals was preferable to extending the
interface to <a href="../functions/kill.html"><i>kill</i>()</a>.</p>

<p>Such a function became necessary when the put/get event function of the message queues was removed. It should be noted that the
<i>sigqueue</i>() function implies reduced performance in a security-conscious implementation as the access permissions between the
sender and receiver have to be checked on each send when the <i>pid</i> is resolved into a target process. Such access checks were
necessary only at message queue open in the previous interface.</p>

<p>The standard developers required that <i>sigqueue</i>() have the same semantics with respect to the null signal as <a href=
"../functions/kill.html"><i>kill</i>()</a>, and that the same permission checking be used. But because of the difficulty of
implementing the &quot;broadcast&quot; semantic of <a href="../functions/kill.html"><i>kill</i>()</a> (for example, to process groups) and
the interaction with resource allocation, this semantic was not adopted. The <i>sigqueue</i>() function queues a signal to a single
process specified by the <i>pid</i> argument.</p>

<p>The <i>sigqueue</i>() function can fail if the system has insufficient resources to queue the signal. An explicit limit on the
number of queued signals that a process could send was introduced. While the limit is &quot;per-sender&quot;, this volume of POSIX.1-2017
does not specify that the resources be part of the state of the sender. This would require either that the sender be maintained
after exit until all signals that it had sent to other processes were handled or that all such signals that had not yet been acted
upon be removed from the queue(s) of the receivers. This volume of POSIX.1-2017 does not preclude this behavior, but an
implementation that allocated queuing resources from a system-wide pool (with per-sender limits) and that leaves queued signals
pending after the sender exits is also permitted.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_553_09"></a>FUTURE DIRECTIONS</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_553_10"></a>SEE ALSO</h4>

<blockquote>
<p><a href="../functions/V2_chap02.html#tag_15_08_01"><i>Realtime Signals</i></a></p>

<p>XBD <a href="../basedefs/signal.h.html"><i>&lt;signal.h&gt;</i></a></p>
</blockquote>

<h4 class="mansect"><a name="tag_16_553_11"></a>CHANGE HISTORY</h4>

<blockquote>
<p>First released in Issue 5. Included for alignment with the POSIX Realtime Extension and the POSIX Threads Extension.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_553_12"></a>Issue 6</h4>

<blockquote>
<p>The <i>sigqueue</i>() function is marked as part of the Realtime Signals Extension option.</p>

<p>The [ENOSYS] error condition has been removed as stubs need not be provided if an implementation does not support the Realtime
Signals Extension option.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_553_13"></a>Issue 7</h4>

<blockquote>
<p>The <i>sigqueue</i>() function is moved from the Realtime Signals Extension option to the Base.</p>

<p>POSIX.1-2008, Technical Corrigendum 2, XSH/TC2-2008/0332 [844] is applied.</p>
</blockquote>

<div class="box"><em>End of informative text.</em></div>

<hr>
<p>&nbsp;</p>

<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX &reg; is a registered Trademark of The Open Group.<br>
POSIX &reg; is a registered Trademark of The IEEE.<br>
Copyright &copy; 2001-2018 IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>

<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/sigpending.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/sigsetjmp.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>

<hr align="LEFT" width="100%">
</div>
</body>
</html>

