<!-- Copyright 2001-2013 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group's rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2013 The Open Group, All Rights Reserved -->
<title>pthread_mutex_getprioceiling</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/pthread_mutex_destroy.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/pthread_mutex_lock.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>

<hr align="LEFT" width="100%">
</div>

<script type="text/javascript" language="JavaScript" src="../jscript/codes.js">
</script>

<basefont size="3"> 

<center><font size="2">The Open Group Base Specifications Issue 7, 2018 edition<br>
IEEE Std 1003.1-2017 (Revision of IEEE Std 1003.1-2008)<br>
Copyright &copy; 2001-2018 IEEE and The Open Group</font></center>

<hr size="2" noshade>
<a name="top"></a> <a name="pthread_mutex_getprioceiling"></a> <a name="tag_16_438"></a><!-- pthread_mutex_getprioceiling -->
 

<h4 class="mansect"><a name="tag_16_438_01"></a>NAME</h4>

<blockquote>pthread_mutex_getprioceiling, pthread_mutex_setprioceiling - get and set the priority ceiling of a mutex (<b>REALTIME
THREADS</b>)</blockquote>

<h4 class="mansect"><a name="tag_16_438_02"></a>SYNOPSIS</h4>

<blockquote class="synopsis">
<div class="box"><code><tt><sup>[<a href="javascript:open_code('RPP')">RPP|TPP</a>]</sup> <img src="../images/opt-start.gif" alt=
"[Option Start]" border="0"> #include &lt;<a href="../basedefs/pthread.h.html">pthread.h</a>&gt;<br>
<br>
 int pthread_mutex_getprioceiling(const pthread_mutex_t *restrict</tt> <i>mutex</i><tt>,<br>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int *restrict</tt> <i>prioceiling</i><tt>);<br>
 int pthread_mutex_setprioceiling(pthread_mutex_t *restrict</tt> <i>mutex</i><tt>,<br>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int</tt> <i>prioceiling</i><tt>, int *restrict</tt> <i>old_ceiling</i><tt>); <img src=
"../images/opt-end.gif" alt="[Option End]" border="0"></tt></code></div>

<tt><br>
</tt></blockquote>

<h4 class="mansect"><a name="tag_16_438_03"></a>DESCRIPTION</h4>

<blockquote>
<p>The <i>pthread_mutex_getprioceiling</i>() function shall return the current priority ceiling of the mutex.</p>

<p>The <i>pthread_mutex_setprioceiling</i>() function shall attempt to lock the mutex as if by a call to <a href=
"../functions/pthread_mutex_lock.html"><i>pthread_mutex_lock</i>()</a>, except that the process of locking the mutex need not
adhere to the priority protect protocol. On acquiring the mutex it shall change the mutex's priority ceiling and then release the
mutex as if by a call to <a href="../functions/pthread_mutex_unlock.html"><i>pthread_mutex_unlock</i>()</a>. When the change is
successful, the previous value of the priority ceiling shall be returned in <i>old_ceiling</i>.</p>

<p>If the <i>pthread_mutex_setprioceiling</i>() function fails, the mutex priority ceiling shall not be changed.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_438_04"></a>RETURN VALUE</h4>

<blockquote>
<p>If successful, the <i>pthread_mutex_getprioceiling</i>() and <i>pthread_mutex_setprioceiling</i>() functions shall return zero;
otherwise, an error number shall be returned to indicate the error.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_438_05"></a>ERRORS</h4>

<blockquote>
<p>These functions shall fail if:</p>

<dl compact>
<dt>[EINVAL]</dt>

<dd>The protocol attribute of <i>mutex</i> is PTHREAD_PRIO_NONE.</dd>

<dt>[EPERM]</dt>

<dd>The implementation requires appropriate privileges to perform the operation and the caller does not have appropriate
privileges.</dd>
</dl>

<p>The <i>pthread_mutex_setprioceiling</i>() function shall fail if:</p>

<dl compact>
<dt>[EAGAIN]</dt>

<dd>The mutex could not be acquired because the maximum number of recursive locks for <i>mutex</i> has been exceeded.</dd>

<dt>[EDEADLK]</dt>

<dd>The mutex type is PTHREAD_MUTEX_ERRORCHECK and the current thread already owns the mutex.</dd>

<dt>[EINVAL]</dt>

<dd>The mutex was created with the protocol attribute having the value PTHREAD_PRIO_PROTECT and the calling thread's priority is
higher than the mutex's current priority ceiling, and the implementation adheres to the priority protect protocol in the process of
locking the mutex.</dd>

<dt>[ENOTRECOVERABLE]</dt>

<dd>
The mutex is a robust mutex and the state protected by the mutex is not recoverable.</dd>

<dt>[EOWNERDEAD]</dt>

<dd>
The mutex is a robust mutex and the process containing the previous owning thread terminated while holding the mutex lock. The
mutex lock shall be acquired by the calling thread and it is up to the new owner to make the state consistent (see <a href=
"../functions/pthread_mutex_lock.html#"><i>pthread_mutex_lock</i></a>).</dd>
</dl>

<p>The <i>pthread_mutex_setprioceiling</i>() function may fail if:</p>

<dl compact>
<dt>[EDEADLK]</dt>

<dd>A deadlock condition was detected.</dd>

<dt>[EINVAL]</dt>

<dd>The priority requested by <i>prioceiling</i> is out of range.</dd>

<dt>[EOWNERDEAD]</dt>

<dd>
The mutex is a robust mutex and the previous owning thread terminated while holding the mutex lock. The mutex lock shall be
acquired by the calling thread and it is up to the new owner to make the state consistent (see <a href=
"../functions/pthread_mutex_lock.html#"><i>pthread_mutex_lock</i></a>).</dd>
</dl>

<p>These functions shall not return an error code of [EINTR].</p>
</blockquote>

<hr>
<div class="box"><em>The following sections are informative.</em></div>

<h4 class="mansect"><a name="tag_16_438_06"></a>EXAMPLES</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_438_07"></a>APPLICATION USAGE</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_438_08"></a>RATIONALE</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_438_09"></a>FUTURE DIRECTIONS</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_438_10"></a>SEE ALSO</h4>

<blockquote>
<p><a href="../functions/pthread_mutex_destroy.html#"><i>pthread_mutex_destroy</i></a>, <a href=
"../functions/pthread_mutex_lock.html#"><i>pthread_mutex_lock</i></a>, <a href=
"../functions/pthread_mutex_timedlock.html#"><i>pthread_mutex_timedlock</i></a></p>

<p>XBD <a href="../basedefs/pthread.h.html"><i>&lt;pthread.h&gt;</i></a></p>
</blockquote>

<h4 class="mansect"><a name="tag_16_438_11"></a>CHANGE HISTORY</h4>

<blockquote>
<p>First released in Issue 5. Included for alignment with the POSIX Threads Extension.</p>

<p>Marked as part of the Realtime Threads Feature Group.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_438_12"></a>Issue 6</h4>

<blockquote>
<p>The <i>pthread_mutex_getprioceiling</i>() and <i>pthread_mutex_setprioceiling</i>() functions are marked as part of the Threads
and Thread Priority Protection options.</p>

<p>The [ENOSYS] error conditions have been removed.</p>

<p>The <a href="../functions/pthread_mutex_timedlock.html"><i>pthread_mutex_timedlock</i>()</a> function is added to the SEE ALSO
section for alignment with IEEE&nbsp;Std&nbsp;1003.1d-1999.</p>

<p>The <b>restrict</b> keyword is added to the <i>pthread_mutex_getprioceiling</i>() and <i>pthread_mutex_setprioceiling</i>()
prototypes for alignment with the ISO/IEC&nbsp;9899:1999 standard.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_438_13"></a>Issue 7</h4>

<blockquote>
<p>SD5-XSH-ERN-39 is applied.</p>

<p>Austin Group Interpretation 1003.1-2001 #052 is applied, adding [EDEADLK] as a ``may fail'' error.</p>

<p>SD5-XSH-ERN-158 is applied, updating the ERRORS section to include a ``shall fail'' error case for when the protocol attribute
of <i>mutex</i> is PTHREAD_PRIO_NONE.</p>

<p>The <i>pthread_mutex_getprioceiling</i>() and <i>pthread_mutex_setprioceiling</i>() functions are moved from the Threads option
to require support of either the Robust Mutex Priority Protection option or the Non-Robust Mutex Priority Protection option.<br>
</p>

<p>The DESCRIPTION and ERRORS sections are updated to account properly for all of the various mutex types.</p>
</blockquote>

<div class="box"><em>End of informative text.</em></div>

<hr>
<p>&nbsp;</p>

<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX &reg; is a registered Trademark of The Open Group.<br>
POSIX &reg; is a registered Trademark of The IEEE.<br>
Copyright &copy; 2001-2018 IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>

<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/pthread_mutex_destroy.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/pthread_mutex_lock.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>

<hr align="LEFT" width="100%">
</div>
</body>
</html>

