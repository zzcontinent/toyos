<!-- Copyright 2001-2013 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group's rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2013 The Open Group, All Rights Reserved -->
<title>pthread_attr_getstack</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/pthread_attr_getscope.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/pthread_attr_getstacksize.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>

<hr align="LEFT" width="100%">
</div>

<script type="text/javascript" language="JavaScript" src="../jscript/codes.js">
</script>

<basefont size="3"> 

<center><font size="2">The Open Group Base Specifications Issue 7, 2018 edition<br>
IEEE Std 1003.1-2017 (Revision of IEEE Std 1003.1-2008)<br>
Copyright &copy; 2001-2018 IEEE and The Open Group</font></center>

<hr size="2" noshade>
<a name="top"></a> <a name="pthread_attr_getstack"></a> <a name="tag_16_410"></a><!-- pthread_attr_getstack -->
 

<h4 class="mansect"><a name="tag_16_410_01"></a>NAME</h4>

<blockquote>pthread_attr_getstack, pthread_attr_setstack - get and set stack attributes</blockquote>

<h4 class="mansect"><a name="tag_16_410_02"></a>SYNOPSIS</h4>

<blockquote class="synopsis">
<div class="box"><code><tt><sup>[<a href="javascript:open_code('TSA TSS')">TSA TSS</a>]</sup> <img src="../images/opt-start.gif" alt=
"[Option Start]" border="0"> #include &lt;<a href="../basedefs/pthread.h.html">pthread.h</a>&gt;<br>
<br>
 int pthread_attr_getstack(const pthread_attr_t *restrict</tt> <i>attr</i><tt>,<br>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; void **restrict</tt> <i>stackaddr</i><tt>, size_t *restrict</tt> <i>stacksize</i><tt>);<br>
 int pthread_attr_setstack(pthread_attr_t *</tt><i>attr</i><tt>, void *</tt><i>stackaddr</i><tt>,<br>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; size_t</tt> <i>stacksize</i><tt>); <img src="../images/opt-end.gif" alt="[Option End]"
border="0"></tt></code></div>

<tt><br>
</tt></blockquote>

<h4 class="mansect"><a name="tag_16_410_03"></a>DESCRIPTION</h4>

<blockquote>
<p>The <i>pthread_attr_getstack</i>() and <i>pthread_attr_setstack</i>() functions, respectively, shall get and set the thread
creation stack attributes <i>stackaddr</i> and <i>stacksize</i> in the <i>attr</i> object.</p>

<p>The stack attributes specify the area of storage to be used for the created thread's stack. The base (lowest addressable byte)
of the storage shall be <i>stackaddr</i>, and the size of the storage shall be <i>stacksize</i> bytes. The <i>stacksize</i> shall
be at least {PTHREAD_STACK_MIN}. The <i>pthread_attr_setstack</i>() function may fail with [EINVAL] if <i>stackaddr</i> does not
meet implementation-defined alignment requirements. All pages within the stack described by <i>stackaddr</i> and <i>stacksize</i>
shall be both readable and writable by the thread.</p>

<p>If the <i>pthread_attr_getstack</i>() function is called before the <i>stackaddr</i> attribute has been set, the behavior is
unspecified.</p>

<p>The behavior is undefined if the value specified by the <i>attr</i> argument to <i>pthread_attr_getstack</i>() or
<i>pthread_attr_setstack</i>() does not refer to an initialized thread attributes object.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_410_04"></a>RETURN VALUE</h4>

<blockquote>
<p>Upon successful completion, these functions shall return a value of 0; otherwise, an error number shall be returned to indicate
the error.</p>

<p>The <i>pthread_attr_getstack</i>() function shall store the stack attribute values in <i>stackaddr</i> and <i>stacksize</i> if
successful.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_410_05"></a>ERRORS</h4>

<blockquote>
<p>The <i>pthread_attr_setstack</i>() function shall fail if:</p>

<dl compact>
<dt>[EINVAL]</dt>

<dd>The value of <i>stacksize</i> is less than {PTHREAD_STACK_MIN} or exceeds an implementation-defined limit.</dd>
</dl>

<p>The <i>pthread_attr_setstack</i>() function may fail if:</p>

<dl compact>
<dt>[EINVAL]</dt>

<dd>The value of <i>stackaddr</i> does not have proper alignment to be used as a stack, or ((<b>char *</b>) <i>stackaddr</i> +
<i>stacksize</i>) lacks proper alignment.</dd>

<dt>[EACCES]</dt>

<dd>The stack page(s) described by <i>stackaddr</i> and <i>stacksize</i> are not both readable and writable by the thread.</dd>
</dl>

<p>These functions shall not return an error code of [EINTR].</p>
</blockquote>

<hr>
<div class="box"><em>The following sections are informative.</em></div>

<h4 class="mansect"><a name="tag_16_410_06"></a>EXAMPLES</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_410_07"></a>APPLICATION USAGE</h4>

<blockquote>
<p>These functions are appropriate for use by applications in an environment where the stack for a thread must be placed in some
particular region of memory.</p>

<p>While it might seem that an application could detect stack overflow by providing a protected page outside the specified stack
region, this cannot be done portably. Implementations are free to place the thread's initial stack pointer anywhere within the
specified region to accommodate the machine's stack pointer behavior and allocation requirements. Furthermore, on some
architectures, such as the IA-64, &quot;overflow&quot; might mean that two separate stack pointers allocated within the region will overlap
somewhere in the middle of the region.</p>

<p>After a successful call to <i>pthread_attr_setstack</i>(), the storage area specified by the <i>stackaddr</i> parameter is under
the control of the implementation, as described in <a href="../functions/V2_chap02.html#tag_15_09_08"><i>Use of Application-Managed
Thread Stacks</i></a>.</p>

<p>The specification of the <i>stackaddr</i> attribute presents several ambiguities that make portable use of these functions
impossible. For example, the standard allows implementations to impose arbitrary alignment requirements on <i>stackaddr</i>.
Applications cannot assume that a buffer obtained from <a href="../functions/malloc.html"><i>malloc</i>()</a> is suitably aligned.
Note that although the <i>stacksize</i> value passed to <i>pthread_attr_setstack</i>() must satisfy alignment requirements, the
same is not true for <a href="../functions/pthread_attr_setstacksize.html"><i>pthread_attr_setstacksize</i>()</a> where the
implementation must increase the specified size if necessary to achieve the proper alignment.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_410_08"></a>RATIONALE</h4>

<blockquote>
<p>If an implementation detects that the value specified by the <i>attr</i> argument to <i>pthread_attr_getstack</i>() or
<i>pthread_attr_setstack</i>() does not refer to an initialized thread attributes object, it is recommended that the function
should fail and report an [EINVAL] error.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_410_09"></a>FUTURE DIRECTIONS</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_410_10"></a>SEE ALSO</h4>

<blockquote>
<p><a href="../functions/pthread_attr_destroy.html#"><i>pthread_attr_destroy</i></a>, <a href=
"../functions/pthread_attr_getdetachstate.html#"><i>pthread_attr_getdetachstate</i></a>, <a href=
"../functions/pthread_attr_getstacksize.html#"><i>pthread_attr_getstacksize</i></a>, <a href=
"../functions/pthread_create.html#"><i>pthread_create</i></a></p>

<p>XBD <a href="../basedefs/limits.h.html"><i>&lt;limits.h&gt;</i></a>, <a href=
"../basedefs/pthread.h.html"><i>&lt;pthread.h&gt;</i></a></p>
</blockquote>

<h4 class="mansect"><a name="tag_16_410_11"></a>CHANGE HISTORY</h4>

<blockquote>
<p>First released in Issue 6. Developed as part of the XSI option and brought into the BASE by IEEE PASC Interpretation 1003.1
#101.</p>

<p>IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;2-2004, item XSH/TC2/D6/83 is applied, updating the APPLICATION USAGE section to refer
to <a href="../functions/V2_chap02.html#tag_15_09_08"><i>Use of Application-Managed Thread Stacks</i></a>.</p>

<p>IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;2-2004, item XSH/TC/D6/84 is applied, updating the ERRORS section to include optional
errors for the case when <i>attr</i> refers to an uninitialized thread attribute object.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_410_12"></a>Issue 7</h4>

<blockquote>
<p>SD5-XSH-ERN-66 is applied, correcting the use of <i>attr</i> in the [EINVAL] error condition.</p>

<p>Austin Group Interpretation 1003.1-2001 #057 is applied, clarifying the behavior if the function is called before the
<i>stackaddr</i> attribute is set.</p>

<p>SD5-XSH-ERN-157 is applied, updating the APPLICATION USAGE section.</p>

<p>The description of the <i>stackaddr</i> attribute is updated in the DESCRIPTION and APPLICATION USAGE sections.</p>

<p>The [EINVAL] error for an uninitialized thread attributes object is removed; this condition results in undefined behavior.</p>
</blockquote>

<div class="box"><em>End of informative text.</em></div>

<hr>
<p>&nbsp;</p>

<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX &reg; is a registered Trademark of The Open Group.<br>
POSIX &reg; is a registered Trademark of The IEEE.<br>
Copyright &copy; 2001-2018 IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>

<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/pthread_attr_getscope.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/pthread_attr_getstacksize.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>

<hr align="LEFT" width="100%">
</div>
</body>
</html>

