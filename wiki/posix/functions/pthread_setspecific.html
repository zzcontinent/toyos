<!-- Copyright 2001-2013 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group's rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2013 The Open Group, All Rights Reserved -->
<title>pthread_getspecific</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/pthread_getschedparam.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/pthread_join.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>

<hr align="LEFT" width="100%">
</div>


<basefont size="3"> 

<center><font size="2">The Open Group Base Specifications Issue 7, 2018 edition<br>
IEEE Std 1003.1-2017 (Revision of IEEE Std 1003.1-2008)<br>
Copyright &copy; 2001-2018 IEEE and The Open Group</font></center>

<hr size="2" noshade>
<a name="top"></a> <a name="pthread_getspecific"></a> <a name="tag_16_431"></a><!-- pthread_getspecific -->
 

<h4 class="mansect"><a name="tag_16_431_01"></a>NAME</h4>

<blockquote>pthread_getspecific, pthread_setspecific - thread-specific data management</blockquote>

<h4 class="mansect"><a name="tag_16_431_02"></a>SYNOPSIS</h4>

<blockquote class="synopsis">
<p><code><tt>#include &lt;<a href="../basedefs/pthread.h.html">pthread.h</a>&gt;<br>
<br>
 void *pthread_getspecific(pthread_key_t</tt> <i>key</i><tt>);<br>
 int pthread_setspecific(pthread_key_t</tt> <i>key</i><tt>, const void *</tt><i>value</i><tt>);<br>
</tt></code></p>
</blockquote>

<h4 class="mansect"><a name="tag_16_431_03"></a>DESCRIPTION</h4>

<blockquote>
<p>The <i>pthread_getspecific</i>() function shall return the value currently bound to the specified <i>key</i> on behalf of the
calling thread.</p>

<p>The <i>pthread_setspecific</i>() function shall associate a thread-specific <i>value</i> with a <i>key</i> obtained via a
previous call to <a href="../functions/pthread_key_create.html"><i>pthread_key_create</i>()</a>. Different threads may bind
different values to the same key. These values are typically pointers to blocks of dynamically allocated memory that have been
reserved for use by the calling thread.</p>

<p>The effect of calling <i>pthread_getspecific</i>() or <i>pthread_setspecific</i>() with a <i>key</i> value not obtained from <a
href="../functions/pthread_key_create.html"><i>pthread_key_create</i>()</a> or after <i>key</i> has been deleted with <a href=
"../functions/pthread_key_delete.html"><i>pthread_key_delete</i>()</a> is undefined.</p>

<p>Both <i>pthread_getspecific</i>() and <i>pthread_setspecific</i>() may be called from a thread-specific data destructor
function. A call to <i>pthread_getspecific</i>() for the thread-specific data key being destroyed shall return the value NULL,
unless the value is changed (after the destructor starts) by a call to <i>pthread_setspecific</i>(). Calling
<i>pthread_setspecific</i>() from a thread-specific data destructor routine may result either in lost storage (after at least
PTHREAD_DESTRUCTOR_ITERATIONS attempts at destruction) or in an infinite loop.</p>

<p>Both functions may be implemented as macros.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_431_04"></a>RETURN VALUE</h4>

<blockquote>
<p>The <i>pthread_getspecific</i>() function shall return the thread-specific data value associated with the given <i>key</i>. If
no thread-specific data value is associated with <i>key</i>, then the value NULL shall be returned.</p>

<p>If successful, the <i>pthread_setspecific</i>() function shall return zero; otherwise, an error number shall be returned to
indicate the error.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_431_05"></a>ERRORS</h4>

<blockquote>
<p>No errors are returned from <i>pthread_getspecific</i>().</p>

<p>The <i>pthread_setspecific</i>() function shall fail if:</p>

<dl compact>
<dt>[ENOMEM]</dt>

<dd>Insufficient memory exists to associate the non-NULL value with the key.</dd>
</dl>

<p>The <i>pthread_setspecific</i>() function shall not return an error code of [EINTR].</p>
</blockquote>

<hr>
<div class="box"><em>The following sections are informative.</em></div>

<h4 class="mansect"><a name="tag_16_431_06"></a>EXAMPLES</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_431_07"></a>APPLICATION USAGE</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_431_08"></a>RATIONALE</h4>

<blockquote>
<p>Performance and ease-of-use of <i>pthread_getspecific</i>() are critical for functions that rely on maintaining state in
thread-specific data. Since no errors are required to be detected by it, and since the only error that could be detected is the use
of an invalid key, the function to <i>pthread_getspecific</i>() has been designed to favor speed and simplicity over error
reporting.</p>

<p>If an implementation detects that the value specified by the <i>key</i> argument to <i>pthread_setspecific</i>() does not refer
to a a key value obtained from <a href="../functions/pthread_key_create.html"><i>pthread_key_create</i>()</a> or refers to a key
that has been deleted with <a href="../functions/pthread_key_delete.html"><i>pthread_key_delete</i>()</a>, it is recommended that
the function should fail and report an [EINVAL] error.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_431_09"></a>FUTURE DIRECTIONS</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_431_10"></a>SEE ALSO</h4>

<blockquote>
<p><a href="../functions/pthread_key_create.html#"><i>pthread_key_create</i></a></p>

<p>XBD <a href="../basedefs/pthread.h.html"><i>&lt;pthread.h&gt;</i></a></p>
</blockquote>

<h4 class="mansect"><a name="tag_16_431_11"></a>CHANGE HISTORY</h4>

<blockquote>
<p>First released in Issue 5. Included for alignment with the POSIX Threads Extension.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_431_12"></a>Issue 6</h4>

<blockquote>
<p>The <i>pthread_getspecific</i>() and <i>pthread_setspecific</i>() functions are marked as part of the Threads option.</p>

<p>IEEE PASC Interpretation 1003.1c #3 (Part 6) is applied, updating the DESCRIPTION.</p>

<p>IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;2-2004, item XSH/TC2/D6/96 is applied, updating the ERRORS section so that the [ENOMEM]
error case is changed from ``to associate the value with the key'' to ``to associate the non-NULL value with the key''.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_431_13"></a>Issue 7</h4>

<blockquote>
<p>Austin Group Interpretation 1003.1-2001 #063 is applied, updating the ERRORS section.</p>

<p>The <i>pthread_getspecific</i>() and <i>pthread_setspecific</i>() functions are moved from the Threads option to the Base.</p>

<p>The [EINVAL] error for a key value not obtained from <a href=
"../functions/pthread_key_create.html"><i>pthread_key_create</i>()</a> or a key deleted with <a href=
"../functions/pthread_key_delete.html"><i>pthread_key_delete</i>()</a> is removed; this condition results in undefined
behavior.</p>
</blockquote>

<div class="box"><em>End of informative text.</em></div>

<hr>
<p>&nbsp;</p>

<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX &reg; is a registered Trademark of The Open Group.<br>
POSIX &reg; is a registered Trademark of The IEEE.<br>
Copyright &copy; 2001-2018 IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>

<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/pthread_getschedparam.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/pthread_join.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>

<hr align="LEFT" width="100%">
</div>
</body>
</html>

