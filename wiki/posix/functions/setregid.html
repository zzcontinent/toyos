<!-- Copyright 2001-2013 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group's rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2013 The Open Group, All Rights Reserved -->
<title>setregid</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/setpgrp.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/setreuid.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>

<hr align="LEFT" width="100%">
</div>

<script type="text/javascript" language="JavaScript" src="../jscript/codes.js">
</script>

<basefont size="3"> 

<center><font size="2">The Open Group Base Specifications Issue 7, 2018 edition<br>
IEEE Std 1003.1-2017 (Revision of IEEE Std 1003.1-2008)<br>
Copyright &copy; 2001-2018 IEEE and The Open Group</font></center>

<hr size="2" noshade>
<a name="top"></a> <a name="setregid"></a> <a name="tag_16_527"></a><!-- setregid -->
 

<h4 class="mansect"><a name="tag_16_527_01"></a>NAME</h4>

<blockquote>setregid - set real and effective group IDs</blockquote>

<h4 class="mansect"><a name="tag_16_527_02"></a>SYNOPSIS</h4>

<blockquote class="synopsis">
<div class="box"><code><tt><sup>[<a href="javascript:open_code('XSI')">XSI</a>]</sup> <img src="../images/opt-start.gif" alt=
"[Option Start]" border="0"> #include &lt;<a href="../basedefs/unistd.h.html">unistd.h</a>&gt;<br>
<br>
 int setregid(gid_t</tt> <i>rgid</i><tt>, gid_t</tt> <i>egid</i><tt>); <img src="../images/opt-end.gif" alt="[Option End]" border=
"0"></tt></code></div>

<tt><br>
</tt></blockquote>

<h4 class="mansect"><a name="tag_16_527_03"></a>DESCRIPTION</h4>

<blockquote>
<p>The <i>setregid</i>() function shall set the real and effective group IDs of the calling process.</p>

<p>If <i>rgid</i> is -1, the real group ID shall not be changed; if <i>egid</i> is -1, the effective group ID shall not be
changed.</p>

<p>The real and effective group IDs may be set to different values in the same call.</p>

<p>Only a process with appropriate privileges can set the real group ID and the effective group ID to any valid value.</p>

<p>A non-privileged process can set either the real group ID to the saved set-group-ID from one of the <i><a href=
"../functions/exec.html">exec</a></i> family of functions, or the effective group ID to the saved set-group-ID or the real group
ID.</p>

<p>If the real group ID is being set (<i>rgid</i> is not -1), or the effective group ID is being set to a value not equal to the
real group ID, then the saved set-group-ID of the current process shall be set equal to the new effective group ID.</p>

<p>Any supplementary group IDs of the calling process remain unchanged.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_527_04"></a>RETURN VALUE</h4>

<blockquote>
<p>Upon successful completion, 0 shall be returned. Otherwise, -1 shall be returned and <i>errno</i> set to indicate the error, and
neither of the group IDs are changed.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_527_05"></a>ERRORS</h4>

<blockquote>
<p>The <i>setregid</i>() function shall fail if:</p>

<dl compact>
<dt>[EINVAL]</dt>

<dd>The value of the <i>rgid</i> or <i>egid</i> argument is invalid or out-of-range.</dd>

<dt>[EPERM]</dt>

<dd>The process does not have appropriate privileges and a change other than changing the real group ID to the saved set-group-ID,
or changing the effective group ID to the real group ID or the saved set-group-ID, was requested.</dd>
</dl>
</blockquote>

<hr>
<div class="box"><em>The following sections are informative.</em></div>

<h4 class="mansect"><a name="tag_16_527_06"></a>EXAMPLES</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_527_07"></a>APPLICATION USAGE</h4>

<blockquote>
<p>If a non-privileged set-group-ID process sets its effective group ID to its real group ID, it can only set its effective group
ID back to the previous value if <i>rgid</i> was -1 in the <i>setregid</i>() call, since the saved-group-ID is not changed in that
case. If <i>rgid</i> was equal to the real group ID in the <i>setregid</i>() call, then the saved set-group-ID will also have been
changed to the real user ID.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_527_08"></a>RATIONALE</h4>

<blockquote>
<p>Earlier versions of this standard did not specify whether the saved set-group-ID was affected by <i>setregid</i>() calls. This
version specifies common existing practice that constitutes an important security feature. The ability to set both the effective
group ID and saved set-group-ID to be the same as the real group ID means that any security weakness in code that is executed after
that point cannot result in malicious code being executed with the previous effective group ID. Privileged applications could
already do this using just <a href="../functions/setgid.html"><i>setgid</i>()</a>, but for non-privileged applications the only
standard method available is to use this feature of <i>setregid</i>().</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_527_09"></a>FUTURE DIRECTIONS</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_527_10"></a>SEE ALSO</h4>

<blockquote>
<p><a href="../functions/exec.html#tag_16_111"><i><a href="../functions/exec.html">exec</a></i></a>, <a href=
"../functions/getegid.html#"><i>getegid</i></a>, <a href="../functions/geteuid.html#"><i>geteuid</i></a>, <a href=
"../functions/getgid.html#"><i>getgid</i></a>, <a href="../functions/getuid.html#"><i>getuid</i></a>, <a href=
"../functions/setegid.html#"><i>setegid</i></a>, <a href="../functions/seteuid.html#"><i>seteuid</i></a>, <a href=
"../functions/setgid.html#"><i>setgid</i></a>, <a href="../functions/setreuid.html#"><i>setreuid</i></a>, <a href=
"../functions/setuid.html#"><i>setuid</i></a></p>

<p>XBD <a href="../basedefs/unistd.h.html"><i>&lt;unistd.h&gt;</i></a></p>
</blockquote>

<h4 class="mansect"><a name="tag_16_527_11"></a>CHANGE HISTORY</h4>

<blockquote>
<p>First released in Issue 4, Version 2.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_527_12"></a>Issue 5</h4>

<blockquote>
<p>Moved from X/OPEN UNIX extension to BASE.</p>

<p>The DESCRIPTION is updated to indicate that the saved set-group-ID can be set by any of the <i><a href=
"../functions/exec.html">exec</a></i> family of functions, not just <a href="../functions/execve.html"><i>execve</i>()</a>.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_527_13"></a>Issue 7</h4>

<blockquote>
<p>SD5-XSH-ERN-177 is applied, adding the ability to set both the effective group ID and saved set-group-ID to be the same as the
real group ID.</p>
</blockquote>

<div class="box"><em>End of informative text.</em></div>

<hr>
<p>&nbsp;</p>

<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX &reg; is a registered Trademark of The Open Group.<br>
POSIX &reg; is a registered Trademark of The IEEE.<br>
Copyright &copy; 2001-2018 IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>

<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/setpgrp.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/setreuid.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>

<hr align="LEFT" width="100%">
</div>
</body>
</html>

