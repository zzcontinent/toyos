<!-- Copyright 2001-2013 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group's rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2013 The Open Group, All Rights Reserved -->
<title>waitid</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/wait.html" accesskey="P">&lt;&lt;&lt; Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/wcrtomb.html" accesskey="N">Next &gt;&gt;&gt;</a></td>
</tr>
</table>

<hr align="LEFT" width="100%">
</div>

<script type="text/javascript" language="JavaScript" src="../jscript/codes.js">
</script>

<basefont size="3"> 

<center><font size="2">The Open Group Base Specifications Issue 7, 2018 edition<br>
IEEE Std 1003.1-2017 (Revision of IEEE Std 1003.1-2008)<br>
Copyright &copy; 2001-2018 IEEE and The Open Group</font></center>

<hr size="2" noshade>
<a name="top"></a> <a name="waitid"></a> <a name="tag_16_646"></a><!-- waitid -->
 

<h4 class="mansect"><a name="tag_16_646_01"></a>NAME</h4>

<blockquote>waitid - wait for a child process to change state</blockquote>

<h4 class="mansect"><a name="tag_16_646_02"></a>SYNOPSIS</h4>

<blockquote class="synopsis">
<p><code><tt>#include &lt;<a href="../basedefs/sys_wait.h.html">sys/wait.h</a>&gt;<br>
<br>
 int waitid(idtype_t</tt> <i>idtype</i><tt>, id_t</tt> <i>id</i><tt>, siginfo_t *</tt><i>infop</i><tt>, int</tt>
<i>options</i><tt>);<br>
</tt></code></p>
</blockquote>

<h4 class="mansect"><a name="tag_16_646_03"></a>DESCRIPTION</h4>

<blockquote>
<p>The <i>waitid</i>() function shall obtain status information (see <a href="../functions/V2_chap02.html#tag_15_13"><i>Status
Information</i></a>) pertaining to termination, stop, and/or continue events in one of the caller's child processes.</p>

<p>The <i>waitid</i>() function shall cause the calling thread to become blocked until an error occurs or status information
becomes available to the calling thread that satisfies all of the following properties (``matching status information&quot;):</p>

<ul>
<li>
<p>The status information is from one of the child processes in the set of child processes specified by the <i>idtype</i> and
<i>id</i> arguments.</p>
</li>

<li>
<p>The state change in the status information matches one of the state change flags set in the <i>options</i> argument.</p>
</li>
</ul>

<p>If matching status information is available prior to the call to <i>waitid</i>(), return shall be immediate. If matching status
information is available for two or more child processes, the order in which their status is reported is unspecified.</p>

<p>As described in <a href="../functions/V2_chap02.html#tag_15_13"><i>Status Information</i></a>, the <i>waitid</i>() function
consumes the status information it obtains unless the WNOWAIT flag is set in the <i>options</i> argument.</p>

<p>The behavior when multiple threads are blocked in <a href="../functions/wait.html"><i>wait</i>()</a>, <i>waitid</i>(), or <a
href="../functions/waitpid.html"><i>waitpid</i>()</a> is described in <a href="../functions/V2_chap02.html#tag_15_13"><i>Status
Information</i></a>.</p>

<p>The <i>waitid</i>() function shall record the obtained status information in the structure pointed to by <i>infop</i>. The
fields of the structure pointed to by <i>infop</i> shall be filled in as described under &quot;Pointer to a Function&quot; in <a href=
"../functions/V2_chap02.html#tag_15_04_03"><i>Signal Actions</i></a>.</p>

<p>The <i>idtype</i> and <i>id</i> arguments are used to specify which children <i>waitid</i>() waits for.</p>

<p>If <i>idtype</i> is P_PID, <i>waitid</i>() shall wait for the child with a process ID equal to (<b>pid_t</b>)<i>id</i>.</p>

<p>If <i>idtype</i> is P_PGID, <i>waitid</i>() shall wait for any child with a process group ID equal to
(<b>pid_t</b>)<i>id</i>.</p>

<p>If <i>idtype</i> is P_ALL, <i>waitid</i>() shall wait for any children and <i>id</i> is ignored.</p>

<p>The <i>options</i> argument is used to specify which state changes <i>waitid</i>() shall wait for. It is formed by OR'ing
together the following flags:</p>

<dl compact>
<dt>WCONTINUED</dt>

<dd>Status shall be returned for any continued child process whose status either has not been reported since it continued from a
job control stop or has been reported only by calls to <i>waitid</i>() with the WNOWAIT flag set.</dd>

<dt>WEXITED</dt>

<dd>Wait for processes that have exited.</dd>

<dt>WNOHANG</dt>

<dd>Do not hang if no status is available; return immediately.</dd>

<dt>WNOWAIT</dt>

<dd>Keep the process whose status is returned in <i>infop</i> in a waitable state. This shall not affect the state of the process;
the process may be waited for again after this call completes.</dd>

<dt>WSTOPPED</dt>

<dd>Status shall be returned for any child that has stopped upon receipt of a signal, and whose status either has not been reported
since it stopped or has been reported only by calls to <i>waitid</i>() with the WNOWAIT flag set.</dd>
</dl>

<p>Applications shall specify at least one of the flags WEXITED, WSTOPPED, or WCONTINUED to be OR'ed in with the <i>options</i>
argument.</p>

<p>The application shall ensure that the <i>infop</i> argument points to a <b>siginfo_t</b> structure. If <i>waitid</i>() returns
because a child process was found that satisfied the conditions indicated by the arguments <i>idtype</i> and <i>options</i>, then
the structure pointed to by <i>infop</i> shall be filled in by the system with the status of the process; the <i>si_signo</i>
member shall be set equal to SIGCHLD. If <i>waitid</i>() returns because WNOHANG was specified and status is not available for any
process specified by <i>idtype</i> and <i>id</i>, then the <i>si_signo</i> and <i>si_pid</i> members of the structure pointed to by
<i>infop</i> shall be set to zero and the values of other members of the structure are unspecified.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_646_04"></a>RETURN VALUE</h4>

<blockquote>
<p>If WNOHANG was specified and status is not available for any process specified by <i>idtype</i> and <i>id</i>, 0 shall be
returned. If <i>waitid</i>() returns due to the change of state of one of its children, 0 shall be returned. Otherwise, -1 shall be
returned and <i>errno</i> set to indicate the error.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_646_05"></a>ERRORS</h4>

<blockquote>
<p>The <i>waitid</i>() function shall fail if:</p>

<dl compact>
<dt>[ECHILD]</dt>

<dd>The calling process has no existing unwaited-for child processes.</dd>

<dt>[EINTR]</dt>

<dd>The <i>waitid</i>() function was interrupted by a signal.</dd>

<dt>[EINVAL]</dt>

<dd>An invalid value was specified for <i>options</i>, or <i>idtype</i> and <i>id</i> specify an invalid set of processes.</dd>
</dl>
</blockquote>

<hr>
<div class="box"><em>The following sections are informative.</em></div>

<h4 class="mansect"><a name="tag_16_646_06"></a>EXAMPLES</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_646_07"></a>APPLICATION USAGE</h4>

<blockquote>
<p>Calls to <i>waitid</i>() with <i>idtype</i> equal to P_ALL will collect information about any child process. This may result in
interactions with other interfaces that may be waiting for their own children (such as by use of <a href=
"../functions/system.html"><i>system</i>()</a>). For this reason it is recommended that portable applications not use
<i>waitid</i>() with idtype of P_ALL. See also APPLICATION USAGE for <a href="../functions/wait.html"><i>wait</i>()</a>.</p>

<p><sup>[<a href="javascript:open_code('XSI')">XSI</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
As specified in <a href="../functions/_Exit.html#tag_16_01_03_01"><i>Consequences of Process Termination</i></a>, if the calling
process has SA_NOCLDWAIT set or has SIGCHLD set to SIG_IGN, then the termination of a child process will not cause status
information to become available to a thread blocked in <a href="../functions/wait.html"><i>wait</i>()</a>, <i>waitid</i>(), or <a
href="../functions/waitpid.html"><i>waitpid</i>()</a>. Thus, a thread blocked in one of the wait functions will remain blocked
unless some other condition causes the thread to resume execution (such as an [ECHILD] failure due to no remaining children in the
set of waited-for children). <img src="../images/opt-end.gif" alt="[Option End]" border="0"></p>
</blockquote>

<h4 class="mansect"><a name="tag_16_646_08"></a>RATIONALE</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_646_09"></a>FUTURE DIRECTIONS</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_646_10"></a>SEE ALSO</h4>

<blockquote>
<p><a href="../functions/V2_chap02.html#tag_15_04_03"><i>Signal Actions</i></a>, <a href=
"../functions/V2_chap02.html#tag_15_13"><i>Status Information</i></a>, <a href="../functions/exec.html#tag_16_111"><i><a href=
"../functions/exec.html">exec</a></i></a>, <a href="../functions/exit.html#tag_16_112"><i>exit</i></a>, <a href=
"../functions/wait.html#tag_16_645"><i>wait</i></a></p>

<p>XBD <a href="../basedefs/signal.h.html"><i>&lt;signal.h&gt;</i></a>, <a href=
"../basedefs/sys_wait.h.html"><i>&lt;sys/wait.h&gt;</i></a></p>
</blockquote>

<h4 class="mansect"><a name="tag_16_646_11"></a>CHANGE HISTORY</h4>

<blockquote>
<p>First released in Issue 4, Version 2.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_646_12"></a>Issue 5</h4>

<blockquote>
<p>Moved from X/OPEN UNIX extension to BASE.</p>

<p>The DESCRIPTION is updated for alignment with the POSIX Threads Extension.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_646_13"></a>Issue 6</h4>

<blockquote>
<p>The normative text is updated to avoid use of the term &quot;must&quot; for application requirements.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_646_14"></a>Issue 7</h4>

<blockquote>
<p>Austin Group Interpretation 1003.1-2001 #060 is applied, updating the DESCRIPTION.</p>

<p>The <i>waitid</i>() function is moved from the XSI option to the Base.</p>

<p>APPLICATION USAGE is added, recommending that the <i>waitid</i>() function not be used with <i>idtype</i> equal to P_ALL.</p>

<p>The description of the WNOHANG flag is updated.</p>

<p>POSIX.1-2008, Technical Corrigendum 1, XSH/TC1-2008/0711 [154], XSH/TC1-2008/0712 [154], and XSH/TC1-2008/0713 [153] are
applied.</p>

<p>POSIX.1-2008, Technical Corrigendum 2, XSH/TC2-2008/0387 [690] is applied.</p>
</blockquote>

<div class="box"><em>End of informative text.</em></div>

<hr>
<p>&nbsp;</p>

<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX &reg; is a registered Trademark of The Open Group.<br>
POSIX &reg; is a registered Trademark of The IEEE.<br>
Copyright &copy; 2001-2018 IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>

<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/wait.html" accesskey="P">&lt;&lt;&lt; Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/wcrtomb.html" accesskey="N">Next &gt;&gt;&gt;</a></td>
</tr>
</table>

<hr align="LEFT" width="100%">
</div>
</body>
</html>

