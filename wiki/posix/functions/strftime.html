<!-- Copyright 2001-2013 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group's rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2013 The Open Group, All Rights Reserved -->
<title>strftime</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/strfmon.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/strlen.html" accesskey="N">Next &gt;&gt;&gt;</a></td>
</tr>
</table>

<hr align="LEFT" width="100%">
</div>

<script type="text/javascript" language="JavaScript" src="../jscript/codes.js">
</script>

<basefont size="3"> 

<center><font size="2">The Open Group Base Specifications Issue 7, 2018 edition<br>
IEEE Std 1003.1-2017 (Revision of IEEE Std 1003.1-2008)<br>
Copyright &copy; 2001-2018 IEEE and The Open Group</font></center>

<hr size="2" noshade>
<a name="top"></a> <a name="strftime"></a> <a name="tag_16_576"></a><!-- strftime -->
 

<h4 class="mansect"><a name="tag_16_576_01"></a>NAME</h4>

<blockquote>strftime, strftime_l - convert date and time to a string</blockquote>

<h4 class="mansect"><a name="tag_16_576_02"></a>SYNOPSIS</h4>

<blockquote class="synopsis">
<p><code><tt>#include &lt;<a href="../basedefs/time.h.html">time.h</a>&gt;<br>
<br>
 size_t strftime(char *restrict</tt> <i>s</i><tt>, size_t</tt> <i>maxsize</i><tt>,<br>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; const char *restrict</tt> <i>format</i><tt>, const struct tm *restrict</tt>
<i>timeptr</i><tt>);<br>
</tt></code></p>

<div class="box"><code><tt><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt=
"[Option Start]" border="0"> size_t strftime_l(char *restrict</tt> <i>s</i><tt>, size_t</tt> <i>maxsize</i><tt>,<br>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; const char *restrict</tt> <i>format</i><tt>, const struct tm *restrict</tt>
<i>timeptr</i><tt>,<br>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; locale_t</tt> <i>locale</i><tt>); <img src="../images/opt-end.gif" alt="[Option End]" border=
"0"></tt></code></div>

<tt><br>
</tt></blockquote>

<h4 class="mansect"><a name="tag_16_576_03"></a>DESCRIPTION</h4>

<blockquote>
<p>For <i>strftime</i>(): <sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt=
"[Option Start]" border="0"> &nbsp;The functionality described on this reference page is aligned with the ISO&nbsp;C standard. Any
conflict between the requirements described here and the ISO&nbsp;C standard is unintentional. This volume of POSIX.1-2017 defers
to the ISO&nbsp;C standard. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></p>

<p>The <i>strftime</i>() function shall place bytes into the array pointed to by <i>s</i> as controlled by the string pointed to by
<i>format</i>. The format is a character string, beginning and ending in its initial shift state, if any. The format string
consists of zero or more conversion specifications and ordinary characters.</p>

<p>Each conversion specification is introduced by the <tt>'%'</tt> character after which the following appear in sequence:</p>

<ul>
<li>
<p><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> An
optional flag:</p>

<dl compact>
<dt><tt>0</tt></dt>

<dd>The zero character ( <tt>'0'</tt> ), which specifies that the character used as the padding character is <tt>'0'</tt>,</dd>

<dt><tt>+</tt></dt>

<dd>The &lt;plus-sign&gt; character ( <tt>'+'</tt> ), which specifies that the character used as the padding character is
<tt>'0'</tt>, and that if and only if the field being produced consumes more than four bytes to represent a year (for <tt>%F</tt>
, <tt>%G</tt>, or <tt>%Y</tt> ) or more than two bytes to represent the year divided by 100 (for <tt>%C</tt> ) then a leading
&lt;plus-sign&gt; character shall be included if the year being processed is greater than or equal to zero or a leading
&lt;hyphen-minus&gt; character ( <tt>'-'</tt> ) shall be included if the year is less than zero.</dd>
</dl>

<p>The default padding character is unspecified.</p>
</li>

<li>
<p>An optional minimum field width. If the converted value, including any leading <tt>'+'</tt> or <tt>'-'</tt> sign, has fewer
bytes than the minimum field width and the padding character is not the NUL character, the output shall be padded on the left
(after any leading <tt>'+'</tt> or <tt>'-'</tt> sign) with the padding character. <img src="../images/opt-end.gif" alt=
"[Option End]" border="0"></p>
</li>

<li>
<p>An optional <tt>E</tt> or <tt>O</tt> modifier.</p>
</li>

<li>
<p>A terminating conversion specifier character that indicates the type of conversion to be applied.</p>
</li>
</ul>

<p><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> The
results are unspecified if more than one flag character is specified, a flag character is specified without a minimum field width;
a minimum field width is specified without a flag character; a modifier is specified with a flag or with a minimum field width; or
if a minimum field width is specified for any conversion specifier other than <tt>C</tt>, <tt>F</tt>, <tt>G</tt>, or <tt>Y</tt>
. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></p>

<p>All ordinary characters (including the terminating NUL character) are copied unchanged into the array. If copying takes place
between objects that overlap, the behavior is undefined. No more than maxsize bytes are placed into the array. Each conversion
specifier is replaced by appropriate characters as described in the following list. The appropriate characters are determined using
the <i>LC_TIME</i> category of the current locale and by the values of zero or more members of the broken-down time structure
pointed to by <i>timeptr</i>, as specified in brackets in the description. If any of the specified values are outside the normal
range, the characters stored are unspecified.</p>

<p><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> The
<i>strftime_l</i>() function shall be equivalent to the <i>strftime</i>() function, except that the locale data used is from the
locale represented by <i>locale</i>.</p>

<p>Local timezone information is used as though <i>strftime</i>() called <a href="../functions/tzset.html"><i>tzset</i>()</a>. <img
src="../images/opt-end.gif" alt="[Option End]" border="0"></p>

<p>The following conversion specifiers shall be supported:</p>

<dl compact>
<dt><tt>a</tt></dt>

<dd>Replaced by the locale's abbreviated weekday name. [ <i>tm_wday</i>]</dd>

<dt><tt>A</tt></dt>

<dd>Replaced by the locale's full weekday name. [ <i>tm_wday</i>]</dd>

<dt><tt>b</tt></dt>

<dd>Replaced by the locale's abbreviated month name. [ <i>tm_mon</i>]</dd>

<dt><tt>B</tt></dt>

<dd>Replaced by the locale's full month name. [ <i>tm_mon</i>]</dd>

<dt><tt>c</tt></dt>

<dd>Replaced by the locale's appropriate date and time representation. (See the Base Definitions volume of POSIX.1-2017, <a href=
"../basedefs/time.h.html"><i>&lt;time.h&gt;</i></a>.)</dd>

<dt><tt>C</tt></dt>

<dd>Replaced by the year divided by 100 and truncated to an integer, as a decimal number. [ <i>tm_year</i>] 

<p>If a minimum field width is not specified, the number of characters placed into the array pointed to by <i>s</i> will be the
number of digits in the year divided by 100 or two, whichever is greater. <sup>[<a href="javascript:open_code('CX')">CX</a>]</sup>
<img src="../images/opt-start.gif" alt="[Option Start]" border="0"> &nbsp;If a minimum field width is specified, the number of
characters placed into the array pointed to by <i>s</i> will be the number of digits in the year divided by 100 or the minimum
field width, whichever is greater. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></p>
</dd>

<dt><tt>d</tt></dt>

<dd>Replaced by the day of the month as a decimal number [01,31]. [ <i>tm_mday</i>]</dd>

<dt><tt>D</tt></dt>

<dd>Equivalent to <tt>%m</tt> / <tt>%d</tt> / <tt>%y</tt>. [ <i>tm_mon</i>, <i>tm_mday</i>, <i>tm_year</i>]</dd>

<dt><tt>e</tt></dt>

<dd>Replaced by the day of the month as a decimal number [1,31]; a single digit is preceded by a space. [ <i>tm_mday</i>]</dd>

<dt><tt>F</tt></dt>

<dd><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> Equivalent to %+4<img src="../images/opt-end.gif" alt="[Option End]"
border="0">Y-%m-%d if no flag and no minimum field width are specified. [ <i>tm_year</i>, <i>tm_mon</i>, <i>tm_mday</i>] 

<p><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> If
a minimum field width of <i>x</i> is specified, the year shall be output as if by the <tt>Y</tt> specifier (described below) with
whatever flag was given and a minimum field width of <i>x</i>-6. If <i>x</i> is less than 6, the behavior shall be as if <i>x</i>
equalled 6.</p>

<p>If the minimum field width is specified to be 10, and the year is four digits long, then the output string produced will match
the ISO&nbsp;8601:2000 standard subclause 4.1.2.2 complete representation, extended format date representation of a specific day.
If a + flag is specified, a minimum field width of <i>x</i> is specified, and <i>x</i>-7 bytes are sufficient to hold the digits of
the year (not including any needed sign character), then the output will match the ISO&nbsp;8601:2000 standard subclause 4.1.2.4
complete representation, expanded format date representation of a specific day. <img src="../images/opt-end.gif" alt="[Option End]"
border="0"></p>
</dd>

<dt><tt>g</tt></dt>

<dd>Replaced by the last 2 digits of the week-based year (see below) as a decimal number [00,99]. [ <i>tm_year</i>, <i>tm_wday</i>,
<i>tm_yday</i>]</dd>

<dt><tt>G</tt></dt>

<dd>Replaced by the week-based year (see below) as a decimal number (for example, 1977). [ <i>tm_year</i>, <i>tm_wday</i>,
<i>tm_yday</i>] 

<p><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> If
a minimum field width is specified, the number of characters placed into the array pointed to by <i>s</i> will be the number of
digits and leading sign characters (if any) in the year, or the minimum field width, whichever is greater. <img src=
"../images/opt-end.gif" alt="[Option End]" border="0"></p>
</dd>

<dt><tt>h</tt></dt>

<dd>Equivalent to <tt>%b</tt>. [ <i>tm_mon</i>]</dd>

<dt><tt>H</tt></dt>

<dd>Replaced by the hour (24-hour clock) as a decimal number [00,23]. [ <i>tm_hour</i>]</dd>

<dt><tt>I</tt></dt>

<dd>Replaced by the hour (12-hour clock) as a decimal number [01,12]. [ <i>tm_hour</i>]</dd>

<dt><tt>j</tt></dt>

<dd>Replaced by the day of the year as a decimal number [001,366]. [ <i>tm_yday</i>]</dd>

<dt><tt>m</tt></dt>

<dd>Replaced by the month as a decimal number [01,12]. [ <i>tm_mon</i>]</dd>

<dt><tt>M</tt></dt>

<dd>Replaced by the minute as a decimal number [00,59]. [ <i>tm_min</i>]</dd>

<dt><tt>n</tt></dt>

<dd>Replaced by a &lt;newline&gt;.</dd>

<dt><tt>p</tt></dt>

<dd>Replaced by the locale's equivalent of either a.m. or p.m. [ <i>tm_hour</i>]</dd>

<dt><tt>r</tt></dt>

<dd>Replaced by the time in a.m. and p.m. notation; <sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src=
"../images/opt-start.gif" alt="[Option Start]" border="0"> &nbsp;in the POSIX locale this shall be equivalent to <tt>%I</tt> :
<tt>%M</tt> : <tt>%S</tt> <tt>%p</tt>. <img src="../images/opt-end.gif" alt="[Option End]" border="0"> [ <i>tm_hour</i>,
<i>tm_min</i>, <i>tm_sec</i>]</dd>

<dt><tt>R</tt></dt>

<dd>Replaced by the time in 24-hour notation ( <tt>%H</tt> : <tt>%M</tt> ). [ <i>tm_hour</i>, <i>tm_min</i>]</dd>

<dt><tt>S</tt></dt>

<dd>Replaced by the second as a decimal number [00,60]. [ <i>tm_sec</i>]</dd>

<dt><tt>t</tt></dt>

<dd>Replaced by a &lt;tab&gt;.</dd>

<dt><tt>T</tt></dt>

<dd>Replaced by the time ( <tt>%H</tt> : <tt>%M</tt> : <tt>%S</tt> ). [ <i>tm_hour</i>, <i>tm_min</i>, <i>tm_sec</i>]</dd>

<dt><tt>u</tt></dt>

<dd>Replaced by the weekday as a decimal number [1,7], with 1 representing Monday. [ <i>tm_wday</i>]</dd>

<dt><tt>U</tt></dt>

<dd>Replaced by the week number of the year as a decimal number [00,53]. The first Sunday of January is the first day of week 1;
days in the new year before this are in week 0. [ <i>tm_year</i>, <i>tm_wday</i>, <i>tm_yday</i>]</dd>

<dt><tt>V</tt></dt>

<dd>Replaced by the week number of the year (Monday as the first day of the week) as a decimal number [01,53]. If the week
containing 1 January has four or more days in the new year, then it is considered week 1. Otherwise, it is the last week of the
previous year, and the next week is week 1. Both January 4th and the first Thursday of January are always in week 1. [
<i>tm_year</i>, <i>tm_wday</i>, <i>tm_yday</i>]</dd>

<dt><tt>w</tt></dt>

<dd>Replaced by the weekday as a decimal number [0,6], with 0 representing Sunday. [ <i>tm_wday</i>]</dd>

<dt><tt>W</tt></dt>

<dd>Replaced by the week number of the year as a decimal number [00,53]. The first Monday of January is the first day of week 1;
days in the new year before this are in week 0. [ <i>tm_year</i>, <i>tm_wday</i>, <i>tm_yday</i>]</dd>

<dt><tt>x</tt></dt>

<dd>Replaced by the locale's appropriate date representation. (See the Base Definitions volume of POSIX.1-2017, <a href=
"../basedefs/time.h.html"><i>&lt;time.h&gt;</i></a>.)</dd>

<dt><tt>X</tt></dt>

<dd>Replaced by the locale's appropriate time representation. (See the Base Definitions volume of POSIX.1-2017, <a href=
"../basedefs/time.h.html"><i>&lt;time.h&gt;</i></a>.)</dd>

<dt><tt>y</tt></dt>

<dd>Replaced by the last two digits of the year as a decimal number [00,99]. [ <i>tm_year</i>]</dd>

<dt><tt>Y</tt></dt>

<dd>Replaced by the year as a decimal number (for example, 1997). [ <i>tm_year</i>] 

<p><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> If
a minimum field width is specified, the number of characters placed into the array pointed to by <i>s</i> will be the number of
digits and leading sign characters (if any) in the year, or the minimum field width, whichever is greater. <img src=
"../images/opt-end.gif" alt="[Option End]" border="0"></p>
</dd>

<dt><tt>z</tt></dt>

<dd>Replaced by the offset from UTC in the ISO&nbsp;8601:2000 standard format ( <tt>+hhmm</tt> or <tt>-hhmm</tt> ), or by no
characters if no timezone is determinable. For example, <tt>"-0430"</tt> means 4 hours 30 minutes behind UTC (west of Greenwich).
<sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
&nbsp;If <i>tm_isdst</i> is zero, the standard time offset is used. If <i>tm_isdst</i> is greater than zero, the daylight savings
time offset is used. If <i>tm_isdst</i> is negative, no characters are returned. <img src="../images/opt-end.gif" alt=
"[Option End]" border="0"> [ <i>tm_isdst</i>]</dd>

<dt><tt>Z</tt></dt>

<dd>Replaced by the timezone name or abbreviation, or by no bytes if no timezone information exists. [ <i>tm_isdst</i>]</dd>

<dt><tt>%</tt></dt>

<dd>Replaced by <tt>%</tt>.</dd>
</dl>

<p>If a conversion specification does not correspond to any of the above, the behavior is undefined.</p>

<p><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> If
a <b>struct tm</b> broken-down time structure is created by <a href="../functions/localtime.html"><i>localtime</i>()</a> or <a
href="../functions/localtime_r.html"><i>localtime_r</i>()</a>, or modified by <a href=
"../functions/mktime.html"><i>mktime</i>()</a>, and the value of <i>TZ</i> is subsequently modified, the results of the <tt>%Z</tt>
and <tt>%z</tt> <i>strftime</i>() conversion specifiers are undefined, when <i>strftime</i>() is called with such a broken-down
time structure.</p>

<p>If a <b>struct tm</b> broken-down time structure is created or modified by <a href=
"../functions/gmtime.html"><i>gmtime</i>()</a> or <a href="../functions/gmtime_r.html"><i>gmtime_r</i>()</a>, it is unspecified
whether the result of the <tt>%Z</tt> and <tt>%z</tt> conversion specifiers shall refer to UTC or the current local timezone, when
<i>strftime</i>() is called with such a broken-down time structure. <img src="../images/opt-end.gif" alt="[Option End]" border=
"0"></p>

<h5><a name="tag_16_576_03_01"></a>Modified Conversion Specifiers</h5>

<p>Some conversion specifiers can be modified by the <tt>E</tt> or <tt>O</tt> modifier characters to indicate that an alternative
format or specification should be used rather than the one normally used by the unmodified conversion specifier. If the alternative
format or specification does not exist for the current locale (see ERA in XBD <a href=
"../basedefs/V1_chap07.html#tag_07_03_05"><i>LC_TIME</i></a>), the behavior shall be as if the unmodified conversion specification
were used.</p>

<dl compact>
<dt><tt>%Ec</tt></dt>

<dd>Replaced by the locale's alternative appropriate date and time representation.</dd>

<dt><tt>%EC</tt></dt>

<dd>Replaced by the name of the base year (period) in the locale's alternative representation.</dd>

<dt><tt>%Ex</tt></dt>

<dd>Replaced by the locale's alternative date representation.</dd>

<dt><tt>%EX</tt></dt>

<dd>Replaced by the locale's alternative time representation.</dd>

<dt><tt>%Ey</tt></dt>

<dd>Replaced by the offset from <tt>%EC</tt> (year only) in the locale's alternative representation.</dd>

<dt><tt>%EY</tt></dt>

<dd>Replaced by the full alternative year representation.</dd>

<dt><tt>%Od</tt></dt>

<dd>Replaced by the day of the month, using the locale's alternative numeric symbols, filled as needed with leading zeros if there
is any alternative symbol for zero; otherwise, with leading &lt;space&gt; characters.</dd>

<dt><tt>%Oe</tt></dt>

<dd>Replaced by the day of the month, using the locale's alternative numeric symbols, filled as needed with leading &lt;space&gt;
characters.</dd>

<dt><tt>%OH</tt></dt>

<dd>Replaced by the hour (24-hour clock) using the locale's alternative numeric symbols.</dd>

<dt><tt>%OI</tt></dt>

<dd>Replaced by the hour (12-hour clock) using the locale's alternative numeric symbols.</dd>

<dt><tt>%Om</tt></dt>

<dd>Replaced by the month using the locale's alternative numeric symbols.</dd>

<dt><tt>%OM</tt></dt>

<dd>Replaced by the minutes using the locale's alternative numeric symbols.</dd>

<dt><tt>%OS</tt></dt>

<dd>Replaced by the seconds using the locale's alternative numeric symbols.</dd>

<dt><tt>%Ou</tt></dt>

<dd>Replaced by the weekday as a number in the locale's alternative representation (Monday=1).</dd>

<dt><tt>%OU</tt></dt>

<dd>Replaced by the week number of the year (Sunday as the first day of the week, rules corresponding to <tt>%U</tt> ) using the
locale's alternative numeric symbols.</dd>

<dt><tt>%OV</tt></dt>

<dd>Replaced by the week number of the year (Monday as the first day of the week, rules corresponding to <tt>%V</tt> ) using the
locale's alternative numeric symbols.</dd>

<dt><tt>%Ow</tt></dt>

<dd>Replaced by the number of the weekday (Sunday=0) using the locale's alternative numeric symbols.</dd>

<dt><tt>%OW</tt></dt>

<dd>Replaced by the week number of the year (Monday as the first day of the week) using the locale's alternative numeric
symbols.</dd>

<dt><tt>%Oy</tt></dt>

<dd>Replaced by the year (offset from <tt>%C</tt> ) using the locale's alternative numeric symbols.</dd>
</dl>

<p><tt>%g</tt>, <tt>%G</tt>, and <tt>%V</tt> give values according to the ISO&nbsp;8601:2000 standard week-based year. In this
system, weeks begin on a Monday and week 1 of the year is the week that includes January 4th, which is also the week that includes
the first Thursday of the year, and is also the first week that contains at least four days in the year. If the first Monday of
January is the 2nd, 3rd, or 4th, the preceding days are part of the last week of the preceding year; thus, for Saturday 2nd January
1999, <tt>%G</tt> is replaced by 1998 and <tt>%V</tt> is replaced by 53. If December 29th, 30th, or 31st is a Monday, it and any
following days are part of week 1 of the following year. Thus, for Tuesday 30th December 1997, <tt>%G</tt> is replaced by 1998 and
<tt>%V</tt> is replaced by 01.</p>

<p>If a conversion specifier is not one of the above, the behavior is undefined.</p>

<p><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> The
behavior is undefined if the <i>locale</i> argument to <i>strftime_l</i>() is the special locale object LC_GLOBAL_LOCALE or is not
a valid locale object handle. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></p>
</blockquote>

<h4 class="mansect"><a name="tag_16_576_04"></a>RETURN VALUE</h4>

<blockquote>
<p>If the total number of resulting bytes including the terminating null byte is not more than <i>maxsize</i>, these functions
shall return the number of bytes placed into the array pointed to by <i>s</i>, not including the terminating NUL character.
Otherwise, 0 shall be returned and the contents of the array are unspecified.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_576_05"></a>ERRORS</h4>

<blockquote>
<p>No errors are defined.</p>
</blockquote>

<hr>
<div class="box"><em>The following sections are informative.</em></div>

<h4 class="mansect"><a name="tag_16_576_06"></a>EXAMPLES</h4>

<blockquote>
<h5><a name="tag_16_576_06_01"></a>Getting a Localized Date String</h5>

<p>The following example first sets the locale to the user's default. The locale information will be used in the <a href=
"../functions/nl_langinfo.html"><i>nl_langinfo</i>()</a> and <i>strftime</i>() functions. The <a href=
"../functions/nl_langinfo.html"><i>nl_langinfo</i>()</a> function returns the localized date string which specifies how the date is
laid out. The <i>strftime</i>() function takes this information and, using the <b>tm</b> structure for values, places the date and
time information into <i>datestring</i>.</p>

<pre>
<tt>#include &lt;time.h&gt;
#include &lt;locale.h&gt;
#include &lt;langinfo.h&gt;
...
struct tm *tm;
char datestring[256];
...
setlocale (LC_ALL, "");
...
strftime (datestring, sizeof(datestring), nl_langinfo (D_T_FMT), tm);
...
</tt>
</pre>
</blockquote>

<h4 class="mansect"><a name="tag_16_576_07"></a>APPLICATION USAGE</h4>

<blockquote>
<p>The range of values for <tt>%S</tt> is [00,60] rather than [00,59] to allow for the occasional leap second.</p>

<p>Some of the conversion specifications are duplicates of others. They are included for compatibility with <i>nl_cxtime</i>() and
<i>nl_ascxtime</i>(), which were published in Issue 2.</p>

<p>The <tt>%C</tt>, <tt>%F</tt>, <tt>%G</tt>, and <tt>%Y</tt> format specifiers in <i>strftime</i>() always print full values,
but the <a href="../functions/strptime.html"><i>strptime</i>()</a> <tt>%C</tt>, <tt>%F</tt>, and <tt>%Y</tt> format specifiers
only scan two digits (assumed to be the first two digits of a four-digit year) for <tt>%C</tt> and four digits (assumed to be the
entire (four-digit) year) for <tt>%F</tt> and <tt>%Y</tt>. This mimics the behavior of <a href=
"../functions/printf.html"><i>printf</i>()</a> and <a href="../functions/scanf.html"><i>scanf</i>()</a>; that is:</p>

<pre>
<tt>printf("%2d", x = 1000);
</tt>
</pre>

<p>prints <tt>"1000"</tt>, but:</p>

<pre>
<tt>scanf(%2d", &amp;x);
</tt>
</pre>

<p>when given <tt>"1000"</tt> as input will only store 10 in <i>x</i>). Applications using extended ranges of years must be sure
that the number of digits specified for scanning years with <a href="../functions/strptime.html"><i>strptime</i>()</a> matches the
number of digits that will actually be present in the input stream. Historic implementations of the <tt>%Y</tt> conversion
specification (with no flags and no minimum field width) produced different output formats. Some always produced at least four
digits (with 0 fill for years from 0 through 999) while others only produced the number of digits present in the year (with no fill
and no padding). These two forms can be produced with the <tt>'0'</tt> flag and a minimum field width options using the conversions
specifications <tt>%04Y</tt> and <tt>%01Y</tt>, respectively.</p>

<p>In the past, the C and POSIX standards specified that <tt>%F</tt> produced an ISO&nbsp;8601:2000 standard date format, but
didn't specify which one. For years in the range [0001,9999], POSIX.1-2017 requires that the output produced match the
ISO&nbsp;8601:2000 standard complete representation extended format (YYYY-MM-DD) and for years outside of this range produce output
that matches the ISO&nbsp;8601:2000 standard expanded representation extended format
(&lt;+/-&gt;&lt;Underline&gt;Y&lt;/Underline&gt;YYYY-MM-DD). To fully meet ISO&nbsp;8601:2000 standard requirements, the producer
and consumer must agree on a date format that has a specific number of bytes reserved to hold the characters used to represent the
years that is sufficiently large to hold all values that will be shared. For example, the <tt>%+13F</tt> conversion specification
will produce output matching the format <tt>"&lt;+/-&gt;YYYYYY-MM-DD"</tt> (a leading <tt>'+'</tt> or <tt>'-'</tt> sign; a
six-digit, 0-filled year; a <tt>'-'</tt>; a two-digit, leading 0-filled month; another <tt>'-'</tt>; and the two-digit, leading
0-filled day within the month).</p>

<p>Note that if the year being printed is greater than 9999, the resulting string from the unadorned <tt>%F</tt> conversion
specifications will not conform to the ISO&nbsp;8601:2000 standard extended format, complete representation for a date and will
instead be an extended format, expanded representation (presumably without the required agreement between the date's producer and
consumer).</p>

<p>In the C or POSIX locale, the <tt>E</tt> and <tt>O</tt> modifiers are ignored and the replacement strings for the following
specifiers are:</p>

<dl compact>
<dt><tt>%a</tt></dt>

<dd>The first three characters of <tt>%A</tt>.</dd>

<dt><tt>%A</tt></dt>

<dd>One of Sunday, Monday, ..., Saturday.</dd>

<dt><tt>%b</tt></dt>

<dd>The first three characters of <tt>%B</tt>.</dd>

<dt><tt>%B</tt></dt>

<dd>One of January, February, ..., December.</dd>

<dt><tt>%c</tt></dt>

<dd>Equivalent to <tt>%a</tt> <tt>%b</tt> <tt>%e</tt> <tt>%T</tt> <tt>%Y</tt>.</dd>

<dt><tt>%p</tt></dt>

<dd>One of AM or PM.</dd>

<dt><tt>%r</tt></dt>

<dd>Equivalent to <tt>%I</tt> : <tt>%M</tt> : <tt>%S</tt> <tt>%p</tt>.</dd>

<dt><tt>%x</tt></dt>

<dd>Equivalent to <tt>%m</tt> / <tt>%d</tt> / <tt>%y</tt>.</dd>

<dt><tt>%X</tt></dt>

<dd>Equivalent to <tt>%T</tt>.</dd>

<dt><tt>%Z</tt></dt>

<dd>Implementation-defined.</dd>
</dl>
</blockquote>

<h4 class="mansect"><a name="tag_16_576_08"></a>RATIONALE</h4>

<blockquote>
<p>The <tt>%Y</tt> conversion specification to <i>strftime</i>() was frequently assumed to be a four-digit year, but the ISO&nbsp;C
standard does not specify that <tt>%Y</tt> is restricted to any subset of allowed values from the <i>tm_year</i> field. Similarly,
the <tt>%C</tt> conversion specification was assumed to be a two-digit field and the first part of the output from the <tt>%F</tt>
conversion specification was assumed to be a four-digit field. With <i>tm_year</i> being a signed 32 or more-bit <b>int</b> and
with many current implementations supporting 64-bit <b>time_t</b> types in one or more programming environments, these assumptions
are clearly wrong.</p>

<p>POSIX.1-2017 now allows the format specifications <tt>%0xC</tt>, <tt>%0xF</tt>, <tt>%0xG</tt>, and <tt>%0xY</tt> (where
<tt>'x'</tt> is a string of decimal digits used to specify printing and scanning of a string of <i>x</i> decimal digits) with
leading zero fill characters. Allowing applications to set the field width enables them to agree on the number of digits to be
printed and scanned in the ISO&nbsp;8601:2000 standard expanded representation of a year (for <tt>%F</tt>, <tt>%G</tt>, and
<tt>%Y</tt> ) or all but the last two digits of the year (for <tt>%C</tt> ). This is based on a feature in some versions of GNU
<b>libc</b>'s <i>strftime</i>(). The GNU version allows specifying space, zero, or no-fill characters in <i>strftime</i>() format
strings, but does not allow any flags to be specified in <a href="../functions/strptime.html"><i>strptime</i>()</a> format strings.
These implementations also allow these flags to be specified for any numeric field. POSIX.1-2017 only requires the zero fill flag (
<tt>'0'</tt> ) and only requires that it be recognized when processing <tt>%C</tt>, <tt>%F</tt>, <tt>%G</tt>, and <tt>%Y</tt>
specifications when a minimum field width is also specified. The <tt>'0'</tt> flag is the only flag needed to produce and scan the
ISO&nbsp;8601:2000 standard year fields using the extended format forms. POSIX.1-2017 also allows applications to specify the same
flag and field width specifiers to be used in both <i>strftime</i>() and <a href="../functions/strptime.html"><i>strptime</i>()</a>
format strings for symmetry. Systems may provide other flag characters and may accept flags in conjunction with conversion
specifiers other than <tt>%C</tt>, <tt>%F</tt>, <tt>%G</tt>, and <tt>%Y</tt>; but portable applications cannot depend on such
extensions.</p>

<p>POSIX.1-2017 now also allows the format specifications <tt>%+xC</tt>, <tt>%+xF</tt>, <tt>%+xG</tt>, and <tt>%+xY</tt> (where
<tt>'x'</tt> is a string of decimal digits used to specify printing and scanning of a string of <tt>'x'</tt> decimal digits) with
leading zero fill characters and a leading <tt>'+'</tt> sign character if the year being converted is more than four digits or a
minimum field width is specified that allows room for more than four digits for the year. This allows date providers and consumers
to agree on a specific number of digits to represent a year as required by the ISO&nbsp;8601:2000 standard expanded representation
formats. The expanded representation formats all require the year to begin with a leading <tt>'+'</tt> or <tt>'-'</tt> sign. (All
of these specifiers can also provide a leading <tt>'-'</tt> sign for negative years. Since negative years and the year 0 don't fit
well with the Gregorian or Julian calendars, the normal ranges of dates start with year 1. The ISO&nbsp;C standard allows
<i>tm_year</i> to assume values corresponding to years before year 1, but the use of such years provided unspecified results.)</p>

<p>Some earlier version of this standard specified that applications wanting to use <a href=
"../functions/strptime.html"><i>strptime</i>()</a> to scan dates and times printed by <i>strftime</i>() should provide non-digit
characters between fields to separate years from months and days. It also supported <tt>%F</tt> to print and scan the
ISO&nbsp;8601:2000 standard extended format, complete representation date for years 1 through 9999 (i.e., YYYY-MM-DD). However,
many applications were written to print (using <i>strftime</i>()) and scan (using <a href=
"../functions/strptime.html"><i>strptime</i>()</a>) dates written using the basic format complete representation (four-digit years)
and truncated representation (two-digit years) specified by the ISO&nbsp;8601:2000 standard representation of dates and times which
do not have any separation characters between fields. The ISO&nbsp;8601:2000 standard also specifies basic format expanded
representation where the creator and consumer of these fields agree beforehand to represent years as leading zero-filled strings of
an agreed length of more than four digits to represent a year (again with no separation characters when year, month, and day are
all displayed). Applications producing and consuming expanded representations are encouraged to use the <tt>'+'</tt> flag and an
appropriate maximum field width to scan the year including the leading sign. Note that even without the <tt>'+'</tt> flag, years
less than zero may be represented with a leading &lt;hyphen-minus&gt; for <tt>%F</tt>, <tt>%G</tt>, and <tt>%Y</tt> conversion
specifications. Using negative years results in unspecified behavior.</p>

<p>If a format specification <tt>%+xF</tt> with the field width <i>x</i> greater than 11 is specified and the width is large enough
to display the full year, the output string produced will match the ISO&nbsp;8601:2000 standard subclause 4.1.2.4 expanded
representation, extended format date representation for a specific day. (For years in the range [1,99999], <tt>%+12F</tt> is
sufficient for an agreed five-digit year with a leading sign using the ISO&nbsp;8601:2000 standard expanded representation,
extended format for a specific day <tt>"&lt;+/-&gt;YYYYY-MM-DD"</tt>.) Note also that years less than 0 may produce a leading
&lt;hyphen-minus&gt; character ( <tt>'-'</tt> ) when using <tt>%Y</tt> or <tt>%C</tt> whether or not the <tt>'0'</tt> or
<tt>'+'</tt> flags are used.</p>

<p>The difference between the <tt>'0'</tt> flag and the <tt>'+'</tt> flag is whether the leading <tt>'+'</tt> character will be
provided for years &gt;9999 as required for the ISO&nbsp;8601:2000 standard extended representation format containing a year. For
example:</p>

<center>
<table border="1" cellpadding="3" align="center">
<tr valign="top">
<th align="center">
<p class="tent"><b>&nbsp;</b></p>
</th>
<th align="center">
<p class="tent"><b>&nbsp;</b></p>
</th>
<th align="center">
<p class="tent"><b><i>strftime</i>()</b></p>
</th>
<th align="center">
<p class="tent"><b><i>strptime</i>()</b></p>
</th>
</tr>

<tr valign="top">
<th align="center">
<p class="tent"><b>Year</b></p>
</th>
<th align="center">
<p class="tent"><b>Conversion Specification</b></p>
</th>
<th align="center">
<p class="tent"><b>Output</b></p>
</th>
<th align="center">
<p class="tent"><b>Scan Back</b></p>
</th>
</tr>

<tr valign="top">
<td align="left">
<p class="tent">1970</p>
</td>
<td align="left">
<p class="tent">%Y</p>
</td>
<td align="left">
<p class="tent">1970</p>
</td>
<td align="left">
<p class="tent">1970</p>
</td>
</tr>

<tr valign="top">
<td align="left">
<p class="tent">1970</p>
</td>
<td align="left">
<p class="tent">%+4Y</p>
</td>
<td align="left">
<p class="tent">1970</p>
</td>
<td align="left">
<p class="tent">1970</p>
</td>
</tr>

<tr valign="top">
<td align="left">
<p class="tent">27</p>
</td>
<td align="left">
<p class="tent">%Y</p>
</td>
<td align="left">
<p class="tent">27 or 0027</p>
</td>
<td align="left">
<p class="tent">27</p>
</td>
</tr>

<tr valign="top">
<td align="left">
<p class="tent">270</p>
</td>
<td align="left">
<p class="tent">%Y</p>
</td>
<td align="left">
<p class="tent">270 or 0270</p>
</td>
<td align="left">
<p class="tent">270</p>
</td>
</tr>

<tr valign="top">
<td align="left">
<p class="tent">270</p>
</td>
<td align="left">
<p class="tent">%+4Y</p>
</td>
<td align="left">
<p class="tent">0270</p>
</td>
<td align="left">
<p class="tent">270</p>
</td>
</tr>

<tr valign="top">
<td align="left">
<p class="tent">17</p>
</td>
<td align="left">
<p class="tent">%C%y</p>
</td>
<td align="left">
<p class="tent">0017</p>
</td>
<td align="left">
<p class="tent">17</p>
</td>
</tr>

<tr valign="top">
<td align="left">
<p class="tent">270</p>
</td>
<td align="left">
<p class="tent">%C%y</p>
</td>
<td align="left">
<p class="tent">0270</p>
</td>
<td align="left">
<p class="tent">270</p>
</td>
</tr>

<tr valign="top">
<td align="left">
<p class="tent">12345</p>
</td>
<td align="left">
<p class="tent">%Y</p>
</td>
<td align="left">
<p class="tent">12345</p>
</td>
<td align="left">
<p class="tent">1234*</p>
</td>
</tr>

<tr valign="top">
<td align="left">
<p class="tent">12345</p>
</td>
<td align="left">
<p class="tent">%+4Y</p>
</td>
<td align="left">
<p class="tent">+12345</p>
</td>
<td align="left">
<p class="tent">123*</p>
</td>
</tr>

<tr valign="top">
<td align="left">
<p class="tent">12345</p>
</td>
<td align="left">
<p class="tent">%05Y</p>
</td>
<td align="left">
<p class="tent">12345</p>
</td>
<td align="left">
<p class="tent">12345</p>
</td>
</tr>

<tr valign="top">
<td align="left">
<p class="tent">270</p>
</td>
<td align="left">
<p class="tent">%+5Y or %+3C%y</p>
</td>
<td align="left">
<p class="tent">+0270</p>
</td>
<td align="left">
<p class="tent">270</p>
</td>
</tr>

<tr valign="top">
<td align="left">
<p class="tent">12345</p>
</td>
<td align="left">
<p class="tent">%+5Y or %+3C%y</p>
</td>
<td align="left">
<p class="tent">+12345</p>
</td>
<td align="left">
<p class="tent">1234*</p>
</td>
</tr>

<tr valign="top">
<td align="left">
<p class="tent">12345</p>
</td>
<td align="left">
<p class="tent">%06Y or %04C%y</p>
</td>
<td align="left">
<p class="tent">012345</p>
</td>
<td align="left">
<p class="tent">12345</p>
</td>
</tr>

<tr valign="top">
<td align="left">
<p class="tent">12345</p>
</td>
<td align="left">
<p class="tent">%+6Y or %+4C%y</p>
</td>
<td align="left">
<p class="tent">+12345</p>
</td>
<td align="left">
<p class="tent">12345</p>
</td>
</tr>

<tr valign="top">
<td align="left">
<p class="tent">123456</p>
</td>
<td align="left">
<p class="tent">%08Y or %06C%y</p>
</td>
<td align="left">
<p class="tent">00123456</p>
</td>
<td align="left">
<p class="tent">123456</p>
</td>
</tr>

<tr valign="top">
<td align="left">
<p class="tent">123456</p>
</td>
<td align="left">
<p class="tent">%+8Y or %+6C%y</p>
</td>
<td align="left">
<p class="tent">+0123456</p>
</td>
<td align="left">
<p class="tent">123456</p>
</td>
</tr>
</table>
</center>

<p>In the cases above marked with a * in the <a href="../functions/strptime.html"><i>strptime</i>()</a> scan back field, the
implied or specified number of characters scanned by <a href="../functions/strptime.html"><i>strptime</i>()</a> was less than the
number of characters output by <i>strftime</i>() using the same format; so the remaining digits of the year were dropped when the
output date produced by <i>strftime</i>() was scanned back in by <a href="../functions/strptime.html"><i>strptime</i>()</a>.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_576_09"></a>FUTURE DIRECTIONS</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_576_10"></a>SEE ALSO</h4>

<blockquote>
<p><a href="../functions/asctime.html#"><i>asctime</i></a>, <a href="../functions/clock.html#"><i>clock</i></a>, <a href=
"../functions/ctime.html#"><i>ctime</i></a>, <a href="../functions/difftime.html#"><i>difftime</i></a>, <a href=
"../functions/getdate.html#"><i>getdate</i></a>, <a href="../functions/gmtime.html#"><i>gmtime</i></a>, <a href=
"../functions/localtime.html#"><i>localtime</i></a>, <a href="../functions/mktime.html#"><i>mktime</i></a>, <a href=
"../functions/strptime.html#"><i>strptime</i></a>, <a href="../functions/time.html#tag_16_613"><i>time</i></a>, <a href=
"../functions/tzset.html#"><i>tzset</i></a>, <a href="../functions/uselocale.html#"><i>uselocale</i></a>, <a href=
"../functions/utime.html#"><i>utime</i></a></p>

<p>XBD <a href="../basedefs/V1_chap07.html#tag_07_03_05"><i>LC_TIME</i></a>, <a href=
"../basedefs/time.h.html"><i>&lt;time.h&gt;</i></a></p>
</blockquote>

<h4 class="mansect"><a name="tag_16_576_11"></a>CHANGE HISTORY</h4>

<blockquote>
<p>First released in Issue 3.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_576_12"></a>Issue 5</h4>

<blockquote>
<p>The description of <tt>%OV</tt> is changed to be consistent with <tt>%V</tt> and defines Monday as the first day of the
week.</p>

<p>The description of <tt>%Oy</tt> is clarified.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_576_13"></a>Issue 6</h4>

<blockquote>
<p>Extensions beyond the ISO&nbsp;C standard are marked.</p>

<p>The Open Group Corrigendum U033/8 is applied. The <tt>%V</tt> conversion specifier is changed from &quot;Otherwise, it is week 53 of
the previous year, and the next week is week 1&quot; to &quot;Otherwise, it is the last week of the previous year, and the next week is
week 1&quot;.</p>

<p>The following new requirements on POSIX implementations derive from alignment with the Single UNIX Specification:</p>

<ul>
<li>
<p>The <tt>%C</tt>, <tt>%D</tt>, <tt>%e</tt>, <tt>%h</tt>, <tt>%n</tt>, <tt>%r</tt>, <tt>%R</tt>, <tt>%t</tt>, and
<tt>%T</tt> conversion specifiers are added.</p>
</li>

<li>
<p>The modified conversion specifiers are added for consistency with the ISO&nbsp;POSIX-2 standard <a href=
"../utilities/date.html"><i>date</i></a> utility.</p>
</li>
</ul>

<p>The following changes are made for alignment with the ISO/IEC&nbsp;9899:1999 standard:</p>

<ul>
<li>
<p>The <i>strftime</i>() prototype is updated.</p>
</li>

<li>
<p>The DESCRIPTION is extensively revised.</p>
</li>

<li>
<p>The <tt>%z</tt> conversion specifier is added.</p>
</li>
</ul>

<p>An example is added.</p>

<p>IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;1-2002, item XSH/TC1/D6/60 is applied.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_576_14"></a>Issue 7</h4>

<blockquote>
<p>Austin Group Interpretation 1003.1-2001 #163 is applied.</p>

<p>The <i>strftime_l</i>() function is added from The Open Group Technical Standard, 2006, Extended API Set Part 4.</p>

<p>POSIX.1-2008, Technical Corrigendum 1, XSH/TC1-2008/0605 [283], XSH/TC1-2008/0606 [283], XSH/TC1-2008/0607 [193], and
XSH/TC1-2008/0608 [193] are applied.</p>

<p>POSIX.1-2008, Technical Corrigendum 2, XSH/TC2-2008/0340 [584], XSH/TC2-2008/0341 [796], XSH/TC2-2008/0342 [584], and
XSH/TC2-2008/0343 [584] are applied.</p>
</blockquote>

<div class="box"><em>End of informative text.</em></div>

<hr>
<p>&nbsp;</p>

<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX &reg; is a registered Trademark of The Open Group.<br>
POSIX &reg; is a registered Trademark of The IEEE.<br>
Copyright &copy; 2001-2018 IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>

<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/strfmon.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/strlen.html" accesskey="N">Next &gt;&gt;&gt;</a></td>
</tr>
</table>

<hr align="LEFT" width="100%">
</div>
</body>
</html>

