<!-- Copyright 2001-2013 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group's rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2013 The Open Group, All Rights Reserved -->
<title>tcsetattr</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/tcsendbreak.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/tcsetpgrp.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>

<hr align="LEFT" width="100%">
</div>


<basefont size="3"> 

<center><font size="2">The Open Group Base Specifications Issue 7, 2018 edition<br>
IEEE Std 1003.1-2017 (Revision of IEEE Std 1003.1-2008)<br>
Copyright &copy; 2001-2018 IEEE and The Open Group</font></center>

<hr size="2" noshade>
<a name="top"></a> <a name="tcsetattr"></a> <a name="tag_16_607"></a><!-- tcsetattr -->
 

<h4 class="mansect"><a name="tag_16_607_01"></a>NAME</h4>

<blockquote>tcsetattr - set the parameters associated with the terminal</blockquote>

<h4 class="mansect"><a name="tag_16_607_02"></a>SYNOPSIS</h4>

<blockquote class="synopsis">
<p><code><tt>#include &lt;<a href="../basedefs/termios.h.html">termios.h</a>&gt;<br>
<br>
 int tcsetattr(int</tt> <i>fildes</i><tt>, int</tt> <i>optional_actions</i><tt>,<br>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; const struct termios *</tt><i>termios_p</i><tt>);<br>
</tt></code></p>
</blockquote>

<h4 class="mansect"><a name="tag_16_607_03"></a>DESCRIPTION</h4>

<blockquote>
<p>The <i>tcsetattr</i>() function shall set the parameters associated with the terminal referred to by the open file descriptor
<i>fildes</i> (an open file descriptor associated with a terminal) from the <b>termios</b> structure referenced by <i>termios_p</i>
as follows:</p>

<ul>
<li>
<p>If <i>optional_actions</i> is TCSANOW, the change shall occur immediately.</p>
</li>

<li>
<p>If <i>optional_actions</i> is TCSADRAIN, the change shall occur after all output written to <i>fildes</i> is transmitted. This
function should be used when changing parameters that affect output.</p>
</li>

<li>
<p>If <i>optional_actions</i> is TCSAFLUSH, the change shall occur after all output written to <i>fildes</i> is transmitted, and
all input so far received but not read shall be discarded before the change is made.</p>
</li>
</ul>

<p>If the output baud rate stored in the <b>termios</b> structure pointed to by <i>termios_p</i> is the zero baud rate, B0, the
modem control lines shall no longer be asserted. Normally, this shall disconnect the line.</p>

<p>If the input baud rate stored in the <b>termios</b> structure pointed to by <i>termios_p</i> is 0, the input baud rate given to
the hardware is the same as the output baud rate stored in the <b>termios</b> structure.</p>

<p>The <i>tcsetattr</i>() function shall return successfully if it was able to perform any of the requested actions, even if some
of the requested actions could not be performed. It shall set all the attributes that the implementation supports as requested and
leave all the attributes not supported by the implementation unchanged. If no part of the request can be honored, it shall return
-1 and set <i>errno</i> to [EINVAL]. If the input and output baud rates differ and are a combination that is not supported, neither
baud rate shall be changed. A subsequent call to <a href="../functions/tcgetattr.html"><i>tcgetattr</i>()</a> shall return the
actual state of the terminal device (reflecting both the changes made and not made in the previous <i>tcsetattr</i>() call). The
<i>tcsetattr</i>() function shall not change the values found in the <b>termios</b> structure under any circumstances.</p>

<p>The effect of <i>tcsetattr</i>() is undefined if the value of the <b>termios</b> structure pointed to by <i>termios_p</i> was
not derived from the result of a call to <a href="../functions/tcgetattr.html"><i>tcgetattr</i>()</a> on <i>fildes</i>; an
application should modify only fields and flags defined by this volume of POSIX.1-2017 between the call to <a href=
"../functions/tcgetattr.html"><i>tcgetattr</i>()</a> and <i>tcsetattr</i>(), leaving all other fields and flags unmodified.</p>

<p>No actions defined by this volume of POSIX.1-2017, other than a call to <i>tcsetattr</i>(), a close of the last file descriptor
in the system associated with this terminal device, or an open of the first file descriptor in the system associated with this
terminal device (using the O_TTY_INIT flag if it is non-zero and the device is not a pseudo-terminal), shall cause any of the
terminal attributes defined by this volume of POSIX.1-2017 to change.</p>

<p>If <i>tcsetattr</i>() is called from a process which is a member of a background process group on a <i>fildes</i> associated
with its controlling terminal:</p>

<ul>
<li>
<p>If the calling thread is blocking SIGTTOU signals or the process is ignoring SIGTTOU signals, the operation completes normally
and no signal is sent.</p>
</li>

<li>
<p>Otherwise, a SIGTTOU signal shall be sent to the process group.</p>
</li>
</ul>
</blockquote>

<h4 class="mansect"><a name="tag_16_607_04"></a>RETURN VALUE</h4>

<blockquote>
<p>Upon successful completion, 0 shall be returned. Otherwise, -1 shall be returned and <i>errno</i> set to indicate the error.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_607_05"></a>ERRORS</h4>

<blockquote>
<p>The <i>tcsetattr</i>() function shall fail if:</p>

<dl compact>
<dt>[EBADF]</dt>

<dd>The <i>fildes</i> argument is not a valid file descriptor.</dd>

<dt>[EINTR]</dt>

<dd>A signal interrupted <i>tcsetattr</i>().</dd>

<dt>[EINVAL]</dt>

<dd>The <i>optional_actions</i> argument is not a supported value, or an attempt was made to change an attribute represented in the
<b>termios</b> structure to an unsupported value.</dd>

<dt>[EIO]</dt>

<dd>The process group of the writing process is orphaned, the calling thread is not blocking SIGTTOU, and the process is not
ignoring SIGTTOU.</dd>

<dt>[ENOTTY]</dt>

<dd>The file associated with <i>fildes</i> is not a terminal.</dd>
</dl>
</blockquote>

<hr>
<div class="box"><em>The following sections are informative.</em></div>

<h4 class="mansect"><a name="tag_16_607_06"></a>EXAMPLES</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_607_07"></a>APPLICATION USAGE</h4>

<blockquote>
<p>If trying to change baud rates, applications should call <i>tcsetattr</i>() then call <a href=
"../functions/tcgetattr.html"><i>tcgetattr</i>()</a> in order to determine what baud rates were actually selected.</p>

<p>In general, there are two reasons for an application to change the parameters associated with a terminal device:</p>

<ol>
<li>
<p>The device already has working parameter settings but the application needs a different behavior, such as non-canonical mode
instead of canonical mode. The application sets (or clears) only a few flags or <i>c_cc</i>[] values. Typically, the terminal
device in this case is either the controlling terminal for the process or a pseudo-terminal.</p>
</li>

<li>
<p>The device is a modem or similar piece of equipment connected by a serial line, and it was not open before the application
opened it. In this case, the application needs to initialize all of the parameter settings ``from scratch''. However, since the
<b>termios</b> structure may include both standard and non-standard parameters, the application cannot just initialize the whole
structure in an arbitrary way (e.g., using <a href="../functions/memset.html"><i>memset</i>()</a>) as this may cause some of the
non-standard parameters to be set incorrectly, resulting in non-conforming behavior of the terminal device. Conversely, the
application cannot just set the standard parameters, assuming that the non-standard parameters will already have suitable values,
as the device might previously have been used with non-conforming parameter settings (and some implementations retain the settings
from one use to the next). The solution is to open the terminal device using the O_TTY_INIT flag to initialize the terminal device
to have conforming parameter settings, obtain those settings using <a href="../functions/tcgetattr.html"><i>tcgetattr</i>()</a>,
and then set all of the standard parameters to the desired settings.</p>
</li>
</ol>
</blockquote>

<h4 class="mansect"><a name="tag_16_607_08"></a>RATIONALE</h4>

<blockquote>
<p>The <i>tcsetattr</i>() function can be interrupted in the following situations:</p>

<ul>
<li>
<p>It is interrupted while waiting for output to drain.</p>
</li>

<li>
<p>It is called from a process in a background process group and SIGTTOU is caught.</p>
</li>
</ul>

<p>See also the RATIONALE section in <a href="../functions/tcgetattr.html#"><i>tcgetattr</i></a>.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_607_09"></a>FUTURE DIRECTIONS</h4>

<blockquote>
<p>Using an input baud rate of 0 to set the input rate equal to the output rate may not necessarily be supported in a future
version of this volume of POSIX.1-2017.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_607_10"></a>SEE ALSO</h4>

<blockquote>
<p><a href="../functions/cfgetispeed.html#"><i>cfgetispeed</i></a>, <a href=
"../functions/tcgetattr.html#"><i>tcgetattr</i></a></p>

<p>XBD <a href="../basedefs/V1_chap11.html#tag_11"><i>General Terminal Interface</i></a>, <a href=
"../basedefs/termios.h.html"><i>&lt;termios.h&gt;</i></a></p>
</blockquote>

<h4 class="mansect"><a name="tag_16_607_11"></a>CHANGE HISTORY</h4>

<blockquote>
<p>First released in Issue 3. Included for alignment with the POSIX.1-1988 standard.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_607_12"></a>Issue 6</h4>

<blockquote>
<p>The following new requirements on POSIX implementations derive from alignment with the Single UNIX Specification:</p>

<ul>
<li>
<p>In the DESCRIPTION, text previously conditional on _POSIX_JOB_CONTROL is now mandated. This is a FIPS requirement.</p>
</li>

<li>
<p>The [EIO] error is added.</p>
</li>
</ul>

<p>In the DESCRIPTION, the text describing use of <i>tcsetattr</i>() from a process which is a member of a background process group
is clarified.</p>
</blockquote>

<h4 class="mansect"><a name="tag_16_607_13"></a>Issue 7</h4>

<blockquote>
<p>Austin Group Interpretation 1003.1-2001 #144 is applied.</p>

<p>POSIX.1-2008, Technical Corrigendum 1, XSH/TC1-2008/0652 [79], XSH/TC1-2008/0653 [79], and XSH/TC1-2008/0654 [79] are
applied.</p>
</blockquote>

<div class="box"><em>End of informative text.</em></div>

<hr>
<p>&nbsp;</p>

<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX &reg; is a registered Trademark of The Open Group.<br>
POSIX &reg; is a registered Trademark of The IEEE.<br>
Copyright &copy; 2001-2018 IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>

<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/tcsendbreak.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/tcsetpgrp.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>

<hr align="LEFT" width="100%">
</div>
</body>
</html>

