%!PS-Adobe-3.0
%%BoundingBox: 18 36 594 756
%%Title: Enscript Output
%%Creator: GNU Enscript 1.6.5.90
%%CreationDate: Tue Oct 11 23:29:41 2022
%%Orientation: Portrait
%%Pages: (atend)
%%DocumentMedia: Letter 612 792 0 () ()
%%DocumentNeededResources: (atend)
%%EndComments
%%BeginProlog
%%BeginResource: procset Enscript-Prolog 1.6.5 90
%
% Procedures.
%

/_S {	% save current state
  /_s save def
} def
/_R {	% restore from saved state
  _s restore
} def

/S {	% showpage protecting gstate
  gsave
  showpage
  grestore
} bind def

/MF {	% fontname newfontname -> -	make a new encoded font
  /newfontname exch def
  /fontname exch def

  /fontdict fontname findfont def
  /newfont fontdict maxlength dict def

  fontdict {
    exch
    dup /FID eq {
      % skip FID pair
      pop pop
    } {
      % copy to the new font dictionary
      exch newfont 3 1 roll put
    } ifelse
  } forall

  newfont /FontName newfontname put

  % insert only valid encoding vectors
  encoding_vector length 256 eq {
    newfont /Encoding encoding_vector put
  } if

  newfontname newfont definefont pop
} def

/MF_PS { % fontname newfontname -> -	make a new font preserving its enc
  /newfontname exch def
  /fontname exch def

  /fontdict fontname findfont def
  /newfont fontdict maxlength dict def

  fontdict {
    exch
    dup /FID eq {
      % skip FID pair
      pop pop
    } {
      % copy to the new font dictionary
      exch newfont 3 1 roll put
    } ifelse
  } forall

  newfont /FontName newfontname put

  newfontname newfont definefont pop
} def

/SF { % fontname width height -> -	set a new font
  /height exch def
  /width exch def

  findfont
  [width 0 0 height 0 0] makefont setfont
} def

/SUF { % fontname width height -> -	set a new user font
  /height exch def
  /width exch def

  /F-gs-user-font MF
  /F-gs-user-font width height SF
} def

/SUF_PS { % fontname width height -> -	set a new user font preserving its enc
  /height exch def
  /width exch def

  /F-gs-user-font MF_PS
  /F-gs-user-font width height SF
} def

/M {moveto} bind def
/s {show} bind def

/Box {	% x y w h -> -			define box path
  /d_h exch def /d_w exch def /d_y exch def /d_x exch def
  d_x d_y  moveto
  d_w 0 rlineto
  0 d_h rlineto
  d_w neg 0 rlineto
  closepath
} def

/bgs {	% x y height blskip gray str -> -	show string with bg color
  /str exch def
  /gray exch def
  /blskip exch def
  /height exch def
  /y exch def
  /x exch def

  gsave
    x y blskip sub str stringwidth pop height Box
    gray setgray
    fill
  grestore
  x y M str s
} def

/bgcs { % x y height blskip red green blue str -> -  show string with bg color
  /str exch def
  /blue exch def
  /green exch def
  /red exch def
  /blskip exch def
  /height exch def
  /y exch def
  /x exch def

  gsave
    x y blskip sub str stringwidth pop height Box
    red green blue setrgbcolor
    fill
  grestore
  x y M str s
} def

% Highlight bars.
/highlight_bars {	% nlines lineheight output_y_margin gray -> -
  gsave
    setgray
    /ymarg exch def
    /lineheight exch def
    /nlines exch def

    % This 2 is just a magic number to sync highlight lines to text.
    0 d_header_y ymarg sub 2 sub translate

    /cw d_output_w cols div def
    /nrows d_output_h ymarg 2 mul sub lineheight div cvi def

    % for each column
    0 1 cols 1 sub {
      cw mul /xp exch def

      % for each rows
      0 1 nrows 1 sub {
        /rn exch def
        rn lineheight mul neg /yp exch def
        rn nlines idiv 2 mod 0 eq {
	  % Draw highlight bar.  4 is just a magic indentation.
	  xp 4 add yp cw 8 sub lineheight neg Box fill
	} if
      } for
    } for

  grestore
} def

% Line highlight bar.
/line_highlight {	% x y width height gray -> -
  gsave
    /gray exch def
    Box gray setgray fill
  grestore
} def

% Column separator lines.
/column_lines {
  gsave
    .1 setlinewidth
    0 d_footer_h translate
    /cw d_output_w cols div def
    1 1 cols 1 sub {
      cw mul 0 moveto
      0 d_output_h rlineto stroke
    } for
  grestore
} def

% Column borders.
/column_borders {
  gsave
    .1 setlinewidth
    0 d_footer_h moveto
    0 d_output_h rlineto
    d_output_w 0 rlineto
    0 d_output_h neg rlineto
    closepath stroke
  grestore
} def

% Do the actual underlay drawing
/draw_underlay {
  ul_style 0 eq {
    ul_str true charpath stroke
  } {
    ul_str show
  } ifelse
} def

% Underlay
/underlay {	% - -> -
  gsave
    0 d_page_h translate
    d_page_h neg d_page_w atan rotate

    ul_gray setgray
    ul_font setfont
    /dw d_page_h dup mul d_page_w dup mul add sqrt def
    ul_str stringwidth pop dw exch sub 2 div ul_h_ptsize -2 div moveto
    draw_underlay
  grestore
} def

/user_underlay {	% - -> -
  gsave
    ul_x ul_y translate
    ul_angle rotate
    ul_gray setgray
    ul_font setfont
    0 0 ul_h_ptsize 2 div sub moveto
    draw_underlay
  grestore
} def

% Page prefeed
/page_prefeed {		% bool -> -
  statusdict /prefeed known {
    statusdict exch /prefeed exch put
  } {
    pop
  } ifelse
} def

% Wrapped line markers
/wrapped_line_mark {	% x y charwith charheight type -> -
  /type exch def
  /h exch def
  /w exch def
  /y exch def
  /x exch def

  type 2 eq {
    % Black boxes (like TeX does)
    gsave
      0 setlinewidth
      x w 4 div add y M
      0 h rlineto w 2 div 0 rlineto 0 h neg rlineto
      closepath fill
    grestore
  } {
    type 3 eq {
      % Small arrows
      gsave
        .2 setlinewidth
        x w 2 div add y h 2 div add M
        w 4 div 0 rlineto
        x w 4 div add y lineto stroke

        x w 4 div add w 8 div add y h 4 div add M
        x w 4 div add y lineto
	w 4 div h 8 div rlineto stroke
      grestore
    } {
      % do nothing
    } ifelse
  } ifelse
} def

% EPSF import.

/BeginEPSF {
  /b4_Inc_state save def    		% Save state for cleanup
  /dict_count countdictstack def	% Count objects on dict stack
  /op_count count 1 sub def		% Count objects on operand stack
  userdict begin
  /showpage { } def
  0 setgray 0 setlinecap
  1 setlinewidth 0 setlinejoin
  10 setmiterlimit [ ] 0 setdash newpath
  /languagelevel where {
    pop languagelevel
    1 ne {
      false setstrokeadjust false setoverprint
    } if
  } if
} bind def

/EndEPSF {
  count op_count sub { pos } repeat	% Clean up stacks
  countdictstack dict_count sub { end } repeat
  b4_Inc_state restore
} bind def

% Check PostScript language level.
/languagelevel where {
  pop /gs_languagelevel languagelevel def
} {
  /gs_languagelevel 1 def
} ifelse
%%EndResource
%%BeginResource: procset Enscript-Encoding-88591 1.6.5 90
/encoding_vector [
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/space        	/exclam       	/quotedbl     	/numbersign   	
/dollar       	/percent      	/ampersand    	/quoteright   	
/parenleft    	/parenright   	/asterisk     	/plus         	
/comma        	/hyphen       	/period       	/slash        	
/zero         	/one          	/two          	/three        	
/four         	/five         	/six          	/seven        	
/eight        	/nine         	/colon        	/semicolon    	
/less         	/equal        	/greater      	/question     	
/at           	/A            	/B            	/C            	
/D            	/E            	/F            	/G            	
/H            	/I            	/J            	/K            	
/L            	/M            	/N            	/O            	
/P            	/Q            	/R            	/S            	
/T            	/U            	/V            	/W            	
/X            	/Y            	/Z            	/bracketleft  	
/backslash    	/bracketright 	/asciicircum  	/underscore   	
/quoteleft    	/a            	/b            	/c            	
/d            	/e            	/f            	/g            	
/h            	/i            	/j            	/k            	
/l            	/m            	/n            	/o            	
/p            	/q            	/r            	/s            	
/t            	/u            	/v            	/w            	
/x            	/y            	/z            	/braceleft    	
/bar          	/braceright   	/tilde        	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/space        	/exclamdown   	/cent         	/sterling     	
/currency     	/yen          	/brokenbar    	/section      	
/dieresis     	/copyright    	/ordfeminine  	/guillemotleft	
/logicalnot   	/hyphen       	/registered   	/macron       	
/degree       	/plusminus    	/twosuperior  	/threesuperior	
/acute        	/mu           	/paragraph    	/bullet       	
/cedilla      	/onesuperior  	/ordmasculine 	/guillemotright	
/onequarter   	/onehalf      	/threequarters	/questiondown 	
/Agrave       	/Aacute       	/Acircumflex  	/Atilde       	
/Adieresis    	/Aring        	/AE           	/Ccedilla     	
/Egrave       	/Eacute       	/Ecircumflex  	/Edieresis    	
/Igrave       	/Iacute       	/Icircumflex  	/Idieresis    	
/Eth          	/Ntilde       	/Ograve       	/Oacute       	
/Ocircumflex  	/Otilde       	/Odieresis    	/multiply     	
/Oslash       	/Ugrave       	/Uacute       	/Ucircumflex  	
/Udieresis    	/Yacute       	/Thorn        	/germandbls   	
/agrave       	/aacute       	/acircumflex  	/atilde       	
/adieresis    	/aring        	/ae           	/ccedilla     	
/egrave       	/eacute       	/ecircumflex  	/edieresis    	
/igrave       	/iacute       	/icircumflex  	/idieresis    	
/eth          	/ntilde       	/ograve       	/oacute       	
/ocircumflex  	/otilde       	/odieresis    	/divide       	
/oslash       	/ugrave       	/uacute       	/ucircumflex  	
/udieresis    	/yacute       	/thorn        	/ydieresis    	
] def
%%EndResource
%%EndProlog
%%BeginSetup
%%IncludeResource: font Courier-Bold
%%IncludeResource: font Courier
/HFpt_w 10 def
/HFpt_h 10 def
/Courier-Bold /HF-gs-font MF
/HF /HF-gs-font findfont [HFpt_w 0 0 HFpt_h 0 0] makefont def
/Courier /F-gs-font MF
/F-gs-font 10 10 SF
/#copies 1 def
% Pagedevice definitions:
gs_languagelevel 1 gt {
  <<
    /PageSize [612 792] 
  >> setpagedevice
} if
/d_page_w 576 def
/d_page_h 720 def
/d_header_x 0 def
/d_header_y 720 def
/d_header_w 576 def
/d_header_h 0 def
/d_footer_x 0 def
/d_footer_y 0 def
/d_footer_w 576 def
/d_footer_h 0 def
/d_output_w 576 def
/d_output_h 720 def
/cols 1 def
%%EndSetup
%%Page: (1) 1
%%BeginPageSetup
_S
18 36 translate
/pagenum 1 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
([ucore/lab8_result/user/ls.c] ++++++++++++++++++++++++++++++) s
5 696 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 696 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 696 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 696 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 685 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 685 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 674 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 674 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 663 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 663 M
(<dir.h>) s
/F-gs-font 10 10 SF
0 setgray
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 652 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 652 M
(<file.h>) s
/F-gs-font 10 10 SF
0 setgray
5 641 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 641 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 641 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 641 M
(<stat.h>) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 630 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 630 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 630 M
(<dirent.h>) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 619 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 619 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 597 M
(printf) s
/F-gs-font 10 10 SF
0 setgray
89 597 M
(\(...\)                     fprintf\(1, __VA_ARGS__\)) s
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 586 M
(BUFSIZE) s
/F-gs-font 10 10 SF
0 setgray
95 586 M
(                         4096) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 564 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 564 M
(char) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 553 M
(getmode) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
(\(uint32_t st_mode\) {) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 542 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 542 M
( mode = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 542 M
('?') s
/F-gs-font 10 10 SF
0 setgray
119 542 M
(;) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 531 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( \(S_ISREG\(st_mode\)\) mode = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
203 531 M
('-') s
/F-gs-font 10 10 SF
0 setgray
221 531 M
(;) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 520 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 520 M
( \(S_ISDIR\(st_mode\)\) mode = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
203 520 M
('d') s
/F-gs-font 10 10 SF
0 setgray
221 520 M
(;) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 509 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 509 M
( \(S_ISLNK\(st_mode\)\) mode = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
203 509 M
('l') s
/F-gs-font 10 10 SF
0 setgray
221 509 M
(;) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 498 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 498 M
( \(S_ISCHR\(st_mode\)\) mode = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
203 498 M
('c') s
/F-gs-font 10 10 SF
0 setgray
221 498 M
(;) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 487 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( \(S_ISBLK\(st_mode\)\) mode = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
203 487 M
('b') s
/F-gs-font 10 10 SF
0 setgray
221 487 M
(;) s
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 476 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 476 M
( mode;) s
5 465 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 432 M
(getstat) s
/F-gs-font 10 10 SF
0 setgray
47 432 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 432 M
(const) s
/F-gs-font 10 10 SF
0 setgray
83 432 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 432 M
(char) s
/F-gs-font 10 10 SF
0 setgray
113 432 M
( *name, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
161 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
197 432 M
( stat *stat\) {) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 421 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( fd, ret;) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 410 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 410 M
( \(\(fd = open\(name, O_RDONLY\)\) < 0\) {) s
5 399 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 399 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 399 M
( fd;) s
5 388 M
(    }) s
5 377 M
(    ret = fstat\(fd, stat\);) s
5 366 M
(    close\(fd\);) s
5 355 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 355 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 355 M
( ret;) s
5 344 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 322 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 311 M
(lsstat) s
/F-gs-font 10 10 SF
0 setgray
41 311 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 311 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 311 M
( stat *stat, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
161 311 M
(const) s
/F-gs-font 10 10 SF
0 setgray
191 311 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 311 M
(char) s
/F-gs-font 10 10 SF
0 setgray
221 311 M
( *filename\) {) s
5 300 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 300 M
("   [%c]") s
/F-gs-font 10 10 SF
0 setgray
125 300 M
(, getmode\(stat->st_mode\)\);) s
5 289 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 289 M
(" %3d\(h\)") s
/F-gs-font 10 10 SF
0 setgray
125 289 M
(, stat->st_nlinks\);) s
5 278 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 278 M
(" %8d\(b\)") s
/F-gs-font 10 10 SF
0 setgray
125 278 M
(, stat->st_blocks\);) s
5 267 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 267 M
(" %8d\(s\)") s
/F-gs-font 10 10 SF
0 setgray
125 267 M
(, stat->st_size\);) s
5 256 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 256 M
("   %s\\n") s
/F-gs-font 10 10 SF
0 setgray
125 256 M
(, filename\);) s
5 245 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 212 M
(lsdir) s
/F-gs-font 10 10 SF
0 setgray
35 212 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 212 M
(const) s
/F-gs-font 10 10 SF
0 setgray
71 212 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 212 M
(char) s
/F-gs-font 10 10 SF
0 setgray
101 212 M
( *path\) {) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 201 M
( stat __stat, *stat = &__stat;) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 190 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( ret;) s
5 179 M
(    DIR *dirp = opendir\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 179 M
(".") s
/F-gs-font 10 10 SF
0 setgray
167 179 M
(\);) s
5 168 M
(    ) s
5 157 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 157 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 157 M
( \(dirp == NULL\) {) s
5 146 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 146 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 146 M
( -1;) s
5 135 M
(    }) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 124 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 124 M
( dirent *direntp;) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 113 M
( \(\(direntp = readdir\(dirp\)\) != NULL\) {) s
5 102 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 102 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 102 M
( \(\(ret = getstat\(direntp->name, stat\)\) != 0\) {) s
5 91 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 91 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 91 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 91 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
143 91 M
(;) s
5 80 M
(        }) s
5 69 M
(        lsstat\(stat, direntp->name\);) s
5 58 M
(    }) s
5 47 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 47 M
("lsdir: step 4\\n") s
/F-gs-font 10 10 SF
0 setgray
173 47 M
(\);) s
5 36 M
(    closedir\(dirp\);) s
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 25 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 25 M
( 0;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 14 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
(:) s
5 3 M
(    closedir\(dirp\);) s
_R
S
%%Page: (2) 2
%%BeginPageSetup
_S
18 36 translate
/pagenum 2 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 707 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
( ret;) s
5 696 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 674 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 663 M
(ls) s
/F-gs-font 10 10 SF
0 setgray
17 663 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 663 M
(const) s
/F-gs-font 10 10 SF
0 setgray
53 663 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 663 M
(char) s
/F-gs-font 10 10 SF
0 setgray
83 663 M
( *path\) {) s
5 652 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 652 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 652 M
( stat __stat, *stat = &__stat;) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( ret, type;) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 630 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 630 M
( \(\(ret = getstat\(path, stat\)\) != 0\) {) s
5 619 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 619 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 619 M
( ret;) s
5 608 M
(    }) s
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 586 M
(static) s
/F-gs-font 10 10 SF
0 setgray
65 586 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 586 M
(const) s
/F-gs-font 10 10 SF
0 setgray
101 586 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 586 M
(char) s
/F-gs-font 10 10 SF
0 setgray
131 586 M
( *filetype[] = {) s
5 575 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 575 M
(" [  file   ]") s
/F-gs-font 10 10 SF
0 setgray
137 575 M
(,) s
5 564 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 564 M
(" [directory]") s
/F-gs-font 10 10 SF
0 setgray
137 564 M
(,) s
5 553 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 553 M
(" [ symlink ]") s
/F-gs-font 10 10 SF
0 setgray
137 553 M
(,) s
5 542 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 542 M
(" [character]") s
/F-gs-font 10 10 SF
0 setgray
137 542 M
(,) s
5 531 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 531 M
(" [  block  ]") s
/F-gs-font 10 10 SF
0 setgray
137 531 M
(,) s
5 520 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 520 M
(" [  ?????  ]") s
/F-gs-font 10 10 SF
0 setgray
137 520 M
(,) s
5 509 M
(    };) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 498 M
(switch) s
/F-gs-font 10 10 SF
0 setgray
65 498 M
( \(getmode\(stat->st_mode\)\) {) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 487 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 487 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 487 M
('0') s
/F-gs-font 10 10 SF
0 setgray
77 487 M
(: type = 0; ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 487 M
(break) s
/F-gs-font 10 10 SF
0 setgray
179 487 M
(;) s
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 476 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 476 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 476 M
('d') s
/F-gs-font 10 10 SF
0 setgray
77 476 M
(: type = 1; ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 476 M
(break) s
/F-gs-font 10 10 SF
0 setgray
179 476 M
(;) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 465 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 465 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 465 M
('l') s
/F-gs-font 10 10 SF
0 setgray
77 465 M
(: type = 2; ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 465 M
(break) s
/F-gs-font 10 10 SF
0 setgray
179 465 M
(;) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 454 M
('c') s
/F-gs-font 10 10 SF
0 setgray
77 454 M
(: type = 3; ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 454 M
(break) s
/F-gs-font 10 10 SF
0 setgray
179 454 M
(;) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 443 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 443 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 443 M
('b') s
/F-gs-font 10 10 SF
0 setgray
77 443 M
(: type = 4; ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 443 M
(break) s
/F-gs-font 10 10 SF
0 setgray
179 443 M
(;) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
29 432 M
(default) s
/F-gs-font 10 10 SF
0 setgray
71 432 M
(:  type = 5; ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 432 M
(break) s
/F-gs-font 10 10 SF
0 setgray
179 432 M
(;) s
5 421 M
(    }) s
5 399 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 399 M
(" @ is %s") s
/F-gs-font 10 10 SF
0 setgray
131 399 M
(, filetype[type]\);) s
5 388 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 388 M
(" %d\(hlinks\)") s
/F-gs-font 10 10 SF
0 setgray
149 388 M
(, stat->st_nlinks\);) s
5 377 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 377 M
(" %d\(blocks\)") s
/F-gs-font 10 10 SF
0 setgray
149 377 M
(, stat->st_blocks\);) s
5 366 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 366 M
(" %d\(bytes\) : @'%s'\\n") s
/F-gs-font 10 10 SF
0 setgray
203 366 M
(, stat->st_size, path\);) s
5 355 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 355 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 355 M
( \(S_ISDIR\(stat->st_mode\)\) {) s
5 344 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 344 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 344 M
( lsdir\(path\);) s
5 333 M
(    }) s
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 322 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 322 M
( 0;) s
5 311 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 278 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 278 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 278 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 278 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 278 M
( **argv\) {) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 267 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( \(argc == 1\) {) s
5 256 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 256 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 256 M
( ls\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 256 M
(".") s
/F-gs-font 10 10 SF
0 setgray
131 256 M
(\);) s
5 245 M
(    }) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 234 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 234 M
( {) s
5 223 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 223 M
( i, ret;) s
5 212 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 212 M
(for) s
/F-gs-font 10 10 SF
0 setgray
71 212 M
( \(i = 1; i < argc; i ++\) {) s
5 201 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 201 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 201 M
( \(\(ret = ls\(argv[i]\)\) != 0\) {) s
5 190 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 190 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 190 M
( ret;) s
5 179 M
(            }) s
5 168 M
(        }) s
5 157 M
(    }) s
5 146 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 146 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 146 M
( 0;) s
5 135 M
(}) s
5 113 M
([ucore/lab8_result/user/faultread.c] ++++++++++++++++++++++++++++++) s
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 102 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 102 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 91 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 91 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 58 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 58 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 58 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 58 M
(\) {) s
5 47 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 47 M
("I read %8x from 0.\\n") s
/F-gs-font 10 10 SF
0 setgray
209 47 M
(, *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
233 47 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
281 47 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
287 47 M
(int) s
/F-gs-font 10 10 SF
0 setgray
305 47 M
( *\)0\);) s
5 36 M
(    panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 36 M
("FAIL: T.T\\n") s
/F-gs-font 10 10 SF
0 setgray
143 36 M
(\);) s
5 25 M
(}) s
5 3 M
([ucore/lab8_result/user/faultreadkernel.c] ++++++++++++++++++++++++++++++) s
_R
S
%%Page: (3) 3
%%BeginPageSetup
_S
18 36 translate
/pagenum 3 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 707 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 707 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 696 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 696 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 696 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 674 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 663 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 663 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 663 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 663 M
(\) {) s
5 652 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 652 M
("I read %08x from 0xfac00000!\\n") s
/F-gs-font 10 10 SF
0 setgray
269 652 M
(, *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
293 652 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
341 652 M
( *\)0xfac00000\);) s
5 641 M
(    panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 641 M
("FAIL: T.T\\n") s
/F-gs-font 10 10 SF
0 setgray
143 641 M
(\);) s
5 630 M
(}) s
5 608 M
([ucore/lab8_result/user/sleepkill.c] ++++++++++++++++++++++++++++++) s
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 597 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 597 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 586 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 586 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 553 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 553 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 553 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 553 M
(\) {) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 542 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 542 M
( pid;) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 531 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( \(\(pid = fork\(\)\) == 0\) {) s
5 520 M
(        sleep\(~0\);) s
5 509 M
(        exit\(0xdead\);) s
5 498 M
(    }) s
5 487 M
(    assert\(pid > 0\);) s
5 465 M
(    sleep\(100\);) s
5 454 M
(    assert\(kill\(pid\) == 0\);) s
5 443 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 443 M
("sleepkill pass.\\n") s
/F-gs-font 10 10 SF
0 setgray
191 443 M
(\);) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 432 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 432 M
( 0;) s
5 421 M
(}) s
5 399 M
([ucore/lab8_result/user/hello.c] ++++++++++++++++++++++++++++++) s
5 388 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 388 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 388 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 388 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 377 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 377 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 355 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 344 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 344 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 344 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 344 M
(\) {) s
5 333 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 333 M
("Hello world!!.\\n") s
/F-gs-font 10 10 SF
0 setgray
185 333 M
(\);) s
5 322 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 322 M
("I am process %d.\\n") s
/F-gs-font 10 10 SF
0 setgray
197 322 M
(, getpid\(\)\);) s
5 311 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 311 M
("hello pass.\\n") s
/F-gs-font 10 10 SF
0 setgray
167 311 M
(\);) s
5 300 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 300 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 300 M
( 0;) s
5 289 M
(}) s
5 267 M
([ucore/lab8_result/user/badarg.c] ++++++++++++++++++++++++++++++) s
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 256 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 256 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 245 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 245 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 212 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 212 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 212 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 212 M
(\) {) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 201 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( pid, exit_code;) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 190 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 190 M
( \(\(pid = fork\(\)\) == 0\) {) s
5 179 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 179 M
("fork ok.\\n") s
/F-gs-font 10 10 SF
0 setgray
173 179 M
(\);) s
5 168 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 168 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 168 M
( i;) s
5 157 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 157 M
(for) s
/F-gs-font 10 10 SF
0 setgray
71 157 M
( \(i = 0; i < 10; i ++\) {) s
5 146 M
(            yield\(\);) s
5 135 M
(        }) s
5 124 M
(        exit\(0xbeaf\);) s
5 113 M
(    }) s
5 102 M
(    assert\(pid > 0\);) s
5 91 M
(    assert\(waitpid\(-1, NULL\) != 0\);) s
5 80 M
(    assert\(waitpid\(pid, \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 80 M
(void) s
/F-gs-font 10 10 SF
0 setgray
179 80 M
( *\)0xC0000000\) != 0\);) s
5 69 M
(    assert\(waitpid\(pid, &exit_code\) == 0 && exit_code == 0xbeaf\);) s
5 58 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 58 M
("badarg pass.\\n") s
/F-gs-font 10 10 SF
0 setgray
173 58 M
(\);) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 47 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
( 0;) s
5 36 M
(}) s
5 14 M
([ucore/lab8_result/user/exit.c] ++++++++++++++++++++++++++++++) s
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 3 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 3 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (4) 4
%%BeginPageSetup
_S
18 36 translate
/pagenum 4 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 707 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 707 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 685 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 685 M
( magic = -0x10384;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 652 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 652 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 652 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 652 M
(\) {) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( pid, code;) s
5 630 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 630 M
("I am the parent. Forking the child...\\n") s
/F-gs-font 10 10 SF
0 setgray
323 630 M
(\);) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 619 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
( \(\(pid = fork\(\)\) == 0\) {) s
5 608 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 608 M
("I am the child.\\n") s
/F-gs-font 10 10 SF
0 setgray
215 608 M
(\);) s
5 597 M
(        yield\(\);) s
5 586 M
(        yield\(\);) s
5 575 M
(        yield\(\);) s
5 564 M
(        yield\(\);) s
5 553 M
(        yield\(\);) s
5 542 M
(        yield\(\);) s
5 531 M
(        yield\(\);) s
5 520 M
(        exit\(magic\);) s
5 509 M
(    }) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 498 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 498 M
( {) s
5 487 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 487 M
("I am parent, fork a child pid %d\\n") s
/F-gs-font 10 10 SF
0 setgray
317 487 M
(,pid\);) s
5 476 M
(    }) s
5 465 M
(    assert\(pid > 0\);) s
5 454 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 454 M
("I am the parent, waiting now..\\n") s
/F-gs-font 10 10 SF
0 setgray
281 454 M
(\);) s
5 432 M
(    assert\(waitpid\(pid, &code\) == 0 && code == magic\);) s
5 421 M
(    assert\(waitpid\(pid, &code\) != 0 && wait\(\) != 0\);) s
5 410 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 410 M
("waitpid %d ok.\\n") s
/F-gs-font 10 10 SF
0 setgray
185 410 M
(, pid\);) s
5 388 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 388 M
("exit pass.\\n") s
/F-gs-font 10 10 SF
0 setgray
161 388 M
(\);) s
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 377 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 377 M
( 0;) s
5 366 M
(}) s
5 344 M
([ucore/lab8_result/user/softint.c] ++++++++++++++++++++++++++++++) s
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 333 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 322 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 322 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 300 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 289 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 289 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 289 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 289 M
(\) {) s
5 278 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 278 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 278 M
(\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 278 M
("int $14") s
/F-gs-font 10 10 SF
0 setgray
161 278 M
(\);) s
5 267 M
(    panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 267 M
("FAIL: T.T\\n") s
/F-gs-font 10 10 SF
0 setgray
143 267 M
(\);) s
5 256 M
(}) s
5 234 M
([ucore/lab8_result/user/priority.c] ++++++++++++++++++++++++++++++) s
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 223 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 223 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 212 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 212 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 201 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 201 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 190 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 190 M
(<stdlib.h>) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 168 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 168 M
(TOTAL) s
/F-gs-font 10 10 SF
0 setgray
83 168 M
( 5) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 157 M
(/* to get enough accuracy, MAX_TIME \(the running time of each process\) should >1000 mseconds. ) s
5 146 M
(*/) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 135 M
(MAX_TIME) s
/F-gs-font 10 10 SF
0 setgray
101 135 M
(  1000) s
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 124 M
(SLEEP_TIME) s
/F-gs-font 10 10 SF
0 setgray
113 124 M
( 400) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 113 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
53 113 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 113 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 113 M
( acc[TOTAL];) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 102 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 102 M
( status[TOTAL];) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 91 M
( pids[TOTAL];) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 69 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 58 M
(spin_delay) s
/F-gs-font 10 10 SF
0 setgray
65 58 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 58 M
(void) s
/F-gs-font 10 10 SF
0 setgray
95 58 M
(\)) s
5 47 M
({) s
5 36 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 36 M
( i;) s
5 25 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 25 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
83 25 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 25 M
( j;) s
5 14 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 14 M
(for) s
/F-gs-font 10 10 SF
0 setgray
53 14 M
( \(i = 0; i != 200; ++ i\)) s
5 3 M
(     {) s
_R
S
%%Page: (5) 5
%%BeginPageSetup
_S
18 36 translate
/pagenum 5 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(          j = !j;) s
5 696 M
(     }) s
5 685 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 652 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 652 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 652 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 652 M
(\) {) s
5 641 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 641 M
( i,time;) s
5 630 M
(     cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 630 M
("priority process will sleep %d ticks\\n") s
/F-gs-font 10 10 SF
0 setgray
323 630 M
(,SLEEP_TIME\);) s
5 619 M
(     sleep\(SLEEP_TIME\);) s
5 608 M
(     memset\(pids, 0, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
131 608 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
167 608 M
(\(pids\)\);) s
5 597 M
(     lab6_set_priority\(TOTAL + 1\);) s
5 575 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 575 M
(for) s
/F-gs-font 10 10 SF
0 setgray
53 575 M
( \(i = 0; i < TOTAL; i ++\) {) s
5 564 M
(          acc[i]=0;) s
5 553 M
(          ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 553 M
(if) s
/F-gs-font 10 10 SF
0 setgray
77 553 M
( \(\(pids[i] = fork\(\)\) == 0\) {) s
5 542 M
(               lab6_set_priority\(i + 1\);) s
5 531 M
(               acc[i] = 0;) s
5 520 M
(               ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
95 520 M
(while) s
/F-gs-font 10 10 SF
0 setgray
125 520 M
( \(1\) {) s
5 509 M
(                    spin_delay\(\);) s
5 498 M
(                    ++ acc[i];) s
5 487 M
(                    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 487 M
(if) s
/F-gs-font 10 10 SF
0 setgray
137 487 M
(\(acc[i]%4000==0\) {) s
5 476 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 476 M
(if) s
/F-gs-font 10 10 SF
0 setgray
161 476 M
(\(\(time=gettime_msec\(\)\)>SLEEP_TIME+MAX_TIME\) {) s
5 465 M
(                            cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
221 465 M
("child pid %d, acc %d, time %d\\n") s
/F-gs-font 10 10 SF
0 setgray
419 465 M
(,getpid\(\),acc[i],time\);) s
5 454 M
(                            exit\(acc[i]\);) s
5 443 M
(                        }) s
5 432 M
(                    }) s
5 421 M
(               }) s
5 410 M
(               ) s
5 399 M
(          }) s
5 388 M
(          ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 388 M
(if) s
/F-gs-font 10 10 SF
0 setgray
77 388 M
( \(pids[i] < 0\) {) s
5 377 M
(               ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
95 377 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
119 377 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
125 377 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
161 377 M
(;) s
5 366 M
(          }) s
5 355 M
(     }) s
5 333 M
(     cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 333 M
("main: fork ok,now need to wait pids.\\n") s
/F-gs-font 10 10 SF
0 setgray
323 333 M
(\);) s
5 311 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 311 M
(for) s
/F-gs-font 10 10 SF
0 setgray
53 311 M
( \(i = 0; i < TOTAL; i ++\) {) s
5 300 M
(         status[i]=0;) s
5 289 M
(         waitpid\(pids[i],&status[i]\);) s
5 278 M
(         cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 278 M
("main: pid %d, acc %d, time %d\\n") s
/F-gs-font 10 10 SF
0 setgray
305 278 M
(,pids[i],status[i],gettime_msec\(\)\); ) s
5 267 M
(     }) s
5 256 M
(     cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 256 M
("main: wait pids over\\n") s
/F-gs-font 10 10 SF
0 setgray
227 256 M
(\);) s
5 245 M
(     cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 245 M
("stride sched correct result:") s
/F-gs-font 10 10 SF
0 setgray
263 245 M
(\);) s
5 234 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 234 M
(for) s
/F-gs-font 10 10 SF
0 setgray
53 234 M
( \(i = 0; i < TOTAL; i ++\)) s
5 223 M
(     {) s
5 212 M
(         cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 212 M
(" %d") s
/F-gs-font 10 10 SF
0 setgray
137 212 M
(, \(status[i] * 2 / status[0] + 1\) / 2\);) s
5 201 M
(     }) s
5 190 M
(     cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 190 M
("\\n") s
/F-gs-font 10 10 SF
0 setgray
107 190 M
(\);) s
5 168 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 168 M
(return) s
/F-gs-font 10 10 SF
0 setgray
71 168 M
( 0;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 146 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
(:) s
5 135 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 135 M
(for) s
/F-gs-font 10 10 SF
0 setgray
53 135 M
( \(i = 0; i < TOTAL; i ++\) {) s
5 124 M
(          ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 124 M
(if) s
/F-gs-font 10 10 SF
0 setgray
77 124 M
( \(pids[i] > 0\) {) s
5 113 M
(               kill\(pids[i]\);) s
5 102 M
(          }) s
5 91 M
(     }) s
5 80 M
(     panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 80 M
("FAIL: T.T\\n") s
/F-gs-font 10 10 SF
0 setgray
149 80 M
(\);) s
5 69 M
(}) s
5 47 M
([ucore/lab8_result/user/badsegment.c] ++++++++++++++++++++++++++++++) s
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 36 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 36 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 25 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 25 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 3 M
(/* try to load the kernel's TSS selector into the DS register */) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (6) 6
%%BeginPageSetup
_S
18 36 translate
/pagenum 6 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 696 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 685 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 685 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 685 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 685 M
(\) {) s
5 674 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 674 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 674 M
(\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 674 M
("movw $0x28,%ax; movw %ax,%ds") s
/F-gs-font 10 10 SF
0 setgray
287 674 M
(\);) s
5 663 M
(    panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 663 M
("FAIL: T.T\\n") s
/F-gs-font 10 10 SF
0 setgray
143 663 M
(\);) s
5 652 M
(}) s
5 630 M
([ucore/lab8_result/user/forktest.c] ++++++++++++++++++++++++++++++) s
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 619 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 619 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
5 608 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 608 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 608 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 608 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 586 M
(const) s
/F-gs-font 10 10 SF
0 setgray
35 586 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 586 M
(int) s
/F-gs-font 10 10 SF
0 setgray
59 586 M
( max_child = 32;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 553 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 553 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 553 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 553 M
(\) {) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 542 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 542 M
( n, pid;) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 531 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( \(n = 0; n < max_child; n ++\) {) s
5 520 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 520 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
( \(\(pid = fork\(\)\) == 0\) {) s
5 509 M
(            cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
125 509 M
("I am child %d\\n") s
/F-gs-font 10 10 SF
0 setgray
227 509 M
(, n\);) s
5 498 M
(            exit\(0\);) s
5 487 M
(        }) s
5 476 M
(        assert\(pid > 0\);) s
5 465 M
(    }) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 443 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
( \(n > max_child\) {) s
5 432 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 432 M
("fork claimed to work %d times!\\n") s
/F-gs-font 10 10 SF
0 setgray
293 432 M
(, n\);) s
5 421 M
(    }) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 399 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 399 M
( \(; n > 0; n --\) {) s
5 388 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 388 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 388 M
( \(wait\(\) != 0\) {) s
5 377 M
(            panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 377 M
("wait stopped early\\n") s
/F-gs-font 10 10 SF
0 setgray
245 377 M
(\);) s
5 366 M
(        }) s
5 355 M
(    }) s
5 333 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 333 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 333 M
( \(wait\(\) == 0\) {) s
5 322 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 322 M
("wait got too many\\n") s
/F-gs-font 10 10 SF
0 setgray
215 322 M
(\);) s
5 311 M
(    }) s
5 289 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 289 M
("forktest pass.\\n") s
/F-gs-font 10 10 SF
0 setgray
185 289 M
(\);) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 278 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 278 M
( 0;) s
5 267 M
(}) s
5 245 M
([ucore/lab8_result/user/waitkill.c] ++++++++++++++++++++++++++++++) s
5 234 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 234 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 234 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 234 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 223 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 223 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 201 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 190 M
(do_yield) s
/F-gs-font 10 10 SF
0 setgray
53 190 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 190 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 190 M
(\) {) s
5 179 M
(    yield\(\);) s
5 168 M
(    yield\(\);) s
5 157 M
(    yield\(\);) s
5 146 M
(    yield\(\);) s
5 135 M
(    yield\(\);) s
5 124 M
(    yield\(\);) s
5 113 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 91 M
( parent, pid1, pid2;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 58 M
(loop) s
/F-gs-font 10 10 SF
0 setgray
29 58 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 58 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 58 M
(\) {) s
5 47 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 47 M
("child 1.\\n") s
/F-gs-font 10 10 SF
0 setgray
149 47 M
(\);) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 36 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 36 M
( \(1\);) s
5 25 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (7) 7
%%BeginPageSetup
_S
18 36 translate
/pagenum 7 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 707 M
(work) s
/F-gs-font 10 10 SF
0 setgray
29 707 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 707 M
(\) {) s
5 696 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 696 M
("child 2.\\n") s
/F-gs-font 10 10 SF
0 setgray
149 696 M
(\);) s
5 685 M
(    do_yield\(\);) s
5 674 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 674 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 674 M
( \(kill\(parent\) == 0\) {) s
5 663 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 663 M
("kill parent ok.\\n") s
/F-gs-font 10 10 SF
0 setgray
215 663 M
(\);) s
5 652 M
(        do_yield\(\);) s
5 641 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 641 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 641 M
( \(kill\(pid1\) == 0\) {) s
5 630 M
(            cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
125 630 M
("kill child1 ok.\\n") s
/F-gs-font 10 10 SF
0 setgray
239 630 M
(\);) s
5 619 M
(            exit\(0\);) s
5 608 M
(        }) s
5 597 M
(    }) s
5 586 M
(    exit\(-1\);) s
5 575 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 553 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 542 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 542 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 542 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 542 M
(\) {) s
5 531 M
(    parent = getpid\(\);) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 520 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 520 M
( \(\(pid1 = fork\(\)\) == 0\) {) s
5 509 M
(        loop\(\);) s
5 498 M
(    }) s
5 476 M
(    assert\(pid1 > 0\);) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( \(\(pid2 = fork\(\)\) == 0\) {) s
5 443 M
(        work\(\);) s
5 432 M
(    }) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 421 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
( \(pid2 > 0\) {) s
5 410 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 410 M
("wait child 1.\\n") s
/F-gs-font 10 10 SF
0 setgray
203 410 M
(\);) s
5 399 M
(        waitpid\(pid1, NULL\);) s
5 388 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 388 M
("waitpid %d returns\\n") s
/F-gs-font 10 10 SF
0 setgray
221 388 M
(, pid1\);) s
5 377 M
(    }) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 366 M
( {) s
5 355 M
(        kill\(pid1\);) s
5 344 M
(    }) s
5 333 M
(    panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 333 M
("FAIL: T.T\\n") s
/F-gs-font 10 10 SF
0 setgray
143 333 M
(\);) s
5 322 M
(}) s
5 300 M
([ucore/lab8_result/user/yield.c] ++++++++++++++++++++++++++++++) s
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 289 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 289 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 278 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 278 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 278 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 256 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 245 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 245 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 245 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 245 M
(\) {) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 234 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 234 M
( i;) s
5 223 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 223 M
("Hello, I am process %d.\\n") s
/F-gs-font 10 10 SF
0 setgray
239 223 M
(, getpid\(\)\);) s
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 212 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( \(i = 0; i < 5; i ++\) {) s
5 201 M
(        yield\(\);) s
5 190 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 190 M
("Back in process %d, iteration %d.\\n") s
/F-gs-font 10 10 SF
0 setgray
323 190 M
(, getpid\(\), i\);) s
5 179 M
(    }) s
5 168 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 168 M
("All done in process %d.\\n") s
/F-gs-font 10 10 SF
0 setgray
239 168 M
(, getpid\(\)\);) s
5 157 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 157 M
("yield pass.\\n") s
/F-gs-font 10 10 SF
0 setgray
167 157 M
(\);) s
5 146 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 146 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 146 M
( 0;) s
5 135 M
(}) s
5 113 M
([ucore/lab8_result/user/matrix.c] ++++++++++++++++++++++++++++++) s
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 102 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 102 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 91 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 91 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 80 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 80 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 69 M
(<stdlib.h>) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 47 M
(MATSIZE) s
/F-gs-font 10 10 SF
0 setgray
95 47 M
(     10) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 25 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
65 25 M
( mata[MATSIZE][MATSIZE];) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 14 M
(int) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
( matb[MATSIZE][MATSIZE];) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 3 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
65 3 M
( matc[MATSIZE][MATSIZE];) s
_R
S
%%Page: (8) 8
%%BeginPageSetup
_S
18 36 translate
/pagenum 8 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 696 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 685 M
(work) s
/F-gs-font 10 10 SF
0 setgray
29 685 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 685 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
83 685 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 685 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 685 M
( times\) {) s
5 674 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 674 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
( i, j, k, size = MATSIZE;) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 663 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( \(i = 0; i < size; i ++\) {) s
5 652 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 652 M
(for) s
/F-gs-font 10 10 SF
0 setgray
71 652 M
( \(j = 0; j < size; j ++\) {) s
5 641 M
(            mata[i][j] = matb[i][j] = 1;) s
5 630 M
(        }) s
5 619 M
(    }) s
5 597 M
(    yield\(\);) s
5 575 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 575 M
("pid %d is running \(%d times\)!.\\n") s
/F-gs-font 10 10 SF
0 setgray
281 575 M
(, getpid\(\), times\);) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 553 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 553 M
( \(times -- > 0\) {) s
5 542 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 542 M
(for) s
/F-gs-font 10 10 SF
0 setgray
71 542 M
( \(i = 0; i < size; i ++\) {) s
5 531 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 531 M
(for) s
/F-gs-font 10 10 SF
0 setgray
95 531 M
( \(j = 0; j < size; j ++\) {) s
5 520 M
(                matc[i][j] = 0;) s
5 509 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 509 M
(for) s
/F-gs-font 10 10 SF
0 setgray
119 509 M
( \(k = 0; k < size; k ++\) {) s
5 498 M
(                    matc[i][j] += mata[i][k] * matb[k][j];) s
5 487 M
(                }) s
5 476 M
(            }) s
5 465 M
(        }) s
5 454 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 454 M
(for) s
/F-gs-font 10 10 SF
0 setgray
71 454 M
( \(i = 0; i < size; i ++\) {) s
5 443 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 443 M
(for) s
/F-gs-font 10 10 SF
0 setgray
95 443 M
( \(j = 0; j < size; j ++\) {) s
5 432 M
(                mata[i][j] = matb[i][j] = matc[i][j];) s
5 421 M
(            }) s
5 410 M
(        }) s
5 399 M
(    }) s
5 388 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 388 M
("pid %d done!.\\n") s
/F-gs-font 10 10 SF
0 setgray
179 388 M
(, getpid\(\)\);) s
5 377 M
(    exit\(0\);) s
5 366 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 344 M
(const) s
/F-gs-font 10 10 SF
0 setgray
35 344 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 344 M
(int) s
/F-gs-font 10 10 SF
0 setgray
59 344 M
( total = 21;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 322 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 311 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 311 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 311 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 311 M
(\) {) s
5 300 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 300 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( pids[total];) s
5 289 M
(    memset\(pids, 0, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 289 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
161 289 M
(\(pids\)\);) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 267 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 267 M
( i;) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 256 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( \(i = 0; i < total; i ++\) {) s
5 245 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 245 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 245 M
( \(\(pids[i] = fork\(\)\) == 0\) {) s
5 234 M
(            srand\(i * i\);) s
5 223 M
(            ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
95 223 M
( times = \(\(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 223 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
215 223 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
221 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
239 223 M
(\)rand\(\)\) % total\);) s
5 212 M
(            times = \(times * times + 10\) * 100;) s
5 201 M
(            work\(times\);) s
5 190 M
(        }) s
5 179 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 179 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 179 M
( \(pids[i] < 0\) {) s
5 168 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 168 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 168 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 168 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
143 168 M
(;) s
5 157 M
(        }) s
5 146 M
(    }) s
5 124 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 124 M
("fork ok.\\n") s
/F-gs-font 10 10 SF
0 setgray
149 124 M
(\);) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 102 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 102 M
( \(i = 0; i < total; i ++\) {) s
5 91 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 91 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 91 M
( \(wait\(\) != 0\) {) s
5 80 M
(            cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
125 80 M
("wait failed.\\n") s
/F-gs-font 10 10 SF
0 setgray
221 80 M
(\);) s
5 69 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 69 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 69 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 69 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
143 69 M
(;) s
5 58 M
(        }) s
5 47 M
(    }) s
5 25 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 25 M
("matrix pass.\\n") s
/F-gs-font 10 10 SF
0 setgray
173 25 M
(\);) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 14 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
( 0;) s
_R
S
%%Page: (9) 9
%%BeginPageSetup
_S
18 36 translate
/pagenum 9 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 707 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
41 707 M
(:) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 696 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 696 M
( \(i = 0; i < total; i ++\) {) s
5 685 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 685 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 685 M
( \(pids[i] > 0\) {) s
5 674 M
(            kill\(pids[i]\);) s
5 663 M
(        }) s
5 652 M
(    }) s
5 641 M
(    panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 641 M
("FAIL: T.T\\n") s
/F-gs-font 10 10 SF
0 setgray
143 641 M
(\);) s
5 630 M
(}) s
5 608 M
([ucore/lab8_result/user/pgdir.c] ++++++++++++++++++++++++++++++) s
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 597 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 597 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 586 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 586 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 553 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 553 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 553 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 553 M
(\) {) s
5 542 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 542 M
("I am %d, print pgdir.\\n") s
/F-gs-font 10 10 SF
0 setgray
227 542 M
(, getpid\(\)\);) s
5 531 M
(    print_pgdir\(\);) s
5 520 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 520 M
("pgdir pass.\\n") s
/F-gs-font 10 10 SF
0 setgray
167 520 M
(\);) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 509 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
( 0;) s
5 498 M
(}) s
5 476 M
([ucore/lab8_result/user/sh.c] ++++++++++++++++++++++++++++++) s
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 465 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 465 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 454 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 443 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 443 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 432 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 432 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 432 M
(<dir.h>) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 421 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 421 M
(<file.h>) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 410 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 410 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 410 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 399 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 399 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 399 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 399 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 377 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 377 M
(printf) s
/F-gs-font 10 10 SF
0 setgray
89 377 M
(\(...\)                     fprintf\(1, __VA_ARGS__\)) s
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 366 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 366 M
(putc) s
/F-gs-font 10 10 SF
0 setgray
77 366 M
(\(c\)                         printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
287 366 M
("%c") s
/F-gs-font 10 10 SF
0 setgray
311 366 M
(, c\)) s
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 344 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 344 M
(BUFSIZE) s
/F-gs-font 10 10 SF
0 setgray
95 344 M
(                         4096) s
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 333 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 333 M
(WHITESPACE) s
/F-gs-font 10 10 SF
0 setgray
113 333 M
(                      ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 333 M
(" \\t\\r\\n") s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 322 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 322 M
(SYMBOLS) s
/F-gs-font 10 10 SF
0 setgray
95 322 M
(                         ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 322 M
("<|>&;") s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 300 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 300 M
( shcwd[BUFSIZE];) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 267 M
(gettoken) s
/F-gs-font 10 10 SF
0 setgray
53 267 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 267 M
(char) s
/F-gs-font 10 10 SF
0 setgray
83 267 M
( **p1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 267 M
(char) s
/F-gs-font 10 10 SF
0 setgray
149 267 M
( **p2\) {) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 256 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 256 M
( *s;) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 245 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 245 M
( \(\(s = *p1\) == NULL\) {) s
5 234 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 234 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 234 M
( 0;) s
5 223 M
(    }) s
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 212 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 212 M
( \(strchr\(WHITESPACE, *s\) != NULL\) {) s
5 201 M
(        *s ++ = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 201 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
125 201 M
(;) s
5 190 M
(    }) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 179 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 179 M
( \(*s == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 179 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
113 179 M
(\) {) s
5 168 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 168 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 168 M
( 0;) s
5 157 M
(    }) s
5 135 M
(    *p2 = s;) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( token = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 124 M
('w') s
/F-gs-font 10 10 SF
0 setgray
119 124 M
(;) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( \(strchr\(SYMBOLS, *s\) != NULL\) {) s
5 102 M
(        token = *s, *s ++ = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 102 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
197 102 M
(;) s
5 91 M
(    }) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 80 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 80 M
( {) s
5 69 M
(        bool flag = 0;) s
5 58 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 58 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 58 M
( \(*s != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
131 58 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
155 58 M
( && \(flag || strchr\(WHITESPACE SYMBOLS, *s\) == NULL\)\) {) s
5 47 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 47 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 47 M
( \(*s == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 47 M
('"') s
/F-gs-font 10 10 SF
0 setgray
155 47 M
(\) {) s
5 36 M
(                *s = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
131 36 M
(' ') s
/F-gs-font 10 10 SF
0 setgray
149 36 M
(, flag = !flag;) s
5 25 M
(            }) s
5 14 M
(            s ++;) s
5 3 M
(        }) s
_R
S
%%Page: (10) 10
%%BeginPageSetup
_S
18 36 translate
/pagenum 10 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    }) s
5 696 M
(    *p1 = \(*s != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 696 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
131 696 M
( ? s : NULL\);) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 685 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 685 M
( token;) s
5 674 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 652 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 652 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 641 M
(readline) s
/F-gs-font 10 10 SF
0 setgray
53 641 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 641 M
(const) s
/F-gs-font 10 10 SF
0 setgray
89 641 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 641 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 641 M
( *prompt\) {) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 630 M
(static) s
/F-gs-font 10 10 SF
0 setgray
65 630 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 630 M
(char) s
/F-gs-font 10 10 SF
0 setgray
95 630 M
( buffer[BUFSIZE];) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 619 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
( \(prompt != NULL\) {) s
5 608 M
(        printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
95 608 M
("%s") s
/F-gs-font 10 10 SF
0 setgray
119 608 M
(, prompt\);) s
5 597 M
(    }) s
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 586 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( ret, i = 0;) s
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 575 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 575 M
( \(1\) {) s
5 564 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 564 M
(char) s
/F-gs-font 10 10 SF
0 setgray
77 564 M
( c;) s
5 553 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 553 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 553 M
( \(\(ret = read\(0, &c, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
191 553 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
227 553 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
233 553 M
(char) s
/F-gs-font 10 10 SF
0 setgray
257 553 M
(\)\)\) < 0\) {) s
5 542 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 542 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 542 M
( NULL;) s
5 531 M
(        }) s
5 520 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 520 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 520 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
83 520 M
(if) s
/F-gs-font 10 10 SF
0 setgray
95 520 M
( \(ret == 0\) {) s
5 509 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 509 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 509 M
( \(i > 0\) {) s
5 498 M
(                buffer[i] = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 498 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
197 498 M
(;) s
5 487 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 487 M
(break) s
/F-gs-font 10 10 SF
0 setgray
131 487 M
(;) s
5 476 M
(            }) s
5 465 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 465 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 465 M
( NULL;) s
5 454 M
(        }) s
5 432 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 432 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 432 M
( \(c == 3\) {) s
5 421 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 421 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 421 M
( NULL;) s
5 410 M
(        }) s
5 399 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 399 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 399 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
83 399 M
(if) s
/F-gs-font 10 10 SF
0 setgray
95 399 M
( \(c >= ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 399 M
(' ') s
/F-gs-font 10 10 SF
0 setgray
155 399 M
( && i < BUFSIZE - 1\) {) s
5 388 M
(            putc\(c\);) s
5 377 M
(            buffer[i ++] = c;) s
5 366 M
(        }) s
5 355 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 355 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 355 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
83 355 M
(if) s
/F-gs-font 10 10 SF
0 setgray
95 355 M
( \(c == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 355 M
('\\b') s
/F-gs-font 10 10 SF
0 setgray
161 355 M
( && i > 0\) {) s
5 344 M
(            putc\(c\);) s
5 333 M
(            i --;) s
5 322 M
(        }) s
5 311 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 311 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 311 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
83 311 M
(if) s
/F-gs-font 10 10 SF
0 setgray
95 311 M
( \(c == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 311 M
('\\n') s
/F-gs-font 10 10 SF
0 setgray
161 311 M
( || c == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
215 311 M
('\\r') s
/F-gs-font 10 10 SF
0 setgray
239 311 M
(\) {) s
5 300 M
(            putc\(c\);) s
5 289 M
(            buffer[i] = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 289 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
173 289 M
(;) s
5 278 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 278 M
(break) s
/F-gs-font 10 10 SF
0 setgray
107 278 M
(;) s
5 267 M
(        }) s
5 256 M
(    }) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 245 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 245 M
( buffer;) s
5 234 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 212 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 201 M
(usage) s
/F-gs-font 10 10 SF
0 setgray
35 201 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 201 M
(void) s
/F-gs-font 10 10 SF
0 setgray
65 201 M
(\) {) s
5 190 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 190 M
("usage: sh [command-file]\\n") s
/F-gs-font 10 10 SF
0 setgray
239 190 M
(\);) s
5 179 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 146 M
(reopen) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 146 M
(int) s
/F-gs-font 10 10 SF
0 setgray
65 146 M
( fd2, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 146 M
(const) s
/F-gs-font 10 10 SF
0 setgray
131 146 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 146 M
(char) s
/F-gs-font 10 10 SF
0 setgray
161 146 M
( *filename, uint32_t open_flags\) {) s
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( ret, fd1;) s
5 124 M
(    close\(fd2\);) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( \(\(ret = open\(filename, open_flags\)\) >= 0 && ret != fd2\) {) s
5 102 M
(        close\(fd2\);) s
5 91 M
(        fd1 = ret, ret = dup2\(fd1, fd2\);) s
5 80 M
(        close\(fd1\);) s
5 69 M
(    }) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 58 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 58 M
( ret < 0 ? ret : 0;) s
5 47 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 14 M
(testfile) s
/F-gs-font 10 10 SF
0 setgray
53 14 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 14 M
(const) s
/F-gs-font 10 10 SF
0 setgray
89 14 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 14 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 14 M
( *name\) {) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( ret;) s
_R
S
%%Page: (11) 11
%%BeginPageSetup
_S
18 36 translate
/pagenum 11 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 707 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 707 M
( \(\(ret = open\(name, O_RDONLY\)\) < 0\) {) s
5 696 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 696 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 696 M
( ret;) s
5 685 M
(    }) s
5 674 M
(    close\(ret\);) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 663 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 663 M
( 0;) s
5 652 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 630 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 619 M
(runcmd) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 619 M
(char) s
/F-gs-font 10 10 SF
0 setgray
71 619 M
( *cmd\) {) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 608 M
(static) s
/F-gs-font 10 10 SF
0 setgray
65 608 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 608 M
(char) s
/F-gs-font 10 10 SF
0 setgray
95 608 M
( argv0[BUFSIZE];) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 597 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 597 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 597 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 597 M
( *argv[EXEC_MAX_ARG_NUM + 1];) s
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 586 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 586 M
( *t;) s
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 575 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( argc, token, ret, p[2];) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(again) s
/F-gs-font 10 10 SF
0 setgray
35 564 M
(:) s
5 553 M
(    argc = 0;) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 542 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 542 M
( \(1\) {) s
5 531 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 531 M
(switch) s
/F-gs-font 10 10 SF
0 setgray
89 531 M
( \(token = gettoken\(&cmd, &t\)\) {) s
5 520 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 520 M
(case) s
/F-gs-font 10 10 SF
0 setgray
77 520 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 520 M
('w') s
/F-gs-font 10 10 SF
0 setgray
101 520 M
(:) s
5 509 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 509 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 509 M
( \(argc == EXEC_MAX_ARG_NUM\) {) s
5 498 M
(                printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 498 M
("sh error: too many arguments\\n") s
/F-gs-font 10 10 SF
0 setgray
335 498 M
(\);) s
5 487 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 487 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 487 M
( -1;) s
5 476 M
(            }) s
5 465 M
(            argv[argc ++] = t;) s
5 454 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 454 M
(break) s
/F-gs-font 10 10 SF
0 setgray
107 454 M
(;) s
5 443 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 443 M
(case) s
/F-gs-font 10 10 SF
0 setgray
77 443 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 443 M
('<') s
/F-gs-font 10 10 SF
0 setgray
101 443 M
(:) s
5 432 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 432 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 432 M
( \(gettoken\(&cmd, &t\) != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
233 432 M
('w') s
/F-gs-font 10 10 SF
0 setgray
251 432 M
(\) {) s
5 421 M
(                printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 421 M
("sh error: syntax error: < not followed by word\\n") s
/F-gs-font 10 10 SF
0 setgray
443 421 M
(\);) s
5 410 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 410 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 410 M
( -1;) s
5 399 M
(            }) s
5 388 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 388 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 388 M
( \(\(ret = reopen\(0, t, O_RDONLY\)\) != 0\) {) s
5 377 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 377 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 377 M
( ret;) s
5 366 M
(            }) s
5 355 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 355 M
(break) s
/F-gs-font 10 10 SF
0 setgray
107 355 M
(;) s
5 344 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 344 M
(case) s
/F-gs-font 10 10 SF
0 setgray
77 344 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 344 M
('>') s
/F-gs-font 10 10 SF
0 setgray
101 344 M
(:) s
5 333 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 333 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 333 M
( \(gettoken\(&cmd, &t\) != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
233 333 M
('w') s
/F-gs-font 10 10 SF
0 setgray
251 333 M
(\) {) s
5 322 M
(                printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 322 M
("sh error: syntax error: > not followed by word\\n") s
/F-gs-font 10 10 SF
0 setgray
443 322 M
(\);) s
5 311 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 311 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 311 M
( -1;) s
5 300 M
(            }) s
5 289 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 289 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 289 M
( \(\(ret = reopen\(1, t, O_RDWR | O_TRUNC | O_CREAT\)\) != 0\) {) s
5 278 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 278 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 278 M
( ret;) s
5 267 M
(            }) s
5 256 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 256 M
(break) s
/F-gs-font 10 10 SF
0 setgray
107 256 M
(;) s
5 245 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 245 M
(case) s
/F-gs-font 10 10 SF
0 setgray
77 245 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 245 M
('|') s
/F-gs-font 10 10 SF
0 setgray
101 245 M
(:) s
5 234 M
(          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
65 234 M
(//  if \(\(ret = pipe\(p\)\) != 0\) {) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
65 223 M
(//      return ret;) s
/F-gs-font 10 10 SF
0 setgray
5 212 M
(          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
65 212 M
(//  }) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 201 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 201 M
( \(\(ret = fork\(\)\) == 0\) {) s
5 190 M
(                close\(0\);) s
5 179 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 179 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 179 M
( \(\(ret = dup2\(p[0], 0\)\) < 0\) {) s
5 168 M
(                    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 168 M
(return) s
/F-gs-font 10 10 SF
0 setgray
161 168 M
( ret;) s
5 157 M
(                }) s
5 146 M
(                close\(p[0]\), close\(p[1]\);) s
5 135 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 135 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
125 135 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
131 135 M
(again) s
/F-gs-font 10 10 SF
0 setgray
161 135 M
(;) s
5 124 M
(            }) s
5 113 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 113 M
(else) s
/F-gs-font 10 10 SF
0 setgray
101 113 M
( {) s
5 102 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 102 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 102 M
( \(ret < 0\) {) s
5 91 M
(                    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 91 M
(return) s
/F-gs-font 10 10 SF
0 setgray
161 91 M
( ret;) s
5 80 M
(                }) s
5 69 M
(                close\(1\);) s
5 58 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 58 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 58 M
( \(\(ret = dup2\(p[1], 1\)\) < 0\) {) s
5 47 M
(                    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 47 M
(return) s
/F-gs-font 10 10 SF
0 setgray
161 47 M
( ret;) s
5 36 M
(                }) s
5 25 M
(                close\(p[0]\), close\(p[1]\);) s
5 14 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 14 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
125 14 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
131 14 M
(runit) s
/F-gs-font 10 10 SF
0 setgray
161 14 M
(;) s
5 3 M
(            }) s
_R
S
%%Page: (12) 12
%%BeginPageSetup
_S
18 36 translate
/pagenum 12 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 707 M
(break) s
/F-gs-font 10 10 SF
0 setgray
107 707 M
(;) s
5 696 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 696 M
(case) s
/F-gs-font 10 10 SF
0 setgray
77 696 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 696 M
(0) s
/F-gs-font 10 10 SF
0 setgray
89 696 M
(:) s
5 685 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 685 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 685 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 685 M
(runit) s
/F-gs-font 10 10 SF
0 setgray
137 685 M
(;) s
5 674 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 674 M
(case) s
/F-gs-font 10 10 SF
0 setgray
77 674 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 674 M
(';') s
/F-gs-font 10 10 SF
0 setgray
101 674 M
(:) s
5 663 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 663 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 663 M
( \(\(ret = fork\(\)\) == 0\) {) s
5 652 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 652 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
125 652 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
131 652 M
(runit) s
/F-gs-font 10 10 SF
0 setgray
161 652 M
(;) s
5 641 M
(            }) s
5 630 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 630 M
(else) s
/F-gs-font 10 10 SF
0 setgray
101 630 M
( {) s
5 619 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 619 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 619 M
( \(ret < 0\) {) s
5 608 M
(                    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 608 M
(return) s
/F-gs-font 10 10 SF
0 setgray
161 608 M
( ret;) s
5 597 M
(                }) s
5 586 M
(                waitpid\(ret, NULL\);) s
5 575 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 575 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
125 575 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
131 575 M
(again) s
/F-gs-font 10 10 SF
0 setgray
161 575 M
(;) s
5 564 M
(            }) s
5 553 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 553 M
(break) s
/F-gs-font 10 10 SF
0 setgray
107 553 M
(;) s
5 542 M
(        ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
53 542 M
(default) s
/F-gs-font 10 10 SF
0 setgray
95 542 M
(:) s
5 531 M
(            printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
119 531 M
("sh error: bad return %d from gettoken\\n") s
/F-gs-font 10 10 SF
0 setgray
365 531 M
(, token\);) s
5 520 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 520 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 520 M
( -1;) s
5 509 M
(        }) s
5 498 M
(    }) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 476 M
(runit) s
/F-gs-font 10 10 SF
0 setgray
35 476 M
(:) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 465 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 465 M
( \(argc == 0\) {) s
5 454 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 454 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 454 M
( 0;) s
5 443 M
(    }) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 432 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 432 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
59 432 M
(if) s
/F-gs-font 10 10 SF
0 setgray
71 432 M
( \(strcmp\(argv[0], ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 432 M
("cd") s
/F-gs-font 10 10 SF
0 setgray
203 432 M
(\) == 0\) {) s
5 421 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 421 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 421 M
( \(argc != 2\) {) s
5 410 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 410 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 410 M
( -1;) s
5 399 M
(        }) s
5 388 M
(        strcpy\(shcwd, argv[1]\);) s
5 377 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 377 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 377 M
( 0;) s
5 366 M
(    }) s
5 355 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 355 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 355 M
( \(\(ret = testfile\(argv[0]\)\) != 0\) {) s
5 344 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 344 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 344 M
( \(ret != -E_NOENT\) {) s
5 333 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 333 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 333 M
( ret;) s
5 322 M
(        }) s
5 311 M
(        snprintf\(argv0, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 311 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
185 311 M
(\(argv0\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
239 311 M
("/%s") s
/F-gs-font 10 10 SF
0 setgray
269 311 M
(, argv[0]\);) s
5 300 M
(        argv[0] = argv0;) s
5 289 M
(    }) s
5 278 M
(    argv[argc] = NULL;) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 267 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 267 M
( __exec\(NULL, argv\);) s
5 256 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 234 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 223 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 223 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 223 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 223 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 223 M
( **argv\) {) s
5 212 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 212 M
("user sh is running!!!") s
/F-gs-font 10 10 SF
0 setgray
209 212 M
(\);) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 201 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( ret, interactive = 1;) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 190 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 190 M
( \(argc == 2\) {) s
5 179 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 179 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 179 M
( \(\(ret = reopen\(0, argv[1], O_RDONLY\)\) != 0\) {) s
5 168 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 168 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 168 M
( ret;) s
5 157 M
(        }) s
5 146 M
(        interactive = 0;) s
5 135 M
(    }) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 124 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
59 124 M
(if) s
/F-gs-font 10 10 SF
0 setgray
71 124 M
( \(argc > 2\) {) s
5 113 M
(        usage\(\);) s
5 102 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 102 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 102 M
( -1;) s
5 91 M
(    }) s
5 80 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 80 M
(//shcwd = malloc\(BUFSIZE\);) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(    assert\(shcwd != NULL\);) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 47 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 47 M
( *buffer;) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 36 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 36 M
( \(\(buffer = readline\(\(interactive\) ? ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 36 M
("$ ") s
/F-gs-font 10 10 SF
0 setgray
305 36 M
( : NULL\)\) != NULL\) {) s
5 25 M
(        shcwd[0] = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
119 25 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
143 25 M
(;) s
5 14 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 14 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 14 M
( pid;) s
5 3 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 3 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 3 M
( \(\(pid = fork\(\)\) == 0\) {) s
_R
S
%%Page: (13) 13
%%BeginPageSetup
_S
18 36 translate
/pagenum 13 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(            ret = runcmd\(buffer\);) s
5 696 M
(            exit\(ret\);) s
5 685 M
(        }) s
5 674 M
(        assert\(pid >= 0\);) s
5 663 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 663 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 663 M
( \(waitpid\(pid, &ret\) == 0\) {) s
5 652 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 652 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 652 M
( \(ret == 0 && shcwd[0] != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 652 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
269 652 M
(\) {) s
5 641 M
(                ret = 0;) s
5 630 M
(            }) s
5 619 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 619 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 619 M
( \(ret != 0\) {) s
5 608 M
(                printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 608 M
("error: %d - %e\\n") s
/F-gs-font 10 10 SF
0 setgray
251 608 M
(, ret, ret\);) s
5 597 M
(            }) s
5 586 M
(        }) s
5 575 M
(    }) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 564 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 564 M
( 0;) s
5 553 M
(}) s
5 531 M
([ucore/lab8_result/user/sfs_filetest1.c] ++++++++++++++++++++++++++++++) s
5 520 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 520 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 520 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 520 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
5 509 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 509 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 509 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 509 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 498 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 498 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 498 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 498 M
(<stdlib.h>) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 487 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 487 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 487 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 476 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 476 M
(<stat.h>) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 465 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 465 M
(<file.h>) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 454 M
(<dir.h>) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 443 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 443 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 421 M
(printf) s
/F-gs-font 10 10 SF
0 setgray
89 421 M
(\(...\)                 fprintf\(1, __VA_ARGS__\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 399 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 399 M
(int) s
/F-gs-font 10 10 SF
0 setgray
65 399 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
71 399 M
(safe_open) s
/F-gs-font 10 10 SF
0 setgray
125 399 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 399 M
(const) s
/F-gs-font 10 10 SF
0 setgray
161 399 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 399 M
(char) s
/F-gs-font 10 10 SF
0 setgray
191 399 M
( *path, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
239 399 M
(int) s
/F-gs-font 10 10 SF
0 setgray
257 399 M
( open_flags\)) s
5 388 M
({) s
5 377 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 377 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 377 M
( fd = open\(path, open_flags\);) s
5 366 M
(        printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
95 366 M
("fd is %d\\n") s
/F-gs-font 10 10 SF
0 setgray
167 366 M
(,fd\);) s
5 355 M
(        assert\(fd >= 0\);) s
5 344 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 344 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 344 M
( fd;) s
5 333 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 311 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 311 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 311 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 311 M
( stat *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
125 311 M
(safe_fstat) s
/F-gs-font 10 10 SF
0 setgray
185 311 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 311 M
(int) s
/F-gs-font 10 10 SF
0 setgray
209 311 M
( fd\)) s
5 300 M
({) s
5 289 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 289 M
(static) s
/F-gs-font 10 10 SF
0 setgray
89 289 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 289 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 289 M
( stat __stat, *stat = &__stat;) s
5 278 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 278 M
( ret = fstat\(fd, stat\);) s
5 267 M
(        assert\(ret == 0\);) s
5 256 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 256 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 256 M
( stat;) s
5 245 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 212 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 212 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 212 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 212 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
77 212 M
(safe_read) s
/F-gs-font 10 10 SF
0 setgray
131 212 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
155 212 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 212 M
(void) s
/F-gs-font 10 10 SF
0 setgray
209 212 M
( *data, size_t len\)) s
5 201 M
({) s
5 190 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 190 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 190 M
( ret = read\(fd, data, len\);) s
5 179 M
(        assert\(ret == len\);) s
5 168 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 135 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 135 M
(main) s
/F-gs-font 10 10 SF
0 setgray
53 135 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 135 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 135 M
(\)) s
5 124 M
({) s
5 113 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 113 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 113 M
( fd1 = safe_open\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 113 M
("sfs_filetest1") s
/F-gs-font 10 10 SF
0 setgray
263 113 M
(, O_RDONLY\);) s
5 102 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 102 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 102 M
( stat *stat = safe_fstat\(fd1\);) s
5 91 M
(        assert\(stat->st_size >= 0 && stat->st_blocks >= 0\);) s
5 80 M
(        printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
95 80 M
("sfs_filetest1 pass.\\n") s
/F-gs-font 10 10 SF
0 setgray
233 80 M
(\);) s
5 69 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 69 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 69 M
( 0;) s
5 58 M
(}) s
5 47 M
([ucore/lab8_result/user/testbss.c] ++++++++++++++++++++++++++++++) s
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 36 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 36 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 25 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 25 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 3 M
(ARRAYSIZE) s
/F-gs-font 10 10 SF
0 setgray
107 3 M
( \(1024*1024\)) s
_R
S
%%Page: (14) 14
%%BeginPageSetup
_S
18 36 translate
/pagenum 14 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 696 M
(uint32_t bigarray[ARRAYSIZE];) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 674 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 663 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 663 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 663 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 663 M
(\) {) s
5 652 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 652 M
("Making sure bss works right...\\n") s
/F-gs-font 10 10 SF
0 setgray
281 652 M
(\);) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( i;) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 630 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( \(i = 0; i < ARRAYSIZE; i ++\) {) s
5 619 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 619 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 619 M
( \(bigarray[i] != 0\) {) s
5 608 M
(            panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 608 M
("bigarray[%d] isn't cleared!\\n") s
/F-gs-font 10 10 SF
0 setgray
299 608 M
(, i\);) s
5 597 M
(        }) s
5 586 M
(    }) s
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 575 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( \(i = 0; i < ARRAYSIZE; i ++\) {) s
5 564 M
(        bigarray[i] = i;) s
5 553 M
(    }) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 542 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 542 M
( \(i = 0; i < ARRAYSIZE; i ++\) {) s
5 531 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 531 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 531 M
( \(bigarray[i] != i\) {) s
5 520 M
(            panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 520 M
("bigarray[%d] didn't hold its value!\\n") s
/F-gs-font 10 10 SF
0 setgray
347 520 M
(, i\);) s
5 509 M
(        }) s
5 498 M
(    }) s
5 476 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 476 M
("Yes, good.  Now doing a wild write off the end...\\n") s
/F-gs-font 10 10 SF
0 setgray
395 476 M
(\);) s
5 465 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 465 M
("testbss may pass.\\n") s
/F-gs-font 10 10 SF
0 setgray
203 465 M
(\);) s
5 443 M
(    bigarray[ARRAYSIZE + 1024] = 0;) s
5 432 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 432 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 432 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 432 M
("int $0x14") s
/F-gs-font 10 10 SF
0 setgray
179 432 M
(\);) s
5 421 M
(    panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 421 M
("FAIL: T.T\\n") s
/F-gs-font 10 10 SF
0 setgray
143 421 M
(\);) s
5 410 M
(}) s
5 388 M
([ucore/lab8_result/user/libs/syscall.c] ++++++++++++++++++++++++++++++) s
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 377 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 377 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 366 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 366 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 355 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 355 M
(<stdarg.h>) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 344 M
(<syscall.h>) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 333 M
(<stat.h>) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 322 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 322 M
(<dirent.h>) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 289 M
(MAX_ARGS) s
/F-gs-font 10 10 SF
0 setgray
101 289 M
(            5) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 267 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 256 M
(syscall) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 256 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 256 M
( num, ...\) {) s
5 245 M
(    va_list ap;) s
5 234 M
(    va_start\(ap, num\);) s
5 223 M
(    uint32_t a[MAX_ARGS];) s
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( i, ret;) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 201 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( \(i = 0; i < MAX_ARGS; i ++\) {) s
5 190 M
(        a[i] = va_arg\(ap, uint32_t\);) s
5 179 M
(    }) s
5 168 M
(    va_end\(ap\);) s
5 146 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 146 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 146 M
( \() s
5 135 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 135 M
("int %1;") s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 124 M
("=a") s
/F-gs-font 10 10 SF
0 setgray
89 124 M
( \(ret\)) s
5 113 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 113 M
("i") s
/F-gs-font 10 10 SF
0 setgray
83 113 M
( \(T_SYSCALL\),) s
5 102 M
(          ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 102 M
("a") s
/F-gs-font 10 10 SF
0 setgray
83 102 M
( \(num\),) s
5 91 M
(          ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 91 M
("d") s
/F-gs-font 10 10 SF
0 setgray
83 91 M
( \(a[0]\),) s
5 80 M
(          ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 80 M
("c") s
/F-gs-font 10 10 SF
0 setgray
83 80 M
( \(a[1]\),) s
5 69 M
(          ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 69 M
("b") s
/F-gs-font 10 10 SF
0 setgray
83 69 M
( \(a[2]\),) s
5 58 M
(          ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 58 M
("D") s
/F-gs-font 10 10 SF
0 setgray
83 58 M
( \(a[3]\),) s
5 47 M
(          ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 47 M
("S") s
/F-gs-font 10 10 SF
0 setgray
83 47 M
( \(a[4]\)) s
5 36 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 36 M
("cc") s
/F-gs-font 10 10 SF
0 setgray
89 36 M
(, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 36 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
149 36 M
(\);) s
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 25 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 25 M
( ret;) s
5 14 M
(}) s
_R
S
%%Page: (15) 15
%%BeginPageSetup
_S
18 36 translate
/pagenum 15 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 696 M
(sys_exit) s
/F-gs-font 10 10 SF
0 setgray
53 696 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 696 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 696 M
( error_code\) {) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 685 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 685 M
( syscall\(SYS_exit, error_code\);) s
5 674 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 652 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 641 M
(sys_fork) s
/F-gs-font 10 10 SF
0 setgray
53 641 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 641 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 641 M
(\) {) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 630 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 630 M
( syscall\(SYS_fork\);) s
5 619 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 597 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 586 M
(sys_wait) s
/F-gs-font 10 10 SF
0 setgray
53 586 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 586 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 586 M
( pid, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 586 M
(int) s
/F-gs-font 10 10 SF
0 setgray
131 586 M
( *store\) {) s
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 575 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 575 M
( syscall\(SYS_wait, pid, store\);) s
5 564 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 542 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 531 M
(sys_yield) s
/F-gs-font 10 10 SF
0 setgray
59 531 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 531 M
(void) s
/F-gs-font 10 10 SF
0 setgray
89 531 M
(\) {) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 520 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
( syscall\(SYS_yield\);) s
5 509 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 487 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 476 M
(sys_kill) s
/F-gs-font 10 10 SF
0 setgray
53 476 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 476 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 476 M
( pid\) {) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 465 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 465 M
( syscall\(SYS_kill, pid\);) s
5 454 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 432 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 421 M
(sys_getpid) s
/F-gs-font 10 10 SF
0 setgray
65 421 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 421 M
(void) s
/F-gs-font 10 10 SF
0 setgray
95 421 M
(\) {) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 410 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 410 M
( syscall\(SYS_getpid\);) s
5 399 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 377 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 366 M
(sys_putc) s
/F-gs-font 10 10 SF
0 setgray
53 366 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 366 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 366 M
( c\) {) s
5 355 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 355 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 355 M
( syscall\(SYS_putc, c\);) s
5 344 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 322 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 311 M
(sys_pgdir) s
/F-gs-font 10 10 SF
0 setgray
59 311 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 311 M
(void) s
/F-gs-font 10 10 SF
0 setgray
89 311 M
(\) {) s
5 300 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 300 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 300 M
( syscall\(SYS_pgdir\);) s
5 289 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 256 M
(sys_lab6_set_priority) s
/F-gs-font 10 10 SF
0 setgray
131 256 M
(\(uint32_t priority\)) s
5 245 M
({) s
5 234 M
(    syscall\(SYS_lab6_set_priority, priority\);) s
5 223 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 201 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 190 M
(sys_sleep) s
/F-gs-font 10 10 SF
0 setgray
59 190 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 190 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
113 190 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 190 M
(int) s
/F-gs-font 10 10 SF
0 setgray
137 190 M
( time\) {) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 179 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 179 M
( syscall\(SYS_sleep, time\);) s
5 168 M
(}) s
5 146 M
(size_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 135 M
(sys_gettime) s
/F-gs-font 10 10 SF
0 setgray
71 135 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 135 M
(void) s
/F-gs-font 10 10 SF
0 setgray
101 135 M
(\) {) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 124 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 124 M
( syscall\(SYS_gettime\);) s
5 113 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 80 M
(sys_exec) s
/F-gs-font 10 10 SF
0 setgray
53 80 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 80 M
(const) s
/F-gs-font 10 10 SF
0 setgray
89 80 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 80 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 80 M
( *name, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
185 80 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 80 M
(const) s
/F-gs-font 10 10 SF
0 setgray
257 80 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
263 80 M
(char) s
/F-gs-font 10 10 SF
0 setgray
287 80 M
( **argv\) {) s
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 69 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 69 M
( syscall\(SYS_exec, name, argc, argv\);) s
5 58 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 25 M
(sys_open) s
/F-gs-font 10 10 SF
0 setgray
53 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 25 M
(const) s
/F-gs-font 10 10 SF
0 setgray
89 25 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 25 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 25 M
( *path, uint32_t open_flags\) {) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 14 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
( syscall\(SYS_open, path, open_flags\);) s
5 3 M
(}) s
_R
S
%%Page: (16) 16
%%BeginPageSetup
_S
18 36 translate
/pagenum 16 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 696 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 685 M
(sys_close) s
/F-gs-font 10 10 SF
0 setgray
59 685 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 685 M
(int) s
/F-gs-font 10 10 SF
0 setgray
83 685 M
( fd\) {) s
5 674 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 674 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 674 M
( syscall\(SYS_close, fd\);) s
5 663 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 630 M
(sys_read) s
/F-gs-font 10 10 SF
0 setgray
53 630 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 630 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 630 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 630 M
(void) s
/F-gs-font 10 10 SF
0 setgray
131 630 M
( *base, size_t len\) {) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 619 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 619 M
( syscall\(SYS_read, fd, base, len\);) s
5 608 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 586 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 575 M
(sys_write) s
/F-gs-font 10 10 SF
0 setgray
59 575 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 575 M
(int) s
/F-gs-font 10 10 SF
0 setgray
83 575 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 575 M
(void) s
/F-gs-font 10 10 SF
0 setgray
137 575 M
( *base, size_t len\) {) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 564 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 564 M
( syscall\(SYS_write, fd, base, len\);) s
5 553 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 531 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 520 M
(sys_seek) s
/F-gs-font 10 10 SF
0 setgray
53 520 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 520 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 520 M
( fd, off_t pos, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 520 M
(int) s
/F-gs-font 10 10 SF
0 setgray
191 520 M
( whence\) {) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 509 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
( syscall\(SYS_seek, fd, pos, whence\);) s
5 498 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 476 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 465 M
(sys_fstat) s
/F-gs-font 10 10 SF
0 setgray
59 465 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 465 M
(int) s
/F-gs-font 10 10 SF
0 setgray
83 465 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 465 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
149 465 M
( stat *stat\) {) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 454 M
( syscall\(SYS_fstat, fd, stat\);) s
5 443 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 421 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 410 M
(sys_fsync) s
/F-gs-font 10 10 SF
0 setgray
59 410 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 410 M
(int) s
/F-gs-font 10 10 SF
0 setgray
83 410 M
( fd\) {) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 399 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 399 M
( syscall\(SYS_fsync, fd\);) s
5 388 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 366 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 355 M
(sys_getcwd) s
/F-gs-font 10 10 SF
0 setgray
65 355 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 355 M
(char) s
/F-gs-font 10 10 SF
0 setgray
95 355 M
( *buffer, size_t len\) {) s
5 344 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 344 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 344 M
( syscall\(SYS_getcwd, buffer, len\);) s
5 333 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 311 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 300 M
(sys_getdirentry) s
/F-gs-font 10 10 SF
0 setgray
95 300 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 300 M
(int) s
/F-gs-font 10 10 SF
0 setgray
119 300 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 300 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
185 300 M
( dirent *dirent\) {) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 289 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 289 M
( syscall\(SYS_getdirentry, fd, dirent\);) s
5 278 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 256 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 245 M
(sys_dup) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 245 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 245 M
( fd1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 245 M
(int) s
/F-gs-font 10 10 SF
0 setgray
125 245 M
( fd2\) {) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 234 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 234 M
( syscall\(SYS_dup, fd1, fd2\);) s
5 223 M
(}) s
5 212 M
([ucore/lab8_result/user/libs/file.h] ++++++++++++++++++++++++++++++) s
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 201 M
(__USER_LIBS_FILE_H__) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 190 M
(__USER_LIBS_FILE_H__) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 168 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 168 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( stat;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 124 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 124 M
(open) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 124 M
(const) s
/F-gs-font 10 10 SF
0 setgray
89 124 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 124 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 124 M
( *path, uint32_t open_flags\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 113 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 113 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 113 M
(close) s
/F-gs-font 10 10 SF
0 setgray
59 113 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 113 M
(int) s
/F-gs-font 10 10 SF
0 setgray
83 113 M
( fd\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 102 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 102 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 102 M
(read) s
/F-gs-font 10 10 SF
0 setgray
53 102 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 102 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 102 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 102 M
(void) s
/F-gs-font 10 10 SF
0 setgray
131 102 M
( *base, size_t len\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 91 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 91 M
(write) s
/F-gs-font 10 10 SF
0 setgray
59 91 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
83 91 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 91 M
(void) s
/F-gs-font 10 10 SF
0 setgray
137 91 M
( *base, size_t len\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 80 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 80 M
(seek) s
/F-gs-font 10 10 SF
0 setgray
53 80 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 80 M
( fd, off_t pos, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
191 80 M
( whence\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 69 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 69 M
(fstat) s
/F-gs-font 10 10 SF
0 setgray
59 69 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 69 M
(int) s
/F-gs-font 10 10 SF
0 setgray
83 69 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 69 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
149 69 M
( stat *stat\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 58 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 58 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 58 M
(fsync) s
/F-gs-font 10 10 SF
0 setgray
59 58 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 58 M
(int) s
/F-gs-font 10 10 SF
0 setgray
83 58 M
( fd\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 47 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 47 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 47 M
(dup) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 47 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 47 M
( fd\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 36 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 36 M
(dup2) s
/F-gs-font 10 10 SF
0 setgray
53 36 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 36 M
( fd1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
131 36 M
( fd2\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 25 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 25 M
(pipe) s
/F-gs-font 10 10 SF
0 setgray
53 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 25 M
( *fd_store\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 14 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 14 M
(mkfifo) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 14 M
(const) s
/F-gs-font 10 10 SF
0 setgray
101 14 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 14 M
(char) s
/F-gs-font 10 10 SF
0 setgray
131 14 M
( *name, uint32_t open_flags\);) s
_R
S
%%Page: (17) 17
%%BeginPageSetup
_S
18 36 translate
/pagenum 17 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 707 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 707 M
(print_stat) s
/F-gs-font 10 10 SF
0 setgray
95 707 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 707 M
(const) s
/F-gs-font 10 10 SF
0 setgray
131 707 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 707 M
(char) s
/F-gs-font 10 10 SF
0 setgray
161 707 M
( *name, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
209 707 M
(int) s
/F-gs-font 10 10 SF
0 setgray
227 707 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 707 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
293 707 M
( stat *stat\);) s
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 685 M
(/* !__USER_LIBS_FILE_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
([ucore/lab8_result/user/libs/panic.c] ++++++++++++++++++++++++++++++) s
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 652 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 652 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 641 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 641 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 641 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 641 M
(<stdarg.h>) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 630 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 630 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 630 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 619 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 619 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
5 608 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 608 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 608 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 608 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 586 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 575 M
(__panic) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 575 M
(const) s
/F-gs-font 10 10 SF
0 setgray
83 575 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 575 M
(char) s
/F-gs-font 10 10 SF
0 setgray
113 575 M
( *file, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
161 575 M
(int) s
/F-gs-font 10 10 SF
0 setgray
179 575 M
( line, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
221 575 M
(const) s
/F-gs-font 10 10 SF
0 setgray
251 575 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 575 M
(char) s
/F-gs-font 10 10 SF
0 setgray
281 575 M
( *fmt, ...\) {) s
5 564 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 564 M
(// print the 'message') s
/F-gs-font 10 10 SF
0 setgray
5 553 M
(    va_list ap;) s
5 542 M
(    va_start\(ap, fmt\);) s
5 531 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 531 M
("user panic at %s:%d:\\n    ") s
/F-gs-font 10 10 SF
0 setgray
245 531 M
(, file, line\);) s
5 520 M
(    vcprintf\(fmt, ap\);) s
5 509 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 509 M
("\\n") s
/F-gs-font 10 10 SF
0 setgray
101 509 M
(\);) s
5 498 M
(    va_end\(ap\);) s
5 487 M
(    exit\(-E_PANIC\);) s
5 476 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 443 M
(__warn) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 443 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 443 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 443 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 443 M
( *file, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
173 443 M
( line, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 443 M
(const) s
/F-gs-font 10 10 SF
0 setgray
245 443 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 443 M
(char) s
/F-gs-font 10 10 SF
0 setgray
275 443 M
( *fmt, ...\) {) s
5 432 M
(    va_list ap;) s
5 421 M
(    va_start\(ap, fmt\);) s
5 410 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 410 M
("user warning at %s:%d:\\n    ") s
/F-gs-font 10 10 SF
0 setgray
257 410 M
(, file, line\);) s
5 399 M
(    vcprintf\(fmt, ap\);) s
5 388 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 388 M
("\\n") s
/F-gs-font 10 10 SF
0 setgray
101 388 M
(\);) s
5 377 M
(    va_end\(ap\);) s
5 366 M
(}) s
5 344 M
([ucore/lab8_result/user/libs/umain.c] ++++++++++++++++++++++++++++++) s
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 333 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 322 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 322 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 311 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 311 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 311 M
(<file.h>) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 300 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 300 M
(<stat.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 278 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 278 M
(main) s
/F-gs-font 10 10 SF
0 setgray
53 278 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 278 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 278 M
(char) s
/F-gs-font 10 10 SF
0 setgray
143 278 M
( *argv[]\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 256 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 256 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 256 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 245 M
(initfd) s
/F-gs-font 10 10 SF
0 setgray
41 245 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 245 M
(int) s
/F-gs-font 10 10 SF
0 setgray
65 245 M
( fd2, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 245 M
(const) s
/F-gs-font 10 10 SF
0 setgray
131 245 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 245 M
(char) s
/F-gs-font 10 10 SF
0 setgray
161 245 M
( *path, uint32_t open_flags\) {) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 234 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 234 M
( fd1, ret;) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 223 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 223 M
( \(\(fd1 = open\(path, open_flags\)\) < 0\) {) s
5 212 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 212 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 212 M
( fd1;) s
5 201 M
(    }) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 190 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 190 M
( \(fd1 != fd2\) {) s
5 179 M
(        close\(fd2\);) s
5 168 M
(        ret = dup2\(fd1, fd2\);) s
5 157 M
(        close\(fd1\);) s
5 146 M
(    }) s
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 135 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 135 M
( ret;) s
5 124 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 102 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 91 M
(umain) s
/F-gs-font 10 10 SF
0 setgray
35 91 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
59 91 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 91 M
(char) s
/F-gs-font 10 10 SF
0 setgray
125 91 M
( *argv[]\) {) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( fd;) s
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 69 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( \(\(fd = initfd\(0, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 69 M
("stdin:") s
/F-gs-font 10 10 SF
0 setgray
197 69 M
(, O_RDONLY\)\) < 0\) {) s
5 58 M
(        warn\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 58 M
("open <stdin> failed: %e.\\n") s
/F-gs-font 10 10 SF
0 setgray
251 58 M
(, fd\);) s
5 47 M
(    }) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 36 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 36 M
( \(\(fd = initfd\(1, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 36 M
("stdout:") s
/F-gs-font 10 10 SF
0 setgray
203 36 M
(, O_WRONLY\)\) < 0\) {) s
5 25 M
(        warn\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 25 M
("open <stdout> failed: %e.\\n") s
/F-gs-font 10 10 SF
0 setgray
257 25 M
(, fd\);) s
5 14 M
(    }) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( ret = main\(argc, argv\);) s
_R
S
%%Page: (18) 18
%%BeginPageSetup
_S
18 36 translate
/pagenum 18 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    exit\(ret\);) s
5 696 M
(}) s
5 674 M
([ucore/lab8_result/user/libs/dir.c] ++++++++++++++++++++++++++++++) s
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 663 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 663 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 652 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 652 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 641 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 641 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 641 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 641 M
(<syscall.h>) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 630 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 630 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 630 M
(<stat.h>) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 619 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 619 M
(<dirent.h>) s
/F-gs-font 10 10 SF
0 setgray
5 608 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 608 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 608 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 608 M
(<file.h>) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 597 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 597 M
(<dir.h>) s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 586 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 586 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 575 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 575 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
5 553 M
(DIR dir, *dirp=&dir;) s
5 542 M
(DIR *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 531 M
(opendir) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 531 M
(const) s
/F-gs-font 10 10 SF
0 setgray
83 531 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 531 M
(char) s
/F-gs-font 10 10 SF
0 setgray
113 531 M
( *path\) {) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 509 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 509 M
( \(\(dirp->fd = open\(path, O_RDONLY\)\) < 0\) {) s
5 498 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 498 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 498 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 498 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
119 498 M
(;) s
5 487 M
(    }) s
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 476 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 476 M
( stat __stat, *stat = &__stat;) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 465 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 465 M
( \(fstat\(dirp->fd, stat\) != 0 || !S_ISDIR\(stat->st_mode\)\) {) s
5 454 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 454 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 454 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 454 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
119 454 M
(;) s
5 443 M
(    }) s
5 432 M
(    dirp->dirent.offset = 0;) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 421 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 421 M
( dirp;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 399 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
(:) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 388 M
( NULL;) s
5 377 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 355 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 355 M
( dirent *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 344 M
(readdir) s
/F-gs-font 10 10 SF
0 setgray
47 344 M
(\(DIR *dirp\) {) s
5 333 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 333 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 333 M
( \(sys_getdirentry\(dirp->fd, &\(dirp->dirent\)\) == 0\) {) s
5 322 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 322 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 322 M
( &\(dirp->dirent\);) s
5 311 M
(    }) s
5 300 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 300 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 300 M
( NULL;) s
5 289 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 256 M
(closedir) s
/F-gs-font 10 10 SF
0 setgray
53 256 M
(\(DIR *dirp\) {) s
5 245 M
(    close\(dirp->fd\);) s
5 234 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 201 M
(getcwd) s
/F-gs-font 10 10 SF
0 setgray
41 201 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 201 M
(char) s
/F-gs-font 10 10 SF
0 setgray
71 201 M
( *buffer, size_t len\) {) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 190 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 190 M
( sys_getcwd\(buffer, len\);) s
5 179 M
(}) s
5 157 M
([ucore/lab8_result/user/libs/ulib.c] ++++++++++++++++++++++++++++++) s
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 146 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 146 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 135 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 135 M
(<syscall.h>) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 124 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 113 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 113 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 102 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 102 M
(<stat.h>) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 91 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 91 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 80 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 80 M
(<lock.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 58 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 58 M
( lock_t fork_lock = INIT_LOCK;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 25 M
(lock_fork) s
/F-gs-font 10 10 SF
0 setgray
59 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 25 M
(void) s
/F-gs-font 10 10 SF
0 setgray
89 25 M
(\) {) s
5 14 M
(    lock\(&fork_lock\);) s
5 3 M
(}) s
_R
S
%%Page: (19) 19
%%BeginPageSetup
_S
18 36 translate
/pagenum 19 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 696 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 685 M
(unlock_fork) s
/F-gs-font 10 10 SF
0 setgray
71 685 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 685 M
(void) s
/F-gs-font 10 10 SF
0 setgray
101 685 M
(\) {) s
5 674 M
(    unlock\(&fork_lock\);) s
5 663 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 641 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 630 M
(exit) s
/F-gs-font 10 10 SF
0 setgray
29 630 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 630 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 630 M
( error_code\) {) s
5 619 M
(    sys_exit\(error_code\);) s
5 608 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 608 M
("BUG: exit failed.\\n") s
/F-gs-font 10 10 SF
0 setgray
203 608 M
(\);) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 597 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 597 M
( \(1\);) s
5 586 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 553 M
(fork) s
/F-gs-font 10 10 SF
0 setgray
29 553 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 553 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 553 M
(\) {) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 542 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 542 M
( sys_fork\(\);) s
5 531 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 509 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 498 M
(wait) s
/F-gs-font 10 10 SF
0 setgray
29 498 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 498 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 498 M
(\) {) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 487 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 487 M
( sys_wait\(0, NULL\);) s
5 476 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 443 M
(waitpid) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 443 M
( pid, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
125 443 M
( *store\) {) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 432 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 432 M
( sys_wait\(pid, store\);) s
5 421 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 399 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 388 M
(yield) s
/F-gs-font 10 10 SF
0 setgray
35 388 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 388 M
(void) s
/F-gs-font 10 10 SF
0 setgray
65 388 M
(\) {) s
5 377 M
(    sys_yield\(\);) s
5 366 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 344 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 333 M
(kill) s
/F-gs-font 10 10 SF
0 setgray
29 333 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 333 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
( pid\) {) s
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 322 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 322 M
( sys_kill\(pid\);) s
5 311 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 278 M
(getpid) s
/F-gs-font 10 10 SF
0 setgray
41 278 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 278 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 278 M
(\) {) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 267 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 267 M
( sys_getpid\(\);) s
5 256 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 234 M
(//print_pgdir - print the PDT&PT) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 212 M
(print_pgdir) s
/F-gs-font 10 10 SF
0 setgray
71 212 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 212 M
(void) s
/F-gs-font 10 10 SF
0 setgray
101 212 M
(\) {) s
5 201 M
(    sys_pgdir\(\);) s
5 190 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 168 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 157 M
(lab6_set_priority) s
/F-gs-font 10 10 SF
0 setgray
107 157 M
(\(uint32_t priority\)) s
5 146 M
({) s
5 135 M
(    sys_lab6_set_priority\(priority\);) s
5 124 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 102 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 91 M
(sleep) s
/F-gs-font 10 10 SF
0 setgray
35 91 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 91 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
89 91 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
113 91 M
( time\) {) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 80 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 80 M
( sys_sleep\(time\);) s
5 69 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 47 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
53 47 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 47 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 36 M
(gettime_msec) s
/F-gs-font 10 10 SF
0 setgray
77 36 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 36 M
(void) s
/F-gs-font 10 10 SF
0 setgray
107 36 M
(\) {) s
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 25 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 25 M
( \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 25 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
125 25 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
149 25 M
(\)sys_gettime\(\);) s
5 14 M
(}) s
_R
S
%%Page: (20) 20
%%BeginPageSetup
_S
18 36 translate
/pagenum 20 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 696 M
(__exec) s
/F-gs-font 10 10 SF
0 setgray
41 696 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 696 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 696 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 696 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 696 M
( *name, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 696 M
(const) s
/F-gs-font 10 10 SF
0 setgray
185 696 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 696 M
(char) s
/F-gs-font 10 10 SF
0 setgray
215 696 M
( **argv\) {) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 685 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
( argc = 0;) s
5 674 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 674 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 674 M
( \(argv[argc] != NULL\) {) s
5 663 M
(        argc ++;) s
5 652 M
(    }) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 641 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 641 M
( sys_exec\(name, argc, argv\);) s
5 630 M
(}) s
5 619 M
([ucore/lab8_result/user/libs/stdio.c] ++++++++++++++++++++++++++++++) s
5 608 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 608 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 608 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 608 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 597 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 597 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 586 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 586 M
(<syscall.h>) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 575 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 575 M
(<file.h>) s
/F-gs-font 10 10 SF
0 setgray
5 564 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 564 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 564 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 564 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
5 553 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 553 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 553 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 553 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 531 M
(/* *) s
5 520 M
( * cputch - writes a single character @c to stdout, and it will) s
5 509 M
( * increace the value of counter pointed by @cnt.) s
5 498 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 487 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 487 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 476 M
(cputch) s
/F-gs-font 10 10 SF
0 setgray
41 476 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 476 M
(int) s
/F-gs-font 10 10 SF
0 setgray
65 476 M
( c, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 476 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 476 M
( *cnt\) {) s
5 465 M
(    sys_putc\(c\);) s
5 454 M
(    \(*cnt\) ++;) s
5 443 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 421 M
(/* *) s
5 410 M
( * vcprintf - format a string and writes it to stdout) s
5 399 M
( *) s
5 388 M
( * The return value is the number of characters which would be) s
5 377 M
( * written to stdout.) s
5 366 M
( *) s
5 355 M
( * Call this function if you are already dealing with a va_list.) s
5 344 M
( * Or you probably want cprintf\(\) instead.) s
5 333 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 322 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 311 M
(vcprintf) s
/F-gs-font 10 10 SF
0 setgray
53 311 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 311 M
(const) s
/F-gs-font 10 10 SF
0 setgray
89 311 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 311 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 311 M
( *fmt, va_list ap\) {) s
5 300 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 300 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( cnt = 0;) s
5 289 M
(    vprintfmt\(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 289 M
(void) s
/F-gs-font 10 10 SF
0 setgray
119 289 M
(*\)cputch, NO_FD, &cnt, fmt, ap\);) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 278 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 278 M
( cnt;) s
5 267 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 245 M
(/* *) s
5 234 M
( * cprintf - formats a string and writes it to stdout) s
5 223 M
( *) s
5 212 M
( * The return value is the number of characters which would be) s
5 201 M
( * written to stdout.) s
5 190 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 179 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 168 M
(cprintf) s
/F-gs-font 10 10 SF
0 setgray
47 168 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 168 M
(const) s
/F-gs-font 10 10 SF
0 setgray
83 168 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 168 M
(char) s
/F-gs-font 10 10 SF
0 setgray
113 168 M
( *fmt, ...\) {) s
5 157 M
(    va_list ap;) s
5 135 M
(    va_start\(ap, fmt\);) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( cnt = vcprintf\(fmt, ap\);) s
5 113 M
(    va_end\(ap\);) s
5 91 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 91 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 91 M
( cnt;) s
5 80 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 58 M
(/* *) s
5 47 M
( * cputs- writes the string pointed by @str to stdout and) s
5 36 M
( * appends a newline character.) s
5 25 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 3 M
(cputs) s
/F-gs-font 10 10 SF
0 setgray
35 3 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 3 M
(const) s
/F-gs-font 10 10 SF
0 setgray
71 3 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 3 M
(char) s
/F-gs-font 10 10 SF
0 setgray
101 3 M
( *str\) {) s
_R
S
%%Page: (21) 21
%%BeginPageSetup
_S
18 36 translate
/pagenum 21 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 707 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 707 M
( cnt = 0;) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 696 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 696 M
( c;) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 685 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 685 M
( \(\(c = *str ++\) != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 685 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
197 685 M
(\) {) s
5 674 M
(        cputch\(c, &cnt\);) s
5 663 M
(    }) s
5 652 M
(    cputch\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 652 M
('\\n') s
/F-gs-font 10 10 SF
0 setgray
95 652 M
(, &cnt\);) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 641 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 641 M
( cnt;) s
5 630 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 597 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 597 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 586 M
(fputch) s
/F-gs-font 10 10 SF
0 setgray
41 586 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 586 M
(char) s
/F-gs-font 10 10 SF
0 setgray
71 586 M
( c, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 586 M
(int) s
/F-gs-font 10 10 SF
0 setgray
113 586 M
( *cnt, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 586 M
(int) s
/F-gs-font 10 10 SF
0 setgray
173 586 M
( fd\) {) s
5 575 M
(    write\(fd, &c, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
113 575 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
149 575 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 575 M
(char) s
/F-gs-font 10 10 SF
0 setgray
179 575 M
(\)\);) s
5 564 M
(    \(*cnt\) ++;) s
5 553 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 531 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 520 M
(vfprintf) s
/F-gs-font 10 10 SF
0 setgray
53 520 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 520 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 520 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 520 M
(const) s
/F-gs-font 10 10 SF
0 setgray
137 520 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 520 M
(char) s
/F-gs-font 10 10 SF
0 setgray
167 520 M
( *fmt, va_list ap\) {) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 509 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( cnt = 0;) s
5 498 M
(    vprintfmt\(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 498 M
(void) s
/F-gs-font 10 10 SF
0 setgray
119 498 M
(*\)fputch, fd, &cnt, fmt, ap\);) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 487 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 487 M
( cnt;) s
5 476 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 443 M
(fprintf) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 443 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 443 M
(const) s
/F-gs-font 10 10 SF
0 setgray
131 443 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 443 M
(char) s
/F-gs-font 10 10 SF
0 setgray
161 443 M
( *fmt, ...\) {) s
5 432 M
(    va_list ap;) s
5 410 M
(    va_start\(ap, fmt\);) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 399 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 399 M
( cnt = vfprintf\(fd, fmt, ap\);) s
5 388 M
(    va_end\(ap\);) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 366 M
( cnt;) s
5 355 M
(}) s
5 344 M
([ucore/lab8_result/user/libs/initcode.S] ++++++++++++++++++++++++++++++) s
5 333 M
(.text) s
5 322 M
(.globl _start) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 311 M
(_start) s
/F-gs-font 10 10 SF
0 setgray
41 311 M
(:) s
5 300 M
(    # set ebp ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
89 300 M
(for) s
/F-gs-font 10 10 SF
0 setgray
107 300 M
( backtrace) s
5 289 M
(    movl $0x0, %ebp) s
5 267 M
(    # load argc and argv) s
5 256 M
(    movl \(%esp\), %ebx) s
5 245 M
(    lea 0x4\(%esp\), %ecx) s
5 212 M
(    # move down the esp ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 212 M
(register) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(    # since it may cause page fault in backtrace) s
5 190 M
(    subl $0x20, %esp) s
5 168 M
(    # save argc and argv on stack) s
5 157 M
(    pushl %ecx) s
5 146 M
(    pushl %ebx) s
5 124 M
(    # call user-program function) s
5 113 M
(    call umain) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 102 M
(1) s
/F-gs-font 10 10 SF
0 setgray
11 102 M
(:  jmp 1b) s
5 80 M
(    ) s
5 69 M
([ucore/lab8_result/user/libs/syscall.h] ++++++++++++++++++++++++++++++) s
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 58 M
(__USER_LIBS_SYSCALL_H__) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 47 M
(__USER_LIBS_SYSCALL_H__) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 25 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 25 M
(sys_exit) s
/F-gs-font 10 10 SF
0 setgray
77 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 25 M
( error_code\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 14 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 14 M
(sys_fork) s
/F-gs-font 10 10 SF
0 setgray
77 14 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 14 M
(void) s
/F-gs-font 10 10 SF
0 setgray
107 14 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 3 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 3 M
(sys_wait) s
/F-gs-font 10 10 SF
0 setgray
77 3 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 3 M
( pid, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
155 3 M
( *store\);) s
_R
S
%%Page: (22) 22
%%BeginPageSetup
_S
18 36 translate
/pagenum 22 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 707 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 707 M
(sys_exec) s
/F-gs-font 10 10 SF
0 setgray
77 707 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 707 M
(const) s
/F-gs-font 10 10 SF
0 setgray
113 707 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 707 M
(char) s
/F-gs-font 10 10 SF
0 setgray
143 707 M
( *name, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 707 M
(int) s
/F-gs-font 10 10 SF
0 setgray
209 707 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 707 M
(const) s
/F-gs-font 10 10 SF
0 setgray
281 707 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
287 707 M
(char) s
/F-gs-font 10 10 SF
0 setgray
311 707 M
( **argv\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 696 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 696 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 696 M
(sys_yield) s
/F-gs-font 10 10 SF
0 setgray
83 696 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 696 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 696 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 685 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 685 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 685 M
(sys_kill) s
/F-gs-font 10 10 SF
0 setgray
77 685 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 685 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 685 M
( pid\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 674 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 674 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 674 M
(sys_getpid) s
/F-gs-font 10 10 SF
0 setgray
89 674 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 674 M
(void) s
/F-gs-font 10 10 SF
0 setgray
119 674 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 663 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 663 M
(sys_putc) s
/F-gs-font 10 10 SF
0 setgray
77 663 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 663 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 663 M
( c\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 652 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 652 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 652 M
(sys_pgdir) s
/F-gs-font 10 10 SF
0 setgray
83 652 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 652 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 652 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 641 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 641 M
(sys_sleep) s
/F-gs-font 10 10 SF
0 setgray
83 641 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 641 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
137 641 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
161 641 M
( time\);) s
5 630 M
(size_t ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
47 630 M
(sys_gettime) s
/F-gs-font 10 10 SF
0 setgray
113 630 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 630 M
(void) s
/F-gs-font 10 10 SF
0 setgray
143 630 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 608 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 608 M
( stat;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 597 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( dirent;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 575 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 575 M
(sys_open) s
/F-gs-font 10 10 SF
0 setgray
77 575 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 575 M
(const) s
/F-gs-font 10 10 SF
0 setgray
113 575 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 575 M
(char) s
/F-gs-font 10 10 SF
0 setgray
143 575 M
( *path, uint32_t open_flags\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 564 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 564 M
(sys_close) s
/F-gs-font 10 10 SF
0 setgray
83 564 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 564 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 564 M
( fd\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 553 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 553 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 553 M
(sys_read) s
/F-gs-font 10 10 SF
0 setgray
77 553 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 553 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 553 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 553 M
(void) s
/F-gs-font 10 10 SF
0 setgray
155 553 M
( *base, size_t len\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 542 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 542 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 542 M
(sys_write) s
/F-gs-font 10 10 SF
0 setgray
83 542 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 542 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 542 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 542 M
(void) s
/F-gs-font 10 10 SF
0 setgray
161 542 M
( *base, size_t len\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 531 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 531 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 531 M
(sys_seek) s
/F-gs-font 10 10 SF
0 setgray
77 531 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 531 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 531 M
( fd, off_t pos, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 531 M
(int) s
/F-gs-font 10 10 SF
0 setgray
215 531 M
( whence\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 520 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 520 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 520 M
(sys_fstat) s
/F-gs-font 10 10 SF
0 setgray
83 520 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 520 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 520 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 520 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
173 520 M
( stat *stat\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 509 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 509 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 509 M
(sys_fsync) s
/F-gs-font 10 10 SF
0 setgray
83 509 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 509 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 509 M
( fd\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 498 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 498 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 498 M
(sys_getcwd) s
/F-gs-font 10 10 SF
0 setgray
89 498 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 498 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 498 M
( *buffer, size_t len\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 487 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 487 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 487 M
(sys_getdirentry) s
/F-gs-font 10 10 SF
0 setgray
119 487 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 487 M
(int) s
/F-gs-font 10 10 SF
0 setgray
143 487 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 487 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
209 487 M
( dirent *dirent\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 476 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 476 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 476 M
(sys_dup) s
/F-gs-font 10 10 SF
0 setgray
71 476 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 476 M
(int) s
/F-gs-font 10 10 SF
0 setgray
95 476 M
( fd1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 476 M
(int) s
/F-gs-font 10 10 SF
0 setgray
149 476 M
( fd2\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 465 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 465 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 465 M
(sys_lab6_set_priority) s
/F-gs-font 10 10 SF
0 setgray
161 465 M
(\(uint32_t priority\); ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
287 465 M
(//only for lab6) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 432 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 432 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 432 M
(/* !__USER_LIBS_SYSCALL_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
([ucore/lab8_result/user/libs/ulib.h] ++++++++++++++++++++++++++++++) s
5 399 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 399 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 399 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 399 M
(__USER_LIBS_ULIB_H__) s
/F-gs-font 10 10 SF
0 setgray
5 388 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 388 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 388 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 388 M
(__USER_LIBS_ULIB_H__) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 366 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 366 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 344 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 344 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 344 M
(__warn) s
/F-gs-font 10 10 SF
0 setgray
71 344 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 344 M
(const) s
/F-gs-font 10 10 SF
0 setgray
107 344 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 344 M
(char) s
/F-gs-font 10 10 SF
0 setgray
137 344 M
( *file, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 344 M
(int) s
/F-gs-font 10 10 SF
0 setgray
203 344 M
( line, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 344 M
(const) s
/F-gs-font 10 10 SF
0 setgray
275 344 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
281 344 M
(char) s
/F-gs-font 10 10 SF
0 setgray
305 344 M
( *fmt, ...\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 333 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 333 M
( __noreturn ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
101 333 M
(__panic) s
/F-gs-font 10 10 SF
0 setgray
143 333 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 333 M
(const) s
/F-gs-font 10 10 SF
0 setgray
179 333 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 333 M
(char) s
/F-gs-font 10 10 SF
0 setgray
209 333 M
( *file, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 333 M
(int) s
/F-gs-font 10 10 SF
0 setgray
275 333 M
( line, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
317 333 M
(const) s
/F-gs-font 10 10 SF
0 setgray
347 333 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
353 333 M
(char) s
/F-gs-font 10 10 SF
0 setgray
377 333 M
( *fmt, ...\);) s
5 311 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 311 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 311 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 311 M
(warn) s
/F-gs-font 10 10 SF
0 setgray
77 311 M
(\(...\)                                       \\) s
5 300 M
(    __warn\(__FILE__, __LINE__, __VA_ARGS__\)) s
5 278 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 278 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 278 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 278 M
(panic) s
/F-gs-font 10 10 SF
0 setgray
83 278 M
(\(...\)                                      \\) s
5 267 M
(    __panic\(__FILE__, __LINE__, __VA_ARGS__\)) s
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 245 M
(assert) s
/F-gs-font 10 10 SF
0 setgray
89 245 M
(\(x\)                                       \\) s
5 234 M
(    do {                                                \\) s
5 223 M
(        if \(!\(x\)\) {                                     \\) s
5 212 M
(            panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 212 M
("assertion failed: %s") s
/F-gs-font 10 10 SF
0 setgray
245 212 M
(, #x\);          \\) s
5 201 M
(        }                                               \\) s
5 190 M
(    } while \(0\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 168 M
(// static_assert\(x\) will generate a compile-time error if 'x' is false.) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 157 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 157 M
(static_assert) s
/F-gs-font 10 10 SF
0 setgray
131 157 M
(\(x\)                                \\) s
5 146 M
(    switch \(x\) { case 0: case \(x\): ; }) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 124 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 124 M
(fprintf) s
/F-gs-font 10 10 SF
0 setgray
71 124 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
95 124 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 124 M
(const) s
/F-gs-font 10 10 SF
0 setgray
155 124 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
161 124 M
(char) s
/F-gs-font 10 10 SF
0 setgray
185 124 M
( *fmt, ...\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 102 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 102 M
( __noreturn ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
101 102 M
(exit) s
/F-gs-font 10 10 SF
0 setgray
125 102 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 102 M
(int) s
/F-gs-font 10 10 SF
0 setgray
149 102 M
( error_code\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 91 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 91 M
(fork) s
/F-gs-font 10 10 SF
0 setgray
53 91 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 91 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 91 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 80 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 80 M
(wait) s
/F-gs-font 10 10 SF
0 setgray
53 80 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 80 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 80 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 69 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 69 M
(waitpid) s
/F-gs-font 10 10 SF
0 setgray
71 69 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 69 M
(int) s
/F-gs-font 10 10 SF
0 setgray
95 69 M
( pid, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 69 M
(int) s
/F-gs-font 10 10 SF
0 setgray
149 69 M
( *store\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 58 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 58 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 58 M
(yield) s
/F-gs-font 10 10 SF
0 setgray
65 58 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 58 M
(void) s
/F-gs-font 10 10 SF
0 setgray
95 58 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 47 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 47 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 47 M
(kill) s
/F-gs-font 10 10 SF
0 setgray
53 47 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 47 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 47 M
( pid\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 36 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 36 M
(getpid) s
/F-gs-font 10 10 SF
0 setgray
65 36 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 36 M
(void) s
/F-gs-font 10 10 SF
0 setgray
95 36 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 25 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 25 M
(print_pgdir) s
/F-gs-font 10 10 SF
0 setgray
101 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 25 M
(void) s
/F-gs-font 10 10 SF
0 setgray
131 25 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 14 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 14 M
(sleep) s
/F-gs-font 10 10 SF
0 setgray
59 14 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 14 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
113 14 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 14 M
(int) s
/F-gs-font 10 10 SF
0 setgray
137 14 M
( time\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
53 3 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 3 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
83 3 M
(gettime_msec) s
/F-gs-font 10 10 SF
0 setgray
155 3 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
161 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
185 3 M
(\);) s
_R
S
%%Page: (23) 23
%%BeginPageSetup
_S
18 36 translate
/pagenum 23 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 707 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 707 M
(__exec) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 707 M
(const) s
/F-gs-font 10 10 SF
0 setgray
101 707 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 707 M
(char) s
/F-gs-font 10 10 SF
0 setgray
131 707 M
( *name, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 707 M
(const) s
/F-gs-font 10 10 SF
0 setgray
209 707 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 707 M
(char) s
/F-gs-font 10 10 SF
0 setgray
239 707 M
( **argv\);) s
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 685 M
(__exec0) s
/F-gs-font 10 10 SF
0 setgray
95 685 M
(\(name, path, ...\)                \\) s
5 674 M
(\({ const char *argv[] = {path, ##__VA_ARGS__, NULL}; __exec\(name, argv\); }\)) s
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 652 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 652 M
(exec) s
/F-gs-font 10 10 SF
0 setgray
77 652 M
(\(path, ...\)                         __exec0\(NULL, path, ##__VA_ARGS__\)) s
5 641 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 641 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 641 M
(nexec) s
/F-gs-font 10 10 SF
0 setgray
83 641 M
(\(name, path, ...\)                  __exec0\(name, path, ##__VA_ARGS__\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 619 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 619 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 619 M
(lab6_set_priority) s
/F-gs-font 10 10 SF
0 setgray
137 619 M
(\(uint32_t priority\); ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
263 619 M
(//only for lab6) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 597 M
(/* !__USER_LIBS_ULIB_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
([ucore/lab8_result/user/libs/dir.h] ++++++++++++++++++++++++++++++) s
5 564 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 564 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 564 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 564 M
(__USER_LIBS_DIR_H__) s
/F-gs-font 10 10 SF
0 setgray
5 553 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 553 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 553 M
(__USER_LIBS_DIR_H__) s
/F-gs-font 10 10 SF
0 setgray
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 531 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 531 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 520 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 520 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 520 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 520 M
(<dirent.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 498 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 498 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 498 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 498 M
( {) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 487 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( fd;) s
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 476 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 476 M
( dirent dirent;) s
5 465 M
(} DIR;) s
5 443 M
(DIR *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 443 M
(opendir) s
/F-gs-font 10 10 SF
0 setgray
77 443 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 443 M
(const) s
/F-gs-font 10 10 SF
0 setgray
113 443 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 443 M
(char) s
/F-gs-font 10 10 SF
0 setgray
143 443 M
( *path\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 432 M
( dirent *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
95 432 M
(readdir) s
/F-gs-font 10 10 SF
0 setgray
137 432 M
(\(DIR *dirp\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 421 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 421 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 421 M
(closedir) s
/F-gs-font 10 10 SF
0 setgray
83 421 M
(\(DIR *dirp\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 410 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 410 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 410 M
(chdir) s
/F-gs-font 10 10 SF
0 setgray
59 410 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 410 M
(const) s
/F-gs-font 10 10 SF
0 setgray
95 410 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 410 M
(char) s
/F-gs-font 10 10 SF
0 setgray
125 410 M
( *path\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 399 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 399 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 399 M
(getcwd) s
/F-gs-font 10 10 SF
0 setgray
65 399 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 399 M
(char) s
/F-gs-font 10 10 SF
0 setgray
95 399 M
( *buffer, size_t len\);) s
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 377 M
(/* !__USER_LIBS_DIR_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
([ucore/lab8_result/user/libs/file.c] ++++++++++++++++++++++++++++++) s
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 344 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 333 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 322 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 322 M
(<syscall.h>) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 311 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 311 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 311 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 300 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 300 M
(<stat.h>) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 289 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 289 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 278 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 278 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 278 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 256 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 245 M
(open) s
/F-gs-font 10 10 SF
0 setgray
29 245 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 245 M
(const) s
/F-gs-font 10 10 SF
0 setgray
65 245 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 245 M
(char) s
/F-gs-font 10 10 SF
0 setgray
95 245 M
( *path, uint32_t open_flags\) {) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 234 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 234 M
( sys_open\(path, open_flags\);) s
5 223 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 201 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 190 M
(close) s
/F-gs-font 10 10 SF
0 setgray
35 190 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 190 M
(int) s
/F-gs-font 10 10 SF
0 setgray
59 190 M
( fd\) {) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 179 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 179 M
( sys_close\(fd\);) s
5 168 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 135 M
(read) s
/F-gs-font 10 10 SF
0 setgray
29 135 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 135 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 135 M
(void) s
/F-gs-font 10 10 SF
0 setgray
107 135 M
( *base, size_t len\) {) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 124 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 124 M
( sys_read\(fd, base, len\);) s
5 113 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 80 M
(write) s
/F-gs-font 10 10 SF
0 setgray
35 80 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
59 80 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 80 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 80 M
( *base, size_t len\) {) s
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 69 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 69 M
( sys_write\(fd, base, len\);) s
5 58 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 25 M
(seek) s
/F-gs-font 10 10 SF
0 setgray
29 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 25 M
( fd, off_t pos, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
167 25 M
( whence\) {) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 14 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
( sys_seek\(fd, pos, whence\);) s
5 3 M
(}) s
_R
S
%%Page: (24) 24
%%BeginPageSetup
_S
18 36 translate
/pagenum 24 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 696 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 685 M
(fstat) s
/F-gs-font 10 10 SF
0 setgray
35 685 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 685 M
(int) s
/F-gs-font 10 10 SF
0 setgray
59 685 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 685 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 685 M
( stat *stat\) {) s
5 674 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 674 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 674 M
( sys_fstat\(fd, stat\);) s
5 663 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 630 M
(fsync) s
/F-gs-font 10 10 SF
0 setgray
35 630 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 630 M
(int) s
/F-gs-font 10 10 SF
0 setgray
59 630 M
( fd\) {) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 619 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 619 M
( sys_fsync\(fd\);) s
5 608 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 586 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 575 M
(dup2) s
/F-gs-font 10 10 SF
0 setgray
29 575 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 575 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 575 M
( fd1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 575 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 575 M
( fd2\) {) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 564 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 564 M
( sys_dup\(fd1, fd2\);) s
5 553 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 531 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 531 M
(char) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 520 M
(transmode) s
/F-gs-font 10 10 SF
0 setgray
59 520 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 520 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 520 M
( stat *stat\) {) s
5 509 M
(    uint32_t mode = stat->st_mode;) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 498 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 498 M
( \(S_ISREG\(mode\)\) ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
143 498 M
(return) s
/F-gs-font 10 10 SF
0 setgray
179 498 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
185 498 M
('r') s
/F-gs-font 10 10 SF
0 setgray
203 498 M
(;) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 487 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( \(S_ISDIR\(mode\)\) ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
143 487 M
(return) s
/F-gs-font 10 10 SF
0 setgray
179 487 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
185 487 M
('d') s
/F-gs-font 10 10 SF
0 setgray
203 487 M
(;) s
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 476 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 476 M
( \(S_ISLNK\(mode\)\) ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
143 476 M
(return) s
/F-gs-font 10 10 SF
0 setgray
179 476 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
185 476 M
('l') s
/F-gs-font 10 10 SF
0 setgray
203 476 M
(;) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 465 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 465 M
( \(S_ISCHR\(mode\)\) ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
143 465 M
(return) s
/F-gs-font 10 10 SF
0 setgray
179 465 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
185 465 M
('c') s
/F-gs-font 10 10 SF
0 setgray
203 465 M
(;) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( \(S_ISBLK\(mode\)\) ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
143 454 M
(return) s
/F-gs-font 10 10 SF
0 setgray
179 454 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
185 454 M
('b') s
/F-gs-font 10 10 SF
0 setgray
203 454 M
(;) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 443 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 443 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 443 M
('-') s
/F-gs-font 10 10 SF
0 setgray
89 443 M
(;) s
5 432 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 410 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 399 M
(print_stat) s
/F-gs-font 10 10 SF
0 setgray
65 399 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 399 M
(const) s
/F-gs-font 10 10 SF
0 setgray
101 399 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 399 M
(char) s
/F-gs-font 10 10 SF
0 setgray
131 399 M
( *name, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 399 M
(int) s
/F-gs-font 10 10 SF
0 setgray
197 399 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 399 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
263 399 M
( stat *stat\) {) s
5 388 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 388 M
("[%03d] %s\\n") s
/F-gs-font 10 10 SF
0 setgray
155 388 M
(, fd, name\);) s
5 377 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 377 M
("    mode    : %c\\n") s
/F-gs-font 10 10 SF
0 setgray
197 377 M
(, transmode\(stat\)\);) s
5 366 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 366 M
("    links   : %lu\\n") s
/F-gs-font 10 10 SF
0 setgray
203 366 M
(, stat->st_nlinks\);) s
5 355 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 355 M
("    blocks  : %lu\\n") s
/F-gs-font 10 10 SF
0 setgray
203 355 M
(, stat->st_blocks\);) s
5 344 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 344 M
("    size    : %lu\\n") s
/F-gs-font 10 10 SF
0 setgray
203 344 M
(, stat->st_size\);) s
5 333 M
(}) s
5 311 M
([ucore/lab8_result/user/libs/lock.h] ++++++++++++++++++++++++++++++) s
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 300 M
(__USER_LIBS_LOCK_H__) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 289 M
(__USER_LIBS_LOCK_H__) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 267 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 267 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 267 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 256 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 256 M
(<atomic.h>) s
/F-gs-font 10 10 SF
0 setgray
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 245 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 245 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 223 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 223 M
(INIT_LOCK) s
/F-gs-font 10 10 SF
0 setgray
107 223 M
(           {0}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 201 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 201 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 201 M
( bool lock_t;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 179 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 179 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 179 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 168 M
(lock_init) s
/F-gs-font 10 10 SF
0 setgray
59 168 M
(\(lock_t *l\) {) s
5 157 M
(    *l = 0;) s
5 146 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 124 M
( inline bool) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 113 M
(try_lock) s
/F-gs-font 10 10 SF
0 setgray
53 113 M
(\(lock_t *l\) {) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 102 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 102 M
( test_and_set_bit\(0, l\);) s
5 91 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 69 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 58 M
(lock) s
/F-gs-font 10 10 SF
0 setgray
29 58 M
(\(lock_t *l\) {) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 47 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 47 M
( \(try_lock\(l\)\) {) s
5 36 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 36 M
( step = 0;) s
5 25 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 25 M
(do) s
/F-gs-font 10 10 SF
0 setgray
65 25 M
( {) s
5 14 M
(            yield\(\);) s
5 3 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 3 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 3 M
( \(++ step == 100\) {) s
_R
S
%%Page: (25) 25
%%BeginPageSetup
_S
18 36 translate
/pagenum 25 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(                step = 0;) s
5 696 M
(                sleep\(10\);) s
5 685 M
(            }) s
5 674 M
(        } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 674 M
(while) s
/F-gs-font 10 10 SF
0 setgray
95 674 M
( \(try_lock\(l\)\);) s
5 663 M
(    }) s
5 652 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 630 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 630 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 630 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 619 M
(unlock) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
(\(lock_t *l\) {) s
5 608 M
(    test_and_clear_bit\(0, l\);) s
5 597 M
(}) s
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 575 M
(/* !__USER_LIBS_LOCK_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 553 M
([ucore/lab8_result/user/spin.c] ++++++++++++++++++++++++++++++) s
5 542 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 542 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 542 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 542 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 531 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 531 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 509 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 498 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 498 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 498 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 498 M
(\) {) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 487 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( pid, ret, i ,j;) s
5 476 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 476 M
("I am the parent. Forking the child...\\n") s
/F-gs-font 10 10 SF
0 setgray
323 476 M
(\);) s
5 465 M
(    pid = fork\(\);) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( \(pid== 0\) {) s
5 443 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 443 M
("I am the child. spinning ...\\n") s
/F-gs-font 10 10 SF
0 setgray
293 443 M
(\);) s
5 432 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 432 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 432 M
( \(1\);) s
5 421 M
(    }) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 421 M
(else) s
/F-gs-font 10 10 SF
0 setgray
59 421 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 421 M
(if) s
/F-gs-font 10 10 SF
0 setgray
77 421 M
( \(pid<0\) {) s
5 410 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 410 M
("fork child error\\n") s
/F-gs-font 10 10 SF
0 setgray
209 410 M
(\);) s
5 399 M
(    }) s
5 388 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 388 M
("I am the parent. Running the child...\\n") s
/F-gs-font 10 10 SF
0 setgray
323 388 M
(\);) s
5 366 M
(    yield\(\);) s
5 355 M
(    yield\(\);) s
5 344 M
(    yield\(\);) s
5 333 M
(    ) s
5 322 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 322 M
("I am the parent.  Killing the child...\\n") s
/F-gs-font 10 10 SF
0 setgray
329 322 M
(\);) s
5 300 M
(    assert\(\(ret = kill\(pid\)\) == 0\);) s
5 289 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 289 M
("kill returns %d\\n") s
/F-gs-font 10 10 SF
0 setgray
191 289 M
(, ret\);) s
5 267 M
(    assert\(\(ret = waitpid\(pid, NULL\)\) == 0\);) s
5 256 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 256 M
("wait returns %d\\n") s
/F-gs-font 10 10 SF
0 setgray
191 256 M
(, ret\);) s
5 234 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 234 M
("spin may pass.\\n") s
/F-gs-font 10 10 SF
0 setgray
185 234 M
(\);) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 223 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 223 M
( 0;) s
5 212 M
(}) s
5 190 M
([ucore/lab8_result/user/sleep.c] ++++++++++++++++++++++++++++++) s
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 179 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 168 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 168 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 135 M
(sleepy) s
/F-gs-font 10 10 SF
0 setgray
41 135 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
65 135 M
( pid\) {) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( i, time = 100;) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( \(i = 0; i < 10; i ++\) {) s
5 102 M
(        sleep\(time\);) s
5 91 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 91 M
("sleep %d x %d slices.\\n") s
/F-gs-font 10 10 SF
0 setgray
251 91 M
(, i + 1, time\);) s
5 80 M
(    }) s
5 69 M
(    exit\(0\);) s
5 58 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 25 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 25 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 25 M
(\) {) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 14 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 14 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 14 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 14 M
( time = gettime_msec\(\);) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( pid1, exit_code;) s
_R
S
%%Page: (26) 26
%%BeginPageSetup
_S
18 36 translate
/pagenum 26 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 696 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 696 M
( \(\(pid1 = fork\(\)\) == 0\) {) s
5 685 M
(        sleepy\(pid1\);) s
5 674 M
(    }) s
5 663 M
(    ) s
5 652 M
(    assert\(waitpid\(pid1, &exit_code\) == 0 && exit_code == 0\);) s
5 641 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 641 M
("use %04d msecs.\\n") s
/F-gs-font 10 10 SF
0 setgray
191 641 M
(, gettime_msec\(\) - time\);) s
5 630 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 630 M
("sleep pass.\\n") s
/F-gs-font 10 10 SF
0 setgray
167 630 M
(\);) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 619 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 619 M
( 0;) s
5 608 M
(}) s
5 586 M
([ucore/lab8_result/user/forktree.c] ++++++++++++++++++++++++++++++) s
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 575 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 575 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
5 564 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 564 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 564 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 564 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 553 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 553 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 553 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 553 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 531 M
(DEPTH) s
/F-gs-font 10 10 SF
0 setgray
83 531 M
( 4) s
5 520 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 520 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 520 M
(SLEEP_TIME) s
/F-gs-font 10 10 SF
0 setgray
113 520 M
( 400) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 509 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 509 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 509 M
(forktree) s
/F-gs-font 10 10 SF
0 setgray
83 509 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 509 M
(const) s
/F-gs-font 10 10 SF
0 setgray
119 509 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 509 M
(char) s
/F-gs-font 10 10 SF
0 setgray
149 509 M
( *cur\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 487 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 476 M
(forkchild) s
/F-gs-font 10 10 SF
0 setgray
59 476 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 476 M
(const) s
/F-gs-font 10 10 SF
0 setgray
95 476 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 476 M
(char) s
/F-gs-font 10 10 SF
0 setgray
125 476 M
( *cur, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 476 M
(char) s
/F-gs-font 10 10 SF
0 setgray
191 476 M
( branch\) {) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 465 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 465 M
( nxt[DEPTH + 1];) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 443 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
( \(strlen\(cur\) >= DEPTH\)) s
5 432 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 432 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 432 M
(;) s
5 410 M
(    snprintf\(nxt, DEPTH + 1, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 410 M
("%s%c") s
/F-gs-font 10 10 SF
0 setgray
215 410 M
(, cur, branch\);) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 399 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
( \(fork\(\) == 0\) {) s
5 388 M
(        forktree\(nxt\);) s
5 377 M
(        yield\(\);) s
5 366 M
(        exit\(0\);) s
5 355 M
(    }) s
5 344 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 322 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 311 M
(forktree) s
/F-gs-font 10 10 SF
0 setgray
53 311 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 311 M
(const) s
/F-gs-font 10 10 SF
0 setgray
89 311 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 311 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 311 M
( *cur\) {) s
5 300 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 300 M
("%04x: I am '%s'\\n") s
/F-gs-font 10 10 SF
0 setgray
191 300 M
(, getpid\(\), cur\);) s
5 278 M
(    forkchild\(cur, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
119 278 M
('0') s
/F-gs-font 10 10 SF
0 setgray
137 278 M
(\);) s
5 267 M
(    forkchild\(cur, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
119 267 M
('1') s
/F-gs-font 10 10 SF
0 setgray
137 267 M
(\);) s
5 256 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 234 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 223 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 223 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 223 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 223 M
(\) {) s
5 212 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 212 M
("forktree process will sleep %d ticks\\n") s
/F-gs-font 10 10 SF
0 setgray
317 212 M
(,SLEEP_TIME\);) s
5 201 M
(    sleep\(SLEEP_TIME\);) s
5 190 M
(    forktree\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 190 M
("") s
/F-gs-font 10 10 SF
0 setgray
95 190 M
(\);) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 179 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 179 M
( 0;) s
5 168 M
(}) s
5 146 M
([ucore/lab8_result/user/divzero.c] ++++++++++++++++++++++++++++++) s
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 135 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 135 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 124 M
(<ulib.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 102 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 102 M
( zero;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 69 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 69 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 69 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 69 M
(\) {) s
5 58 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 58 M
("value is %d.\\n") s
/F-gs-font 10 10 SF
0 setgray
173 58 M
(, 1 / zero\);) s
5 47 M
(    panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 47 M
("FAIL: T.T\\n") s
/F-gs-font 10 10 SF
0 setgray
143 47 M
(\);) s
5 36 M
(}) s
5 14 M
([ucore/lab8_result/tools/sign.c] ++++++++++++++++++++++++++++++) s
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 3 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 3 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (27) 27
%%BeginPageSetup
_S
18 36 translate
/pagenum 27 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 707 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 707 M
(<errno.h>) s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 696 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 696 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 696 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 685 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 685 M
(<sys/stat.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 652 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 652 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 652 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 652 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 652 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 652 M
( *argv[]\) {) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 641 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 641 M
( stat st;) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 630 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 630 M
( \(argc != 3\) {) s
5 619 M
(        fprintf\(stderr, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 619 M
("Usage: <input filename> <output filename>\\n") s
/F-gs-font 10 10 SF
0 setgray
419 619 M
(\);) s
5 608 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 608 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 608 M
( -1;) s
5 597 M
(    }) s
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 586 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 586 M
( \(stat\(argv[1], &st\) != 0\) {) s
5 575 M
(        fprintf\(stderr, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 575 M
("Error opening file '%s': %s\\n") s
/F-gs-font 10 10 SF
0 setgray
335 575 M
(, argv[1], strerror\(errno\)\);) s
5 564 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 564 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 564 M
( -1;) s
5 553 M
(    }) s
5 542 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 542 M
("'%s' size: %lld bytes\\n") s
/F-gs-font 10 10 SF
0 setgray
221 542 M
(, argv[1], \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
293 542 M
(long) s
/F-gs-font 10 10 SF
0 setgray
317 542 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
323 542 M
(long) s
/F-gs-font 10 10 SF
0 setgray
347 542 M
(\)st.st_size\);) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 531 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( \(st.st_size > 510\) {) s
5 520 M
(        fprintf\(stderr, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 520 M
("%lld >> 510!!\\n") s
/F-gs-font 10 10 SF
0 setgray
251 520 M
(, \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
269 520 M
(long) s
/F-gs-font 10 10 SF
0 setgray
293 520 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
299 520 M
(long) s
/F-gs-font 10 10 SF
0 setgray
323 520 M
(\)st.st_size\);) s
5 509 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 509 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 509 M
( -1;) s
5 498 M
(    }) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 487 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 487 M
( buf[512];) s
5 476 M
(    memset\(buf, 0, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
119 476 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
155 476 M
(\(buf\)\);) s
5 465 M
(    FILE *ifp = fopen\(argv[1], ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
191 465 M
("rb") s
/F-gs-font 10 10 SF
0 setgray
215 465 M
(\);) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 454 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 454 M
( size = fread\(buf, 1, st.st_size, ifp\);) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 443 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
( \(size != st.st_size\) {) s
5 432 M
(        fprintf\(stderr, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 432 M
("read '%s' error, size is %d.\\n") s
/F-gs-font 10 10 SF
0 setgray
341 432 M
(, argv[1], size\);) s
5 421 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 421 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 421 M
( -1;) s
5 410 M
(    }) s
5 399 M
(    fclose\(ifp\);) s
5 388 M
(    buf[510] = 0x55;) s
5 377 M
(    buf[511] = 0xAA;) s
5 366 M
(    FILE *ofp = fopen\(argv[2], ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
191 366 M
("wb+") s
/F-gs-font 10 10 SF
0 setgray
221 366 M
(\);) s
5 355 M
(    size = fwrite\(buf, 1, 512, ofp\);) s
5 344 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 344 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 344 M
( \(size != 512\) {) s
5 333 M
(        fprintf\(stderr, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 333 M
("write '%s' error, size is %d.\\n") s
/F-gs-font 10 10 SF
0 setgray
347 333 M
(, argv[2], size\);) s
5 322 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 322 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 322 M
( -1;) s
5 311 M
(    }) s
5 300 M
(    fclose\(ofp\);) s
5 289 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 289 M
("build 512 bytes boot sector: '%s' success!\\n") s
/F-gs-font 10 10 SF
0 setgray
347 289 M
(, argv[2]\);) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 278 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 278 M
( 0;) s
5 267 M
(}) s
5 245 M
([ucore/lab8_result/tools/mksfs.c] ++++++++++++++++++++++++++++++) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 234 M
(/* prefer to compile mksfs on 64-bit linux systems.) s
5 212 M
(Use a compiler-specific macro.) s
5 190 M
(For example:) s
5 168 M
(#if defined\(__i386__\)) s
5 157 M
(// IA-32) s
5 146 M
(#elif defined\(__x86_64__\)) s
5 135 M
(// AMD64) s
5 124 M
(#else) s
5 113 M
(# error Unsupported architecture) s
5 102 M
(#endif) s
5 80 M
(*/) s
/F-gs-font 10 10 SF
0 setgray
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 58 M
(_GNU_SOURCE) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 47 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 47 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 36 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 36 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 25 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 25 M
(<stdlib.h>) s
/F-gs-font 10 10 SF
0 setgray
5 14 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 14 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 14 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 14 M
(<stdint.h>) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 3 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 3 M
(<limits.h>) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (28) 28
%%BeginPageSetup
_S
18 36 translate
/pagenum 28 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 707 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 707 M
(<dirent.h>) s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 696 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 696 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 696 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 685 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 685 M
(<fcntl.h>) s
/F-gs-font 10 10 SF
0 setgray
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 674 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 674 M
(<sys/stat.h>) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 663 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 663 M
(<sys/types.h>) s
/F-gs-font 10 10 SF
0 setgray
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 652 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 652 M
(<errno.h>) s
/F-gs-font 10 10 SF
0 setgray
5 641 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 641 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 641 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 641 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 619 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 619 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 619 M
( bool;) s
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 597 M
(__error) s
/F-gs-font 10 10 SF
0 setgray
95 597 M
(\(msg, quit, ...\)                                                         \\) s
5 586 M
(    do {                                                                                \\) s
5 575 M
(        fprintf\(stderr, #msg ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 575 M
(": function %s - line %d: ") s
/F-gs-font 10 10 SF
0 setgray
341 575 M
(, __FUNCTION__, __LINE__\);      \\) s
5 564 M
(        if \(errno != 0\) {                                                               \\) s
5 553 M
(            fprintf\(stderr, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 553 M
("[error] %s: ") s
/F-gs-font 10 10 SF
0 setgray
257 553 M
(, strerror\(errno\)\);                           \\) s
5 542 M
(        }                                                                               \\) s
5 531 M
(        fprintf\(stderr, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 531 M
("\\n\\t") s
/F-gs-font 10 10 SF
0 setgray
185 531 M
(\), fprintf\(stderr, __VA_ARGS__\);                          \\) s
5 520 M
(        errno = 0;                                                                      \\) s
5 509 M
(        if \(quit\) {                                                                     \\) s
5 498 M
(            exit\(-1\);                                                                   \\) s
5 487 M
(        }                                                                               \\) s
5 476 M
(    } while \(0\)) s
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 454 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 454 M
(warn) s
/F-gs-font 10 10 SF
0 setgray
77 454 M
(\(...\)           __error\(warn, 0, __VA_ARGS__\)) s
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 443 M
(bug) s
/F-gs-font 10 10 SF
0 setgray
71 443 M
(\(...\)            __error\(bug, 1, __VA_ARGS__\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 421 M
(/*) s
5 410 M
(static_assert\(cond, msg\) is defined in /usr/include/assert.h) s
5 399 M
(#define static_assert\(x\)                                                                \\) s
5 388 M
(    switch \(x\) {case 0: case \(x\): ; }) s
5 377 M
(*/) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 355 M
(/* 2^31 + 2^29 - 2^25 + 2^22 - 2^19 - 2^16 + 1 */) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 344 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 344 M
(GOLDEN_RATIO_PRIME_32) s
/F-gs-font 10 10 SF
0 setgray
179 344 M
(       0x9e370001UL) s
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 322 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 322 M
(HASH_SHIFT) s
/F-gs-font 10 10 SF
0 setgray
113 322 M
(                              10) s
5 311 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 311 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 311 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 311 M
(HASH_LIST_SIZE) s
/F-gs-font 10 10 SF
0 setgray
137 311 M
(                          \(1 << HASH_SHIFT\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( inline uint32_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 278 M
(__hash32) s
/F-gs-font 10 10 SF
0 setgray
53 278 M
(\(uint32_t val, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 278 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
191 278 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
215 278 M
( bits\) {) s
5 267 M
(    uint32_t hash = val * GOLDEN_RATIO_PRIME_32;) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 256 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 256 M
( \(hash >> \(32 - bits\)\);) s
5 245 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 223 M
( uint32_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 212 M
(hash32) s
/F-gs-font 10 10 SF
0 setgray
41 212 M
(\(uint32_t val\) {) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 201 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 201 M
( __hash32\(val, HASH_SHIFT\);) s
5 190 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 168 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 168 M
( uint32_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 157 M
(hash64) s
/F-gs-font 10 10 SF
0 setgray
41 157 M
(\(uint64_t val\) {) s
5 146 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 146 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 146 M
( __hash32\(\(uint32_t\)val, HASH_SHIFT\);) s
5 135 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 113 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 113 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 102 M
(safe_malloc) s
/F-gs-font 10 10 SF
0 setgray
71 102 M
(\(size_t size\) {) s
5 91 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 91 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 91 M
( *ret;) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 80 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 80 M
( \(\(ret = malloc\(size\)\) == NULL\) {) s
5 69 M
(        bug\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 69 M
("malloc %lu bytes failed.\\n") s
/F-gs-font 10 10 SF
0 setgray
245 69 M
(, \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
263 69 M
(long) s
/F-gs-font 10 10 SF
0 setgray
287 69 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
293 69 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
341 69 M
(\)size\);) s
5 58 M
(    }) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 47 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
( ret;) s
5 36 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 14 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 3 M
(safe_strdup) s
/F-gs-font 10 10 SF
0 setgray
71 3 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 3 M
(const) s
/F-gs-font 10 10 SF
0 setgray
107 3 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 3 M
(char) s
/F-gs-font 10 10 SF
0 setgray
137 3 M
( *str\) {) s
_R
S
%%Page: (29) 29
%%BeginPageSetup
_S
18 36 translate
/pagenum 29 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 707 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 707 M
( *ret;) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 696 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 696 M
( \(\(ret = strdup\(str\)\) == NULL\) {) s
5 685 M
(        bug\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 685 M
("strdup failed: %s\\n") s
/F-gs-font 10 10 SF
0 setgray
203 685 M
(, str\);) s
5 674 M
(    }) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 663 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 663 M
( ret;) s
5 652 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 630 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 630 M
( stat *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 619 M
(safe_stat) s
/F-gs-font 10 10 SF
0 setgray
59 619 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 619 M
(const) s
/F-gs-font 10 10 SF
0 setgray
95 619 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 619 M
(char) s
/F-gs-font 10 10 SF
0 setgray
125 619 M
( *filename\) {) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 608 M
(static) s
/F-gs-font 10 10 SF
0 setgray
65 608 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 608 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 608 M
( stat __stat;) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 597 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( \(stat\(filename, &__stat\) != 0\) {) s
5 586 M
(        bug\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 586 M
("stat %s failed.\\n") s
/F-gs-font 10 10 SF
0 setgray
191 586 M
(, filename\);) s
5 575 M
(    }) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 564 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 564 M
( &__stat;) s
5 553 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 531 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( stat *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 520 M
(safe_fstat) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 520 M
(int) s
/F-gs-font 10 10 SF
0 setgray
89 520 M
( fd\) {) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 509 M
(static) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 509 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 509 M
( stat __stat;) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 498 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 498 M
( \(fstat\(fd, &__stat\) != 0\) {) s
5 487 M
(        bug\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 487 M
("fstat %d failed.\\n") s
/F-gs-font 10 10 SF
0 setgray
197 487 M
(, fd\);) s
5 476 M
(    }) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 465 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 465 M
( &__stat;) s
5 454 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 432 M
( stat *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 421 M
(safe_lstat) s
/F-gs-font 10 10 SF
0 setgray
65 421 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 421 M
(const) s
/F-gs-font 10 10 SF
0 setgray
101 421 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 421 M
(char) s
/F-gs-font 10 10 SF
0 setgray
131 421 M
( *name\) {) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 410 M
(static) s
/F-gs-font 10 10 SF
0 setgray
65 410 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 410 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 410 M
( stat __stat;) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 399 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
( \(lstat\(name, &__stat\) != 0\) {) s
5 388 M
(        bug\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 388 M
("lstat '%s' failed.\\n") s
/F-gs-font 10 10 SF
0 setgray
209 388 M
(, name\);) s
5 377 M
(    }) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 366 M
( &__stat;) s
5 355 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 333 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 322 M
(safe_fchdir) s
/F-gs-font 10 10 SF
0 setgray
71 322 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 322 M
(int) s
/F-gs-font 10 10 SF
0 setgray
95 322 M
( fd\) {) s
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 311 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 311 M
( \(fchdir\(fd\) != 0\) {) s
5 300 M
(        bug\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 300 M
("fchdir failed %d.\\n") s
/F-gs-font 10 10 SF
0 setgray
203 300 M
(, fd\);) s
5 289 M
(    }) s
5 278 M
(}) s
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 256 M
(SFS_MAGIC) s
/F-gs-font 10 10 SF
0 setgray
107 256 M
(                               0x2f8dbe2a) s
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 245 M
(SFS_NDIRECT) s
/F-gs-font 10 10 SF
0 setgray
119 245 M
(                             12) s
5 234 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 234 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 234 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 234 M
(SFS_BLKSIZE) s
/F-gs-font 10 10 SF
0 setgray
119 234 M
(                             4096                                    // 4K) s
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 223 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 223 M
(SFS_MAX_NBLKS) s
/F-gs-font 10 10 SF
0 setgray
131 223 M
(                           \(1024UL * 512\)                          // 4K ) s
5 212 M
(* 512K) s
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 201 M
(SFS_MAX_INFO_LEN) s
/F-gs-font 10 10 SF
0 setgray
149 201 M
(                        31) s
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 190 M
(SFS_MAX_FNAME_LEN) s
/F-gs-font 10 10 SF
0 setgray
155 190 M
(                       255) s
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 179 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 179 M
(SFS_MAX_FILE_SIZE) s
/F-gs-font 10 10 SF
0 setgray
155 179 M
(                       \(1024UL * 1024 * 128\)                   // 128) s
5 168 M
(M) s
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 146 M
(SFS_BLKBITS) s
/F-gs-font 10 10 SF
0 setgray
119 146 M
(                             \(SFS_BLKSIZE * CHAR_BIT\)) s
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 135 M
(SFS_TYPE_FILE) s
/F-gs-font 10 10 SF
0 setgray
131 135 M
(                           1) s
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 124 M
(SFS_TYPE_DIR) s
/F-gs-font 10 10 SF
0 setgray
125 124 M
(                            2) s
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 113 M
(SFS_TYPE_LINK) s
/F-gs-font 10 10 SF
0 setgray
131 113 M
(                           3) s
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 91 M
(SFS_BLKN_SUPER) s
/F-gs-font 10 10 SF
0 setgray
137 91 M
(                          0) s
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 80 M
(SFS_BLKN_ROOT) s
/F-gs-font 10 10 SF
0 setgray
131 80 M
(                           1) s
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 69 M
(SFS_BLKN_FREEMAP) s
/F-gs-font 10 10 SF
0 setgray
149 69 M
(                        2) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 47 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 47 M
( cache_block {) s
5 36 M
(    uint32_t ino;) s
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 25 M
( cache_block *hash_next;) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 14 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 14 M
( *cache;) s
5 3 M
(};) s
_R
S
%%Page: (30) 30
%%BeginPageSetup
_S
18 36 translate
/pagenum 30 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 696 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 696 M
( cache_inode {) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 685 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 685 M
( inode {) s
5 674 M
(        uint32_t size;) s
5 663 M
(        uint16_t type;) s
5 652 M
(        uint16_t nlinks;) s
5 641 M
(        uint32_t blocks;) s
5 630 M
(        uint32_t direct[SFS_NDIRECT];) s
5 619 M
(        uint32_t indirect;) s
5 608 M
(        uint32_t db_indirect;) s
5 597 M
(    } inode;) s
5 586 M
(    ino_t real;) s
5 575 M
(    uint32_t ino;) s
5 564 M
(    uint32_t nblks;) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 553 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 553 M
( cache_block *l1, *l2;) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 542 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 542 M
( cache_inode *hash_next;) s
5 531 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 509 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 509 M
( sfs_fs {) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 498 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 498 M
( {) s
5 487 M
(        uint32_t magic;) s
5 476 M
(        uint32_t blocks;) s
5 465 M
(        uint32_t unused_blocks;) s
5 454 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 454 M
(char) s
/F-gs-font 10 10 SF
0 setgray
77 454 M
( info[SFS_MAX_INFO_LEN + 1];) s
5 443 M
(    } super;) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 432 M
( subpath {) s
5 421 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 421 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 421 M
( subpath *next, *prev;) s
5 410 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 410 M
(char) s
/F-gs-font 10 10 SF
0 setgray
77 410 M
( *subname;) s
5 399 M
(    } __sp_nil, *sp_root, *sp_end;) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 388 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 388 M
( imgfd;) s
5 377 M
(    uint32_t ninos, next_ino;) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 366 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 366 M
( cache_inode *root;) s
5 355 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 355 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 355 M
( cache_inode *inodes[HASH_LIST_SIZE];) s
5 344 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 344 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 344 M
( cache_block *blocks[HASH_LIST_SIZE];) s
5 333 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 311 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 311 M
( sfs_entry {) s
5 300 M
(    uint32_t ino;) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 289 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 289 M
( name[SFS_MAX_FNAME_LEN + 1];) s
5 278 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 256 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 256 M
( uint32_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 245 M
(sfs_alloc_ino) s
/F-gs-font 10 10 SF
0 setgray
83 245 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 245 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 245 M
( sfs_fs *sfs\) {) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 234 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 234 M
( \(sfs->next_ino < sfs->ninos\) {) s
5 223 M
(        sfs->super.unused_blocks --;) s
5 212 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 212 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 212 M
( sfs->next_ino ++;) s
5 201 M
(    }) s
5 190 M
(    bug\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 190 M
("out of disk space.\\n") s
/F-gs-font 10 10 SF
0 setgray
185 190 M
(\);) s
5 179 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 157 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 157 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 157 M
( cache_block *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 146 M
(alloc_cache_block) s
/F-gs-font 10 10 SF
0 setgray
107 146 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 146 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
149 146 M
( sfs_fs *sfs, uint32_t ino\) {) s
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 135 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 135 M
( cache_block *cb = safe_malloc\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
251 135 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
287 135 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
293 135 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
329 135 M
( cache_block\)\);) s
5 124 M
(    cb->ino = \(ino != 0\) ? ino : sfs_alloc_ino\(sfs\);) s
5 113 M
(    cb->cache = memset\(safe_malloc\(SFS_BLKSIZE\), 0, SFS_BLKSIZE\);) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 102 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 102 M
( cache_block **head = sfs->blocks + hash32\(ino\);) s
5 91 M
(    cb->hash_next = *head, *head = cb;) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 80 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 80 M
( cb;) s
5 69 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 47 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 47 M
( cache_block *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 36 M
(search_cache_block) s
/F-gs-font 10 10 SF
0 setgray
113 36 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 36 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 36 M
( sfs_fs *sfs, uint32_t ino\) {) s
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 25 M
( cache_block *cb = sfs->blocks[hash32\(ino\)];) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 14 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 14 M
( \(cb != NULL && cb->ino != ino\) {) s
5 3 M
(        cb = cb->hash_next;) s
_R
S
%%Page: (31) 31
%%BeginPageSetup
_S
18 36 translate
/pagenum 31 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    }) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 696 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 696 M
( cb;) s
5 685 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 663 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 663 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 663 M
( cache_inode *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 652 M
(alloc_cache_inode) s
/F-gs-font 10 10 SF
0 setgray
107 652 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 652 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
149 652 M
( sfs_fs *sfs, ino_t real, uint32_t ino, uint16_t type\) {) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 641 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 641 M
( cache_inode *ci = safe_malloc\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
251 641 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
287 641 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
293 641 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
329 641 M
( cache_inode\)\);) s
5 630 M
(    ci->ino = \(ino != 0\) ? ino : sfs_alloc_ino\(sfs\);) s
5 619 M
(    ci->real = real, ci->nblks = 0, ci->l1 = ci->l2 = NULL;) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 608 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 608 M
( inode *inode = &\(ci->inode\);) s
5 597 M
(    memset\(inode, 0, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
131 597 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
167 597 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 597 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
209 597 M
( inode\)\);) s
5 586 M
(    inode->type = type;) s
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 575 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 575 M
( cache_inode **head = sfs->inodes + hash64\(real\);) s
5 564 M
(    ci->hash_next = *head, *head = ci;) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 553 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 553 M
( ci;) s
5 542 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 520 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 520 M
( cache_inode *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 509 M
(search_cache_inode) s
/F-gs-font 10 10 SF
0 setgray
113 509 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 509 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 509 M
( sfs_fs *sfs, ino_t real\) {) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 498 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 498 M
( cache_inode *ci = sfs->inodes[hash64\(real\)];) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 487 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 487 M
( \(ci != NULL && ci->real != real\) {) s
5 476 M
(        ci = ci->hash_next;) s
5 465 M
(    }) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 454 M
( ci;) s
5 443 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 421 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
( sfs_fs *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 410 M
(create_sfs) s
/F-gs-font 10 10 SF
0 setgray
65 410 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 410 M
(int) s
/F-gs-font 10 10 SF
0 setgray
89 410 M
( imgfd\) {) s
5 399 M
(    uint32_t ninos, next_ino;) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 388 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 388 M
( stat *stat = safe_fstat\(imgfd\);) s
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 377 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
( \(\(ninos = stat->st_size / SFS_BLKSIZE\) > SFS_MAX_NBLKS\) {) s
5 366 M
(        ninos = SFS_MAX_NBLKS;) s
5 355 M
(        warn\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 355 M
("img file is too big \(%llu bytes, only use %u blocks\).\\n") s
/F-gs-font 10 10 SF
0 setgray
425 355 M
(,) s
5 344 M
(                \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 344 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
155 344 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
161 344 M
(long) s
/F-gs-font 10 10 SF
0 setgray
185 344 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 344 M
(long) s
/F-gs-font 10 10 SF
0 setgray
215 344 M
(\)stat->st_size, ninos\);) s
5 333 M
(    }) s
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 322 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 322 M
( \(\(next_ino = SFS_BLKN_FREEMAP + \(ninos + SFS_BLKBITS - 1\) / SFS_BLKBITS\) >= ninos\) {) s
5 311 M
(        bug\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 311 M
("img file is too small \(%llu bytes, %u blocks, bitmap use at least %u blocks\).\\n") s
/F-gs-font 10 10 SF
0 setgray
563 311 M
(,) s
5 300 M
(                \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 300 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
155 300 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
161 300 M
(long) s
/F-gs-font 10 10 SF
0 setgray
185 300 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 300 M
(long) s
/F-gs-font 10 10 SF
0 setgray
215 300 M
(\)stat->st_size, ninos, next_ino - 2\);) s
5 289 M
(    }) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 267 M
( sfs_fs *sfs = safe_malloc\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
227 267 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
263 267 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
269 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
305 267 M
( sfs_fs\)\);) s
5 256 M
(    sfs->super.magic = SFS_MAGIC;) s
5 245 M
(    sfs->super.blocks = ninos, sfs->super.unused_blocks = ninos - next_ino;) s
5 234 M
(    snprintf\(sfs->super.info, SFS_MAX_INFO_LEN, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
293 234 M
("simple file system") s
/F-gs-font 10 10 SF
0 setgray
413 234 M
(\);) s
5 212 M
(    sfs->ninos = ninos, sfs->next_ino = next_ino, sfs->imgfd = imgfd;) s
5 201 M
(    sfs->sp_root = sfs->sp_end = &\(sfs->__sp_nil\);) s
5 190 M
(    sfs->sp_end->prev = sfs->sp_end->next = NULL;) s
5 168 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 168 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 168 M
( i;) s
5 157 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 157 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 157 M
( \(i = 0; i < HASH_LIST_SIZE; i ++\) {) s
5 146 M
(        sfs->inodes[i] = NULL;) s
5 135 M
(        sfs->blocks[i] = NULL;) s
5 124 M
(    }) s
5 102 M
(    sfs->root = alloc_cache_inode\(sfs, 0, SFS_BLKN_ROOT, SFS_TYPE_DIR\);) s
5 91 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 91 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 91 M
( sfs;) s
5 80 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 58 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 58 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 58 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 47 M
(subpath_push) s
/F-gs-font 10 10 SF
0 setgray
77 47 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 47 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 47 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 47 M
(const) s
/F-gs-font 10 10 SF
0 setgray
233 47 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
239 47 M
(char) s
/F-gs-font 10 10 SF
0 setgray
263 47 M
( *subname\) {) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 36 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 36 M
( subpath *subpath = safe_malloc\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
257 36 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
293 36 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
299 36 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
335 36 M
( subpath\)\);) s
5 25 M
(    subpath->subname = safe_strdup\(subname\);) s
5 14 M
(    sfs->sp_end->next = subpath;) s
5 3 M
(    subpath->prev = sfs->sp_end;) s
_R
S
%%Page: (32) 32
%%BeginPageSetup
_S
18 36 translate
/pagenum 32 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    subpath->next = NULL;) s
5 696 M
(    sfs->sp_end = subpath;) s
5 685 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 663 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 663 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 652 M
(subpath_pop) s
/F-gs-font 10 10 SF
0 setgray
71 652 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 652 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 652 M
( sfs_fs *sfs\) {) s
5 641 M
(    assert\(sfs->sp_root != sfs->sp_end\);) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 630 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 630 M
( subpath *subpath = sfs->sp_end;) s
5 619 M
(    sfs->sp_end = sfs->sp_end->prev, sfs->sp_end->next = NULL;) s
5 608 M
(    free\(subpath->subname\), free\(subpath\);) s
5 597 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 575 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 564 M
(subpath_show) s
/F-gs-font 10 10 SF
0 setgray
77 564 M
(\(FILE *fout, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 564 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
191 564 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
275 564 M
(const) s
/F-gs-font 10 10 SF
0 setgray
305 564 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
311 564 M
(char) s
/F-gs-font 10 10 SF
0 setgray
335 564 M
( *name\) {) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 553 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 553 M
( subpath *subpath = sfs->sp_root;) s
5 542 M
(    fprintf\(fout, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 542 M
("current is: /") s
/F-gs-font 10 10 SF
0 setgray
203 542 M
(\);) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 531 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 531 M
( \(\(subpath = subpath->next\) != NULL\) {) s
5 520 M
(        fprintf\(fout, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 520 M
("%s/") s
/F-gs-font 10 10 SF
0 setgray
167 520 M
(, subpath->subname\);) s
5 509 M
(    }) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 498 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 498 M
( \(name != NULL\) {) s
5 487 M
(        fprintf\(fout, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 487 M
("%s") s
/F-gs-font 10 10 SF
0 setgray
161 487 M
(, name\);) s
5 476 M
(    }) s
5 465 M
(    fprintf\(fout, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 465 M
("\\n") s
/F-gs-font 10 10 SF
0 setgray
137 465 M
(\);) s
5 454 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 432 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 432 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 432 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 421 M
(write_block) s
/F-gs-font 10 10 SF
0 setgray
71 421 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 421 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 421 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 421 M
(void) s
/F-gs-font 10 10 SF
0 setgray
221 421 M
( *data, size_t len, uint32_t ino\) {) s
5 410 M
(    assert\(len <= SFS_BLKSIZE && ino < sfs->ninos\);) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 399 M
(static) s
/F-gs-font 10 10 SF
0 setgray
65 399 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 399 M
(char) s
/F-gs-font 10 10 SF
0 setgray
95 399 M
( buffer[SFS_BLKSIZE];) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 388 M
( \(len != SFS_BLKSIZE\) {) s
5 377 M
(        memset\(buffer, 0, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
161 377 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
197 377 M
(\(buffer\)\);) s
5 366 M
(        data = memcpy\(buffer, data, len\);) s
5 355 M
(    }) s
5 344 M
(    off_t offset = \(off_t\)ino * SFS_BLKSIZE;) s
5 333 M
(    ssize_t ret;) s
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 322 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 322 M
( \(\(ret = pwrite\(sfs->imgfd, data, SFS_BLKSIZE, offset\)\) != SFS_BLKSIZE\) {) s
5 311 M
(        bug\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 311 M
("write %u block failed: \(%d/%d\).\\n") s
/F-gs-font 10 10 SF
0 setgray
287 311 M
(, ino, \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
335 311 M
(int) s
/F-gs-font 10 10 SF
0 setgray
353 311 M
(\)ret, SFS_BLKSIZE\);) s
5 300 M
(    }) s
5 289 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 267 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 256 M
(flush_cache_block) s
/F-gs-font 10 10 SF
0 setgray
107 256 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 256 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
149 256 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
233 256 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
269 256 M
( cache_block *cb\) {) s
5 245 M
(    write_block\(sfs, cb->cache, SFS_BLKSIZE, cb->ino\);) s
5 234 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 212 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 212 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 212 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 201 M
(flush_cache_inode) s
/F-gs-font 10 10 SF
0 setgray
107 201 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
149 201 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
233 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
269 201 M
( cache_inode *ci\) {) s
5 190 M
(    write_block\(sfs, &\(ci->inode\), ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
215 190 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
251 190 M
(\(ci->inode\), ci->ino\);) s
5 179 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 146 M
(close_sfs) s
/F-gs-font 10 10 SF
0 setgray
59 146 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 146 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 146 M
( sfs_fs *sfs\) {) s
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 135 M
(static) s
/F-gs-font 10 10 SF
0 setgray
65 135 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 135 M
(char) s
/F-gs-font 10 10 SF
0 setgray
95 135 M
( buffer[SFS_BLKSIZE];) s
5 124 M
(    uint32_t i, j, ino = SFS_BLKN_FREEMAP;) s
5 113 M
(    uint32_t ninos = sfs->ninos, next_ino = sfs->next_ino;) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 102 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 102 M
( \(i = 0; i < ninos; ino ++, i += SFS_BLKBITS\) {) s
5 91 M
(        memset\(buffer, 0, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
161 91 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
197 91 M
(\(buffer\)\);) s
5 80 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 80 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 80 M
( \(i + SFS_BLKBITS > next_ino\) {) s
5 69 M
(            uint32_t start = 0, end = SFS_BLKBITS;) s
5 58 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 58 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 58 M
( \(i < next_ino\) {) s
5 47 M
(                start = next_ino - i;) s
5 36 M
(            }) s
5 25 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 25 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 25 M
( \(i + SFS_BLKBITS > ninos\) {) s
5 14 M
(                end = ninos - i;) s
5 3 M
(            }) s
_R
S
%%Page: (33) 33
%%BeginPageSetup
_S
18 36 translate
/pagenum 33 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(            uint32_t *data = \(uint32_t *\)buffer;) s
5 696 M
(            ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 696 M
(const) s
/F-gs-font 10 10 SF
0 setgray
107 696 M
( uint32_t bits = ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
209 696 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
245 696 M
(\(bits\) * CHAR_BIT;) s
5 685 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 685 M
(for) s
/F-gs-font 10 10 SF
0 setgray
95 685 M
( \(j = start; j < end; j ++\) {) s
5 674 M
(                data[j / bits] |= \(1 << \(j % bits\)\);) s
5 663 M
(            }) s
5 652 M
(        }) s
5 641 M
(        write_block\(sfs, buffer, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
203 641 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
239 641 M
(\(buffer\), ino\);) s
5 630 M
(    }) s
5 619 M
(    write_block\(sfs, &\(sfs->super\), ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
221 619 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
257 619 M
(\(sfs->super\), SFS_BLKN_SUPER\);) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 597 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( \(i = 0; i < HASH_LIST_SIZE; i ++\) {) s
5 586 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 586 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 586 M
( cache_block *cb = sfs->blocks[i];) s
5 575 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 575 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 575 M
( \(cb != NULL\) {) s
5 564 M
(            flush_cache_block\(sfs, cb\);) s
5 553 M
(            cb = cb->hash_next;) s
5 542 M
(        }) s
5 531 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 531 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 531 M
( cache_inode *ci = sfs->inodes[i];) s
5 520 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 520 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 520 M
( \(ci != NULL\) {) s
5 509 M
(            flush_cache_inode\(sfs, ci\);) s
5 498 M
(            ci = ci->hash_next;) s
5 487 M
(        }) s
5 476 M
(    }) s
5 465 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
( sfs_fs *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 432 M
(open_img) s
/F-gs-font 10 10 SF
0 setgray
53 432 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 432 M
(const) s
/F-gs-font 10 10 SF
0 setgray
89 432 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 432 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 432 M
( *imgname\) {) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 421 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 421 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 421 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 421 M
( *expect = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
155 421 M
(".img") s
/F-gs-font 10 10 SF
0 setgray
191 421 M
(, *ext = imgname + strlen\(imgname\) - strlen\(expect\);) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 410 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 410 M
( \(ext <= imgname || strcmp\(ext, expect\) != 0\) {) s
5 399 M
(        bug\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 399 M
("invalid .img file name '%s'.\\n") s
/F-gs-font 10 10 SF
0 setgray
269 399 M
(, imgname\);) s
5 388 M
(    }) s
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 377 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 377 M
( imgfd;) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 366 M
( \(\(imgfd = open\(imgname, O_WRONLY\)\) < 0\) {) s
5 355 M
(        bug\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 355 M
("open '%s' failed.\\n") s
/F-gs-font 10 10 SF
0 setgray
203 355 M
(, imgname\);) s
5 344 M
(    }) s
5 333 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 333 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 333 M
( create_sfs\(imgfd\);) s
5 322 M
(}) s
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 300 M
(open_bug) s
/F-gs-font 10 10 SF
0 setgray
101 300 M
(\(sfs, name, ...\)                                                        \\) s
5 289 M
(    do {                                                                                \\) s
5 278 M
(        subpath_show\(stderr, sfs, name\);                                                \\) s
5 267 M
(        bug\(__VA_ARGS__\);                                                               \\) s
5 256 M
(    } while \(0\)) s
5 234 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 234 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 234 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 234 M
(show_fullpath) s
/F-gs-font 10 10 SF
0 setgray
131 234 M
(\(sfs, name\) subpath_show\(stderr, sfs, name\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 212 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 212 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 212 M
(open_dir) s
/F-gs-font 10 10 SF
0 setgray
83 212 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 212 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 212 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
209 212 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
245 212 M
( cache_inode *current, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
383 212 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
419 212 M
( cache_inode *parent\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 201 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 201 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 201 M
(open_file) s
/F-gs-font 10 10 SF
0 setgray
89 201 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 201 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
251 201 M
( cache_inode *file, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
371 201 M
(const) s
/F-gs-font 10 10 SF
0 setgray
401 201 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
407 201 M
(char) s
/F-gs-font 10 10 SF
0 setgray
431 201 M
( *filename, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
503 201 M
(int) s
/F-gs-font 10 10 SF
0 setgray
521 201 M
( fd\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 190 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 190 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 190 M
(open_link) s
/F-gs-font 10 10 SF
0 setgray
89 190 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 190 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 190 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 190 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
251 190 M
( cache_inode *file, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
371 190 M
(const) s
/F-gs-font 10 10 SF
0 setgray
401 190 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
407 190 M
(char) s
/F-gs-font 10 10 SF
0 setgray
431 190 M
( *filename\);) s
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 168 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 168 M
(SFS_BLK_NENTRY) s
/F-gs-font 10 10 SF
0 setgray
137 168 M
(                          \(SFS_BLKSIZE / sizeof\(uint32_t\)\)) s
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 157 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 157 M
(SFS_L0_NBLKS) s
/F-gs-font 10 10 SF
0 setgray
125 157 M
(                            SFS_NDIRECT) s
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 146 M
(SFS_L1_NBLKS) s
/F-gs-font 10 10 SF
0 setgray
125 146 M
(                            \(SFS_BLK_NENTRY + SFS_L0_NBLKS\)) s
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 135 M
(SFS_L2_NBLKS) s
/F-gs-font 10 10 SF
0 setgray
125 135 M
(                            \(SFS_BLK_NENTRY * SFS_BLK_NENTRY + SFS_L1_NBLK) s
5 124 M
(S\)) s
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 113 M
(SFS_LN_NBLKS) s
/F-gs-font 10 10 SF
0 setgray
125 113 M
(                            \(SFS_MAX_FILE_SIZE / SFS_BLKSIZE\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 91 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 91 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 80 M
(update_cache) s
/F-gs-font 10 10 SF
0 setgray
77 80 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 80 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 80 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 80 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
239 80 M
( cache_block **cbp, uint32_t *inop\) {) s
5 69 M
(    uint32_t ino = *inop;) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 58 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 58 M
( cache_block *cb = *cbp;) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 47 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 47 M
( \(ino == 0\) {) s
5 36 M
(        cb = alloc_cache_block\(sfs, 0\);) s
5 25 M
(        ino = cb->ino;) s
5 14 M
(    }) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 3 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 3 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
59 3 M
(if) s
/F-gs-font 10 10 SF
0 setgray
71 3 M
( \(cb == NULL || cb->ino != ino\) {) s
_R
S
%%Page: (34) 34
%%BeginPageSetup
_S
18 36 translate
/pagenum 34 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        cb = search_cache_block\(sfs, ino\);) s
5 696 M
(        assert\(cb != NULL && cb->ino == ino\);) s
5 685 M
(    }) s
5 674 M
(    *cbp = cb, *inop = ino;) s
5 663 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 641 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 641 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 641 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 630 M
(append_block) s
/F-gs-font 10 10 SF
0 setgray
77 630 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 630 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 630 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 630 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
239 630 M
( cache_inode *file, size_t size, uint32_t ino, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
521 630 M
(const) s
/F-gs-font 10 10 SF
0 setgray
551 630 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
557 630 M
(ch) s
5 619 M
(ar) s
/F-gs-font 10 10 SF
0 setgray
17 619 M
( *filename\) {) s
5 608 M
(    static_assert\(SFS_LN_NBLKS <= SFS_L2_NBLKS, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
293 608 M
("SFS_LN_NBLKS <= SFS_L2_NBLKS") s
/F-gs-font 10 10 SF
0 setgray
473 608 M
(\);) s
5 597 M
(    assert\(size <= SFS_BLKSIZE\);) s
5 586 M
(    uint32_t nblks = file->nblks;) s
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 575 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 575 M
( inode *inode = &\(file->inode\);) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 564 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 564 M
( \(nblks >= SFS_LN_NBLKS\) {) s
5 553 M
(        open_bug\(sfs, filename, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 553 M
("file is too big.\\n") s
/F-gs-font 10 10 SF
0 setgray
317 553 M
(\);) s
5 542 M
(    }) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 531 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( \(nblks < SFS_L0_NBLKS\) {) s
5 520 M
(        inode->direct[nblks] = ino;) s
5 509 M
(    }) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 498 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 498 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
59 498 M
(if) s
/F-gs-font 10 10 SF
0 setgray
71 498 M
( \(nblks < SFS_L1_NBLKS\) {) s
5 487 M
(        nblks -= SFS_L0_NBLKS;) s
5 476 M
(        update_cache\(sfs, &\(file->l1\), &\(inode->indirect\)\);) s
5 465 M
(        uint32_t *data = file->l1->cache;) s
5 454 M
(        data[nblks] = ino;) s
5 443 M
(    }) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 432 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 432 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
59 432 M
(if) s
/F-gs-font 10 10 SF
0 setgray
71 432 M
( \(nblks < SFS_L2_NBLKS\) {) s
5 421 M
(        nblks -= SFS_L1_NBLKS;) s
5 410 M
(        update_cache\(sfs, &\(file->l2\), &\(inode->db_indirect\)\);) s
5 399 M
(        uint32_t *data2 = file->l2->cache;) s
5 388 M
(        update_cache\(sfs, &\(file->l1\), &data2[nblks / SFS_BLK_NENTRY]\);) s
5 377 M
(        uint32_t *data1 = file->l1->cache;) s
5 366 M
(        data1[nblks % SFS_BLK_NENTRY] = ino;) s
5 355 M
(    }) s
5 344 M
(    file->nblks ++;) s
5 333 M
(    inode->size += size;) s
5 322 M
(    inode->blocks ++;) s
5 311 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 289 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 278 M
(add_entry) s
/F-gs-font 10 10 SF
0 setgray
59 278 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 278 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 278 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 278 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
221 278 M
( cache_inode *current, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
359 278 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
395 278 M
( cache_inode *file, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
515 278 M
(const) s
/F-gs-font 10 10 SF
0 setgray
545 278 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
551 278 M
(cha) s
5 267 M
(r) s
/F-gs-font 10 10 SF
0 setgray
11 267 M
( *name\) {) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 256 M
(static) s
/F-gs-font 10 10 SF
0 setgray
65 256 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 256 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 256 M
( sfs_entry __entry, *entry = &__entry;) s
5 245 M
(    assert\(current->inode.type == SFS_TYPE_DIR && strlen\(name\) <= SFS_MAX_FNAME_LEN\);) s
5 234 M
(    entry->ino = file->ino, strcpy\(entry->name, name\);) s
5 223 M
(    uint32_t entry_ino = sfs_alloc_ino\(sfs\);) s
5 212 M
(    write_block\(sfs, entry, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
173 212 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
209 212 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 212 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
251 212 M
( sfs_entry\), entry_ino\);) s
5 201 M
(    append_block\(sfs, current, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
191 201 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
227 201 M
(\(entry->name\), entry_ino, name\);) s
5 190 M
(    file->inode.nlinks ++;) s
5 179 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 157 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 157 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 146 M
(add_dir) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 146 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 146 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 146 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
209 146 M
( cache_inode *parent, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
341 146 M
(const) s
/F-gs-font 10 10 SF
0 setgray
371 146 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
377 146 M
(char) s
/F-gs-font 10 10 SF
0 setgray
401 146 M
( *dirname, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
467 146 M
(int) s
/F-gs-font 10 10 SF
0 setgray
485 146 M
( curfd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
533 146 M
(int) s
/F-gs-font 10 10 SF
0 setgray
551 146 M
( fd) s
5 135 M
(, ino_t real\) {) s
5 124 M
(    assert\(search_cache_inode\(sfs, real\) == NULL\);) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 113 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 113 M
( cache_inode *current = alloc_cache_inode\(sfs, real, 0, SFS_TYPE_DIR\);) s
5 102 M
(    safe_fchdir\(fd\), subpath_push\(sfs, dirname\);) s
5 91 M
(    open_dir\(sfs, current, parent\);) s
5 80 M
(    safe_fchdir\(curfd\), subpath_pop\(sfs\);) s
5 69 M
(    add_entry\(sfs, parent, current, dirname\);) s
5 58 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 36 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 36 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 25 M
(add_file) s
/F-gs-font 10 10 SF
0 setgray
53 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 25 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
215 25 M
( cache_inode *current, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
353 25 M
(const) s
/F-gs-font 10 10 SF
0 setgray
383 25 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
389 25 M
(char) s
/F-gs-font 10 10 SF
0 setgray
413 25 M
( *filename, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
485 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
503 25 M
( fd, ino_t ) s
5 14 M
(real\) {) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 3 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 3 M
( cache_inode *file;) s
_R
S
%%Page: (35) 35
%%BeginPageSetup
_S
18 36 translate
/pagenum 35 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 707 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 707 M
( \(\(file = search_cache_inode\(sfs, real\)\) == NULL\) {) s
5 696 M
(        file = alloc_cache_inode\(sfs, real, 0, SFS_TYPE_FILE\);) s
5 685 M
(        open_file\(sfs, file, filename, fd\);) s
5 674 M
(    }) s
5 663 M
(    add_entry\(sfs, current, file, filename\);) s
5 652 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 630 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 630 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 630 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 619 M
(add_link) s
/F-gs-font 10 10 SF
0 setgray
53 619 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 619 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 619 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 619 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
215 619 M
( cache_inode *current, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
353 619 M
(const) s
/F-gs-font 10 10 SF
0 setgray
383 619 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
389 619 M
(char) s
/F-gs-font 10 10 SF
0 setgray
413 619 M
( *filename, ino_t real\) {) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 608 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 608 M
( cache_inode *file = alloc_cache_inode\(sfs, real, 0, SFS_TYPE_LINK\);) s
5 597 M
(    open_link\(sfs, file, filename\);) s
5 586 M
(    add_entry\(sfs, current, file, filename\);) s
5 575 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 553 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 542 M
(open_dir) s
/F-gs-font 10 10 SF
0 setgray
53 542 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 542 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 542 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 542 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
215 542 M
( cache_inode *current, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
353 542 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
389 542 M
( cache_inode *parent\) {) s
5 531 M
(    DIR *dir;) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 520 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 520 M
( \(\(dir = opendir\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 520 M
(".") s
/F-gs-font 10 10 SF
0 setgray
161 520 M
(\)\) == NULL\) {) s
5 509 M
(        open_bug\(sfs, NULL, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 509 M
("opendir failed.\\n") s
/F-gs-font 10 10 SF
0 setgray
287 509 M
(\);) s
5 498 M
(    }) s
5 487 M
(    add_entry\(sfs, current, current, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
227 487 M
(".") s
/F-gs-font 10 10 SF
0 setgray
245 487 M
(\);) s
5 476 M
(    add_entry\(sfs, current, parent, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
221 476 M
("..") s
/F-gs-font 10 10 SF
0 setgray
245 476 M
(\);) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 465 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 465 M
( dirent *direntp;) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 454 M
( \(\(direntp = readdir\(dir\)\) != NULL\) {) s
5 443 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 443 M
(const) s
/F-gs-font 10 10 SF
0 setgray
83 443 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 443 M
(char) s
/F-gs-font 10 10 SF
0 setgray
113 443 M
( *name = direntp->d_name;) s
5 432 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 432 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 432 M
( \(strcmp\(name, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
155 432 M
(".") s
/F-gs-font 10 10 SF
0 setgray
173 432 M
(\) == 0 || strcmp\(name, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
311 432 M
("..") s
/F-gs-font 10 10 SF
0 setgray
335 432 M
(\) == 0\) {) s
5 421 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 421 M
(continue) s
/F-gs-font 10 10 SF
0 setgray
125 421 M
( ;) s
5 410 M
(        }) s
5 399 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 399 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 399 M
( \(name[0] == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 399 M
('.') s
/F-gs-font 10 10 SF
0 setgray
161 399 M
(\) {) s
5 388 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 388 M
(continue) s
/F-gs-font 10 10 SF
0 setgray
125 388 M
( ;) s
5 377 M
(        }) s
5 366 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 366 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 366 M
( \(strlen\(name\) > SFS_MAX_FNAME_LEN\) {) s
5 355 M
(            open_bug\(sfs, NULL, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 355 M
("file name is too long: %s\\n") s
/F-gs-font 10 10 SF
0 setgray
371 355 M
(, name\);) s
5 344 M
(        }) s
5 333 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 333 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 333 M
( stat *stat = safe_lstat\(name\);) s
5 322 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 322 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 322 M
( \(S_ISLNK\(stat->st_mode\)\) {) s
5 311 M
(            add_link\(sfs, current, name, stat->st_ino\);) s
5 300 M
(        }) s
5 289 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 289 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 289 M
( {) s
5 278 M
(            ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
95 278 M
( fd;) s
5 267 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 267 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 267 M
( \(\(fd = open\(name, O_RDONLY\)\) < 0\) {) s
5 256 M
(                open_bug\(sfs, NULL, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
221 256 M
("open failed: %s\\n") s
/F-gs-font 10 10 SF
0 setgray
335 256 M
(, name\);) s
5 245 M
(            }) s
5 234 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 234 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 234 M
( \(S_ISDIR\(stat->st_mode\)\) {) s
5 223 M
(                add_dir\(sfs, current, name, dirfd\(dir\), fd, stat->st_ino\);) s
5 212 M
(            }) s
5 201 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 201 M
(else) s
/F-gs-font 10 10 SF
0 setgray
101 201 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
107 201 M
(if) s
/F-gs-font 10 10 SF
0 setgray
119 201 M
( \(S_ISREG\(stat->st_mode\)\) {) s
5 190 M
(                add_file\(sfs, current, name, fd, stat->st_ino\);) s
5 179 M
(            }) s
5 168 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 168 M
(else) s
/F-gs-font 10 10 SF
0 setgray
101 168 M
( {) s
5 157 M
(                ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 157 M
(char) s
/F-gs-font 10 10 SF
0 setgray
125 157 M
( mode = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 157 M
('?') s
/F-gs-font 10 10 SF
0 setgray
191 157 M
(;) s
5 146 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 146 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 146 M
( \(S_ISFIFO\(stat->st_mode\)\) mode = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
317 146 M
('f') s
/F-gs-font 10 10 SF
0 setgray
335 146 M
(;) s
5 135 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 135 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 135 M
( \(S_ISSOCK\(stat->st_mode\)\) mode = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
317 135 M
('s') s
/F-gs-font 10 10 SF
0 setgray
335 135 M
(;) s
5 124 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 124 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 124 M
( \(S_ISCHR\(stat->st_mode\)\) mode = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
311 124 M
('c') s
/F-gs-font 10 10 SF
0 setgray
329 124 M
(;) s
5 113 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 113 M
( \(S_ISBLK\(stat->st_mode\)\) mode = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
311 113 M
('b') s
/F-gs-font 10 10 SF
0 setgray
329 113 M
(;) s
5 102 M
(                show_fullpath\(sfs, NULL\);) s
5 91 M
(                warn\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
131 91 M
("unsupported mode %07x \(%c\): file %s\\n") s
/F-gs-font 10 10 SF
0 setgray
365 91 M
(, stat->st_mode, mode, name\);) s
5 80 M
(            }) s
5 69 M
(            close\(fd\);) s
5 58 M
(        }) s
5 47 M
(    }) s
5 36 M
(    closedir\(dir\);) s
5 25 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (36) 36
%%BeginPageSetup
_S
18 36 translate
/pagenum 36 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 707 M
(open_file) s
/F-gs-font 10 10 SF
0 setgray
59 707 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 707 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 707 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 707 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
221 707 M
( cache_inode *file, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
341 707 M
(const) s
/F-gs-font 10 10 SF
0 setgray
371 707 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
377 707 M
(char) s
/F-gs-font 10 10 SF
0 setgray
401 707 M
( *filename, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
473 707 M
(int) s
/F-gs-font 10 10 SF
0 setgray
491 707 M
( fd\) {) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 696 M
(static) s
/F-gs-font 10 10 SF
0 setgray
65 696 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 696 M
(char) s
/F-gs-font 10 10 SF
0 setgray
95 696 M
( buffer[SFS_BLKSIZE];) s
5 685 M
(    ssize_t ret, last = SFS_BLKSIZE;) s
5 674 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 674 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 674 M
( \(\(ret = read\(fd, buffer, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
215 674 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
251 674 M
(\(buffer\)\)\) != 0\) {) s
5 663 M
(        assert\(last == SFS_BLKSIZE\);) s
5 652 M
(        uint32_t ino = sfs_alloc_ino\(sfs\);) s
5 641 M
(        write_block\(sfs, buffer, ret, ino\);) s
5 630 M
(        append_block\(sfs, file, ret, ino, filename\);) s
5 619 M
(        last = ret;) s
5 608 M
(    }) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 597 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( \(ret < 0\) {) s
5 586 M
(        open_bug\(sfs, filename, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 586 M
("read file failed.\\n") s
/F-gs-font 10 10 SF
0 setgray
323 586 M
(\);) s
5 575 M
(    }) s
5 564 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 542 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 531 M
(open_link) s
/F-gs-font 10 10 SF
0 setgray
59 531 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 531 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 531 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 531 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
221 531 M
( cache_inode *file, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
341 531 M
(const) s
/F-gs-font 10 10 SF
0 setgray
371 531 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
377 531 M
(char) s
/F-gs-font 10 10 SF
0 setgray
401 531 M
( *filename\) {) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 520 M
(static) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 520 M
(char) s
/F-gs-font 10 10 SF
0 setgray
95 520 M
( buffer[SFS_BLKSIZE];) s
5 509 M
(    uint32_t ino = sfs_alloc_ino\(sfs\);) s
5 498 M
(    ssize_t ret = readlink\(filename, buffer, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
275 498 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
311 498 M
(\(buffer\)\);) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 487 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( \(ret < 0 || ret == SFS_BLKSIZE\) {) s
5 476 M
(        open_bug\(sfs, filename, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 476 M
("read link failed, %d") s
/F-gs-font 10 10 SF
0 setgray
329 476 M
(, \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
347 476 M
(int) s
/F-gs-font 10 10 SF
0 setgray
365 476 M
(\)ret\);) s
5 465 M
(    }) s
5 454 M
(    write_block\(sfs, buffer, ret, ino\);) s
5 443 M
(    append_block\(sfs, file, ret, ino, filename\);) s
5 432 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 410 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 399 M
(create_img) s
/F-gs-font 10 10 SF
0 setgray
65 399 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 399 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 399 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 399 M
(const) s
/F-gs-font 10 10 SF
0 setgray
221 399 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 399 M
(char) s
/F-gs-font 10 10 SF
0 setgray
251 399 M
( *home\) {) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 388 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 388 M
( curfd, homefd;) s
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 377 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
( \(\(curfd = open\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 377 M
(".") s
/F-gs-font 10 10 SF
0 setgray
155 377 M
(, O_RDONLY\)\) < 0\) {) s
5 366 M
(        bug\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 366 M
("get current fd failed.\\n") s
/F-gs-font 10 10 SF
0 setgray
233 366 M
(\);) s
5 355 M
(    }) s
5 344 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 344 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 344 M
( \(\(homefd = open\(home, O_RDONLY | O_NOFOLLOW\)\) < 0\) {) s
5 333 M
(        bug\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 333 M
("open home directory '%s' failed.\\n") s
/F-gs-font 10 10 SF
0 setgray
293 333 M
(, home\);) s
5 322 M
(    }) s
5 311 M
(    safe_fchdir\(homefd\);) s
5 300 M
(    open_dir\(sfs, sfs->root, sfs->root\);) s
5 289 M
(    safe_fchdir\(curfd\);) s
5 278 M
(    close\(curfd\), close\(homefd\);) s
5 267 M
(    close_sfs\(sfs\);) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 256 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 256 M
( 0;) s
5 245 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 223 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 223 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 212 M
(static_check) s
/F-gs-font 10 10 SF
0 setgray
77 212 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 212 M
(void) s
/F-gs-font 10 10 SF
0 setgray
107 212 M
(\) {) s
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(if) s
/F-gs-font 10 10 SF
0 setgray
23 201 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
29 201 M
(defined) s
/F-gs-font 10 10 SF
0 setgray
71 201 M
(\() s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
77 201 M
(__i386__) s
/F-gs-font 10 10 SF
0 setgray
125 201 M
(\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 190 M
(// IA-32, gcc with -D_FILE_OFFSET_BITS=64) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(        static_assert\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
137 179 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
173 179 M
(\(off_t\) == 8, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
257 179 M
("sizeof off_t should be 8 in i386") s
/F-gs-font 10 10 SF
0 setgray
461 179 M
(\);) s
5 168 M
(    static_assert\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
113 168 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
149 168 M
(\(ino_t\) == 8,) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
227 168 M
("sizeof ino_t should be 8 in i386") s
/F-gs-font 10 10 SF
0 setgray
431 168 M
(\);) s
5 157 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 157 M
("in i386 system, need more testing\\n") s
/F-gs-font 10 10 SF
0 setgray
293 157 M
(\);) s
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(elif) s
/F-gs-font 10 10 SF
0 setgray
35 146 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
41 146 M
(defined) s
/F-gs-font 10 10 SF
0 setgray
83 146 M
(\() s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
89 146 M
(__x86_64__) s
/F-gs-font 10 10 SF
0 setgray
149 146 M
(\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 135 M
(// AMD64, Recommend, gcc with -D_FILE_OFFSET_BITS=64) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(    static_assert\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
113 124 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
149 124 M
(\(off_t\) == 8, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
233 124 M
("sizeof off_t should be 8 in x86_64") s
/F-gs-font 10 10 SF
0 setgray
449 124 M
(\);) s
5 113 M
(    static_assert\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
113 113 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
149 113 M
(\(ino_t\) == 8, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
233 113 M
("sizeof ino_t should be 8 in x86_64") s
/F-gs-font 10 10 SF
0 setgray
449 113 M
(\);) s
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(else) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(# ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
17 91 M
(error) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 91 M
(Unsupported) s
/F-gs-font 10 10 SF
0 setgray
119 91 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
125 91 M
(architecture) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(    static_assert\(SFS_MAX_NBLKS <= 0x80000000UL, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
299 69 M
("SFS_MAX_NBLKS <= 0x80000000UL") s
/F-gs-font 10 10 SF
0 setgray
485 69 M
(\);) s
5 58 M
(    static_assert\(SFS_MAX_FILE_SIZE <= 0x80000000UL,) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
317 58 M
("SFS_MAX_FILE_SIZE <= 0x80000000UL") s
/F-gs-font 10 10 SF
0 setgray
527 58 M
(\);) s
5 47 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 14 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 14 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 14 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 14 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 14 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 14 M
( **argv\) {) s
5 3 M
(    static_check\(\);) s
_R
S
%%Page: (37) 37
%%BeginPageSetup
_S
18 36 translate
/pagenum 37 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 707 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 707 M
( \(argc != 3\) {) s
5 696 M
(        bug\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 696 M
("usage: <input *.img> <input dirname>\\n") s
/F-gs-font 10 10 SF
0 setgray
317 696 M
(\);) s
5 685 M
(    }) s
5 674 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 674 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 674 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 674 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 674 M
( *imgname = argv[1], *home = argv[2];) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 663 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 663 M
( \(create_img\(open_img\(imgname\), home\) != 0\) {) s
5 652 M
(        bug\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 652 M
("create img failed.\\n") s
/F-gs-font 10 10 SF
0 setgray
209 652 M
(\);) s
5 641 M
(    }) s
5 630 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 630 M
("create %s \(%s\) successfully.\\n") s
/F-gs-font 10 10 SF
0 setgray
263 630 M
(, imgname, home\);) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 619 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 619 M
( 0;) s
5 608 M
(}) s
5 586 M
([ucore/lab8_result/tools/vector.c] ++++++++++++++++++++++++++++++) s
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 575 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 575 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 553 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 542 M
(main) s
/F-gs-font 10 10 SF
0 setgray
29 542 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 542 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 542 M
(\) {) s
5 531 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 531 M
("# handler\\n") s
/F-gs-font 10 10 SF
0 setgray
149 531 M
(\);) s
5 520 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 520 M
(".text\\n") s
/F-gs-font 10 10 SF
0 setgray
125 520 M
(\);) s
5 509 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 509 M
(".globl __alltraps\\n") s
/F-gs-font 10 10 SF
0 setgray
197 509 M
(\);) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 487 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( i;) s
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 476 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 476 M
( \(i = 0; i < 256; i ++\) {) s
5 465 M
(        printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
95 465 M
(".globl vector%d\\n") s
/F-gs-font 10 10 SF
0 setgray
209 465 M
(, i\);) s
5 454 M
(        printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
95 454 M
("vector%d:\\n") s
/F-gs-font 10 10 SF
0 setgray
173 454 M
(, i\);) s
5 443 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 443 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 443 M
( \(\(i < 8 || i > 14\) && i != 17\) {) s
5 432 M
(            printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
119 432 M
("  pushl $0\\n") s
/F-gs-font 10 10 SF
0 setgray
203 432 M
(\);) s
5 421 M
(        }) s
5 410 M
(        printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
95 410 M
("  pushl $%d\\n") s
/F-gs-font 10 10 SF
0 setgray
185 410 M
(, i\);) s
5 399 M
(        printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
95 399 M
("  jmp __alltraps\\n") s
/F-gs-font 10 10 SF
0 setgray
215 399 M
(\);) s
5 388 M
(    }) s
5 377 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 377 M
("\\n") s
/F-gs-font 10 10 SF
0 setgray
95 377 M
(\);) s
5 366 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 366 M
("# vector table\\n") s
/F-gs-font 10 10 SF
0 setgray
179 366 M
(\);) s
5 355 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 355 M
(".data\\n") s
/F-gs-font 10 10 SF
0 setgray
125 355 M
(\);) s
5 344 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 344 M
(".globl __vectors\\n") s
/F-gs-font 10 10 SF
0 setgray
191 344 M
(\);) s
5 333 M
(    printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 333 M
("__vectors:\\n") s
/F-gs-font 10 10 SF
0 setgray
155 333 M
(\);) s
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 322 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 322 M
( \(i = 0; i < 256; i ++\) {) s
5 311 M
(        printf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
95 311 M
("  .long vector%d\\n") s
/F-gs-font 10 10 SF
0 setgray
215 311 M
(, i\);) s
5 300 M
(    }) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 289 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 289 M
( 0;) s
5 278 M
(}) s
5 256 M
([ucore/lab8_result/libs/string.h] ++++++++++++++++++++++++++++++) s
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 245 M
(__LIBS_STRING_H__) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 234 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 234 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 234 M
(__LIBS_STRING_H__) s
/F-gs-font 10 10 SF
0 setgray
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 212 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 212 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(size_t ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
47 190 M
(strlen) s
/F-gs-font 10 10 SF
0 setgray
83 190 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 190 M
(const) s
/F-gs-font 10 10 SF
0 setgray
119 190 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 190 M
(char) s
/F-gs-font 10 10 SF
0 setgray
149 190 M
( *s\);) s
5 179 M
(size_t ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
47 179 M
(strnlen) s
/F-gs-font 10 10 SF
0 setgray
89 179 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 179 M
(const) s
/F-gs-font 10 10 SF
0 setgray
125 179 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 179 M
(char) s
/F-gs-font 10 10 SF
0 setgray
155 179 M
( *s, size_t len\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 157 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
41 157 M
(strcpy) s
/F-gs-font 10 10 SF
0 setgray
77 157 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 157 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 157 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 157 M
(const) s
/F-gs-font 10 10 SF
0 setgray
179 157 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 157 M
(char) s
/F-gs-font 10 10 SF
0 setgray
209 157 M
( *src\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 146 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
41 146 M
(strncpy) s
/F-gs-font 10 10 SF
0 setgray
83 146 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 146 M
(char) s
/F-gs-font 10 10 SF
0 setgray
113 146 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 146 M
(const) s
/F-gs-font 10 10 SF
0 setgray
185 146 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 146 M
(char) s
/F-gs-font 10 10 SF
0 setgray
215 146 M
( *src, size_t len\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 135 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 135 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
41 135 M
(strcat) s
/F-gs-font 10 10 SF
0 setgray
77 135 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 135 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 135 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 135 M
(const) s
/F-gs-font 10 10 SF
0 setgray
179 135 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 135 M
(char) s
/F-gs-font 10 10 SF
0 setgray
209 135 M
( *src\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 124 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
41 124 M
(strdup) s
/F-gs-font 10 10 SF
0 setgray
77 124 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 124 M
(const) s
/F-gs-font 10 10 SF
0 setgray
113 124 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 124 M
(char) s
/F-gs-font 10 10 SF
0 setgray
143 124 M
( *src\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 113 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 113 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
41 113 M
(stradd) s
/F-gs-font 10 10 SF
0 setgray
77 113 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 113 M
(const) s
/F-gs-font 10 10 SF
0 setgray
113 113 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 113 M
(char) s
/F-gs-font 10 10 SF
0 setgray
143 113 M
( *src1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 113 M
(const) s
/F-gs-font 10 10 SF
0 setgray
221 113 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 113 M
(char) s
/F-gs-font 10 10 SF
0 setgray
251 113 M
( *src2\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 91 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 91 M
(strcmp) s
/F-gs-font 10 10 SF
0 setgray
65 91 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 91 M
(const) s
/F-gs-font 10 10 SF
0 setgray
101 91 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 91 M
(char) s
/F-gs-font 10 10 SF
0 setgray
131 91 M
( *s1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 91 M
(const) s
/F-gs-font 10 10 SF
0 setgray
197 91 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 91 M
(char) s
/F-gs-font 10 10 SF
0 setgray
227 91 M
( *s2\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 80 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 80 M
(strncmp) s
/F-gs-font 10 10 SF
0 setgray
71 80 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 80 M
(const) s
/F-gs-font 10 10 SF
0 setgray
107 80 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 80 M
(char) s
/F-gs-font 10 10 SF
0 setgray
137 80 M
( *s1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 80 M
(const) s
/F-gs-font 10 10 SF
0 setgray
203 80 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
209 80 M
(char) s
/F-gs-font 10 10 SF
0 setgray
233 80 M
( *s2, size_t n\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 58 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 58 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
41 58 M
(strchr) s
/F-gs-font 10 10 SF
0 setgray
77 58 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 58 M
(const) s
/F-gs-font 10 10 SF
0 setgray
113 58 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 58 M
(char) s
/F-gs-font 10 10 SF
0 setgray
143 58 M
( *s, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 58 M
(char) s
/F-gs-font 10 10 SF
0 setgray
197 58 M
( c\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 47 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 47 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
41 47 M
(strfind) s
/F-gs-font 10 10 SF
0 setgray
83 47 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 47 M
(const) s
/F-gs-font 10 10 SF
0 setgray
119 47 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 47 M
(char) s
/F-gs-font 10 10 SF
0 setgray
149 47 M
( *s, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 47 M
(char) s
/F-gs-font 10 10 SF
0 setgray
203 47 M
( c\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(long) s
/F-gs-font 10 10 SF
0 setgray
29 36 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 36 M
(strtol) s
/F-gs-font 10 10 SF
0 setgray
71 36 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 36 M
(const) s
/F-gs-font 10 10 SF
0 setgray
107 36 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 36 M
(char) s
/F-gs-font 10 10 SF
0 setgray
137 36 M
( *s, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 36 M
(char) s
/F-gs-font 10 10 SF
0 setgray
191 36 M
( **endptr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
275 36 M
( base\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 14 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
41 14 M
(memset) s
/F-gs-font 10 10 SF
0 setgray
77 14 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 14 M
(void) s
/F-gs-font 10 10 SF
0 setgray
107 14 M
( *s, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 14 M
(char) s
/F-gs-font 10 10 SF
0 setgray
161 14 M
( c, size_t n\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 3 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
41 3 M
(memmove) s
/F-gs-font 10 10 SF
0 setgray
83 3 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 3 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 3 M
(const) s
/F-gs-font 10 10 SF
0 setgray
185 3 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
215 3 M
( *src, size_t n\);) s
_R
S
%%Page: (38) 38
%%BeginPageSetup
_S
18 36 translate
/pagenum 38 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 707 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
41 707 M
(memcpy) s
/F-gs-font 10 10 SF
0 setgray
77 707 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
107 707 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 707 M
(const) s
/F-gs-font 10 10 SF
0 setgray
179 707 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
209 707 M
( *src, size_t n\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 696 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 696 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 696 M
(memcmp) s
/F-gs-font 10 10 SF
0 setgray
65 696 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 696 M
(const) s
/F-gs-font 10 10 SF
0 setgray
101 696 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 696 M
(void) s
/F-gs-font 10 10 SF
0 setgray
131 696 M
( *v1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 696 M
(const) s
/F-gs-font 10 10 SF
0 setgray
197 696 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 696 M
(void) s
/F-gs-font 10 10 SF
0 setgray
227 696 M
( *v2, size_t n\);) s
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 674 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 674 M
(/* !__LIBS_STRING_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 652 M
([ucore/lab8_result/libs/error.h] ++++++++++++++++++++++++++++++) s
5 641 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 641 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 641 M
(__LIBS_ERROR_H__) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 630 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 630 M
(__LIBS_ERROR_H__) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 608 M
(/* kernel error codes -- keep in sync with list in lib/printfmt.c */) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 597 M
(E_UNSPECIFIED) s
/F-gs-font 10 10 SF
0 setgray
131 597 M
(       1   // Unspecified or unknown problem) s
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 586 M
(E_BAD_PROC) s
/F-gs-font 10 10 SF
0 setgray
113 586 M
(          2   // Process doesn't exist or otherwise) s
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 575 M
(E_INVAL) s
/F-gs-font 10 10 SF
0 setgray
95 575 M
(             3   // Invalid parameter) s
5 564 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 564 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 564 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 564 M
(E_NO_MEM) s
/F-gs-font 10 10 SF
0 setgray
101 564 M
(            4   // Request failed due to memory shortage) s
5 553 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 553 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 553 M
(E_NO_FREE_PROC) s
/F-gs-font 10 10 SF
0 setgray
137 553 M
(      5   // Attempt to create a new process beyond) s
5 542 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 542 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 542 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 542 M
(E_FAULT) s
/F-gs-font 10 10 SF
0 setgray
95 542 M
(             6   // Memory fault) s
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 531 M
(E_SWAP_FAULT) s
/F-gs-font 10 10 SF
0 setgray
125 531 M
(        7   // SWAP READ/WRITE fault) s
5 520 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 520 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 520 M
(E_INVAL_ELF) s
/F-gs-font 10 10 SF
0 setgray
119 520 M
(         8   // Invalid elf file) s
5 509 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 509 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 509 M
(E_KILLED) s
/F-gs-font 10 10 SF
0 setgray
101 509 M
(            9   // Process is killed) s
5 498 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 498 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 498 M
(E_PANIC) s
/F-gs-font 10 10 SF
0 setgray
95 498 M
(             10  // Panic Failure) s
5 487 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 487 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 487 M
(E_TIMEOUT) s
/F-gs-font 10 10 SF
0 setgray
107 487 M
(           11  // Timeout) s
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 476 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 476 M
(E_TOO_BIG) s
/F-gs-font 10 10 SF
0 setgray
107 476 M
(           12  // Argument is Too Big) s
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 465 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 465 M
(E_NO_DEV) s
/F-gs-font 10 10 SF
0 setgray
101 465 M
(            13  // No such Device) s
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 454 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 454 M
(E_NA_DEV) s
/F-gs-font 10 10 SF
0 setgray
101 454 M
(            14  // Device Not Available) s
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 443 M
(E_BUSY) s
/F-gs-font 10 10 SF
0 setgray
89 443 M
(              15  // Device/File is Busy) s
5 432 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 432 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 432 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 432 M
(E_NOENT) s
/F-gs-font 10 10 SF
0 setgray
95 432 M
(             16  // No Such File or Directory) s
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 421 M
(E_ISDIR) s
/F-gs-font 10 10 SF
0 setgray
95 421 M
(             17  // Is a Directory) s
5 410 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 410 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 410 M
(E_NOTDIR) s
/F-gs-font 10 10 SF
0 setgray
101 410 M
(            18  // Not a Directory) s
5 399 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 399 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 399 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 399 M
(E_XDEV) s
/F-gs-font 10 10 SF
0 setgray
89 399 M
(              19  // Cross Device-Link) s
5 388 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 388 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 388 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 388 M
(E_UNIMP) s
/F-gs-font 10 10 SF
0 setgray
95 388 M
(             20  // Unimplemented Feature) s
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 377 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 377 M
(E_SEEK) s
/F-gs-font 10 10 SF
0 setgray
89 377 M
(              21  // Illegal Seek) s
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 366 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 366 M
(E_MAX_OPEN) s
/F-gs-font 10 10 SF
0 setgray
113 366 M
(          22  // Too Many Files are Open) s
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 355 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 355 M
(E_EXISTS) s
/F-gs-font 10 10 SF
0 setgray
101 355 M
(            23  // File/Directory Already Exists) s
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 344 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 344 M
(E_NOTEMPTY) s
/F-gs-font 10 10 SF
0 setgray
113 344 M
(          24  // Directory is Not Empty) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 333 M
(/* the maximum allowed */) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 322 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 322 M
(MAXERROR) s
/F-gs-font 10 10 SF
0 setgray
101 322 M
(            24) s
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 300 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 300 M
(/* !__LIBS_ERROR_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
([ucore/lab8_result/libs/dirent.h] ++++++++++++++++++++++++++++++) s
5 267 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 267 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 267 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 267 M
(__LIBS_DIRENT_H__) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 256 M
(__LIBS_DIRENT_H__) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 234 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 234 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 234 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 223 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 223 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 201 M
( dirent {) s
5 190 M
(    off_t offset;) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 179 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
( name[FS_MAX_FNAME_LEN + 1];) s
5 168 M
(};) s
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 146 M
(/* !__LIBS_DIRENT_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
([ucore/lab8_result/libs/stdio.h] ++++++++++++++++++++++++++++++) s
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 113 M
(__LIBS_STDIO_H__) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 102 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 102 M
(__LIBS_STDIO_H__) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 80 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 80 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 69 M
(<stdarg.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 47 M
(/* kern/libs/stdio.c */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 36 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 36 M
(cprintf) s
/F-gs-font 10 10 SF
0 setgray
71 36 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 36 M
(const) s
/F-gs-font 10 10 SF
0 setgray
107 36 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 36 M
(char) s
/F-gs-font 10 10 SF
0 setgray
137 36 M
( *fmt, ...\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 25 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 25 M
(vcprintf) s
/F-gs-font 10 10 SF
0 setgray
77 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 25 M
(const) s
/F-gs-font 10 10 SF
0 setgray
113 25 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 25 M
(char) s
/F-gs-font 10 10 SF
0 setgray
143 25 M
( *fmt, va_list ap\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 14 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 14 M
(cputchar) s
/F-gs-font 10 10 SF
0 setgray
83 14 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 14 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 14 M
( c\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 3 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 3 M
(cputs) s
/F-gs-font 10 10 SF
0 setgray
59 3 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 3 M
(const) s
/F-gs-font 10 10 SF
0 setgray
95 3 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 3 M
(char) s
/F-gs-font 10 10 SF
0 setgray
125 3 M
( *str\);) s
_R
S
%%Page: (39) 39
%%BeginPageSetup
_S
18 36 translate
/pagenum 39 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 707 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 707 M
(getchar) s
/F-gs-font 10 10 SF
0 setgray
71 707 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
101 707 M
(\);) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 685 M
(/* kern/libs/readline.c */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 674 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 674 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
41 674 M
(readline) s
/F-gs-font 10 10 SF
0 setgray
89 674 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 674 M
(const) s
/F-gs-font 10 10 SF
0 setgray
125 674 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 674 M
(char) s
/F-gs-font 10 10 SF
0 setgray
155 674 M
( *prompt\);) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 652 M
(/* libs/printfmt.c */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 641 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 641 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 641 M
(printfmt) s
/F-gs-font 10 10 SF
0 setgray
83 641 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 641 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 641 M
( \(*putch\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
191 641 M
(, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 641 M
(void) s
/F-gs-font 10 10 SF
0 setgray
227 641 M
( *, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
269 641 M
(\), ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
287 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
305 641 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
335 641 M
(void) s
/F-gs-font 10 10 SF
0 setgray
359 641 M
( *putdat, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
419 641 M
(const) s
/F-gs-font 10 10 SF
0 setgray
449 641 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
455 641 M
(char) s
/F-gs-font 10 10 SF
0 setgray
479 641 M
( *fmt, ...\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 630 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 630 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 630 M
(vprintfmt) s
/F-gs-font 10 10 SF
0 setgray
89 630 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 630 M
(void) s
/F-gs-font 10 10 SF
0 setgray
119 630 M
( \(*putch\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 630 M
(int) s
/F-gs-font 10 10 SF
0 setgray
197 630 M
(, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
209 630 M
(void) s
/F-gs-font 10 10 SF
0 setgray
233 630 M
( *, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 630 M
(int) s
/F-gs-font 10 10 SF
0 setgray
275 630 M
(\), ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
293 630 M
(int) s
/F-gs-font 10 10 SF
0 setgray
311 630 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
341 630 M
(void) s
/F-gs-font 10 10 SF
0 setgray
365 630 M
( *putdat, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
425 630 M
(const) s
/F-gs-font 10 10 SF
0 setgray
455 630 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
461 630 M
(char) s
/F-gs-font 10 10 SF
0 setgray
485 630 M
( *fmt, va_list) s
5 619 M
( ap\);    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 608 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 608 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 608 M
(snprintf) s
/F-gs-font 10 10 SF
0 setgray
77 608 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 608 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 608 M
( *str, size_t size, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 608 M
(const) s
/F-gs-font 10 10 SF
0 setgray
257 608 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
263 608 M
(char) s
/F-gs-font 10 10 SF
0 setgray
287 608 M
( *fmt, ...\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 597 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 597 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 597 M
(vsnprintf) s
/F-gs-font 10 10 SF
0 setgray
83 597 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 597 M
(char) s
/F-gs-font 10 10 SF
0 setgray
113 597 M
( *str, size_t size, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
233 597 M
(const) s
/F-gs-font 10 10 SF
0 setgray
263 597 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
269 597 M
(char) s
/F-gs-font 10 10 SF
0 setgray
293 597 M
( *fmt, va_list ap\);) s
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 575 M
(/* !__LIBS_STDIO_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 553 M
([ucore/lab8_result/libs/string.c] ++++++++++++++++++++++++++++++) s
5 542 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 542 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 542 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 542 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 531 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 531 M
(<x86.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 509 M
(/* *) s
5 498 M
( * strlen - calculate the length of the string @s, not including) s
5 487 M
( * the terminating '\\0' character.) s
5 476 M
( * @s:      the input string) s
5 465 M
( *) s
5 454 M
( * The strlen\(\) function returns the length of string @s.) s
5 443 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(size_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 421 M
(strlen) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 421 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 421 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 421 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 421 M
( *s\) {) s
5 410 M
(    size_t cnt = 0;) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 399 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 399 M
( \(*s ++ != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
125 399 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
149 399 M
(\) {) s
5 388 M
(        cnt ++;) s
5 377 M
(    }) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 366 M
( cnt;) s
5 355 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 333 M
(/* *) s
5 322 M
( * strnlen - calculate the length of the string @s, not including) s
5 311 M
( * the terminating '\\0' char acter, but at most @len.) s
5 300 M
( * @s:      the input string) s
5 289 M
( * @len:    the max-length that function will scan) s
5 278 M
( *) s
5 267 M
( * Note that, this function looks only at the first @len characters) s
5 256 M
( * at @s, and never beyond @s + @len.) s
5 245 M
( *) s
5 234 M
( * The return value is strlen\(s\), if that is less than @len, or) s
5 223 M
( * @len if there is no '\\0' character among the first @len characters) s
5 212 M
( * pointed by @s.) s
5 201 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(size_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 179 M
(strnlen) s
/F-gs-font 10 10 SF
0 setgray
47 179 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 179 M
(const) s
/F-gs-font 10 10 SF
0 setgray
83 179 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 179 M
(char) s
/F-gs-font 10 10 SF
0 setgray
113 179 M
( *s, size_t len\) {) s
5 168 M
(    size_t cnt = 0;) s
5 157 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 157 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 157 M
( \(cnt < len && *s ++ != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
203 157 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
227 157 M
(\) {) s
5 146 M
(        cnt ++;) s
5 135 M
(    }) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 124 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 124 M
( cnt;) s
5 113 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 91 M
(/* *) s
5 80 M
( * strcat - appends a copy of the @src string to the @dst string. The terminating null) s
5 69 M
( * character in @dst is overwritten by the first character of @src, and a new null-character) s
5 58 M
( * is appended at the end of the new string formed by the concatenation of both in @dst.) s
5 47 M
( * @dst:    pointer to the @dst array, which should be large enough to contain the concatenate) s
5 36 M
(d) s
5 25 M
( *          resulting string.) s
5 14 M
( * @src:    string to be appended, this should not overlap @dst) s
5 3 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (40) 40
%%BeginPageSetup
_S
18 36 translate
/pagenum 40 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 707 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 696 M
(strcat) s
/F-gs-font 10 10 SF
0 setgray
41 696 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 696 M
(char) s
/F-gs-font 10 10 SF
0 setgray
71 696 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 696 M
(const) s
/F-gs-font 10 10 SF
0 setgray
143 696 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 696 M
(char) s
/F-gs-font 10 10 SF
0 setgray
173 696 M
( *src\) {) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 685 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 685 M
( strcpy\(dst + strlen\(dst\), src\);) s
5 674 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 652 M
(/* *) s
5 641 M
( * strcpy - copies the string pointed by @src into the array pointed by @dst,) s
5 630 M
( * including the terminating null character.) s
5 619 M
( * @dst:    pointer to the destination array where the content is to be copied) s
5 608 M
( * @src:    string to be copied) s
5 597 M
( *) s
5 586 M
( * The return value is @dst.) s
5 575 M
( *) s
5 564 M
( * To avoid overflows, the size of array pointed by @dst should be long enough to) s
5 553 M
( * contain the same string as @src \(including the terminating null character\), and) s
5 542 M
( * should not overlap in memory with @src.) s
5 531 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 520 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 520 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 509 M
(strcpy) s
/F-gs-font 10 10 SF
0 setgray
41 509 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 509 M
(char) s
/F-gs-font 10 10 SF
0 setgray
71 509 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 509 M
(const) s
/F-gs-font 10 10 SF
0 setgray
143 509 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 509 M
(char) s
/F-gs-font 10 10 SF
0 setgray
173 509 M
( *src\) {) s
5 498 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 498 M
(ifdef) s
/F-gs-font 10 10 SF
0 setgray
41 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
47 498 M
(__HAVE_ARCH_STRCPY) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 487 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 487 M
( __strcpy\(dst, src\);) s
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(else) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 465 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 465 M
( *p = dst;) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 454 M
( \(\(*p ++ = *src ++\) != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 454 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
221 454 M
(\)) s
5 443 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 443 M
(/* nothing */) s
/F-gs-font 10 10 SF
0 setgray
131 443 M
(;) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 432 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 432 M
( dst;) s
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 421 M
(/* __HAVE_ARCH_STRCPY */) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 388 M
(/* *) s
5 377 M
( * strncpy - copies the first @len characters of @src to @dst. If the end of string @src) s
5 366 M
( * if found before @len characters have been copied, @dst is padded with '\\0' until a) s
5 355 M
( * total of @len characters have been written to it.) s
5 344 M
( * @dst:    pointer to the destination array where the content is to be copied) s
5 333 M
( * @src:    string to be copied) s
5 322 M
( * @len:    maximum number of characters to be copied from @src) s
5 311 M
( *) s
5 300 M
( * The return value is @dst) s
5 289 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 278 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 278 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 267 M
(strncpy) s
/F-gs-font 10 10 SF
0 setgray
47 267 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 267 M
(char) s
/F-gs-font 10 10 SF
0 setgray
77 267 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 267 M
(const) s
/F-gs-font 10 10 SF
0 setgray
149 267 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 267 M
(char) s
/F-gs-font 10 10 SF
0 setgray
179 267 M
( *src, size_t len\) {) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 256 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 256 M
( *p = dst;) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 245 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 245 M
( \(len > 0\) {) s
5 234 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 234 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 234 M
( \(\(*p = *src\) != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
167 234 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
191 234 M
(\) {) s
5 223 M
(            src ++;) s
5 212 M
(        }) s
5 201 M
(        p ++, len --;) s
5 190 M
(    }) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 179 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 179 M
( dst;) s
5 168 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 146 M
(/* *) s
5 135 M
( * strcmp - compares the string @s1 and @s2) s
5 124 M
( * @s1:     string to be compared) s
5 113 M
( * @s2:     string to be compared) s
5 102 M
( *) s
5 91 M
( * This function starts comparing the first character of each string. If) s
5 80 M
( * they are equal to each other, it continues with the following pairs until) s
5 69 M
( * the characters differ or until a terminanting null-character is reached.) s
5 58 M
( *) s
5 47 M
( * Returns an integral value indicating the relationship between the strings:) s
5 36 M
( * - A zero value indicates that both strings are equal;) s
5 25 M
( * - A value greater than zero indicates that the first character that does) s
5 14 M
( *   not match has a greater value in @s1 than in @s2;) s
5 3 M
( * - And a value less than zero indicates the opposite.) s
_R
S
%%Page: (41) 41
%%BeginPageSetup
_S
18 36 translate
/pagenum 41 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 696 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 685 M
(strcmp) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 685 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 685 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 685 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 685 M
( *s1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 685 M
(const) s
/F-gs-font 10 10 SF
0 setgray
173 685 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 685 M
(char) s
/F-gs-font 10 10 SF
0 setgray
203 685 M
( *s2\) {) s
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(ifdef) s
/F-gs-font 10 10 SF
0 setgray
41 674 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
47 674 M
(__HAVE_ARCH_STRCMP) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 663 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 663 M
( __strcmp\(s1, s2\);) s
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(else) s
/F-gs-font 10 10 SF
0 setgray
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 641 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 641 M
( \(*s1 != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 641 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
137 641 M
( && *s1 == *s2\) {) s
5 630 M
(        s1 ++, s2 ++;) s
5 619 M
(    }) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 608 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 608 M
( \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 608 M
(int) s
/F-gs-font 10 10 SF
0 setgray
95 608 M
(\)\(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 608 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
161 608 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 608 M
(char) s
/F-gs-font 10 10 SF
0 setgray
191 608 M
(\)*s1 - \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
239 608 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
287 608 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
293 608 M
(char) s
/F-gs-font 10 10 SF
0 setgray
317 608 M
(\)*s2\);) s
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 597 M
(/* __HAVE_ARCH_STRCMP */) s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 564 M
(/* *) s
5 553 M
( * strncmp - compares up to @n characters of the string @s1 to those of the string @s2) s
5 542 M
( * @s1:     string to be compared) s
5 531 M
( * @s2:     string to be compared) s
5 520 M
( * @n:      maximum number of characters to compare) s
5 509 M
( *) s
5 498 M
( * This function starts comparing the first character of each string. If) s
5 487 M
( * they are equal to each other, it continues with the following pairs until) s
5 476 M
( * the characters differ, until a terminating null-character is reached, or) s
5 465 M
( * until @n characters match in both strings, whichever happens first.) s
5 454 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 432 M
(strncmp) s
/F-gs-font 10 10 SF
0 setgray
47 432 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 432 M
(const) s
/F-gs-font 10 10 SF
0 setgray
83 432 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 432 M
(char) s
/F-gs-font 10 10 SF
0 setgray
113 432 M
( *s1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 432 M
(const) s
/F-gs-font 10 10 SF
0 setgray
179 432 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 432 M
(char) s
/F-gs-font 10 10 SF
0 setgray
209 432 M
( *s2, size_t n\) {) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 421 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 421 M
( \(n > 0 && *s1 != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
167 421 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
191 421 M
( && *s1 == *s2\) {) s
5 410 M
(        n --, s1 ++, s2 ++;) s
5 399 M
(    }) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 388 M
( \(n == 0\) ? 0 : \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 388 M
(int) s
/F-gs-font 10 10 SF
0 setgray
185 388 M
(\)\(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 388 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
251 388 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 388 M
(char) s
/F-gs-font 10 10 SF
0 setgray
281 388 M
(\)*s1 - \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
329 388 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
377 388 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
383 388 M
(char) s
/F-gs-font 10 10 SF
0 setgray
407 388 M
(\)*s2\);) s
5 377 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 355 M
(/* *) s
5 344 M
( * strchr - locates first occurrence of character in string) s
5 333 M
( * @s:      the input string) s
5 322 M
( * @c:      character to be located) s
5 311 M
( *) s
5 300 M
( * The strchr\(\) function returns a pointer to the first occurrence of) s
5 289 M
( * character in @s. If the value is not found, the function returns 'NULL'.) s
5 278 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 267 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 256 M
(strchr) s
/F-gs-font 10 10 SF
0 setgray
41 256 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 256 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 256 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 256 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 256 M
( *s, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 256 M
(char) s
/F-gs-font 10 10 SF
0 setgray
161 256 M
( c\) {) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 245 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 245 M
( \(*s != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 245 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
131 245 M
(\) {) s
5 234 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 234 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 234 M
( \(*s == c\) {) s
5 223 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 223 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 223 M
( \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 223 M
(char) s
/F-gs-font 10 10 SF
0 setgray
149 223 M
( *\)s;) s
5 212 M
(        }) s
5 201 M
(        s ++;) s
5 190 M
(    }) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 179 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 179 M
( NULL;) s
5 168 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 146 M
(/* *) s
5 135 M
( * strfind - locates first occurrence of character in string) s
5 124 M
( * @s:      the input string) s
5 113 M
( * @c:      character to be located) s
5 102 M
( *) s
5 91 M
( * The strfind\(\) function is like strchr\(\) except that if @c is) s
5 80 M
( * not found in @s, then it returns a pointer to the null byte at the) s
5 69 M
( * end of @s, rather than 'NULL'.) s
5 58 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 47 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 47 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 36 M
(strfind) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 36 M
(const) s
/F-gs-font 10 10 SF
0 setgray
83 36 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 36 M
(char) s
/F-gs-font 10 10 SF
0 setgray
113 36 M
( *s, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 36 M
(char) s
/F-gs-font 10 10 SF
0 setgray
167 36 M
( c\) {) s
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 25 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 25 M
( \(*s != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 25 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
131 25 M
(\) {) s
5 14 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 14 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
( \(*s == c\) {) s
5 3 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 3 M
(break) s
/F-gs-font 10 10 SF
0 setgray
107 3 M
(;) s
_R
S
%%Page: (42) 42
%%BeginPageSetup
_S
18 36 translate
/pagenum 42 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        }) s
5 696 M
(        s ++;) s
5 685 M
(    }) s
5 674 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 674 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 674 M
( \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 674 M
(char) s
/F-gs-font 10 10 SF
0 setgray
101 674 M
( *\)s;) s
5 663 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 641 M
(/* *) s
5 630 M
( * strtol - converts string to long integer) s
5 619 M
( * @s:      the input string that contains the representation of an integer number) s
5 608 M
( * @endptr: reference to an object of type char *, whose value is set by the) s
5 597 M
( *          function to the next character in @s after the numerical value. This) s
5 586 M
( *          parameter can also be a null pointer, in which case it is not used.) s
5 575 M
( * @base:   x) s
5 564 M
( *) s
5 553 M
( * The function first discards as many whitespace characters as necessary until) s
5 542 M
( * the first non-whitespace character is found. Then, starting from this character,) s
5 531 M
( * takes as many characters as possible that are valid following a syntax that) s
5 520 M
( * depends on the base parameter, and interprets them as a numerical value. Finally,) s
5 509 M
( * a pointer to the first character following the integer representation in @s) s
5 498 M
( * is stored in the object pointed by @endptr.) s
5 487 M
( *) s
5 476 M
( * If the value of base is zero, the syntax expected is similar to that of) s
5 465 M
( * integer constants, which is formed by a succession of:) s
5 454 M
( * - An optional plus or minus sign;) s
5 443 M
( * - An optional prefix indicating octal or hexadecimal base \("0" or "0x" respectively\)) s
5 432 M
( * - A sequence of decimal digits \(if no base prefix was specified\) or either octal) s
5 421 M
( *   or hexadecimal digits if a specific prefix is present) s
5 410 M
( *) s
5 399 M
( * If the base value is between 2 and 36, the format expected for the integral number) s
5 388 M
( * is a succession of the valid digits and/or letters needed to represent integers of) s
5 377 M
( * the specified radix \(starting from '0' and up to 'z'/'Z' for radix 36\). The) s
5 366 M
( * sequence may optionally be preceded by a plus or minus sign and, if base is 16,) s
5 355 M
( * an optional "0x" or "0X" prefix.) s
5 344 M
( *) s
5 333 M
( * The strtol\(\) function returns the converted integral number as a long int value.) s
5 322 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 311 M
(long) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 300 M
(strtol) s
/F-gs-font 10 10 SF
0 setgray
41 300 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 300 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 300 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 300 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 300 M
( *s, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 300 M
(char) s
/F-gs-font 10 10 SF
0 setgray
161 300 M
( **endptr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 300 M
(int) s
/F-gs-font 10 10 SF
0 setgray
245 300 M
( base\) {) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 289 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( neg = 0;) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 278 M
(long) s
/F-gs-font 10 10 SF
0 setgray
53 278 M
( val = 0;) s
5 256 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 256 M
(// gobble initial whitespace) s
/F-gs-font 10 10 SF
0 setgray
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 245 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 245 M
( \(*s == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 245 M
(' ') s
/F-gs-font 10 10 SF
0 setgray
125 245 M
( || *s == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
185 245 M
('\\t') s
/F-gs-font 10 10 SF
0 setgray
209 245 M
(\) {) s
5 234 M
(        s ++;) s
5 223 M
(    }) s
5 201 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 201 M
(// plus/minus sign) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 190 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 190 M
( \(*s == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 190 M
('+') s
/F-gs-font 10 10 SF
0 setgray
107 190 M
(\) {) s
5 179 M
(        s ++;) s
5 168 M
(    }) s
5 157 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 157 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 157 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
59 157 M
(if) s
/F-gs-font 10 10 SF
0 setgray
71 157 M
( \(*s == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
119 157 M
('-') s
/F-gs-font 10 10 SF
0 setgray
137 157 M
(\) {) s
5 146 M
(        s ++, neg = 1;) s
5 135 M
(    }) s
5 113 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 113 M
(// hex or octal base prefix) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 102 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 102 M
( \(\(base == 0 || base == 16\) && \(s[0] == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 102 M
('0') s
/F-gs-font 10 10 SF
0 setgray
299 102 M
( && s[1] == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
371 102 M
('x') s
/F-gs-font 10 10 SF
0 setgray
389 102 M
(\)\) {) s
5 91 M
(        s += 2, base = 16;) s
5 80 M
(    }) s
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 69 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
59 69 M
(if) s
/F-gs-font 10 10 SF
0 setgray
71 69 M
( \(base == 0 && s[0] == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 69 M
('0') s
/F-gs-font 10 10 SF
0 setgray
227 69 M
(\) {) s
5 58 M
(        s ++, base = 8;) s
5 47 M
(    }) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 36 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 36 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
59 36 M
(if) s
/F-gs-font 10 10 SF
0 setgray
71 36 M
( \(base == 0\) {) s
5 25 M
(        base = 10;) s
5 14 M
(    }) s
_R
S
%%Page: (43) 43
%%BeginPageSetup
_S
18 36 translate
/pagenum 43 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 707 M
(// digits) s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 696 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 696 M
( \(1\) {) s
5 685 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 685 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 685 M
( dig;) s
5 663 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 663 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 663 M
( \(*s >= ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 663 M
('0') s
/F-gs-font 10 10 SF
0 setgray
131 663 M
( && *s <= ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
191 663 M
('9') s
/F-gs-font 10 10 SF
0 setgray
209 663 M
(\) {) s
5 652 M
(            dig = *s - ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 652 M
('0') s
/F-gs-font 10 10 SF
0 setgray
161 652 M
(;) s
5 641 M
(        }) s
5 630 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 630 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 630 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
83 630 M
(if) s
/F-gs-font 10 10 SF
0 setgray
95 630 M
( \(*s >= ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 630 M
('a') s
/F-gs-font 10 10 SF
0 setgray
161 630 M
( && *s <= ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
221 630 M
('z') s
/F-gs-font 10 10 SF
0 setgray
239 630 M
(\) {) s
5 619 M
(            dig = *s - ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 619 M
('a') s
/F-gs-font 10 10 SF
0 setgray
161 619 M
( + 10;) s
5 608 M
(        }) s
5 597 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 597 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 597 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
83 597 M
(if) s
/F-gs-font 10 10 SF
0 setgray
95 597 M
( \(*s >= ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 597 M
('A') s
/F-gs-font 10 10 SF
0 setgray
161 597 M
( && *s <= ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
221 597 M
('Z') s
/F-gs-font 10 10 SF
0 setgray
239 597 M
(\) {) s
5 586 M
(            dig = *s - ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 586 M
('A') s
/F-gs-font 10 10 SF
0 setgray
161 586 M
( + 10;) s
5 575 M
(        }) s
5 564 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 564 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 564 M
( {) s
5 553 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 553 M
(break) s
/F-gs-font 10 10 SF
0 setgray
107 553 M
(;) s
5 542 M
(        }) s
5 531 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 531 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 531 M
( \(dig >= base\) {) s
5 520 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 520 M
(break) s
/F-gs-font 10 10 SF
0 setgray
107 520 M
(;) s
5 509 M
(        }) s
5 498 M
(        s ++, val = \(val * base\) + dig;) s
5 487 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 487 M
(// we don't properly detect overflow!) s
/F-gs-font 10 10 SF
0 setgray
5 476 M
(    }) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( \(endptr\) {) s
5 443 M
(        *endptr = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 443 M
(char) s
/F-gs-font 10 10 SF
0 setgray
143 443 M
( *\) s;) s
5 432 M
(    }) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 421 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 421 M
( \(neg ? -val : val\);) s
5 410 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 388 M
(/* *) s
5 377 M
( * memset - sets the first @n bytes of the memory area pointed by @s) s
5 366 M
( * to the specified value @c.) s
5 355 M
( * @s:      pointer the the memory area to fill) s
5 344 M
( * @c:      value to set) s
5 333 M
( * @n:      number of bytes to be set to the value) s
5 322 M
( *) s
5 311 M
( * The memset\(\) function returns @s.) s
5 300 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 289 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 278 M
(memset) s
/F-gs-font 10 10 SF
0 setgray
41 278 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 278 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 278 M
( *s, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 278 M
(char) s
/F-gs-font 10 10 SF
0 setgray
125 278 M
( c, size_t n\) {) s
5 267 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 267 M
(ifdef) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
47 267 M
(__HAVE_ARCH_MEMSET) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 256 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 256 M
( __memset\(s, c, n\);) s
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(else) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 234 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 234 M
( *p = s;) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 223 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 223 M
( \(n -- > 0\) {) s
5 212 M
(        *p ++ = c;) s
5 201 M
(    }) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 190 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 190 M
( s;) s
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 179 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 179 M
(/* __HAVE_ARCH_MEMSET */) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 146 M
(/* *) s
5 135 M
( * memmove - copies the values of @n bytes from the location pointed by @src to) s
5 124 M
( * the memory area pointed by @dst. @src and @dst are allowed to overlap.) s
5 113 M
( * @dst     pointer to the destination array where the content is to be copied) s
5 102 M
( * @src     pointer to the source of data to by copied) s
5 91 M
( * @n:      number of bytes to copy) s
5 80 M
( *) s
5 69 M
( * The memmove\(\) function returns @dst.) s
5 58 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 47 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 47 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 36 M
(memmove) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 36 M
(void) s
/F-gs-font 10 10 SF
0 setgray
77 36 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 36 M
(const) s
/F-gs-font 10 10 SF
0 setgray
149 36 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 36 M
(void) s
/F-gs-font 10 10 SF
0 setgray
179 36 M
( *src, size_t n\) {) s
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(ifdef) s
/F-gs-font 10 10 SF
0 setgray
41 25 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
47 25 M
(__HAVE_ARCH_MEMMOVE) s
/F-gs-font 10 10 SF
0 setgray
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 14 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
( __memmove\(dst, src, n\);) s
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(else) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (44) 44
%%BeginPageSetup
_S
18 36 translate
/pagenum 44 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 707 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 707 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 707 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 707 M
( *s = src;) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 696 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 696 M
( *d = dst;) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 685 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( \(s < d && s + n > d\) {) s
5 674 M
(        s += n, d += n;) s
5 663 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 663 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 663 M
( \(n -- > 0\) {) s
5 652 M
(            *-- d = *-- s;) s
5 641 M
(        }) s
5 630 M
(    } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
41 630 M
(else) s
/F-gs-font 10 10 SF
0 setgray
65 630 M
( {) s
5 619 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 619 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 619 M
( \(n -- > 0\) {) s
5 608 M
(            *d ++ = *s ++;) s
5 597 M
(        }) s
5 586 M
(    }) s
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 575 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 575 M
( dst;) s
5 564 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 564 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 564 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 564 M
(/* __HAVE_ARCH_MEMMOVE */) s
/F-gs-font 10 10 SF
0 setgray
5 553 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 531 M
(/* *) s
5 520 M
( * memcpy - copies the value of @n bytes from the location pointed by @src to) s
5 509 M
( * the memory area pointed by @dst.) s
5 498 M
( * @dst     pointer to the destination array where the content is to be copied) s
5 487 M
( * @src     pointer to the source of data to by copied) s
5 476 M
( * @n:      number of bytes to copy) s
5 465 M
( *) s
5 454 M
( * The memcpy\(\) returns @dst.) s
5 443 M
( *) s
5 432 M
( * Note that, the function does not check any terminating null character in @src,) s
5 421 M
( * it always copies exactly @n bytes. To avoid overflows, the size of arrays pointed) s
5 410 M
( * by both @src and @dst, should be at least @n bytes, and should not overlap) s
5 399 M
( * \(for overlapping memory area, memmove is a safer approach\).) s
5 388 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 377 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 377 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 366 M
(memcpy) s
/F-gs-font 10 10 SF
0 setgray
41 366 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 366 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 366 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 366 M
(const) s
/F-gs-font 10 10 SF
0 setgray
143 366 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 366 M
(void) s
/F-gs-font 10 10 SF
0 setgray
173 366 M
( *src, size_t n\) {) s
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(ifdef) s
/F-gs-font 10 10 SF
0 setgray
41 355 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
47 355 M
(__HAVE_ARCH_MEMCPY) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 344 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 344 M
( __memcpy\(dst, src, n\);) s
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(else) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 322 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 322 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 322 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 322 M
( *s = src;) s
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 311 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 311 M
( *d = dst;) s
5 300 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 300 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 300 M
( \(n -- > 0\) {) s
5 289 M
(        *d ++ = *s ++;) s
5 278 M
(    }) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 267 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 267 M
( dst;) s
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 256 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 256 M
(/* __HAVE_ARCH_MEMCPY */) s
/F-gs-font 10 10 SF
0 setgray
5 245 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 223 M
(/* *) s
5 212 M
( * memcmp - compares two blocks of memory) s
5 201 M
( * @v1:     pointer to block of memory) s
5 190 M
( * @v2:     pointer to block of memory) s
5 179 M
( * @n:      number of bytes to compare) s
5 168 M
( *) s
5 157 M
( * The memcmp\(\) functions returns an integral value indicating the) s
5 146 M
( * relationship between the content of the memory blocks:) s
5 135 M
( * - A zero value indicates that the contents of both memory blocks are equal;) s
5 124 M
( * - A value greater than zero indicates that the first byte that does not) s
5 113 M
( *   match in both memory blocks has a greater value in @v1 than in @v2) s
5 102 M
( *   as if evaluated as unsigned char values;) s
5 91 M
( * - And a value less than zero indicates the opposite.) s
5 80 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 58 M
(memcmp) s
/F-gs-font 10 10 SF
0 setgray
41 58 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 58 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 58 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 58 M
(void) s
/F-gs-font 10 10 SF
0 setgray
107 58 M
( *v1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 58 M
(const) s
/F-gs-font 10 10 SF
0 setgray
173 58 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 58 M
(void) s
/F-gs-font 10 10 SF
0 setgray
203 58 M
( *v2, size_t n\) {) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 47 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 47 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 47 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 47 M
( *s1 = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 47 M
(const) s
/F-gs-font 10 10 SF
0 setgray
167 47 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 47 M
(char) s
/F-gs-font 10 10 SF
0 setgray
197 47 M
( *\)v1;) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 36 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 36 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 36 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 36 M
( *s2 = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 36 M
(const) s
/F-gs-font 10 10 SF
0 setgray
167 36 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 36 M
(char) s
/F-gs-font 10 10 SF
0 setgray
197 36 M
( *\)v2;) s
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 25 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 25 M
( \(n -- > 0\) {) s
5 14 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 14 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
( \(*s1 != *s2\) {) s
5 3 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 3 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 3 M
( \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
143 3 M
(\)\(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
161 3 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
209 3 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 3 M
(char) s
/F-gs-font 10 10 SF
0 setgray
239 3 M
(\)*s1 - \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
287 3 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
335 3 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
341 3 M
(char) s
/F-gs-font 10 10 SF
0 setgray
365 3 M
(\)*s2\);) s
_R
S
%%Page: (45) 45
%%BeginPageSetup
_S
18 36 translate
/pagenum 45 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        }) s
5 696 M
(        s1 ++, s2 ++;) s
5 685 M
(    }) s
5 674 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 674 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 674 M
( 0;) s
5 663 M
(}) s
5 641 M
([ucore/lab8_result/libs/list.h] ++++++++++++++++++++++++++++++) s
5 630 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 630 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 630 M
(__LIBS_LIST_H__) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 619 M
(__LIBS_LIST_H__) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 597 M
(__ASSEMBLER__) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 575 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 575 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 553 M
(/* *) s
5 542 M
( * Simple doubly linked list implementation.) s
5 531 M
( *) s
5 520 M
( * Some of the internal functions \("__xxx"\) are useful when manipulating) s
5 509 M
( * whole lists rather than single entries, as sometimes we already know) s
5 498 M
( * the next/prev entries and we can generate better code by using them) s
5 487 M
( * directly rather than using the generic single-entry routines.) s
5 476 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( list_entry {) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 443 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 443 M
( list_entry *prev, *next;) s
5 432 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 410 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 410 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 410 M
( list_entry list_entry_t;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 388 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 388 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 388 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 388 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 388 M
(list_init) s
/F-gs-font 10 10 SF
0 setgray
173 388 M
(\(list_entry_t *elm\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 377 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 377 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 377 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 377 M
(list_add) s
/F-gs-font 10 10 SF
0 setgray
167 377 M
(\(list_entry_t *listelm, list_entry_t *elm\) __attribute__\(\(always_in) s
5 366 M
(line\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 355 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 355 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 355 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 355 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 355 M
(list_add_before) s
/F-gs-font 10 10 SF
0 setgray
209 355 M
(\(list_entry_t *listelm, list_entry_t *elm\) __attribute__\(\(al) s
5 344 M
(ways_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 333 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 333 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 333 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 333 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 333 M
(list_add_after) s
/F-gs-font 10 10 SF
0 setgray
203 333 M
(\(list_entry_t *listelm, list_entry_t *elm\) __attribute__\(\(alw) s
5 322 M
(ays_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 311 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 311 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 311 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 311 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 311 M
(list_del) s
/F-gs-font 10 10 SF
0 setgray
167 311 M
(\(list_entry_t *listelm\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 300 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 300 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 300 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 300 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 300 M
(list_del_init) s
/F-gs-font 10 10 SF
0 setgray
197 300 M
(\(list_entry_t *listelm\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( inline bool ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 289 M
(list_empty) s
/F-gs-font 10 10 SF
0 setgray
179 289 M
(\(list_entry_t *list\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 278 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 278 M
( inline list_entry_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
173 278 M
(list_next) s
/F-gs-font 10 10 SF
0 setgray
227 278 M
(\(list_entry_t *listelm\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( inline list_entry_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
173 267 M
(list_prev) s
/F-gs-font 10 10 SF
0 setgray
227 267 M
(\(list_entry_t *listelm\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 245 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 245 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 245 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 245 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 245 M
(__list_add) s
/F-gs-font 10 10 SF
0 setgray
179 245 M
(\(list_entry_t *elm, list_entry_t *prev, list_entry_t *next\) __att) s
5 234 M
(ribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 223 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 223 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 223 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 223 M
(__list_del) s
/F-gs-font 10 10 SF
0 setgray
179 223 M
(\(list_entry_t *prev, list_entry_t *next\) __attribute__\(\(always_in) s
5 212 M
(line\)\);) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 190 M
(/* *) s
5 179 M
( * list_init - initialize a new entry) s
5 168 M
( * @elm:        new entry to be initialized) s
5 157 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 146 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 135 M
(list_init) s
/F-gs-font 10 10 SF
0 setgray
59 135 M
(\(list_entry_t *elm\) {) s
5 124 M
(    elm->prev = elm->next = elm;) s
5 113 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 91 M
(/* *) s
5 80 M
( * list_add - add a new entry) s
5 69 M
( * @listelm:    list head to add after) s
5 58 M
( * @elm:        new entry to be added) s
5 47 M
( *) s
5 36 M
( * Insert the new element @elm *after* the element @listelm which) s
5 25 M
( * is already in the list.) s
5 14 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 3 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (46) 46
%%BeginPageSetup
_S
18 36 translate
/pagenum 46 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 707 M
(list_add) s
/F-gs-font 10 10 SF
0 setgray
53 707 M
(\(list_entry_t *listelm, list_entry_t *elm\) {) s
5 696 M
(    list_add_after\(listelm, elm\);) s
5 685 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 663 M
(/* *) s
5 652 M
( * list_add_before - add a new entry) s
5 641 M
( * @listelm:    list head to add before) s
5 630 M
( * @elm:        new entry to be added) s
5 619 M
( *) s
5 608 M
( * Insert the new element @elm *before* the element @listelm which) s
5 597 M
( * is already in the list.) s
5 586 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 575 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 564 M
(list_add_before) s
/F-gs-font 10 10 SF
0 setgray
95 564 M
(\(list_entry_t *listelm, list_entry_t *elm\) {) s
5 553 M
(    __list_add\(elm, listelm->prev, listelm\);) s
5 542 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 520 M
(/* *) s
5 509 M
( * list_add_after - add a new entry) s
5 498 M
( * @listelm:    list head to add after) s
5 487 M
( * @elm:        new entry to be added) s
5 476 M
( *) s
5 465 M
( * Insert the new element @elm *after* the element @listelm which) s
5 454 M
( * is already in the list.) s
5 443 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 432 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 432 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 432 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 421 M
(list_add_after) s
/F-gs-font 10 10 SF
0 setgray
89 421 M
(\(list_entry_t *listelm, list_entry_t *elm\) {) s
5 410 M
(    __list_add\(elm, listelm, listelm->next\);) s
5 399 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 377 M
(/* *) s
5 366 M
( * list_del - deletes entry from list) s
5 355 M
( * @listelm:    the element to delete from the list) s
5 344 M
( *) s
5 333 M
( * Note: list_empty\(\) on @listelm does not return true after this, the entry is) s
5 322 M
( * in an undefined state.) s
5 311 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 300 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 300 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 300 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 289 M
(list_del) s
/F-gs-font 10 10 SF
0 setgray
53 289 M
(\(list_entry_t *listelm\) {) s
5 278 M
(    __list_del\(listelm->prev, listelm->next\);) s
5 267 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 245 M
(/* *) s
5 234 M
( * list_del_init - deletes entry from list and reinitialize it.) s
5 223 M
( * @listelm:    the element to delete from the list.) s
5 212 M
( *) s
5 201 M
( * Note: list_empty\(\) on @listelm returns true after this.) s
5 190 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 179 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 179 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 179 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 168 M
(list_del_init) s
/F-gs-font 10 10 SF
0 setgray
83 168 M
(\(list_entry_t *listelm\) {) s
5 157 M
(    list_del\(listelm\);) s
5 146 M
(    list_init\(listelm\);) s
5 135 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 113 M
(/* *) s
5 102 M
( * list_empty - tests whether a list is empty) s
5 91 M
( * @list:       the list to test.) s
5 80 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( inline bool) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 58 M
(list_empty) s
/F-gs-font 10 10 SF
0 setgray
65 58 M
(\(list_entry_t *list\) {) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 47 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
( list->next == list;) s
5 36 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 14 M
(/* *) s
5 3 M
( * list_next - get the next entry) s
_R
S
%%Page: (47) 47
%%BeginPageSetup
_S
18 36 translate
/pagenum 47 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
( * @listelm:    the list head) s
5 696 M
( **/) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 685 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( inline list_entry_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 674 M
(list_next) s
/F-gs-font 10 10 SF
0 setgray
59 674 M
(\(list_entry_t *listelm\) {) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 663 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 663 M
( listelm->next;) s
5 652 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 630 M
(/* *) s
5 619 M
( * list_prev - get the previous entry) s
5 608 M
( * @listelm:    the list head) s
5 597 M
( **/) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 586 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 586 M
( inline list_entry_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 575 M
(list_prev) s
/F-gs-font 10 10 SF
0 setgray
59 575 M
(\(list_entry_t *listelm\) {) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 564 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 564 M
( listelm->prev;) s
5 553 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 531 M
(/* *) s
5 520 M
( * Insert a new entry between two known consecutive entries.) s
5 509 M
( *) s
5 498 M
( * This is only for internal list manipulation where we know) s
5 487 M
( * the prev/next entries already!) s
5 476 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 465 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 465 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 465 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 454 M
(__list_add) s
/F-gs-font 10 10 SF
0 setgray
65 454 M
(\(list_entry_t *elm, list_entry_t *prev, list_entry_t *next\) {) s
5 443 M
(    prev->next = next->prev = elm;) s
5 432 M
(    elm->next = next;) s
5 421 M
(    elm->prev = prev;) s
5 410 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 388 M
(/* *) s
5 377 M
( * Delete a list entry by making the prev/next entries point to each other.) s
5 366 M
( *) s
5 355 M
( * This is only for internal list manipulation where we know) s
5 344 M
( * the prev/next entries already!) s
5 333 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 322 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 322 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 322 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 311 M
(__list_del) s
/F-gs-font 10 10 SF
0 setgray
65 311 M
(\(list_entry_t *prev, list_entry_t *next\) {) s
5 300 M
(    prev->next = next;) s
5 289 M
(    next->prev = prev;) s
5 278 M
(}) s
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 256 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 256 M
(/* !__ASSEMBLER__ */) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 234 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 234 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 234 M
(/* !__LIBS_LIST_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 212 M
([ucore/lab8_result/libs/printfmt.c] ++++++++++++++++++++++++++++++) s
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 201 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 201 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 190 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 190 M
(<x86.h>) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 179 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 168 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 168 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 157 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 157 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 146 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 146 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 124 M
(/* *) s
5 113 M
( * Space or zero padding and a field width are supported for the numeric) s
5 102 M
( * formats only.) s
5 91 M
( *) s
5 80 M
( * The special format %e takes an integer error code) s
5 69 M
( * and prints a string describing the error.) s
5 58 M
( * The integer may be positive or negative,) s
5 47 M
( * so that -E_NO_MEM and E_NO_MEM are equivalent.) s
5 36 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 14 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 14 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 14 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 14 M
( * ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 14 M
(const) s
/F-gs-font 10 10 SF
0 setgray
155 14 M
( error_string[MAXERROR + 1] = {) s
5 3 M
(        [0]                     NULL,) s
_R
S
%%Page: (48) 48
%%BeginPageSetup
_S
18 36 translate
/pagenum 48 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        [E_UNSPECIFIED]         ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 707 M
("unspecified error") s
/F-gs-font 10 10 SF
0 setgray
311 707 M
(,) s
5 696 M
(        [E_BAD_PROC]            ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 696 M
("bad process") s
/F-gs-font 10 10 SF
0 setgray
275 696 M
(,) s
5 685 M
(        [E_INVAL]               ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 685 M
("invalid parameter") s
/F-gs-font 10 10 SF
0 setgray
311 685 M
(,) s
5 674 M
(        [E_NO_MEM]              ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 674 M
("out of memory") s
/F-gs-font 10 10 SF
0 setgray
287 674 M
(,) s
5 663 M
(        [E_NO_FREE_PROC]        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 663 M
("out of processes") s
/F-gs-font 10 10 SF
0 setgray
305 663 M
(,) s
5 652 M
(        [E_FAULT]               ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 652 M
("segmentation fault") s
/F-gs-font 10 10 SF
0 setgray
317 652 M
(,) s
5 641 M
(        [E_INVAL_ELF]           ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 641 M
("invalid elf file") s
/F-gs-font 10 10 SF
0 setgray
305 641 M
(,) s
5 630 M
(        [E_KILLED]              ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 630 M
("process is killed") s
/F-gs-font 10 10 SF
0 setgray
311 630 M
(,) s
5 619 M
(        [E_PANIC]               ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 619 M
("panic failure") s
/F-gs-font 10 10 SF
0 setgray
287 619 M
(,) s
5 608 M
(        [E_NO_DEV]              ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 608 M
("no such device") s
/F-gs-font 10 10 SF
0 setgray
293 608 M
(,) s
5 597 M
(        [E_NA_DEV]              ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 597 M
("device not available") s
/F-gs-font 10 10 SF
0 setgray
329 597 M
(,) s
5 586 M
(        [E_BUSY]                ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 586 M
("device/file is busy") s
/F-gs-font 10 10 SF
0 setgray
323 586 M
(,) s
5 575 M
(        [E_NOENT]               ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 575 M
("no such file or directory") s
/F-gs-font 10 10 SF
0 setgray
359 575 M
(,) s
5 564 M
(        [E_ISDIR]               ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 564 M
("is a directory") s
/F-gs-font 10 10 SF
0 setgray
293 564 M
(,) s
5 553 M
(        [E_NOTDIR]              ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 553 M
("not a directory") s
/F-gs-font 10 10 SF
0 setgray
299 553 M
(,) s
5 542 M
(        [E_XDEV]                ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 542 M
("cross device link") s
/F-gs-font 10 10 SF
0 setgray
311 542 M
(,) s
5 531 M
(        [E_UNIMP]               ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 531 M
("unimplemented feature") s
/F-gs-font 10 10 SF
0 setgray
335 531 M
(,) s
5 520 M
(        [E_SEEK]                ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 520 M
("illegal seek") s
/F-gs-font 10 10 SF
0 setgray
281 520 M
(,) s
5 509 M
(        [E_MAX_OPEN]            ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 509 M
("too many files are open") s
/F-gs-font 10 10 SF
0 setgray
347 509 M
(,) s
5 498 M
(        [E_EXISTS]              ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 498 M
("file or directory already exists") s
/F-gs-font 10 10 SF
0 setgray
401 498 M
(,) s
5 487 M
(        [E_NOTEMPTY]            ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 487 M
("directory is not empty") s
/F-gs-font 10 10 SF
0 setgray
341 487 M
(,) s
5 476 M
(};) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 454 M
(/* *) s
5 443 M
( * printnum - print a number \(base <= 16\) in reverse order) s
5 432 M
( * @putch:      specified putch function, print a single character) s
5 421 M
( * @fd:         file descriptor) s
5 410 M
( * @putdat:     used by @putch function) s
5 399 M
( * @num:        the number will be printed) s
5 388 M
( * @base:       base for print, must be in [1, 16]) s
5 377 M
( * @width:      maximum number of digits, if the actual width is less than @width, use @padc i) s
5 366 M
(nstead) s
5 355 M
( * @padc:       character that padded on the left if the actual width is less than @width) s
5 344 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 333 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 333 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 333 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 322 M
(printnum) s
/F-gs-font 10 10 SF
0 setgray
53 322 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 322 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 322 M
( \(*putch\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 322 M
(int) s
/F-gs-font 10 10 SF
0 setgray
161 322 M
(, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 322 M
(void) s
/F-gs-font 10 10 SF
0 setgray
197 322 M
(*, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 322 M
(int) s
/F-gs-font 10 10 SF
0 setgray
233 322 M
(\), ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 322 M
(int) s
/F-gs-font 10 10 SF
0 setgray
269 322 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
299 322 M
(void) s
/F-gs-font 10 10 SF
0 setgray
323 322 M
( *putdat,) s
5 311 M
(                ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 311 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
149 311 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 311 M
(long) s
/F-gs-font 10 10 SF
0 setgray
179 311 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 311 M
(long) s
/F-gs-font 10 10 SF
0 setgray
209 311 M
( num, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 311 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
293 311 M
( base, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
335 311 M
(int) s
/F-gs-font 10 10 SF
0 setgray
353 311 M
( width, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
401 311 M
(int) s
/F-gs-font 10 10 SF
0 setgray
419 311 M
( padc\) {) s
5 300 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 300 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
101 300 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 300 M
(long) s
/F-gs-font 10 10 SF
0 setgray
131 300 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 300 M
(long) s
/F-gs-font 10 10 SF
0 setgray
161 300 M
( result = num;) s
5 289 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 289 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
101 289 M
( mod = do_div\(result, base\);) s
5 267 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 267 M
(// first recursively print all preceding \(more significant\) digits) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 256 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 256 M
( \(num >= base\) {) s
5 245 M
(                printnum\(putch, fd, putdat, result, base, width - 1, padc\);) s
5 234 M
(        } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 234 M
(else) s
/F-gs-font 10 10 SF
0 setgray
89 234 M
( {) s
5 223 M
(                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
101 223 M
(// print any needed pad characters before first digit) s
/F-gs-font 10 10 SF
0 setgray
5 212 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 212 M
(while) s
/F-gs-font 10 10 SF
0 setgray
131 212 M
( \(-- width > 0\)) s
5 201 M
(                        putch\(padc, putdat, fd\);) s
5 190 M
(        }) s
5 179 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 179 M
(// then print this \(the least significant\) digit) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(        putch\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 168 M
("0123456789abcdef") s
/F-gs-font 10 10 SF
0 setgray
197 168 M
([mod], putdat, fd\);) s
5 157 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 135 M
(/* *) s
5 124 M
( * getuint - get an unsigned int of various possible sizes from a varargs list) s
5 113 M
( * @ap:         a varargs list pointer) s
5 102 M
( * @lflag:      determines the size of the vararg that @ap points to) s
5 91 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 80 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 80 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 80 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
95 80 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 80 M
(long) s
/F-gs-font 10 10 SF
0 setgray
125 80 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 80 M
(long) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 69 M
(getuint) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
(\(va_list *ap, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 69 M
(int) s
/F-gs-font 10 10 SF
0 setgray
149 69 M
( lflag\) {) s
5 58 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 58 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 58 M
( \(lflag >= 2\) {) s
5 47 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 47 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 47 M
( va_arg\(*ap, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 47 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
263 47 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
269 47 M
(long) s
/F-gs-font 10 10 SF
0 setgray
293 47 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
299 47 M
(long) s
/F-gs-font 10 10 SF
0 setgray
323 47 M
(\);) s
5 36 M
(        }) s
5 25 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 25 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 25 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
83 25 M
(if) s
/F-gs-font 10 10 SF
0 setgray
95 25 M
( \(lflag\) {) s
5 14 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 14 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 14 M
( va_arg\(*ap, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 14 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
263 14 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
269 14 M
(long) s
/F-gs-font 10 10 SF
0 setgray
293 14 M
(\);) s
5 3 M
(        }) s
_R
S
%%Page: (49) 49
%%BeginPageSetup
_S
18 36 translate
/pagenum 49 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 707 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 707 M
( {) s
5 696 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 696 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 696 M
( va_arg\(*ap, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 696 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
263 696 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
269 696 M
(int) s
/F-gs-font 10 10 SF
0 setgray
287 696 M
(\);) s
5 685 M
(        }) s
5 674 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 652 M
(/* *) s
5 641 M
( * getint - same as getuint but signed, we can't use getuint because of sign extension) s
5 630 M
( * @ap:         a varargs list pointer) s
5 619 M
( * @lflag:      determines the size of the vararg that @ap points to) s
5 608 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 597 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 597 M
(long) s
/F-gs-font 10 10 SF
0 setgray
71 597 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 597 M
(long) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 586 M
(getint) s
/F-gs-font 10 10 SF
0 setgray
41 586 M
(\(va_list *ap, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 586 M
(int) s
/F-gs-font 10 10 SF
0 setgray
143 586 M
( lflag\) {) s
5 575 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 575 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 575 M
( \(lflag >= 2\) {) s
5 564 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 564 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 564 M
( va_arg\(*ap, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 564 M
(long) s
/F-gs-font 10 10 SF
0 setgray
239 564 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 564 M
(long) s
/F-gs-font 10 10 SF
0 setgray
269 564 M
(\);) s
5 553 M
(        }) s
5 542 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 542 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 542 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
83 542 M
(if) s
/F-gs-font 10 10 SF
0 setgray
95 542 M
( \(lflag\) {) s
5 531 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 531 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 531 M
( va_arg\(*ap, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 531 M
(long) s
/F-gs-font 10 10 SF
0 setgray
239 531 M
(\);) s
5 520 M
(        }) s
5 509 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 509 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 509 M
( {) s
5 498 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 498 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 498 M
( va_arg\(*ap, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 498 M
(int) s
/F-gs-font 10 10 SF
0 setgray
233 498 M
(\);) s
5 487 M
(        }) s
5 476 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 454 M
(/* *) s
5 443 M
( * printfmt - format a string and print it by using putch) s
5 432 M
( * @putch:      specified putch function, print a single character) s
5 421 M
( * @fd:         file descriptor) s
5 410 M
( * @putdat:     used by @putch function) s
5 399 M
( * @fmt:        the format string to use) s
5 388 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 377 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 366 M
(printfmt) s
/F-gs-font 10 10 SF
0 setgray
53 366 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 366 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 366 M
( \(*putch\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 366 M
(int) s
/F-gs-font 10 10 SF
0 setgray
161 366 M
(, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 366 M
(void) s
/F-gs-font 10 10 SF
0 setgray
197 366 M
(*, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 366 M
(int) s
/F-gs-font 10 10 SF
0 setgray
233 366 M
(\), ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 366 M
(int) s
/F-gs-font 10 10 SF
0 setgray
269 366 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
299 366 M
(void) s
/F-gs-font 10 10 SF
0 setgray
323 366 M
( *putdat, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
383 366 M
(const) s
/F-gs-font 10 10 SF
0 setgray
413 366 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
419 366 M
(char) s
/F-gs-font 10 10 SF
0 setgray
443 366 M
( *fmt, ...\) {) s
5 355 M
(        va_list ap;) s
5 333 M
(        va_start\(ap, fmt\);) s
5 322 M
(        vprintfmt\(putch, fd, putdat, fmt, ap\);) s
5 311 M
(        va_end\(ap\);) s
5 300 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 278 M
(/* *) s
5 267 M
( * vprintfmt - format a string and print it by using putch, it's called with a va_list) s
5 256 M
( * instead of a variable number of arguments) s
5 245 M
( * @fd:         file descriptor) s
5 234 M
( * @putch:      specified putch function, print a single character) s
5 223 M
( * @putdat:     used by @putch function) s
5 212 M
( * @fmt:        the format string to use) s
5 201 M
( * @ap:         arguments for the format string) s
5 190 M
( *) s
5 179 M
( * Call this function if you are already dealing with a va_list.) s
5 168 M
( * Or you probably want printfmt\(\) instead.) s
5 157 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 135 M
(vprintfmt) s
/F-gs-font 10 10 SF
0 setgray
59 135 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 135 M
(void) s
/F-gs-font 10 10 SF
0 setgray
89 135 M
( \(*putch\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
167 135 M
(, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 135 M
(void) s
/F-gs-font 10 10 SF
0 setgray
203 135 M
(*, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
221 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
239 135 M
(\), ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
275 135 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
305 135 M
(void) s
/F-gs-font 10 10 SF
0 setgray
329 135 M
( *putdat, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
389 135 M
(const) s
/F-gs-font 10 10 SF
0 setgray
419 135 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
425 135 M
(char) s
/F-gs-font 10 10 SF
0 setgray
449 135 M
( *fmt, va_list ap\) {) s
5 124 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 124 M
(register) s
/F-gs-font 10 10 SF
0 setgray
101 124 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 124 M
(const) s
/F-gs-font 10 10 SF
0 setgray
137 124 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 124 M
(char) s
/F-gs-font 10 10 SF
0 setgray
167 124 M
( *p;) s
5 113 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 113 M
(register) s
/F-gs-font 10 10 SF
0 setgray
101 113 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 113 M
(int) s
/F-gs-font 10 10 SF
0 setgray
125 113 M
( ch, err;) s
5 102 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 102 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
101 102 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 102 M
(long) s
/F-gs-font 10 10 SF
0 setgray
131 102 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 102 M
(long) s
/F-gs-font 10 10 SF
0 setgray
161 102 M
( num;) s
5 91 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 91 M
( base, width, precision, lflag, altflag;) s
5 69 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 69 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 69 M
( \(1\) {) s
5 58 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 58 M
(while) s
/F-gs-font 10 10 SF
0 setgray
131 58 M
( \(\(ch = *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 58 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
239 58 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 58 M
(char) s
/F-gs-font 10 10 SF
0 setgray
269 58 M
( *\)fmt ++\) != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
353 58 M
('%') s
/F-gs-font 10 10 SF
0 setgray
371 58 M
(\) {) s
5 47 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 47 M
(if) s
/F-gs-font 10 10 SF
0 setgray
161 47 M
( \(ch == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 47 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
233 47 M
(\) {) s
5 36 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 36 M
(return) s
/F-gs-font 10 10 SF
0 setgray
233 36 M
(;) s
5 25 M
(                        }) s
5 14 M
(                        putch\(ch, putdat, fd\);) s
5 3 M
(                }) s
_R
S
%%Page: (50) 50
%%BeginPageSetup
_S
18 36 translate
/pagenum 50 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 696 M
(                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
101 696 M
(// Process a %-escape sequence) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(                ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 685 M
(char) s
/F-gs-font 10 10 SF
0 setgray
125 685 M
( padc = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 685 M
(' ') s
/F-gs-font 10 10 SF
0 setgray
191 685 M
(;) s
5 674 M
(                width = precision = -1;) s
5 663 M
(                lflag = altflag = 0;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 641 M
(reswitch) s
/F-gs-font 10 10 SF
0 setgray
53 641 M
(:) s
5 630 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 630 M
(switch) s
/F-gs-font 10 10 SF
0 setgray
137 630 M
( \(ch = *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 630 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
239 630 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 630 M
(char) s
/F-gs-font 10 10 SF
0 setgray
269 630 M
( *\)fmt ++\) {) s
5 608 M
(                        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
149 608 M
(// flag to pad on the right) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 597 M
(case) s
/F-gs-font 10 10 SF
0 setgray
173 597 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 597 M
('-') s
/F-gs-font 10 10 SF
0 setgray
197 597 M
(:) s
5 586 M
(                                padc = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
239 586 M
('-') s
/F-gs-font 10 10 SF
0 setgray
257 586 M
(;) s
5 575 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 575 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
221 575 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
227 575 M
(reswitch) s
/F-gs-font 10 10 SF
0 setgray
275 575 M
(;) s
5 553 M
(                                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 553 M
(// flag to pad with 0's instead of spaces) s
/F-gs-font 10 10 SF
0 setgray
5 542 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 542 M
(case) s
/F-gs-font 10 10 SF
0 setgray
173 542 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 542 M
('0') s
/F-gs-font 10 10 SF
0 setgray
197 542 M
(:) s
5 531 M
(                                padc = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
239 531 M
('0') s
/F-gs-font 10 10 SF
0 setgray
257 531 M
(;) s
5 520 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 520 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
221 520 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
227 520 M
(reswitch) s
/F-gs-font 10 10 SF
0 setgray
275 520 M
(;) s
5 498 M
(                                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 498 M
(// width field) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 487 M
(case) s
/F-gs-font 10 10 SF
0 setgray
173 487 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 487 M
('1') s
/F-gs-font 10 10 SF
0 setgray
197 487 M
( ... ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
227 487 M
('9') s
/F-gs-font 10 10 SF
0 setgray
245 487 M
(:) s
5 476 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 476 M
(for) s
/F-gs-font 10 10 SF
0 setgray
215 476 M
( \(precision = 0; ; ++ fmt\) {) s
5 465 M
(                                        precision = precision * 10 + ch - ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
449 465 M
('0') s
/F-gs-font 10 10 SF
0 setgray
467 465 M
(;) s
5 454 M
(                                        ch = *fmt;) s
5 443 M
(                                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
245 443 M
(if) s
/F-gs-font 10 10 SF
0 setgray
257 443 M
( \(ch < ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
299 443 M
('0') s
/F-gs-font 10 10 SF
0 setgray
317 443 M
( || ch > ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
371 443 M
('9') s
/F-gs-font 10 10 SF
0 setgray
389 443 M
(\) {) s
5 432 M
(                                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
293 432 M
(break) s
/F-gs-font 10 10 SF
0 setgray
323 432 M
(;) s
5 421 M
(                                        }) s
5 410 M
(                                }) s
5 399 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 399 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
221 399 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
227 399 M
(process_precision) s
/F-gs-font 10 10 SF
0 setgray
329 399 M
(;) s
5 377 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 377 M
(case) s
/F-gs-font 10 10 SF
0 setgray
173 377 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 377 M
('*') s
/F-gs-font 10 10 SF
0 setgray
197 377 M
(:) s
5 366 M
(                                precision = va_arg\(ap, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
335 366 M
(int) s
/F-gs-font 10 10 SF
0 setgray
353 366 M
(\);) s
5 355 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 355 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
221 355 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
227 355 M
(process_precision) s
/F-gs-font 10 10 SF
0 setgray
329 355 M
(;) s
5 333 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 333 M
(case) s
/F-gs-font 10 10 SF
0 setgray
173 333 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 333 M
('.') s
/F-gs-font 10 10 SF
0 setgray
197 333 M
(:) s
5 322 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 322 M
(if) s
/F-gs-font 10 10 SF
0 setgray
209 322 M
( \(width < 0\)) s
5 311 M
(                                        width = 0;) s
5 300 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 300 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
221 300 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
227 300 M
(reswitch) s
/F-gs-font 10 10 SF
0 setgray
275 300 M
(;) s
5 278 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 278 M
(case) s
/F-gs-font 10 10 SF
0 setgray
173 278 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 278 M
('#') s
/F-gs-font 10 10 SF
0 setgray
197 278 M
(:) s
5 267 M
(                                altflag = 1;) s
5 256 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 256 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
221 256 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
227 256 M
(reswitch) s
/F-gs-font 10 10 SF
0 setgray
275 256 M
(;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 234 M
(process_precision) s
/F-gs-font 10 10 SF
0 setgray
107 234 M
(:) s
5 223 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 223 M
(if) s
/F-gs-font 10 10 SF
0 setgray
209 223 M
( \(width < 0\)) s
5 212 M
(                                        width = precision, precision = -1;) s
5 201 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 201 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
221 201 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
227 201 M
(reswitch) s
/F-gs-font 10 10 SF
0 setgray
275 201 M
(;) s
5 179 M
(                                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 179 M
(// long flag \(doubled for long long\)) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 168 M
(case) s
/F-gs-font 10 10 SF
0 setgray
173 168 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 168 M
('l') s
/F-gs-font 10 10 SF
0 setgray
197 168 M
(:) s
5 157 M
(                                lflag ++;) s
5 146 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 146 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
221 146 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
227 146 M
(reswitch) s
/F-gs-font 10 10 SF
0 setgray
275 146 M
(;) s
5 124 M
(                                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 124 M
(// character) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 113 M
(case) s
/F-gs-font 10 10 SF
0 setgray
173 113 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 113 M
('c') s
/F-gs-font 10 10 SF
0 setgray
197 113 M
(:) s
5 102 M
(                                putch\(va_arg\(ap, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
299 102 M
(int) s
/F-gs-font 10 10 SF
0 setgray
317 102 M
(\), putdat, fd\);) s
5 91 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 91 M
(break) s
/F-gs-font 10 10 SF
0 setgray
227 91 M
(;) s
5 69 M
(                                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 69 M
(// error message) s
/F-gs-font 10 10 SF
0 setgray
5 58 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 58 M
(case) s
/F-gs-font 10 10 SF
0 setgray
173 58 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 58 M
('e') s
/F-gs-font 10 10 SF
0 setgray
197 58 M
(:) s
5 47 M
(                                err = va_arg\(ap, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
299 47 M
(int) s
/F-gs-font 10 10 SF
0 setgray
317 47 M
(\);) s
5 36 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 36 M
(if) s
/F-gs-font 10 10 SF
0 setgray
209 36 M
( \(err < 0\) {) s
5 25 M
(                                        err = -err;) s
5 14 M
(                                }) s
5 3 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 3 M
(if) s
/F-gs-font 10 10 SF
0 setgray
209 3 M
( \(err > MAXERROR || \(p = error_string[err]\) == NULL\) {) s
_R
S
%%Page: (51) 51
%%BeginPageSetup
_S
18 36 translate
/pagenum 51 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(                                        printfmt\(putch, fd, putdat, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
413 707 M
("error %d") s
/F-gs-font 10 10 SF
0 setgray
473 707 M
(, err\);) s
5 696 M
(                                }) s
5 685 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 685 M
(else) s
/F-gs-font 10 10 SF
0 setgray
221 685 M
( {) s
5 674 M
(                                        printfmt\(putch, fd, putdat, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
413 674 M
("%s") s
/F-gs-font 10 10 SF
0 setgray
437 674 M
(, p\);) s
5 663 M
(                                }) s
5 652 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 652 M
(break) s
/F-gs-font 10 10 SF
0 setgray
227 652 M
(;) s
5 630 M
(                                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 630 M
(// string) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 619 M
(case) s
/F-gs-font 10 10 SF
0 setgray
173 619 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 619 M
('s') s
/F-gs-font 10 10 SF
0 setgray
197 619 M
(:) s
5 608 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 608 M
(if) s
/F-gs-font 10 10 SF
0 setgray
209 608 M
( \(\(p = va_arg\(ap, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
317 608 M
(char) s
/F-gs-font 10 10 SF
0 setgray
341 608 M
( *\)\) == NULL\) {) s
5 597 M
(                                        p = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
269 597 M
("\(null\)") s
/F-gs-font 10 10 SF
0 setgray
317 597 M
(;) s
5 586 M
(                                }) s
5 575 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 575 M
(if) s
/F-gs-font 10 10 SF
0 setgray
209 575 M
( \(width > 0 && padc != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
347 575 M
('-') s
/F-gs-font 10 10 SF
0 setgray
365 575 M
(\) {) s
5 564 M
(                                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
245 564 M
(for) s
/F-gs-font 10 10 SF
0 setgray
263 564 M
( \(width -= strnlen\(p, precision\); width > 0; width ) s
5 553 M
(--\) {) s
5 542 M
(                                                putch\(padc, putdat, fd\);) s
5 531 M
(                                        }) s
5 520 M
(                                }) s
5 509 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 509 M
(for) s
/F-gs-font 10 10 SF
0 setgray
215 509 M
( \(; \(ch = *p ++\) != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
335 509 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
359 509 M
( && \(precision < 0 || -- precision ) s
5 498 M
(>= 0\); width --\) {) s
5 487 M
(                                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
245 487 M
(if) s
/F-gs-font 10 10 SF
0 setgray
257 487 M
( \(altflag && \(ch < ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
371 487 M
(' ') s
/F-gs-font 10 10 SF
0 setgray
389 487 M
( || ch > ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
443 487 M
('~') s
/F-gs-font 10 10 SF
0 setgray
461 487 M
(\)\) {) s
5 476 M
(                                                putch\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
329 476 M
('?') s
/F-gs-font 10 10 SF
0 setgray
347 476 M
(, putdat, fd\);) s
5 465 M
(                                        }) s
5 454 M
(                                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
245 454 M
(else) s
/F-gs-font 10 10 SF
0 setgray
269 454 M
( {) s
5 443 M
(                                                putch\(ch, putdat, fd\);) s
5 432 M
(                                        }) s
5 421 M
(                                }) s
5 410 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 410 M
(for) s
/F-gs-font 10 10 SF
0 setgray
215 410 M
( \(; width > 0; width --\) {) s
5 399 M
(                                        putch\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 399 M
(' ') s
/F-gs-font 10 10 SF
0 setgray
299 399 M
(, putdat, fd\);) s
5 388 M
(                                }) s
5 377 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 377 M
(break) s
/F-gs-font 10 10 SF
0 setgray
227 377 M
(;) s
5 355 M
(                                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 355 M
(// \(signed\) decimal) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 344 M
(case) s
/F-gs-font 10 10 SF
0 setgray
173 344 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 344 M
('d') s
/F-gs-font 10 10 SF
0 setgray
197 344 M
(:) s
5 333 M
(                                num = getint\(&ap, lflag\);) s
5 322 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 322 M
(if) s
/F-gs-font 10 10 SF
0 setgray
209 322 M
( \(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 322 M
(long) s
/F-gs-font 10 10 SF
0 setgray
251 322 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 322 M
(long) s
/F-gs-font 10 10 SF
0 setgray
281 322 M
(\)num < 0\) {) s
5 311 M
(                                        putch\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 311 M
('-') s
/F-gs-font 10 10 SF
0 setgray
299 311 M
(, putdat, fd\);) s
5 300 M
(                                        num = -\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
293 300 M
(long) s
/F-gs-font 10 10 SF
0 setgray
317 300 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
323 300 M
(long) s
/F-gs-font 10 10 SF
0 setgray
347 300 M
(\)num;) s
5 289 M
(                                }) s
5 278 M
(                                base = 10;) s
5 267 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 267 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
221 267 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
227 267 M
(number) s
/F-gs-font 10 10 SF
0 setgray
263 267 M
(;) s
5 245 M
(                                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 245 M
(// unsigned decimal) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 234 M
(case) s
/F-gs-font 10 10 SF
0 setgray
173 234 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 234 M
('u') s
/F-gs-font 10 10 SF
0 setgray
197 234 M
(:) s
5 223 M
(                                num = getuint\(&ap, lflag\);) s
5 212 M
(                                base = 10;) s
5 201 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 201 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
221 201 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
227 201 M
(number) s
/F-gs-font 10 10 SF
0 setgray
263 201 M
(;) s
5 179 M
(                                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 179 M
(// \(unsigned\) octal) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 168 M
(case) s
/F-gs-font 10 10 SF
0 setgray
173 168 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 168 M
('o') s
/F-gs-font 10 10 SF
0 setgray
197 168 M
(:) s
5 157 M
(                                num = getuint\(&ap, lflag\);) s
5 146 M
(                                base = 8;) s
5 135 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 135 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
221 135 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
227 135 M
(number) s
/F-gs-font 10 10 SF
0 setgray
263 135 M
(;) s
5 113 M
(                                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 113 M
(// pointer) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 102 M
(case) s
/F-gs-font 10 10 SF
0 setgray
173 102 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 102 M
('p') s
/F-gs-font 10 10 SF
0 setgray
197 102 M
(:) s
5 91 M
(                                putch\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
233 91 M
('0') s
/F-gs-font 10 10 SF
0 setgray
251 91 M
(, putdat, fd\);) s
5 80 M
(                                putch\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
233 80 M
('x') s
/F-gs-font 10 10 SF
0 setgray
251 80 M
(, putdat, fd\);) s
5 69 M
(                                num = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
239 69 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
287 69 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
293 69 M
(long) s
/F-gs-font 10 10 SF
0 setgray
317 69 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
323 69 M
(long) s
/F-gs-font 10 10 SF
0 setgray
347 69 M
(\)\(uintptr_t\)va_arg\(ap, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
485 69 M
(void) s
/F-gs-font 10 10 SF
0 setgray
509 69 M
( *\);) s
5 58 M
(                                base = 16;) s
5 47 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 47 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
221 47 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
227 47 M
(number) s
/F-gs-font 10 10 SF
0 setgray
263 47 M
(;) s
5 25 M
(                                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 25 M
(// \(unsigned\) hexadecimal) s
/F-gs-font 10 10 SF
0 setgray
5 14 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 14 M
(case) s
/F-gs-font 10 10 SF
0 setgray
173 14 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 14 M
('x') s
/F-gs-font 10 10 SF
0 setgray
197 14 M
(:) s
5 3 M
(                                num = getuint\(&ap, lflag\);) s
_R
S
%%Page: (52) 52
%%BeginPageSetup
_S
18 36 translate
/pagenum 52 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(                                base = 16;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 696 M
(number) s
/F-gs-font 10 10 SF
0 setgray
41 696 M
(:) s
5 685 M
(                                printnum\(putch, fd, putdat, num, base, width, padc\);) s
5 674 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 674 M
(break) s
/F-gs-font 10 10 SF
0 setgray
227 674 M
(;) s
5 652 M
(                                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 652 M
(// escaped '%' character) s
/F-gs-font 10 10 SF
0 setgray
5 641 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 641 M
(case) s
/F-gs-font 10 10 SF
0 setgray
173 641 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 641 M
('%') s
/F-gs-font 10 10 SF
0 setgray
197 641 M
(:) s
5 630 M
(                                putch\(ch, putdat, fd\);) s
5 619 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 619 M
(break) s
/F-gs-font 10 10 SF
0 setgray
227 619 M
(;) s
5 597 M
(                                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 597 M
(// unrecognized escape sequence - just print it literally) s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(                        ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
149 586 M
(default) s
/F-gs-font 10 10 SF
0 setgray
191 586 M
(:) s
5 575 M
(                                putch\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
233 575 M
('%') s
/F-gs-font 10 10 SF
0 setgray
251 575 M
(, putdat, fd\);) s
5 564 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 564 M
(for) s
/F-gs-font 10 10 SF
0 setgray
215 564 M
( \(fmt --; fmt[-1] != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
341 564 M
('%') s
/F-gs-font 10 10 SF
0 setgray
359 564 M
(; fmt --\)) s
5 553 M
(                                        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
245 553 M
(/* do nothing */) s
/F-gs-font 10 10 SF
0 setgray
341 553 M
(;) s
5 542 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 542 M
(break) s
/F-gs-font 10 10 SF
0 setgray
227 542 M
(;) s
5 531 M
(                }) s
5 520 M
(        }) s
5 509 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 487 M
(/* sprintbuf is used to save enough information of a buffer */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 476 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 476 M
( sprintbuf {) s
5 465 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 465 M
(char) s
/F-gs-font 10 10 SF
0 setgray
77 465 M
( *buf;          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 465 M
(// address pointer points to the first unused memory) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 454 M
(char) s
/F-gs-font 10 10 SF
0 setgray
77 454 M
( *ebuf;         ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 454 M
(// points the end of the buffer) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 443 M
( cnt;            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 443 M
(// the number of characters that have been placed in this buffer) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(};) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 410 M
(/* *) s
5 399 M
( * sprintputch - 'print' a single character in a buffer) s
5 388 M
( * @ch:         the character will be printed) s
5 377 M
( * @b:          the buffer to place the character @ch) s
5 366 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 355 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 355 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 355 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 344 M
(sprintputch) s
/F-gs-font 10 10 SF
0 setgray
71 344 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 344 M
(int) s
/F-gs-font 10 10 SF
0 setgray
95 344 M
( ch, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 344 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
161 344 M
( sprintbuf *b\) {) s
5 333 M
(        b->cnt ++;) s
5 322 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 322 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 322 M
( \(b->buf < b->ebuf\) {) s
5 311 M
(                *b->buf ++ = ch;) s
5 300 M
(        }) s
5 289 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 267 M
(/* *) s
5 256 M
( * snprintf - format a string and place it in a buffer) s
5 245 M
( * @str:        the buffer to place the result into) s
5 234 M
( * @size:       the size of buffer, including the trailing null space) s
5 223 M
( * @fmt:        the format string to use) s
5 212 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 201 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 190 M
(snprintf) s
/F-gs-font 10 10 SF
0 setgray
53 190 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 190 M
(char) s
/F-gs-font 10 10 SF
0 setgray
83 190 M
( *str, size_t size, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 190 M
(const) s
/F-gs-font 10 10 SF
0 setgray
233 190 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
239 190 M
(char) s
/F-gs-font 10 10 SF
0 setgray
263 190 M
( *fmt, ...\) {) s
5 179 M
(        va_list ap;) s
5 168 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 168 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 168 M
( cnt;) s
5 157 M
(        va_start\(ap, fmt\);) s
5 146 M
(        cnt = vsnprintf\(str, size, fmt, ap\);) s
5 135 M
(        va_end\(ap\);) s
5 124 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 124 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 124 M
( cnt;) s
5 113 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 91 M
(/* *) s
5 80 M
( * vsnprintf - format a string and place it in a buffer, it's called with a va_list) s
5 69 M
( * instead of a variable number of arguments) s
5 58 M
( * @str:        the buffer to place the result into) s
5 47 M
( * @size:       the size of buffer, including the trailing null space) s
5 36 M
( * @fmt:        the format string to use) s
5 25 M
( * @ap:         arguments for the format string) s
5 14 M
( *) s
5 3 M
( * The return value is the number of characters which would be generated for the) s
_R
S
%%Page: (53) 53
%%BeginPageSetup
_S
18 36 translate
/pagenum 53 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
( * given input, excluding the trailing '\\0'.) s
5 696 M
( *) s
5 685 M
( * Call this function if you are already dealing with a va_list.) s
5 674 M
( * Or you probably want snprintf\(\) instead.) s
5 663 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 652 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 641 M
(vsnprintf) s
/F-gs-font 10 10 SF
0 setgray
59 641 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 641 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 641 M
( *str, size_t size, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
209 641 M
(const) s
/F-gs-font 10 10 SF
0 setgray
239 641 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 641 M
(char) s
/F-gs-font 10 10 SF
0 setgray
269 641 M
( *fmt, va_list ap\) {) s
5 630 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 630 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 630 M
( sprintbuf b = {str, str + size - 1, 0};) s
5 619 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 619 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 619 M
( \(str == NULL || b.buf > b.ebuf\) {) s
5 608 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 608 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 608 M
( -E_INVAL;) s
5 597 M
(        }) s
5 586 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 586 M
(// print the string to the buffer) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(        vprintfmt\(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 575 M
(void) s
/F-gs-font 10 10 SF
0 setgray
143 575 M
(*\)sprintputch, NO_FD, &b, fmt, ap\);) s
5 564 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 564 M
(// null terminate the buffer) s
/F-gs-font 10 10 SF
0 setgray
5 553 M
(        *b.buf = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 553 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
131 553 M
(;) s
5 542 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 542 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 542 M
( b.cnt;) s
5 531 M
(}) s
5 509 M
([ucore/lab8_result/libs/elf.h] ++++++++++++++++++++++++++++++) s
5 498 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 498 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 498 M
(__LIBS_ELF_H__) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 487 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 487 M
(__LIBS_ELF_H__) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 465 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 465 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 443 M
(ELF_MAGIC) s
/F-gs-font 10 10 SF
0 setgray
107 443 M
(   0x464C457FU         // ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
263 443 M
("\\x7FELF") s
/F-gs-font 10 10 SF
0 setgray
317 443 M
( in little endian) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 421 M
(/* file header */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 410 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 410 M
( elfhdr {) s
5 399 M
(    uint32_t e_magic;     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 399 M
(// must equal ELF_MAGIC) s
/F-gs-font 10 10 SF
0 setgray
5 388 M
(    uint8_t e_elf[12];) s
5 377 M
(    uint16_t e_type;      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 377 M
(// 1=relocatable, 2=executable, 3=shared object, 4=core image) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
(    uint16_t e_machine;   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 366 M
(// 3=x86, 4=68K, etc.) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(    uint32_t e_version;   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 355 M
(// file version, always 1) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(    uint32_t e_entry;     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 344 M
(// entry point if executable) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(    uint32_t e_phoff;     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 333 M
(// file position of program header or 0) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(    uint32_t e_shoff;     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 322 M
(// file position of section header or 0) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(    uint32_t e_flags;     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 311 M
(// architecture-specific flags, usually 0) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(    uint16_t e_ehsize;    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 300 M
(// size of this elf header) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(    uint16_t e_phentsize; ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 289 M
(// size of an entry in program header) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
(    uint16_t e_phnum;     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 278 M
(// number of entries in program header or 0) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(    uint16_t e_shentsize; ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 267 M
(// size of an entry in section header) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(    uint16_t e_shnum;     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 256 M
(// number of entries in section header or 0) s
/F-gs-font 10 10 SF
0 setgray
5 245 M
(    uint16_t e_shstrndx;  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 245 M
(// section number that contains section name strings) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(};) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 212 M
(/* program section header */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 201 M
( proghdr {) s
5 190 M
(    uint32_t p_type;   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
143 190 M
(// loadable code or data, dynamic linking info,etc.) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(    uint32_t p_offset; ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
143 179 M
(// file offset of segment) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(    uint32_t p_va;     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
143 168 M
(// virtual address to map segment) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(    uint32_t p_pa;     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
143 157 M
(// physical address, not used) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(    uint32_t p_filesz; ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
143 146 M
(// size of segment in file) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(    uint32_t p_memsz;  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
143 135 M
(// size of segment in memory \(bigger if contains bss\357\274\\211) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(    uint32_t p_flags;  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
143 124 M
(// read/write/execute bits) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(    uint32_t p_align;  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
143 113 M
(// required alignment, invariably hardware page size) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(};) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 80 M
(/* values for Proghdr::p_type */) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 69 M
(ELF_PT_LOAD) s
/F-gs-font 10 10 SF
0 setgray
119 69 M
(                     1) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 47 M
(/* flag bits for Proghdr::p_flags */) s
/F-gs-font 10 10 SF
0 setgray
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 36 M
(ELF_PF_X) s
/F-gs-font 10 10 SF
0 setgray
101 36 M
(                        1) s
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 25 M
(ELF_PF_W) s
/F-gs-font 10 10 SF
0 setgray
101 25 M
(                        2) s
5 14 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 14 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 14 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 14 M
(ELF_PF_R) s
/F-gs-font 10 10 SF
0 setgray
101 14 M
(                        4) s
_R
S
%%Page: (54) 54
%%BeginPageSetup
_S
18 36 translate
/pagenum 54 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 707 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 707 M
(/* !__LIBS_ELF_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
([ucore/lab8_result/libs/rand.c] ++++++++++++++++++++++++++++++) s
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 674 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 674 M
(<x86.h>) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 663 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 663 M
(<stdlib.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 641 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 641 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 641 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
95 641 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 641 M
(long) s
/F-gs-font 10 10 SF
0 setgray
125 641 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 641 M
(long) s
/F-gs-font 10 10 SF
0 setgray
155 641 M
( next = 1;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 619 M
(/* *) s
5 608 M
( * rand - returns a pseudo-random integer) s
5 597 M
( *) s
5 586 M
( * The rand\(\) function return a value in the range [0, RAND_MAX].) s
5 575 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 553 M
(rand) s
/F-gs-font 10 10 SF
0 setgray
29 553 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 553 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 553 M
(\) {) s
5 542 M
(    next = \(next * 0x5DEECE66DLL + 0xBLL\) & \(\(1LL << 48\) - 1\);) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 531 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 531 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 531 M
(long) s
/F-gs-font 10 10 SF
0 setgray
107 531 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 531 M
(long) s
/F-gs-font 10 10 SF
0 setgray
137 531 M
( result = \(next >> 12\);) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 520 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
( \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 520 M
(int) s
/F-gs-font 10 10 SF
0 setgray
95 520 M
(\)do_div\(result, RAND_MAX + 1\);) s
5 509 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 487 M
(/* *) s
5 476 M
( * srand - seed the random number generator with the given number) s
5 465 M
( * @seed:   the required seed number) s
5 454 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 432 M
(srand) s
/F-gs-font 10 10 SF
0 setgray
35 432 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 432 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
89 432 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 432 M
(int) s
/F-gs-font 10 10 SF
0 setgray
113 432 M
( seed\) {) s
5 421 M
(    next = seed;) s
5 410 M
(}) s
5 388 M
([ucore/lab8_result/libs/defs.h] ++++++++++++++++++++++++++++++) s
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 377 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 377 M
(__LIBS_DEFS_H__) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 366 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 366 M
(__LIBS_DEFS_H__) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 344 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 344 M
(NULL) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 333 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 333 M
(NULL) s
/F-gs-font 10 10 SF
0 setgray
77 333 M
( \(\(void *\)0\)) s
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 300 M
(__always_inline) s
/F-gs-font 10 10 SF
0 setgray
143 300 M
( inline __attribute__\(\(always_inline\)\)) s
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 289 M
(__noinline) s
/F-gs-font 10 10 SF
0 setgray
113 289 M
( __attribute__\(\(noinline\)\)) s
5 278 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 278 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 278 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 278 M
(__noreturn) s
/F-gs-font 10 10 SF
0 setgray
113 278 M
( __attribute__\(\(noreturn\)\)) s
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 256 M
(CHAR_BIT) s
/F-gs-font 10 10 SF
0 setgray
101 256 M
(        8) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 234 M
(/* Represents true-or-false values */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 223 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 223 M
( bool;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 201 M
(/* Explicitly-sized versions of integer types */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 190 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 190 M
(char) s
/F-gs-font 10 10 SF
0 setgray
77 190 M
( int8_t;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 179 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 179 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 179 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
101 179 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 179 M
(char) s
/F-gs-font 10 10 SF
0 setgray
131 179 M
( uint8_t;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 168 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 168 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 168 M
(short) s
/F-gs-font 10 10 SF
0 setgray
83 168 M
( int16_t;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 157 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 157 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
101 157 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 157 M
(short) s
/F-gs-font 10 10 SF
0 setgray
137 157 M
( uint16_t;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 146 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 146 M
( int32_t;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 135 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 135 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
101 135 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
125 135 M
( uint32_t;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 124 M
(long) s
/F-gs-font 10 10 SF
0 setgray
77 124 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 124 M
(long) s
/F-gs-font 10 10 SF
0 setgray
107 124 M
( int64_t;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 113 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 113 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
101 113 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 113 M
(long) s
/F-gs-font 10 10 SF
0 setgray
131 113 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 113 M
(long) s
/F-gs-font 10 10 SF
0 setgray
161 113 M
( uint64_t;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 91 M
(/* *) s
5 80 M
( * Pointers and addresses are 32 bits long.) s
5 69 M
( * We use pointer types to represent addresses,) s
5 58 M
( * uintptr_t to represent the numerical values of addresses.) s
5 47 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( int32_t intptr_t;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( uint32_t uintptr_t;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 3 M
(/* size_t is used for memory object sizes */) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (55) 55
%%BeginPageSetup
_S
18 36 translate
/pagenum 55 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 707 M
( uintptr_t size_t;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 685 M
(/* off_t is used for file offsets and lengths */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 674 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
( intptr_t off_t;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 652 M
(/* used for page numbers */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 641 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( size_t ppn_t;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 619 M
(/* *) s
5 608 M
( * Rounding operations \(efficient when n is a power of 2\)) s
5 597 M
( * Round down to the nearest multiple of n) s
5 586 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 575 M
(ROUNDDOWN) s
/F-gs-font 10 10 SF
0 setgray
107 575 M
(\(a, n\) \({                                          \\) s
5 564 M
(            size_t __a = \(size_t\)\(a\);                               \\) s
5 553 M
(            \(typeof\(a\)\)\(__a - __a % \(n\)\);                           \\) s
5 542 M
(        }\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 520 M
(/* Round up to the nearest multiple of n */) s
/F-gs-font 10 10 SF
0 setgray
5 509 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 509 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 509 M
(ROUNDUP) s
/F-gs-font 10 10 SF
0 setgray
95 509 M
(\(a, n\) \({                                            \\) s
5 498 M
(            size_t __n = \(size_t\)\(n\);                               \\) s
5 487 M
(            \(typeof\(a\)\)\(ROUNDDOWN\(\(size_t\)\(a\) + __n - 1, __n\)\);     \\) s
5 476 M
(        }\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 454 M
(/* Round up the result of dividing of n */) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 443 M
(ROUNDUP_DIV) s
/F-gs-font 10 10 SF
0 setgray
119 443 M
(\(a, n\) \({                                        \\) s
5 432 M
(uint32_t __n = \(uint32_t\)\(n\);                           \\) s
5 421 M
(\(typeof\(a\)\)\(\(\(a\) + __n - 1\) / __n\);                     \\) s
5 410 M
(}\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 388 M
(/* Return the offset of 'member' relative to the beginning of a struct type */) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 377 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 377 M
(offsetof) s
/F-gs-font 10 10 SF
0 setgray
101 377 M
(\(type, member\)                                      \\) s
5 366 M
(    \(\(size_t\)\(&\(\(type *\)0\)->member\)\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 344 M
(/* *) s
5 333 M
( * to_struct - get the struct from a ptr) s
5 322 M
( * @ptr:    a struct pointer of member) s
5 311 M
( * @type:   the type of the struct this is embedded in) s
5 300 M
( * @member: the name of the member within the struct) s
5 289 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 278 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 278 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 278 M
(to_struct) s
/F-gs-font 10 10 SF
0 setgray
107 278 M
(\(ptr, type, member\)                               \\) s
5 267 M
(    \(\(type *\)\(\(char *\)\(ptr\) - offsetof\(type, member\)\)\)) s
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 245 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 245 M
(/* !__LIBS_DEFS_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
([ucore/lab8_result/libs/stat.h] ++++++++++++++++++++++++++++++) s
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 212 M
(__LIBS_STAT_H__) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 201 M
(__LIBS_STAT_H__) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 179 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 157 M
( stat {) s
5 146 M
(    uint32_t st_mode;                   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
245 146 M
(// protection mode and file type) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(    size_t st_nlinks;                   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
245 135 M
(// number of hard links) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(    size_t st_blocks;                   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
245 124 M
(// number of blocks file is using) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(    size_t st_size;                     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
245 113 M
(// file size \(bytes\)) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(};) s
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 80 M
(S_IFMT) s
/F-gs-font 10 10 SF
0 setgray
89 80 M
(          070000          // mask for type of file) s
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 69 M
(S_IFREG) s
/F-gs-font 10 10 SF
0 setgray
95 69 M
(         010000          // ordinary regular file) s
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 58 M
(S_IFDIR) s
/F-gs-font 10 10 SF
0 setgray
95 58 M
(         020000          // directory) s
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 47 M
(S_IFLNK) s
/F-gs-font 10 10 SF
0 setgray
95 47 M
(         030000          // symbolic link) s
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 36 M
(S_IFCHR) s
/F-gs-font 10 10 SF
0 setgray
95 36 M
(         040000          // character device) s
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 25 M
(S_IFBLK) s
/F-gs-font 10 10 SF
0 setgray
95 25 M
(         050000          // block device) s
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 3 M
(S_ISREG) s
/F-gs-font 10 10 SF
0 setgray
95 3 M
(\(mode\)                   \(\(\(mode\) & S_IFMT\) == S_IFREG\)      // regular file) s
_R
S
%%Page: (56) 56
%%BeginPageSetup
_S
18 36 translate
/pagenum 56 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 707 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 707 M
(S_ISDIR) s
/F-gs-font 10 10 SF
0 setgray
95 707 M
(\(mode\)                   \(\(\(mode\) & S_IFMT\) == S_IFDIR\)      // directory) s
5 696 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 696 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 696 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 696 M
(S_ISLNK) s
/F-gs-font 10 10 SF
0 setgray
95 696 M
(\(mode\)                   \(\(\(mode\) & S_IFMT\) == S_IFLNK\)      // symlink) s
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 685 M
(S_ISCHR) s
/F-gs-font 10 10 SF
0 setgray
95 685 M
(\(mode\)                   \(\(\(mode\) & S_IFMT\) == S_IFCHR\)      // char device) s
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 674 M
(S_ISBLK) s
/F-gs-font 10 10 SF
0 setgray
95 674 M
(\(mode\)                   \(\(\(mode\) & S_IFMT\) == S_IFBLK\)      // block device) s
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 652 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 652 M
(/* !__LIBS_STAT_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
([ucore/lab8_result/libs/hash.c] ++++++++++++++++++++++++++++++) s
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 619 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 619 M
(<stdlib.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 597 M
(/* 2^31 + 2^29 - 2^25 + 2^22 - 2^19 - 2^16 + 1 */) s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 586 M
(GOLDEN_RATIO_PRIME_32) s
/F-gs-font 10 10 SF
0 setgray
179 586 M
(       0x9e370001UL) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 564 M
(/* *) s
5 553 M
( * hash32 - generate a hash value in the range [0, 2^@bits - 1]) s
5 542 M
( * @val:    the input value) s
5 531 M
( * @bits:   the number of bits in a return value) s
5 520 M
( *) s
5 509 M
( * High bits are more random, so we use them.) s
5 498 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(uint32_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 476 M
(hash32) s
/F-gs-font 10 10 SF
0 setgray
41 476 M
(\(uint32_t val, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 476 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
179 476 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 476 M
(int) s
/F-gs-font 10 10 SF
0 setgray
203 476 M
( bits\) {) s
5 465 M
(    uint32_t hash = val * GOLDEN_RATIO_PRIME_32;) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 454 M
( \(hash >> \(32 - bits\)\);) s
5 443 M
(}) s
5 421 M
([ucore/lab8_result/libs/x86.h] ++++++++++++++++++++++++++++++) s
5 410 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 410 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 410 M
(__LIBS_X86_H__) s
/F-gs-font 10 10 SF
0 setgray
5 399 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 399 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 399 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 399 M
(__LIBS_X86_H__) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 377 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 377 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 355 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 355 M
(do_div) s
/F-gs-font 10 10 SF
0 setgray
89 355 M
(\(n, base\) \({                                          \\) s
5 344 M
(            unsigned long __upper, __low, __high, __mod, __base;    \\) s
5 333 M
(            __base = \(base\);                                        \\) s
5 322 M
(            asm \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 322 M
("") s
/F-gs-font 10 10 SF
0 setgray
119 322 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 322 M
("=a") s
/F-gs-font 10 10 SF
0 setgray
161 322 M
( \(__low\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
221 322 M
("=d") s
/F-gs-font 10 10 SF
0 setgray
245 322 M
( \(__high\) : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
317 322 M
("A") s
/F-gs-font 10 10 SF
0 setgray
335 322 M
( \(n\)\);       \\) s
5 311 M
(            __upper = __high;                                       \\) s
5 300 M
(            if \(__high != 0\) {                                      \\) s
5 289 M
(                __upper = __high % __base;                          \\) s
5 278 M
(                __high = __high / __base;                           \\) s
5 267 M
(            }                                                       \\) s
5 256 M
(            asm \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 256 M
("divl %2") s
/F-gs-font 10 10 SF
0 setgray
161 256 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 256 M
("=a") s
/F-gs-font 10 10 SF
0 setgray
203 256 M
( \(__low\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
263 256 M
("=d") s
/F-gs-font 10 10 SF
0 setgray
287 256 M
( \(__mod\)             \\) s
5 245 M
(                : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 245 M
("rm") s
/F-gs-font 10 10 SF
0 setgray
137 245 M
( \(__base\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
203 245 M
("0") s
/F-gs-font 10 10 SF
0 setgray
221 245 M
( \(__low\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 245 M
("1") s
/F-gs-font 10 10 SF
0 setgray
299 245 M
( \(__upper\)\);       \\) s
5 234 M
(            asm \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 234 M
("") s
/F-gs-font 10 10 SF
0 setgray
119 234 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 234 M
("=A") s
/F-gs-font 10 10 SF
0 setgray
161 234 M
( \(n\) : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
203 234 M
("a") s
/F-gs-font 10 10 SF
0 setgray
221 234 M
( \(__low\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 234 M
("d") s
/F-gs-font 10 10 SF
0 setgray
299 234 M
( \(__high\)\);        \\) s
5 223 M
(            __mod;                                                  \\) s
5 212 M
(        }\)) s
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 190 M
(barrier) s
/F-gs-font 10 10 SF
0 setgray
95 190 M
(\(\) __asm__ __volatile__ \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 190 M
("") s
/F-gs-font 10 10 SF
0 setgray
257 190 M
( ::: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
287 190 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
335 190 M
(\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 168 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 168 M
( inline uint8_t ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
137 168 M
(inb) s
/F-gs-font 10 10 SF
0 setgray
155 168 M
(\(uint16_t port\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 157 M
( inline uint16_t ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
143 157 M
(inw) s
/F-gs-font 10 10 SF
0 setgray
161 157 M
(\(uint16_t port\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 146 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 146 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 146 M
(insl) s
/F-gs-font 10 10 SF
0 setgray
143 146 M
(\(uint32_t port, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
239 146 M
(void) s
/F-gs-font 10 10 SF
0 setgray
263 146 M
( *addr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
311 146 M
(int) s
/F-gs-font 10 10 SF
0 setgray
329 146 M
( cnt\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 135 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 135 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 135 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 135 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 135 M
(outb) s
/F-gs-font 10 10 SF
0 setgray
143 135 M
(\(uint16_t port, uint8_t data\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 124 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 124 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 124 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 124 M
(outw) s
/F-gs-font 10 10 SF
0 setgray
143 124 M
(\(uint16_t port, uint16_t data\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 113 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 113 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 113 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 113 M
(outsl) s
/F-gs-font 10 10 SF
0 setgray
149 113 M
(\(uint32_t port, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 113 M
(const) s
/F-gs-font 10 10 SF
0 setgray
275 113 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
281 113 M
(void) s
/F-gs-font 10 10 SF
0 setgray
305 113 M
( *addr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
353 113 M
(int) s
/F-gs-font 10 10 SF
0 setgray
371 113 M
( cnt\) __attribute__\(\(always_inlin) s
5 102 M
(e\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 91 M
( inline uint32_t ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
143 91 M
(read_ebp) s
/F-gs-font 10 10 SF
0 setgray
191 91 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 91 M
(void) s
/F-gs-font 10 10 SF
0 setgray
221 91 M
(\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 80 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 80 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 80 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 80 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 80 M
(breakpoint) s
/F-gs-font 10 10 SF
0 setgray
179 80 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 80 M
(void) s
/F-gs-font 10 10 SF
0 setgray
209 80 M
(\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( inline uint32_t ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
143 69 M
(read_dr) s
/F-gs-font 10 10 SF
0 setgray
185 69 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 69 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
239 69 M
( regnum\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 58 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 58 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 58 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 58 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 58 M
(write_dr) s
/F-gs-font 10 10 SF
0 setgray
167 58 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 58 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
221 58 M
( regnum, uint32_t value\) __attribute__\(\(always_inline\)\);) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 36 M
(/* Pseudo-descriptors used for LGDT, LLDT\(not used\) and LIDT instructions. */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 25 M
( pseudodesc {) s
5 14 M
(    uint16_t pd_lim;        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 14 M
(// Limit) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(    uintptr_t pd_base;      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 3 M
(// Base address) s
_R
S
%%Page: (57) 57
%%BeginPageSetup
_S
18 36 translate
/pagenum 57 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
/F-gs-font 10 10 SF
0 setgray
5 707 M
(} __attribute__ \(\(packed\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 685 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 685 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 685 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 685 M
(lidt) s
/F-gs-font 10 10 SF
0 setgray
143 685 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 685 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
185 685 M
( pseudodesc *pd\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 674 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 674 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 674 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 674 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 674 M
(sti) s
/F-gs-font 10 10 SF
0 setgray
137 674 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 674 M
(void) s
/F-gs-font 10 10 SF
0 setgray
167 674 M
(\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 663 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 663 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 663 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 663 M
(cli) s
/F-gs-font 10 10 SF
0 setgray
137 663 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 663 M
(void) s
/F-gs-font 10 10 SF
0 setgray
167 663 M
(\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 652 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 652 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 652 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 652 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 652 M
(ltr) s
/F-gs-font 10 10 SF
0 setgray
137 652 M
(\(uint16_t sel\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 641 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 641 M
( inline uint32_t ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
143 641 M
(read_eflags) s
/F-gs-font 10 10 SF
0 setgray
209 641 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 641 M
(void) s
/F-gs-font 10 10 SF
0 setgray
239 641 M
(\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 630 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 630 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 630 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 630 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 630 M
(write_eflags) s
/F-gs-font 10 10 SF
0 setgray
191 630 M
(\(uint32_t eflags\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 619 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 619 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 619 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 619 M
(lcr0) s
/F-gs-font 10 10 SF
0 setgray
143 619 M
(\(uintptr_t cr0\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 608 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 608 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 608 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 608 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 608 M
(lcr3) s
/F-gs-font 10 10 SF
0 setgray
143 608 M
(\(uintptr_t cr3\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 597 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( inline uintptr_t ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
149 597 M
(rcr0) s
/F-gs-font 10 10 SF
0 setgray
173 597 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 597 M
(void) s
/F-gs-font 10 10 SF
0 setgray
203 597 M
(\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 586 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 586 M
( inline uintptr_t ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
149 586 M
(rcr1) s
/F-gs-font 10 10 SF
0 setgray
173 586 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 586 M
(void) s
/F-gs-font 10 10 SF
0 setgray
203 586 M
(\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( inline uintptr_t ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
149 575 M
(rcr2) s
/F-gs-font 10 10 SF
0 setgray
173 575 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 575 M
(void) s
/F-gs-font 10 10 SF
0 setgray
203 575 M
(\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 564 M
( inline uintptr_t ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
149 564 M
(rcr3) s
/F-gs-font 10 10 SF
0 setgray
173 564 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 564 M
(void) s
/F-gs-font 10 10 SF
0 setgray
203 564 M
(\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 553 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 553 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 553 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 553 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 553 M
(invlpg) s
/F-gs-font 10 10 SF
0 setgray
155 553 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
161 553 M
(void) s
/F-gs-font 10 10 SF
0 setgray
185 553 M
( *addr\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 531 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( inline uint8_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 520 M
(inb) s
/F-gs-font 10 10 SF
0 setgray
23 520 M
(\(uint16_t port\) {) s
5 509 M
(    uint8_t data;) s
5 498 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 498 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 498 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 498 M
("inb %1, %0") s
/F-gs-font 10 10 SF
0 setgray
185 498 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
203 498 M
("=a") s
/F-gs-font 10 10 SF
0 setgray
227 498 M
( \(data\) : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
287 498 M
("d") s
/F-gs-font 10 10 SF
0 setgray
305 498 M
( \(port\) : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
365 498 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
413 498 M
(\);) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 487 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 487 M
( data;) s
5 476 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( inline uint16_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 443 M
(inw) s
/F-gs-font 10 10 SF
0 setgray
23 443 M
(\(uint16_t port\) {) s
5 432 M
(    uint16_t data;) s
5 421 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 421 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 421 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 421 M
("inw %1, %0") s
/F-gs-font 10 10 SF
0 setgray
185 421 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
203 421 M
("=a") s
/F-gs-font 10 10 SF
0 setgray
227 421 M
( \(data\) : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
287 421 M
("d") s
/F-gs-font 10 10 SF
0 setgray
305 421 M
( \(port\)\);) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 410 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 410 M
( data;) s
5 399 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 377 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 377 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 366 M
(insl) s
/F-gs-font 10 10 SF
0 setgray
29 366 M
(\(uint32_t port, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 366 M
(void) s
/F-gs-font 10 10 SF
0 setgray
149 366 M
( *addr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 366 M
(int) s
/F-gs-font 10 10 SF
0 setgray
215 366 M
( cnt\) {) s
5 355 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 355 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 355 M
( \() s
5 344 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 344 M
("cld;") s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 333 M
("repne; insl;") s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 322 M
("=D") s
/F-gs-font 10 10 SF
0 setgray
89 322 M
( \(addr\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 322 M
("=c") s
/F-gs-font 10 10 SF
0 setgray
167 322 M
( \(cnt\)) s
5 311 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 311 M
("d") s
/F-gs-font 10 10 SF
0 setgray
83 311 M
( \(port\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 311 M
("0") s
/F-gs-font 10 10 SF
0 setgray
155 311 M
( \(addr\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 311 M
("1") s
/F-gs-font 10 10 SF
0 setgray
227 311 M
( \(cnt\)) s
5 300 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 300 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
113 300 M
(, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
125 300 M
("cc") s
/F-gs-font 10 10 SF
0 setgray
149 300 M
(\);) s
5 289 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 267 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 256 M
(outb) s
/F-gs-font 10 10 SF
0 setgray
29 256 M
(\(uint16_t port, uint8_t data\) {) s
5 245 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 245 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 245 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 245 M
("outb %0, %1") s
/F-gs-font 10 10 SF
0 setgray
191 245 M
( :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
215 245 M
("a") s
/F-gs-font 10 10 SF
0 setgray
233 245 M
( \(data\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
287 245 M
("d") s
/F-gs-font 10 10 SF
0 setgray
305 245 M
( \(port\) : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
365 245 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
413 245 M
(\);) s
5 234 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 212 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 212 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 212 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 201 M
(outw) s
/F-gs-font 10 10 SF
0 setgray
29 201 M
(\(uint16_t port, uint16_t data\) {) s
5 190 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 190 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 190 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 190 M
("outw %0, %1") s
/F-gs-font 10 10 SF
0 setgray
191 190 M
( :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
215 190 M
("a") s
/F-gs-font 10 10 SF
0 setgray
233 190 M
( \(data\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
287 190 M
("d") s
/F-gs-font 10 10 SF
0 setgray
305 190 M
( \(port\) : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
365 190 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
413 190 M
(\);) s
5 179 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 157 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 157 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 146 M
(outsl) s
/F-gs-font 10 10 SF
0 setgray
35 146 M
(\(uint32_t port, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 146 M
(const) s
/F-gs-font 10 10 SF
0 setgray
161 146 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 146 M
(void) s
/F-gs-font 10 10 SF
0 setgray
191 146 M
( *addr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
239 146 M
(int) s
/F-gs-font 10 10 SF
0 setgray
257 146 M
( cnt\) {) s
5 135 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 135 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 135 M
( \() s
5 124 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 124 M
("cld;") s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 113 M
("repne; outsl;") s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 102 M
("=S") s
/F-gs-font 10 10 SF
0 setgray
89 102 M
( \(addr\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 102 M
("=c") s
/F-gs-font 10 10 SF
0 setgray
167 102 M
( \(cnt\)) s
5 91 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 91 M
("d") s
/F-gs-font 10 10 SF
0 setgray
83 91 M
( \(port\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 91 M
("0") s
/F-gs-font 10 10 SF
0 setgray
155 91 M
( \(addr\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 91 M
("1") s
/F-gs-font 10 10 SF
0 setgray
227 91 M
( \(cnt\)) s
5 80 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 80 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
113 80 M
(, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
125 80 M
("cc") s
/F-gs-font 10 10 SF
0 setgray
149 80 M
(\);) s
5 69 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 47 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 47 M
( inline uint32_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 36 M
(read_ebp) s
/F-gs-font 10 10 SF
0 setgray
53 36 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 36 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 36 M
(\) {) s
5 25 M
(    uint32_t ebp;) s
5 14 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 14 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 14 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 14 M
("movl %%ebp, %0") s
/F-gs-font 10 10 SF
0 setgray
209 14 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
227 14 M
("=r") s
/F-gs-font 10 10 SF
0 setgray
251 14 M
( \(ebp\)\);) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 3 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 3 M
( ebp;) s
_R
S
%%Page: (58) 58
%%BeginPageSetup
_S
18 36 translate
/pagenum 58 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 685 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 685 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 674 M
(breakpoint) s
/F-gs-font 10 10 SF
0 setgray
65 674 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 674 M
(void) s
/F-gs-font 10 10 SF
0 setgray
95 674 M
(\) {) s
5 663 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 663 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 663 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 663 M
("int $3") s
/F-gs-font 10 10 SF
0 setgray
161 663 M
(\);) s
5 652 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 630 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 630 M
( inline uint32_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 619 M
(read_dr) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 619 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
101 619 M
( regnum\) {) s
5 608 M
(    uint32_t value = 0;) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 597 M
(switch) s
/F-gs-font 10 10 SF
0 setgray
65 597 M
( \(regnum\) {) s
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 586 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 586 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 586 M
(0) s
/F-gs-font 10 10 SF
0 setgray
65 586 M
(: asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 586 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
149 586 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
161 586 M
("movl %%db0, %0") s
/F-gs-font 10 10 SF
0 setgray
257 586 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
275 586 M
("=r") s
/F-gs-font 10 10 SF
0 setgray
299 586 M
( \(value\)\); ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
365 586 M
(break) s
/F-gs-font 10 10 SF
0 setgray
395 586 M
(;) s
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 575 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 575 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 575 M
(1) s
/F-gs-font 10 10 SF
0 setgray
65 575 M
(: asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 575 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
149 575 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
161 575 M
("movl %%db1, %0") s
/F-gs-font 10 10 SF
0 setgray
257 575 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
275 575 M
("=r") s
/F-gs-font 10 10 SF
0 setgray
299 575 M
( \(value\)\); ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
365 575 M
(break) s
/F-gs-font 10 10 SF
0 setgray
395 575 M
(;) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 564 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 564 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 564 M
(2) s
/F-gs-font 10 10 SF
0 setgray
65 564 M
(: asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 564 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
149 564 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
161 564 M
("movl %%db2, %0") s
/F-gs-font 10 10 SF
0 setgray
257 564 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
275 564 M
("=r") s
/F-gs-font 10 10 SF
0 setgray
299 564 M
( \(value\)\); ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
365 564 M
(break) s
/F-gs-font 10 10 SF
0 setgray
395 564 M
(;) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 553 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 553 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 553 M
(3) s
/F-gs-font 10 10 SF
0 setgray
65 553 M
(: asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 553 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
149 553 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
161 553 M
("movl %%db3, %0") s
/F-gs-font 10 10 SF
0 setgray
257 553 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
275 553 M
("=r") s
/F-gs-font 10 10 SF
0 setgray
299 553 M
( \(value\)\); ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
365 553 M
(break) s
/F-gs-font 10 10 SF
0 setgray
395 553 M
(;) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 542 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 542 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 542 M
(6) s
/F-gs-font 10 10 SF
0 setgray
65 542 M
(: asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 542 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
149 542 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
161 542 M
("movl %%db6, %0") s
/F-gs-font 10 10 SF
0 setgray
257 542 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
275 542 M
("=r") s
/F-gs-font 10 10 SF
0 setgray
299 542 M
( \(value\)\); ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
365 542 M
(break) s
/F-gs-font 10 10 SF
0 setgray
395 542 M
(;) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 531 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 531 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 531 M
(7) s
/F-gs-font 10 10 SF
0 setgray
65 531 M
(: asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 531 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
149 531 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
161 531 M
("movl %%db7, %0") s
/F-gs-font 10 10 SF
0 setgray
257 531 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
275 531 M
("=r") s
/F-gs-font 10 10 SF
0 setgray
299 531 M
( \(value\)\); ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
365 531 M
(break) s
/F-gs-font 10 10 SF
0 setgray
395 531 M
(;) s
5 520 M
(    }) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 509 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
( value;) s
5 498 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 476 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 476 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 476 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 465 M
(write_dr) s
/F-gs-font 10 10 SF
0 setgray
53 465 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 465 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
107 465 M
( regnum, uint32_t value\) {) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(switch) s
/F-gs-font 10 10 SF
0 setgray
65 454 M
( \(regnum\) {) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 443 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 443 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 443 M
(0) s
/F-gs-font 10 10 SF
0 setgray
65 443 M
(: asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 443 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
149 443 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
161 443 M
("movl %0, %%db0") s
/F-gs-font 10 10 SF
0 setgray
257 443 M
( :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 443 M
("r") s
/F-gs-font 10 10 SF
0 setgray
299 443 M
( \(value\)\); ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
365 443 M
(break) s
/F-gs-font 10 10 SF
0 setgray
395 443 M
(;) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 432 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 432 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 432 M
(1) s
/F-gs-font 10 10 SF
0 setgray
65 432 M
(: asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 432 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
149 432 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
161 432 M
("movl %0, %%db1") s
/F-gs-font 10 10 SF
0 setgray
257 432 M
( :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 432 M
("r") s
/F-gs-font 10 10 SF
0 setgray
299 432 M
( \(value\)\); ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
365 432 M
(break) s
/F-gs-font 10 10 SF
0 setgray
395 432 M
(;) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 421 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 421 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 421 M
(2) s
/F-gs-font 10 10 SF
0 setgray
65 421 M
(: asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 421 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
149 421 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
161 421 M
("movl %0, %%db2") s
/F-gs-font 10 10 SF
0 setgray
257 421 M
( :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 421 M
("r") s
/F-gs-font 10 10 SF
0 setgray
299 421 M
( \(value\)\); ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
365 421 M
(break) s
/F-gs-font 10 10 SF
0 setgray
395 421 M
(;) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 410 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 410 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 410 M
(3) s
/F-gs-font 10 10 SF
0 setgray
65 410 M
(: asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 410 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
149 410 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
161 410 M
("movl %0, %%db3") s
/F-gs-font 10 10 SF
0 setgray
257 410 M
( :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 410 M
("r") s
/F-gs-font 10 10 SF
0 setgray
299 410 M
( \(value\)\); ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
365 410 M
(break) s
/F-gs-font 10 10 SF
0 setgray
395 410 M
(;) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 399 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 399 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 399 M
(6) s
/F-gs-font 10 10 SF
0 setgray
65 399 M
(: asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 399 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
149 399 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
161 399 M
("movl %0, %%db6") s
/F-gs-font 10 10 SF
0 setgray
257 399 M
( :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 399 M
("r") s
/F-gs-font 10 10 SF
0 setgray
299 399 M
( \(value\)\); ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
365 399 M
(break) s
/F-gs-font 10 10 SF
0 setgray
395 399 M
(;) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 388 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 388 M
(7) s
/F-gs-font 10 10 SF
0 setgray
65 388 M
(: asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 388 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
149 388 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
161 388 M
("movl %0, %%db7") s
/F-gs-font 10 10 SF
0 setgray
257 388 M
( :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 388 M
("r") s
/F-gs-font 10 10 SF
0 setgray
299 388 M
( \(value\)\); ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
365 388 M
(break) s
/F-gs-font 10 10 SF
0 setgray
395 388 M
(;) s
5 377 M
(    }) s
5 366 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 344 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 344 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 344 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 333 M
(lidt) s
/F-gs-font 10 10 SF
0 setgray
29 333 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 333 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
71 333 M
( pseudodesc *pd\) {) s
5 322 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 322 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 322 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 322 M
("lidt \(%0\)") s
/F-gs-font 10 10 SF
0 setgray
179 322 M
( :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
203 322 M
("r") s
/F-gs-font 10 10 SF
0 setgray
221 322 M
( \(pd\) : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
269 322 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
317 322 M
(\);) s
5 311 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 289 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 278 M
(sti) s
/F-gs-font 10 10 SF
0 setgray
23 278 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 278 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 278 M
(\) {) s
5 267 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 267 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 267 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 267 M
("sti") s
/F-gs-font 10 10 SF
0 setgray
143 267 M
(\);) s
5 256 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 234 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 234 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 234 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 223 M
(cli) s
/F-gs-font 10 10 SF
0 setgray
23 223 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 223 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 223 M
(\) {) s
5 212 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 212 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 212 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 212 M
("cli") s
/F-gs-font 10 10 SF
0 setgray
143 212 M
( ::: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 212 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
221 212 M
(\);) s
5 201 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 179 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 179 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 179 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 168 M
(ltr) s
/F-gs-font 10 10 SF
0 setgray
23 168 M
(\(uint16_t sel\) {) s
5 157 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 157 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 157 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 157 M
("ltr %0") s
/F-gs-font 10 10 SF
0 setgray
161 157 M
( :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
185 157 M
("r") s
/F-gs-font 10 10 SF
0 setgray
203 157 M
( \(sel\) : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
257 157 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
305 157 M
(\);) s
5 146 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 124 M
( inline uint32_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 113 M
(read_eflags) s
/F-gs-font 10 10 SF
0 setgray
71 113 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 113 M
(void) s
/F-gs-font 10 10 SF
0 setgray
101 113 M
(\) {) s
5 102 M
(    uint32_t eflags;) s
5 91 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 91 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 91 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 91 M
("pushfl; popl %0") s
/F-gs-font 10 10 SF
0 setgray
215 91 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
233 91 M
("=r") s
/F-gs-font 10 10 SF
0 setgray
257 91 M
( \(eflags\)\);) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 80 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 80 M
( eflags;) s
5 69 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 47 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 47 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 47 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 36 M
(write_eflags) s
/F-gs-font 10 10 SF
0 setgray
77 36 M
(\(uint32_t eflags\) {) s
5 25 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 25 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 25 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 25 M
("pushl %0; popfl") s
/F-gs-font 10 10 SF
0 setgray
215 25 M
( :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
239 25 M
("r") s
/F-gs-font 10 10 SF
0 setgray
257 25 M
( \(eflags\)\);) s
5 14 M
(}) s
_R
S
%%Page: (59) 59
%%BeginPageSetup
_S
18 36 translate
/pagenum 59 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 707 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 696 M
(lcr0) s
/F-gs-font 10 10 SF
0 setgray
29 696 M
(\(uintptr_t cr0\) {) s
5 685 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 685 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 685 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 685 M
("mov %0, %%cr0") s
/F-gs-font 10 10 SF
0 setgray
203 685 M
( :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
227 685 M
("r") s
/F-gs-font 10 10 SF
0 setgray
245 685 M
( \(cr0\) : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
299 685 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
347 685 M
(\);) s
5 674 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 652 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 652 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 652 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 641 M
(lcr3) s
/F-gs-font 10 10 SF
0 setgray
29 641 M
(\(uintptr_t cr3\) {) s
5 630 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 630 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 630 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 630 M
("mov %0, %%cr3") s
/F-gs-font 10 10 SF
0 setgray
203 630 M
( :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
227 630 M
("r") s
/F-gs-font 10 10 SF
0 setgray
245 630 M
( \(cr3\) : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
299 630 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
347 630 M
(\);) s
5 619 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 597 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( inline uintptr_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 586 M
(rcr0) s
/F-gs-font 10 10 SF
0 setgray
29 586 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 586 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 586 M
(\) {) s
5 575 M
(    uintptr_t cr0;) s
5 564 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 564 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 564 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 564 M
("mov %%cr0, %0") s
/F-gs-font 10 10 SF
0 setgray
203 564 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
221 564 M
("=r") s
/F-gs-font 10 10 SF
0 setgray
245 564 M
( \(cr0\) :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
305 564 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
353 564 M
(\);) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 553 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 553 M
( cr0;) s
5 542 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 520 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 520 M
( inline uintptr_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 509 M
(rcr1) s
/F-gs-font 10 10 SF
0 setgray
29 509 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 509 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 509 M
(\) {) s
5 498 M
(    uintptr_t cr1;) s
5 487 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 487 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 487 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 487 M
("mov %%cr1, %0") s
/F-gs-font 10 10 SF
0 setgray
203 487 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
221 487 M
("=r") s
/F-gs-font 10 10 SF
0 setgray
245 487 M
( \(cr1\) :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
305 487 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
353 487 M
(\);) s
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 476 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 476 M
( cr1;) s
5 465 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
( inline uintptr_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 432 M
(rcr2) s
/F-gs-font 10 10 SF
0 setgray
29 432 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 432 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 432 M
(\) {) s
5 421 M
(    uintptr_t cr2;) s
5 410 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 410 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 410 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 410 M
("mov %%cr2, %0") s
/F-gs-font 10 10 SF
0 setgray
203 410 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
221 410 M
("=r") s
/F-gs-font 10 10 SF
0 setgray
245 410 M
( \(cr2\) :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
305 410 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
353 410 M
(\);) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 399 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 399 M
( cr2;) s
5 388 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 366 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 366 M
( inline uintptr_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 355 M
(rcr3) s
/F-gs-font 10 10 SF
0 setgray
29 355 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 355 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 355 M
(\) {) s
5 344 M
(    uintptr_t cr3;) s
5 333 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 333 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 333 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 333 M
("mov %%cr3, %0") s
/F-gs-font 10 10 SF
0 setgray
203 333 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
221 333 M
("=r") s
/F-gs-font 10 10 SF
0 setgray
245 333 M
( \(cr3\) :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
305 333 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
353 333 M
(\);) s
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 322 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 322 M
( cr3;) s
5 311 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 289 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 278 M
(invlpg) s
/F-gs-font 10 10 SF
0 setgray
41 278 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 278 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 278 M
( *addr\) {) s
5 267 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 267 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 267 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 267 M
("invlpg \(%0\)") s
/F-gs-font 10 10 SF
0 setgray
191 267 M
( :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
215 267 M
("r") s
/F-gs-font 10 10 SF
0 setgray
233 267 M
( \(addr\) : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
293 267 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
341 267 M
(\);) s
5 256 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 234 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 234 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 234 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 234 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
113 234 M
(__strcmp) s
/F-gs-font 10 10 SF
0 setgray
161 234 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 234 M
(const) s
/F-gs-font 10 10 SF
0 setgray
197 234 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 234 M
(char) s
/F-gs-font 10 10 SF
0 setgray
227 234 M
( *s1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
263 234 M
(const) s
/F-gs-font 10 10 SF
0 setgray
293 234 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
299 234 M
(char) s
/F-gs-font 10 10 SF
0 setgray
323 234 M
( *s2\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 223 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 223 M
(char) s
/F-gs-font 10 10 SF
0 setgray
113 223 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
125 223 M
(__strcpy) s
/F-gs-font 10 10 SF
0 setgray
173 223 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 223 M
(char) s
/F-gs-font 10 10 SF
0 setgray
203 223 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 223 M
(const) s
/F-gs-font 10 10 SF
0 setgray
275 223 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
281 223 M
(char) s
/F-gs-font 10 10 SF
0 setgray
305 223 M
( *src\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 212 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 212 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 212 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 212 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
125 212 M
(__memset) s
/F-gs-font 10 10 SF
0 setgray
173 212 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 212 M
(void) s
/F-gs-font 10 10 SF
0 setgray
203 212 M
( *s, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
233 212 M
(char) s
/F-gs-font 10 10 SF
0 setgray
257 212 M
( c, size_t n\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 201 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 201 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 201 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 201 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
125 201 M
(__memmove) s
/F-gs-font 10 10 SF
0 setgray
179 201 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 201 M
(void) s
/F-gs-font 10 10 SF
0 setgray
209 201 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 201 M
(const) s
/F-gs-font 10 10 SF
0 setgray
281 201 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
287 201 M
(void) s
/F-gs-font 10 10 SF
0 setgray
311 201 M
( *src, size_t n\) __attribute__\(\(always_inli) s
5 190 M
(ne\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 179 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 179 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 179 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 179 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
125 179 M
(__memcpy) s
/F-gs-font 10 10 SF
0 setgray
173 179 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 179 M
(void) s
/F-gs-font 10 10 SF
0 setgray
203 179 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 179 M
(const) s
/F-gs-font 10 10 SF
0 setgray
275 179 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
281 179 M
(void) s
/F-gs-font 10 10 SF
0 setgray
305 179 M
( *src, size_t n\) __attribute__\(\(always_inlin) s
5 168 M
(e\)\);) s
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 146 M
(__HAVE_ARCH_STRCMP) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 135 M
(__HAVE_ARCH_STRCMP) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 124 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 113 M
(__strcmp) s
/F-gs-font 10 10 SF
0 setgray
53 113 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 113 M
(const) s
/F-gs-font 10 10 SF
0 setgray
89 113 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 113 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 113 M
( *s1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 113 M
(const) s
/F-gs-font 10 10 SF
0 setgray
185 113 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 113 M
(char) s
/F-gs-font 10 10 SF
0 setgray
215 113 M
( *s2\) {) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 102 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 102 M
( d0, d1, ret;) s
5 91 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 91 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 91 M
( \() s
5 80 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 80 M
("1: lodsb;") s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 69 M
("scasb;") s
/F-gs-font 10 10 SF
0 setgray
5 58 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 58 M
("jne 2f;") s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 47 M
("testb %%al, %%al;") s
/F-gs-font 10 10 SF
0 setgray
5 36 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 36 M
("jne 1b;") s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 25 M
("xorl %%eax, %%eax;") s
/F-gs-font 10 10 SF
0 setgray
5 14 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 14 M
("jmp 3f;") s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 3 M
("2: sbbl %%eax, %%eax;") s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (60) 60
%%BeginPageSetup
_S
18 36 translate
/pagenum 60 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 707 M
("orb $1, %%al;") s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 696 M
("3:") s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 685 M
("=a") s
/F-gs-font 10 10 SF
0 setgray
89 685 M
( \(ret\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 685 M
("=&S") s
/F-gs-font 10 10 SF
0 setgray
167 685 M
( \(d0\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 685 M
("=&D") s
/F-gs-font 10 10 SF
0 setgray
239 685 M
( \(d1\)) s
5 674 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 674 M
("1") s
/F-gs-font 10 10 SF
0 setgray
83 674 M
( \(s1\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
125 674 M
("2") s
/F-gs-font 10 10 SF
0 setgray
143 674 M
( \(s2\)) s
5 663 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 663 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
113 663 M
(\);) s
5 652 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 652 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 652 M
( ret;) s
5 641 M
(}) s
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 619 M
(/* __HAVE_ARCH_STRCMP */) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 597 M
(__HAVE_ARCH_STRCPY) s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 586 M
(__HAVE_ARCH_STRCPY) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 575 M
(char) s
/F-gs-font 10 10 SF
0 setgray
113 575 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 564 M
(__strcpy) s
/F-gs-font 10 10 SF
0 setgray
53 564 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 564 M
(char) s
/F-gs-font 10 10 SF
0 setgray
83 564 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 564 M
(const) s
/F-gs-font 10 10 SF
0 setgray
155 564 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
161 564 M
(char) s
/F-gs-font 10 10 SF
0 setgray
185 564 M
( *src\) {) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 553 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( d0, d1, d2;) s
5 542 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 542 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 542 M
( \() s
5 531 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 531 M
("1: lodsb;") s
/F-gs-font 10 10 SF
0 setgray
5 520 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 520 M
("stosb;") s
/F-gs-font 10 10 SF
0 setgray
5 509 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 509 M
("testb %%al, %%al;") s
/F-gs-font 10 10 SF
0 setgray
5 498 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 498 M
("jne 1b;") s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 487 M
("=&S") s
/F-gs-font 10 10 SF
0 setgray
95 487 M
( \(d0\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 487 M
("=&D") s
/F-gs-font 10 10 SF
0 setgray
167 487 M
( \(d1\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 487 M
("=&a") s
/F-gs-font 10 10 SF
0 setgray
239 487 M
( \(d2\)) s
5 476 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 476 M
("0") s
/F-gs-font 10 10 SF
0 setgray
83 476 M
( \(src\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
131 476 M
("1") s
/F-gs-font 10 10 SF
0 setgray
149 476 M
( \(dst\) : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
203 476 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
251 476 M
(\);) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 465 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 465 M
( dst;) s
5 454 M
(}) s
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 443 M
(/* __HAVE_ARCH_STRCPY */) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 421 M
(__HAVE_ARCH_MEMSET) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 410 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 410 M
(__HAVE_ARCH_MEMSET) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 399 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 399 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 399 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 388 M
(__memset) s
/F-gs-font 10 10 SF
0 setgray
53 388 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 388 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 388 M
( *s, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 388 M
(char) s
/F-gs-font 10 10 SF
0 setgray
137 388 M
( c, size_t n\) {) s
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 377 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 377 M
( d0, d1;) s
5 366 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 366 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 366 M
( \() s
5 355 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 355 M
("rep; stosb;") s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 344 M
("=&c") s
/F-gs-font 10 10 SF
0 setgray
95 344 M
( \(d0\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 344 M
("=&D") s
/F-gs-font 10 10 SF
0 setgray
167 344 M
( \(d1\)) s
5 333 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 333 M
("0") s
/F-gs-font 10 10 SF
0 setgray
83 333 M
( \(n\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
119 333 M
("a") s
/F-gs-font 10 10 SF
0 setgray
137 333 M
( \(c\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 333 M
("1") s
/F-gs-font 10 10 SF
0 setgray
191 333 M
( \(s\)) s
5 322 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 322 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
113 322 M
(\);) s
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 311 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 311 M
( s;) s
5 300 M
(}) s
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 289 M
(/* __HAVE_ARCH_MEMSET */) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 267 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 267 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 267 M
(__HAVE_ARCH_MEMMOVE) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 256 M
(__HAVE_ARCH_MEMMOVE) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 245 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 245 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 245 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 245 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 234 M
(__memmove) s
/F-gs-font 10 10 SF
0 setgray
59 234 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 234 M
(void) s
/F-gs-font 10 10 SF
0 setgray
89 234 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 234 M
(const) s
/F-gs-font 10 10 SF
0 setgray
161 234 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 234 M
(void) s
/F-gs-font 10 10 SF
0 setgray
191 234 M
( *src, size_t n\) {) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 223 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 223 M
( \(dst < src\) {) s
5 212 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 212 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 212 M
( __memcpy\(dst, src, n\);) s
5 201 M
(    }) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 190 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( d0, d1, d2;) s
5 179 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 179 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 179 M
( \() s
5 168 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 168 M
("std;") s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 157 M
("rep; movsb;") s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 146 M
("cld;") s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 135 M
("=&c") s
/F-gs-font 10 10 SF
0 setgray
95 135 M
( \(d0\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 135 M
("=&S") s
/F-gs-font 10 10 SF
0 setgray
167 135 M
( \(d1\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 135 M
("=&D") s
/F-gs-font 10 10 SF
0 setgray
239 135 M
( \(d2\)) s
5 124 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 124 M
("0") s
/F-gs-font 10 10 SF
0 setgray
83 124 M
( \(n\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
119 124 M
("1") s
/F-gs-font 10 10 SF
0 setgray
137 124 M
( \(n - 1 + src\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
233 124 M
("2") s
/F-gs-font 10 10 SF
0 setgray
251 124 M
( \(n - 1 + dst\)) s
5 113 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 113 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
113 113 M
(\);) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 102 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 102 M
( dst;) s
5 91 M
(}) s
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 80 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 80 M
(/* __HAVE_ARCH_MEMMOVE */) s
/F-gs-font 10 10 SF
0 setgray
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 58 M
(__HAVE_ARCH_MEMCPY) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 47 M
(__HAVE_ARCH_MEMCPY) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 36 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 36 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 36 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 25 M
(__memcpy) s
/F-gs-font 10 10 SF
0 setgray
53 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 25 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 25 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 25 M
(const) s
/F-gs-font 10 10 SF
0 setgray
155 25 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
161 25 M
(void) s
/F-gs-font 10 10 SF
0 setgray
185 25 M
( *src, size_t n\) {) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 14 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 14 M
( d0, d1, d2;) s
5 3 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 3 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 3 M
( \() s
_R
S
%%Page: (61) 61
%%BeginPageSetup
_S
18 36 translate
/pagenum 61 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 707 M
("rep; movsl;") s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 696 M
("movl %4, %%ecx;") s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 685 M
("andl $3, %%ecx;") s
/F-gs-font 10 10 SF
0 setgray
5 674 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 674 M
("jz 1f;") s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 663 M
("rep; movsb;") s
/F-gs-font 10 10 SF
0 setgray
5 652 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 652 M
("1:") s
/F-gs-font 10 10 SF
0 setgray
5 641 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 641 M
("=&c") s
/F-gs-font 10 10 SF
0 setgray
95 641 M
( \(d0\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 641 M
("=&D") s
/F-gs-font 10 10 SF
0 setgray
167 641 M
( \(d1\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 641 M
("=&S") s
/F-gs-font 10 10 SF
0 setgray
239 641 M
( \(d2\)) s
5 630 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 630 M
("0") s
/F-gs-font 10 10 SF
0 setgray
83 630 M
( \(n / 4\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 630 M
("g") s
/F-gs-font 10 10 SF
0 setgray
161 630 M
( \(n\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 630 M
("1") s
/F-gs-font 10 10 SF
0 setgray
215 630 M
( \(dst\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
263 630 M
("2") s
/F-gs-font 10 10 SF
0 setgray
281 630 M
( \(src\)) s
5 619 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 619 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
113 619 M
(\);) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 608 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 608 M
( dst;) s
5 597 M
(}) s
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 586 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 586 M
(/* __HAVE_ARCH_MEMCPY */) s
/F-gs-font 10 10 SF
0 setgray
5 564 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 564 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 564 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 564 M
(/* !__LIBS_X86_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 542 M
([ucore/lab8_result/libs/unistd.h] ++++++++++++++++++++++++++++++) s
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 531 M
(__LIBS_UNISTD_H__) s
/F-gs-font 10 10 SF
0 setgray
5 520 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 520 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 520 M
(__LIBS_UNISTD_H__) s
/F-gs-font 10 10 SF
0 setgray
5 498 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 498 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 498 M
(T_SYSCALL) s
/F-gs-font 10 10 SF
0 setgray
107 498 M
(           0x80) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 476 M
(/* syscall number */) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 465 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 465 M
(SYS_exit) s
/F-gs-font 10 10 SF
0 setgray
101 465 M
(            1) s
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 454 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 454 M
(SYS_fork) s
/F-gs-font 10 10 SF
0 setgray
101 454 M
(            2) s
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 443 M
(SYS_wait) s
/F-gs-font 10 10 SF
0 setgray
101 443 M
(            3) s
5 432 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 432 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 432 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 432 M
(SYS_exec) s
/F-gs-font 10 10 SF
0 setgray
101 432 M
(            4) s
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 421 M
(SYS_clone) s
/F-gs-font 10 10 SF
0 setgray
107 421 M
(           5) s
5 410 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 410 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 410 M
(SYS_yield) s
/F-gs-font 10 10 SF
0 setgray
107 410 M
(           10) s
5 399 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 399 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 399 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 399 M
(SYS_sleep) s
/F-gs-font 10 10 SF
0 setgray
107 399 M
(           11) s
5 388 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 388 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 388 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 388 M
(SYS_kill) s
/F-gs-font 10 10 SF
0 setgray
101 388 M
(            12) s
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 377 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 377 M
(SYS_gettime) s
/F-gs-font 10 10 SF
0 setgray
119 377 M
(         17) s
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 366 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 366 M
(SYS_getpid) s
/F-gs-font 10 10 SF
0 setgray
113 366 M
(          18) s
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 355 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 355 M
(SYS_mmap) s
/F-gs-font 10 10 SF
0 setgray
101 355 M
(            20) s
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 344 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 344 M
(SYS_munmap) s
/F-gs-font 10 10 SF
0 setgray
113 344 M
(          21) s
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 333 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 333 M
(SYS_shmem) s
/F-gs-font 10 10 SF
0 setgray
107 333 M
(           22) s
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 322 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 322 M
(SYS_putc) s
/F-gs-font 10 10 SF
0 setgray
101 322 M
(            30) s
5 311 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 311 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 311 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 311 M
(SYS_pgdir) s
/F-gs-font 10 10 SF
0 setgray
107 311 M
(           31) s
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 300 M
(SYS_open) s
/F-gs-font 10 10 SF
0 setgray
101 300 M
(            100) s
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 289 M
(SYS_close) s
/F-gs-font 10 10 SF
0 setgray
107 289 M
(           101) s
5 278 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 278 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 278 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 278 M
(SYS_read) s
/F-gs-font 10 10 SF
0 setgray
101 278 M
(            102) s
5 267 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 267 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 267 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 267 M
(SYS_write) s
/F-gs-font 10 10 SF
0 setgray
107 267 M
(           103) s
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 256 M
(SYS_seek) s
/F-gs-font 10 10 SF
0 setgray
101 256 M
(            104) s
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 245 M
(SYS_fstat) s
/F-gs-font 10 10 SF
0 setgray
107 245 M
(           110) s
5 234 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 234 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 234 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 234 M
(SYS_fsync) s
/F-gs-font 10 10 SF
0 setgray
107 234 M
(           111) s
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 223 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 223 M
(SYS_getcwd) s
/F-gs-font 10 10 SF
0 setgray
113 223 M
(          121) s
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 212 M
(SYS_getdirentry) s
/F-gs-font 10 10 SF
0 setgray
143 212 M
(     128) s
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 201 M
(SYS_dup) s
/F-gs-font 10 10 SF
0 setgray
95 201 M
(             130) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 190 M
(/* OLNY FOR LAB6 */) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 179 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 179 M
(SYS_lab6_set_priority) s
/F-gs-font 10 10 SF
0 setgray
179 179 M
( 255) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 157 M
(/* SYS_fork flags */) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 146 M
(CLONE_VM) s
/F-gs-font 10 10 SF
0 setgray
101 146 M
(            0x00000100  // set if VM shared between processes) s
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 135 M
(CLONE_THREAD) s
/F-gs-font 10 10 SF
0 setgray
125 135 M
(        0x00000200  // thread group) s
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 124 M
(CLONE_FS) s
/F-gs-font 10 10 SF
0 setgray
101 124 M
(            0x00000800  // set if shared between processes) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 102 M
(/* VFS flags */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 91 M
(// flags for open: choose one of these) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 80 M
(O_RDONLY) s
/F-gs-font 10 10 SF
0 setgray
101 80 M
(            0           // open for reading only) s
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 69 M
(O_WRONLY) s
/F-gs-font 10 10 SF
0 setgray
101 69 M
(            1           // open for writing only) s
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 58 M
(O_RDWR) s
/F-gs-font 10 10 SF
0 setgray
89 58 M
(              2           // open for reading and writing) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 47 M
(// then or in any of these:) s
/F-gs-font 10 10 SF
0 setgray
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 36 M
(O_CREAT) s
/F-gs-font 10 10 SF
0 setgray
95 36 M
(             0x00000004  // create file if it does not exist) s
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 25 M
(O_EXCL) s
/F-gs-font 10 10 SF
0 setgray
89 25 M
(              0x00000008  // error if O_CREAT and the file exists) s
5 14 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 14 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 14 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 14 M
(O_TRUNC) s
/F-gs-font 10 10 SF
0 setgray
95 14 M
(             0x00000010  // truncate file upon open) s
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 3 M
(O_APPEND) s
/F-gs-font 10 10 SF
0 setgray
101 3 M
(            0x00000020  // append on each write) s
_R
S
%%Page: (62) 62
%%BeginPageSetup
_S
18 36 translate
/pagenum 62 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
(// additonal related definition) s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 696 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 696 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 696 M
(O_ACCMODE) s
/F-gs-font 10 10 SF
0 setgray
107 696 M
(           3           // mask for O_RDONLY / O_WRONLY / O_RDWR) s
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 674 M
(NO_FD) s
/F-gs-font 10 10 SF
0 setgray
83 674 M
(               -0x9527     // invalid fd) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 652 M
(/* lseek codes */) s
/F-gs-font 10 10 SF
0 setgray
5 641 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 641 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 641 M
(LSEEK_SET) s
/F-gs-font 10 10 SF
0 setgray
107 641 M
(           0           // seek relative to beginning of file) s
5 630 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 630 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 630 M
(LSEEK_CUR) s
/F-gs-font 10 10 SF
0 setgray
107 630 M
(           1           // seek relative to current position in file) s
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 619 M
(LSEEK_END) s
/F-gs-font 10 10 SF
0 setgray
107 619 M
(           2           // seek relative to end of file) s
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 597 M
(FS_MAX_DNAME_LEN) s
/F-gs-font 10 10 SF
0 setgray
149 597 M
(    31) s
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 586 M
(FS_MAX_FNAME_LEN) s
/F-gs-font 10 10 SF
0 setgray
149 586 M
(    255) s
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 575 M
(FS_MAX_FPATH_LEN) s
/F-gs-font 10 10 SF
0 setgray
149 575 M
(    4095) s
5 553 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 553 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 553 M
(EXEC_MAX_ARG_NUM) s
/F-gs-font 10 10 SF
0 setgray
149 553 M
(    32) s
5 542 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 542 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 542 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 542 M
(EXEC_MAX_ARG_LEN) s
/F-gs-font 10 10 SF
0 setgray
149 542 M
(    4095) s
5 520 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 520 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 520 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 520 M
(/* !__LIBS_UNISTD_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 498 M
([ucore/lab8_result/libs/stdarg.h] ++++++++++++++++++++++++++++++) s
5 487 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 487 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 487 M
(__LIBS_STDARG_H__) s
/F-gs-font 10 10 SF
0 setgray
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 476 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 476 M
(__LIBS_STDARG_H__) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 454 M
(/* compiler provides size of save area */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( __builtin_va_list va_list;) s
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 421 M
(va_start) s
/F-gs-font 10 10 SF
0 setgray
101 421 M
(\(ap, last\)              \(__builtin_va_start\(ap, last\)\)) s
5 410 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 410 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 410 M
(va_arg) s
/F-gs-font 10 10 SF
0 setgray
89 410 M
(\(ap, type\)                \(__builtin_va_arg\(ap, type\)\)) s
5 399 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 399 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 399 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 399 M
(va_end) s
/F-gs-font 10 10 SF
0 setgray
89 399 M
(\(ap\)                      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
245 399 M
(/*nothing*/) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 377 M
(/* !__LIBS_STDARG_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
([ucore/lab8_result/libs/stdlib.h] ++++++++++++++++++++++++++++++) s
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 344 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 344 M
(__LIBS_STDLIB_H__) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 333 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 333 M
(__LIBS_STDLIB_H__) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 311 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 311 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 311 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 289 M
(/* the largest number rand will return */) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 278 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 278 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 278 M
(RAND_MAX) s
/F-gs-font 10 10 SF
0 setgray
101 278 M
(    2147483647UL) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 256 M
(/* libs/rand.c */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 245 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 245 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 245 M
(rand) s
/F-gs-font 10 10 SF
0 setgray
53 245 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 245 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 245 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 234 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 234 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 234 M
(srand) s
/F-gs-font 10 10 SF
0 setgray
65 234 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 234 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
119 234 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 234 M
(int) s
/F-gs-font 10 10 SF
0 setgray
143 234 M
( seed\);) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 212 M
(/* libs/hash.c */) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(uint32_t ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
59 201 M
(hash32) s
/F-gs-font 10 10 SF
0 setgray
95 201 M
(\(uint32_t val, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 201 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
233 201 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
239 201 M
(int) s
/F-gs-font 10 10 SF
0 setgray
257 201 M
( bits\);) s
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 179 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 179 M
(/* !__LIBS_RAND_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
([ucore/lab8_result/libs/atomic.h] ++++++++++++++++++++++++++++++) s
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 146 M
(__LIBS_ATOMIC_H__) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 135 M
(__LIBS_ATOMIC_H__) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 113 M
(/* Atomic operations that C can't guarantee us. Useful for resource counting etc.. */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 91 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 91 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 91 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 91 M
(set_bit) s
/F-gs-font 10 10 SF
0 setgray
161 91 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
185 91 M
( nr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 91 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
263 91 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
269 91 M
(void) s
/F-gs-font 10 10 SF
0 setgray
293 91 M
( *addr\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 80 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 80 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 80 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 80 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 80 M
(clear_bit) s
/F-gs-font 10 10 SF
0 setgray
173 80 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
197 80 M
( nr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 80 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
275 80 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
281 80 M
(void) s
/F-gs-font 10 10 SF
0 setgray
305 80 M
( *addr\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 69 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 69 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 69 M
(change_bit) s
/F-gs-font 10 10 SF
0 setgray
179 69 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 69 M
(int) s
/F-gs-font 10 10 SF
0 setgray
203 69 M
( nr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
233 69 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
281 69 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
287 69 M
(void) s
/F-gs-font 10 10 SF
0 setgray
311 69 M
( *addr\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 58 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 58 M
( inline bool ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 58 M
(test_and_set_bit) s
/F-gs-font 10 10 SF
0 setgray
215 58 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
221 58 M
(int) s
/F-gs-font 10 10 SF
0 setgray
239 58 M
( nr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
269 58 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
317 58 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
323 58 M
(void) s
/F-gs-font 10 10 SF
0 setgray
347 58 M
( *addr\) __attribute__\(\(always_inline\)) s
5 47 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 36 M
( inline bool ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 36 M
(test_and_clear_bit) s
/F-gs-font 10 10 SF
0 setgray
227 36 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
233 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
251 36 M
( nr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
281 36 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
329 36 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
335 36 M
(void) s
/F-gs-font 10 10 SF
0 setgray
359 36 M
( *addr\) __attribute__\(\(always_inlin) s
5 25 M
(e\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( inline bool ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 14 M
(test_bit) s
/F-gs-font 10 10 SF
0 setgray
167 14 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 14 M
(int) s
/F-gs-font 10 10 SF
0 setgray
191 14 M
( nr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
221 14 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
269 14 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
275 14 M
(void) s
/F-gs-font 10 10 SF
0 setgray
299 14 M
( *addr\) __attribute__\(\(always_inline\)\);) s
_R
S
%%Page: (63) 63
%%BeginPageSetup
_S
18 36 translate
/pagenum 63 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
(/* *) s
5 696 M
( * set_bit - Atomically set a bit in memory) s
5 685 M
( * @nr:     the bit to set) s
5 674 M
( * @addr:   the address to start counting from) s
5 663 M
( *) s
5 652 M
( * Note that @nr may be almost arbitrarily large; this function is not) s
5 641 M
( * restricted to acting on a single-word quantity.) s
5 630 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 619 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 619 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 608 M
(set_bit) s
/F-gs-font 10 10 SF
0 setgray
47 608 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 608 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 608 M
( nr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 608 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
149 608 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 608 M
(void) s
/F-gs-font 10 10 SF
0 setgray
179 608 M
( *addr\) {) s
5 597 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 597 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 597 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 597 M
("btsl %1, %0") s
/F-gs-font 10 10 SF
0 setgray
191 597 M
( :) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
203 597 M
("=m") s
/F-gs-font 10 10 SF
0 setgray
227 597 M
( \(*\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 597 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
299 597 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
305 597 M
(long) s
/F-gs-font 10 10 SF
0 setgray
329 597 M
( *\)addr\) : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
395 597 M
("Ir") s
/F-gs-font 10 10 SF
0 setgray
419 597 M
( \(nr\)\);) s
5 586 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 564 M
(/* *) s
5 553 M
( * clear_bit - Atomically clears a bit in memory) s
5 542 M
( * @nr:     the bit to clear) s
5 531 M
( * @addr:   the address to start counting from) s
5 520 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 509 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 509 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 509 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 498 M
(clear_bit) s
/F-gs-font 10 10 SF
0 setgray
59 498 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 498 M
(int) s
/F-gs-font 10 10 SF
0 setgray
83 498 M
( nr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 498 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
161 498 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 498 M
(void) s
/F-gs-font 10 10 SF
0 setgray
191 498 M
( *addr\) {) s
5 487 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 487 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 487 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 487 M
("btrl %1, %0") s
/F-gs-font 10 10 SF
0 setgray
191 487 M
( :) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
203 487 M
("=m") s
/F-gs-font 10 10 SF
0 setgray
227 487 M
( \(*\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 487 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
299 487 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
305 487 M
(long) s
/F-gs-font 10 10 SF
0 setgray
329 487 M
( *\)addr\) : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
395 487 M
("Ir") s
/F-gs-font 10 10 SF
0 setgray
419 487 M
( \(nr\)\);) s
5 476 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 454 M
(/* *) s
5 443 M
( * change_bit - Atomically toggle a bit in memory) s
5 432 M
( * @nr:     the bit to change) s
5 421 M
( * @addr:   the address to start counting from) s
5 410 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 399 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 399 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 388 M
(change_bit) s
/F-gs-font 10 10 SF
0 setgray
65 388 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 388 M
(int) s
/F-gs-font 10 10 SF
0 setgray
89 388 M
( nr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 388 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
167 388 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 388 M
(void) s
/F-gs-font 10 10 SF
0 setgray
197 388 M
( *addr\) {) s
5 377 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 377 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 377 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 377 M
("btcl %1, %0") s
/F-gs-font 10 10 SF
0 setgray
191 377 M
( :) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
203 377 M
("=m") s
/F-gs-font 10 10 SF
0 setgray
227 377 M
( \(*\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 377 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
299 377 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
305 377 M
(long) s
/F-gs-font 10 10 SF
0 setgray
329 377 M
( *\)addr\) : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
395 377 M
("Ir") s
/F-gs-font 10 10 SF
0 setgray
419 377 M
( \(nr\)\);) s
5 366 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 344 M
(/* *) s
5 333 M
( * test_bit - Determine whether a bit is set) s
5 322 M
( * @nr:     the bit to test) s
5 311 M
( * @addr:   the address to count from) s
5 300 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( inline bool) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 278 M
(test_bit) s
/F-gs-font 10 10 SF
0 setgray
53 278 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 278 M
( nr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 278 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
155 278 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
161 278 M
(void) s
/F-gs-font 10 10 SF
0 setgray
185 278 M
( *addr\) {) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 267 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 267 M
( oldbit;) s
5 256 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 256 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 256 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 256 M
("btl %2, %1; sbbl %0,%0") s
/F-gs-font 10 10 SF
0 setgray
257 256 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
275 256 M
("=r") s
/F-gs-font 10 10 SF
0 setgray
299 256 M
( \(oldbit\) : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
371 256 M
("m") s
/F-gs-font 10 10 SF
0 setgray
389 256 M
( \(*\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
413 256 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
461 256 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
467 256 M
(long) s
/F-gs-font 10 10 SF
0 setgray
491 256 M
( *\)addr\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
551 256 M
("Ir) s
5 245 M
(") s
/F-gs-font 10 10 SF
0 setgray
11 245 M
( \(nr\)\);) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 234 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 234 M
( oldbit != 0;) s
5 223 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 201 M
(/* *) s
5 190 M
( * test_and_set_bit - Atomically set a bit and return its old value) s
5 179 M
( * @nr:     the bit to set) s
5 168 M
( * @addr:   the address to count from) s
5 157 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( inline bool) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 135 M
(test_and_set_bit) s
/F-gs-font 10 10 SF
0 setgray
101 135 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
125 135 M
( nr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 135 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
203 135 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
209 135 M
(void) s
/F-gs-font 10 10 SF
0 setgray
233 135 M
( *addr\) {) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( oldbit;) s
5 113 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 113 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 113 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 113 M
("btsl %2, %1; sbbl %0, %0") s
/F-gs-font 10 10 SF
0 setgray
269 113 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
287 113 M
("=r") s
/F-gs-font 10 10 SF
0 setgray
311 113 M
( \(oldbit\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
377 113 M
("=m") s
/F-gs-font 10 10 SF
0 setgray
401 113 M
( \(*\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
425 113 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
473 113 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
479 113 M
(long) s
/F-gs-font 10 10 SF
0 setgray
503 113 M
( *\)addr\) : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
569 113 M
() s
5 102 M
("Ir") s
/F-gs-font 10 10 SF
0 setgray
29 102 M
( \(nr\) : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 102 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
125 102 M
(\);) s
5 91 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 91 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 91 M
( oldbit != 0;) s
5 80 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 58 M
(/* *) s
5 47 M
( * test_and_clear_bit - Atomically clear a bit and return its old value) s
5 36 M
( * @nr:     the bit to clear) s
5 25 M
( * @addr:   the address to count from) s
5 14 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 3 M
( inline bool) s
_R
S
%%Page: (64) 64
%%BeginPageSetup
_S
18 36 translate
/pagenum 64 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 707 M
(test_and_clear_bit) s
/F-gs-font 10 10 SF
0 setgray
113 707 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 707 M
(int) s
/F-gs-font 10 10 SF
0 setgray
137 707 M
( nr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 707 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
215 707 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
221 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
245 707 M
( *addr\) {) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 696 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 696 M
( oldbit;) s
5 685 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 685 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 685 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 685 M
("btrl %2, %1; sbbl %0, %0") s
/F-gs-font 10 10 SF
0 setgray
269 685 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
287 685 M
("=r") s
/F-gs-font 10 10 SF
0 setgray
311 685 M
( \(oldbit\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
377 685 M
("=m") s
/F-gs-font 10 10 SF
0 setgray
401 685 M
( \(*\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
425 685 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
473 685 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
479 685 M
(long) s
/F-gs-font 10 10 SF
0 setgray
503 685 M
( *\)addr\) : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
569 685 M
() s
5 674 M
("Ir") s
/F-gs-font 10 10 SF
0 setgray
29 674 M
( \(nr\) : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 674 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
125 674 M
(\);) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 663 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 663 M
( oldbit != 0;) s
5 652 M
(}) s
5 641 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 641 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 641 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 641 M
(/* !__LIBS_ATOMIC_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
([ucore/lab8_result/libs/skew_heap.h] ++++++++++++++++++++++++++++++) s
5 608 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 608 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 608 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 608 M
(__LIBS_SKEW_HEAP_H__) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 597 M
(__LIBS_SKEW_HEAP_H__) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( skew_heap_entry {) s
5 564 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 564 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
71 564 M
( skew_heap_entry *parent, *left, *right;) s
5 553 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 531 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 531 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 531 M
( skew_heap_entry skew_heap_entry_t;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 509 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 509 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 509 M
(\(*compare_f\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 509 M
(void) s
/F-gs-font 10 10 SF
0 setgray
173 509 M
( *a, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 509 M
(void) s
/F-gs-font 10 10 SF
0 setgray
227 509 M
( *b\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 487 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 487 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 487 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 487 M
(skew_heap_init) s
/F-gs-font 10 10 SF
0 setgray
203 487 M
(\(skew_heap_entry_t *a\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 476 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 476 M
( inline skew_heap_entry_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
203 476 M
(skew_heap_merge) s
/F-gs-font 10 10 SF
0 setgray
293 476 M
(\() s
5 465 M
(     skew_heap_entry_t *a, skew_heap_entry_t *b,) s
5 454 M
(     compare_f comp\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
( inline skew_heap_entry_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
203 443 M
(skew_heap_insert) s
/F-gs-font 10 10 SF
0 setgray
299 443 M
(\() s
5 432 M
(     skew_heap_entry_t *a, skew_heap_entry_t *b,) s
5 421 M
(     compare_f comp\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 410 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 410 M
( inline skew_heap_entry_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
203 410 M
(skew_heap_remove) s
/F-gs-font 10 10 SF
0 setgray
299 410 M
(\() s
5 399 M
(     skew_heap_entry_t *a, skew_heap_entry_t *b,) s
5 388 M
(     compare_f comp\) __attribute__\(\(always_inline\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 366 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 366 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 366 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 355 M
(skew_heap_init) s
/F-gs-font 10 10 SF
0 setgray
89 355 M
(\(skew_heap_entry_t *a\)) s
5 344 M
({) s
5 333 M
(     a->left = a->right = a->parent = NULL;) s
5 322 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 300 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 300 M
( inline skew_heap_entry_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 289 M
(skew_heap_merge) s
/F-gs-font 10 10 SF
0 setgray
95 289 M
(\(skew_heap_entry_t *a, skew_heap_entry_t *b,) s
5 278 M
(                compare_f comp\)) s
5 267 M
({) s
5 256 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 256 M
(if) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( \(a == NULL\) ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 256 M
(return) s
/F-gs-font 10 10 SF
0 setgray
161 256 M
( b;) s
5 245 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 245 M
(else) s
/F-gs-font 10 10 SF
0 setgray
59 245 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 245 M
(if) s
/F-gs-font 10 10 SF
0 setgray
77 245 M
( \(b == NULL\) ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
155 245 M
(return) s
/F-gs-font 10 10 SF
0 setgray
191 245 M
( a;) s
5 234 M
(     ) s
5 223 M
(     skew_heap_entry_t *l, *r;) s
5 212 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 212 M
(if) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( \(comp\(a, b\) == -1\)) s
5 201 M
(     {) s
5 190 M
(          r = a->left;) s
5 179 M
(          l = skew_heap_merge\(a->right, b, comp\);) s
5 168 M
(          ) s
5 157 M
(          a->left = l;) s
5 146 M
(          a->right = r;) s
5 135 M
(          ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 135 M
(if) s
/F-gs-font 10 10 SF
0 setgray
77 135 M
( \(l\) l->parent = a;) s
5 113 M
(          ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 113 M
(return) s
/F-gs-font 10 10 SF
0 setgray
101 113 M
( a;) s
5 102 M
(     }) s
5 91 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 91 M
(else) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(     {) s
5 69 M
(          r = b->left;) s
5 58 M
(          l = skew_heap_merge\(a, b->right, comp\);) s
5 47 M
(          ) s
5 36 M
(          b->left = l;) s
5 25 M
(          b->right = r;) s
5 14 M
(          ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 14 M
(if) s
/F-gs-font 10 10 SF
0 setgray
77 14 M
( \(l\) l->parent = b;) s
_R
S
%%Page: (65) 65
%%BeginPageSetup
_S
18 36 translate
/pagenum 65 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(          ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 707 M
(return) s
/F-gs-font 10 10 SF
0 setgray
101 707 M
( b;) s
5 696 M
(     }) s
5 685 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 663 M
( inline skew_heap_entry_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 652 M
(skew_heap_insert) s
/F-gs-font 10 10 SF
0 setgray
101 652 M
(\(skew_heap_entry_t *a, skew_heap_entry_t *b,) s
5 641 M
(                 compare_f comp\)) s
5 630 M
({) s
5 619 M
(     skew_heap_init\(b\);) s
5 608 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 608 M
(return) s
/F-gs-font 10 10 SF
0 setgray
71 608 M
( skew_heap_merge\(a, b, comp\);) s
5 597 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( inline skew_heap_entry_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 564 M
(skew_heap_remove) s
/F-gs-font 10 10 SF
0 setgray
101 564 M
(\(skew_heap_entry_t *a, skew_heap_entry_t *b,) s
5 553 M
(                 compare_f comp\)) s
5 542 M
({) s
5 531 M
(     skew_heap_entry_t *p   = b->parent;) s
5 520 M
(     skew_heap_entry_t *rep = skew_heap_merge\(b->left, b->right, comp\);) s
5 509 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 509 M
(if) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( \(rep\) rep->parent = p;) s
5 498 M
(     ) s
5 487 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 487 M
(if) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( \(p\)) s
5 476 M
(     {) s
5 465 M
(          ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 465 M
(if) s
/F-gs-font 10 10 SF
0 setgray
77 465 M
( \(p->left == b\)) s
5 454 M
(               p->left = rep;) s
5 443 M
(          ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 443 M
(else) s
/F-gs-font 10 10 SF
0 setgray
89 443 M
( p->right = rep;) s
5 432 M
(          ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 432 M
(return) s
/F-gs-font 10 10 SF
0 setgray
101 432 M
( a;) s
5 421 M
(     }) s
5 410 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 410 M
(else) s
/F-gs-font 10 10 SF
0 setgray
59 410 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 410 M
(return) s
/F-gs-font 10 10 SF
0 setgray
101 410 M
( rep;) s
5 399 M
(}) s
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
65 377 M
(/* !__LIBS_SKEW_HEAP_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
([ucore/lab8_result/kern/driver/clock.c] ++++++++++++++++++++++++++++++) s
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 355 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 355 M
(<x86.h>) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 344 M
(<trap.h>) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 333 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 322 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 322 M
(<picirq.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 300 M
(/* *) s
5 289 M
( * Support for time-related hardware gadgets - the 8253 timer,) s
5 278 M
( * which generates interruptes on IRQ-0.) s
5 267 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 245 M
(IO_TIMER1) s
/F-gs-font 10 10 SF
0 setgray
107 245 M
(           0x040               // 8253 Timer #1) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 223 M
(/* *) s
5 212 M
( * Frequency of all three count-down timers; \(TIMER_FREQ/freq\)) s
5 201 M
( * is the appropriate count to generate a frequency of freq Hz.) s
5 190 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 168 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 168 M
(TIMER_FREQ) s
/F-gs-font 10 10 SF
0 setgray
113 168 M
(      1193182) s
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 157 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 157 M
(TIMER_DIV) s
/F-gs-font 10 10 SF
0 setgray
107 157 M
(\(x\)    \(\(TIMER_FREQ + \(x\) / 2\) / \(x\)\)) s
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 135 M
(TIMER_MODE) s
/F-gs-font 10 10 SF
0 setgray
113 135 M
(      \(IO_TIMER1 + 3\)         // timer mode port) s
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 124 M
(TIMER_SEL0) s
/F-gs-font 10 10 SF
0 setgray
113 124 M
(      0x00                    // select counter 0) s
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 113 M
(TIMER_RATEGEN) s
/F-gs-font 10 10 SF
0 setgray
131 113 M
(   0x04                    // mode 2, rate generator) s
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 102 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 102 M
(TIMER_16BIT) s
/F-gs-font 10 10 SF
0 setgray
119 102 M
(     0x30                    // r/w counter 16 bits, LSB first) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 80 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
53 80 M
( size_t ticks;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 58 M
(long) s
/F-gs-font 10 10 SF
0 setgray
29 58 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 58 M
(SYSTEM_READ_TIMER) s
/F-gs-font 10 10 SF
0 setgray
137 58 M
(\( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 58 M
(void) s
/F-gs-font 10 10 SF
0 setgray
173 58 M
( \){) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 47 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
( ticks;) s
5 36 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 14 M
(/* *) s
5 3 M
( * clock_init - initialize 8253 clock to interrupt 100 times per second,) s
_R
S
%%Page: (66) 66
%%BeginPageSetup
_S
18 36 translate
/pagenum 66 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
( * and then enable IRQ_TIMER.) s
5 696 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 685 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 674 M
(clock_init) s
/F-gs-font 10 10 SF
0 setgray
65 674 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 674 M
(void) s
/F-gs-font 10 10 SF
0 setgray
95 674 M
(\) {) s
5 663 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 663 M
(// set 8253 timer-chip) s
/F-gs-font 10 10 SF
0 setgray
5 652 M
(    outb\(TIMER_MODE, TIMER_SEL0 | TIMER_RATEGEN | TIMER_16BIT\);) s
5 641 M
(    outb\(IO_TIMER1, TIMER_DIV\(100\) % 256\);) s
5 630 M
(    outb\(IO_TIMER1, TIMER_DIV\(100\) / 256\);) s
5 608 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 608 M
(// initialize time counter 'ticks' to zero) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(    ticks = 0;) s
5 575 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 575 M
("++ setup timer interrupts\\n") s
/F-gs-font 10 10 SF
0 setgray
251 575 M
(\);) s
5 564 M
(    pic_enable\(IRQ_TIMER\);) s
5 553 M
(}) s
5 531 M
([ucore/lab8_result/kern/driver/console.h] ++++++++++++++++++++++++++++++) s
5 520 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 520 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 520 M
(__KERN_DRIVER_CONSOLE_H__) s
/F-gs-font 10 10 SF
0 setgray
5 509 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 509 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 509 M
(__KERN_DRIVER_CONSOLE_H__) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 487 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 487 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 487 M
(cons_init) s
/F-gs-font 10 10 SF
0 setgray
89 487 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 487 M
(void) s
/F-gs-font 10 10 SF
0 setgray
119 487 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 476 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 476 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 476 M
(cons_putc) s
/F-gs-font 10 10 SF
0 setgray
89 476 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 476 M
(int) s
/F-gs-font 10 10 SF
0 setgray
113 476 M
( c\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 465 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 465 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 465 M
(cons_getc) s
/F-gs-font 10 10 SF
0 setgray
83 465 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 465 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 465 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 454 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 454 M
(serial_intr) s
/F-gs-font 10 10 SF
0 setgray
101 454 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 454 M
(void) s
/F-gs-font 10 10 SF
0 setgray
131 454 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 443 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 443 M
(kbd_intr) s
/F-gs-font 10 10 SF
0 setgray
83 443 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 443 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 443 M
(\);) s
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 421 M
(/* !__KERN_DRIVER_CONSOLE_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 399 M
([ucore/lab8_result/kern/driver/ide.c] ++++++++++++++++++++++++++++++) s
5 388 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 388 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 388 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 388 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 377 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 377 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 366 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 366 M
(<trap.h>) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 355 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 355 M
(<picirq.h>) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 344 M
(<fs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 333 M
(<ide.h>) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 322 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 322 M
(<x86.h>) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 311 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 311 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 311 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 289 M
(ISA_DATA) s
/F-gs-font 10 10 SF
0 setgray
101 289 M
(                0x00) s
5 278 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 278 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 278 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 278 M
(ISA_ERROR) s
/F-gs-font 10 10 SF
0 setgray
107 278 M
(               0x01) s
5 267 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 267 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 267 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 267 M
(ISA_PRECOMP) s
/F-gs-font 10 10 SF
0 setgray
119 267 M
(             0x01) s
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 256 M
(ISA_CTRL) s
/F-gs-font 10 10 SF
0 setgray
101 256 M
(                0x02) s
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 245 M
(ISA_SECCNT) s
/F-gs-font 10 10 SF
0 setgray
113 245 M
(              0x02) s
5 234 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 234 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 234 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 234 M
(ISA_SECTOR) s
/F-gs-font 10 10 SF
0 setgray
113 234 M
(              0x03) s
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 223 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 223 M
(ISA_CYL_LO) s
/F-gs-font 10 10 SF
0 setgray
113 223 M
(              0x04) s
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 212 M
(ISA_CYL_HI) s
/F-gs-font 10 10 SF
0 setgray
113 212 M
(              0x05) s
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 201 M
(ISA_SDH) s
/F-gs-font 10 10 SF
0 setgray
95 201 M
(                 0x06) s
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 190 M
(ISA_COMMAND) s
/F-gs-font 10 10 SF
0 setgray
119 190 M
(             0x07) s
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 179 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 179 M
(ISA_STATUS) s
/F-gs-font 10 10 SF
0 setgray
113 179 M
(              0x07) s
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 157 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 157 M
(IDE_BSY) s
/F-gs-font 10 10 SF
0 setgray
95 157 M
(                 0x80) s
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 146 M
(IDE_DRDY) s
/F-gs-font 10 10 SF
0 setgray
101 146 M
(                0x40) s
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 135 M
(IDE_DF) s
/F-gs-font 10 10 SF
0 setgray
89 135 M
(                  0x20) s
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 124 M
(IDE_DRQ) s
/F-gs-font 10 10 SF
0 setgray
95 124 M
(                 0x08) s
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 113 M
(IDE_ERR) s
/F-gs-font 10 10 SF
0 setgray
95 113 M
(                 0x01) s
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 91 M
(IDE_CMD_READ) s
/F-gs-font 10 10 SF
0 setgray
125 91 M
(            0x20) s
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 80 M
(IDE_CMD_WRITE) s
/F-gs-font 10 10 SF
0 setgray
131 80 M
(           0x30) s
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 69 M
(IDE_CMD_IDENTIFY) s
/F-gs-font 10 10 SF
0 setgray
149 69 M
(        0xEC) s
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 47 M
(IDE_IDENT_SECTORS) s
/F-gs-font 10 10 SF
0 setgray
155 47 M
(       20) s
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 36 M
(IDE_IDENT_MODEL) s
/F-gs-font 10 10 SF
0 setgray
143 36 M
(         54) s
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 25 M
(IDE_IDENT_CAPABILITIES) s
/F-gs-font 10 10 SF
0 setgray
185 25 M
(  98) s
5 14 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 14 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 14 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 14 M
(IDE_IDENT_CMDSETS) s
/F-gs-font 10 10 SF
0 setgray
155 14 M
(       164) s
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 3 M
(IDE_IDENT_MAX_LBA) s
/F-gs-font 10 10 SF
0 setgray
155 3 M
(       120) s
_R
S
%%Page: (67) 67
%%BeginPageSetup
_S
18 36 translate
/pagenum 67 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 707 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 707 M
(IDE_IDENT_MAX_LBA_EXT) s
/F-gs-font 10 10 SF
0 setgray
179 707 M
(   200) s
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 685 M
(IO_BASE0) s
/F-gs-font 10 10 SF
0 setgray
101 685 M
(                0x1F0) s
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 674 M
(IO_BASE1) s
/F-gs-font 10 10 SF
0 setgray
101 674 M
(                0x170) s
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 663 M
(IO_CTRL0) s
/F-gs-font 10 10 SF
0 setgray
101 663 M
(                0x3F4) s
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 652 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 652 M
(IO_CTRL1) s
/F-gs-font 10 10 SF
0 setgray
101 652 M
(                0x374) s
5 630 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 630 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 630 M
(MAX_IDE) s
/F-gs-font 10 10 SF
0 setgray
95 630 M
(                 4) s
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 619 M
(MAX_NSECS) s
/F-gs-font 10 10 SF
0 setgray
107 619 M
(               128) s
5 608 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 608 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 608 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 608 M
(MAX_DISK_NSECS) s
/F-gs-font 10 10 SF
0 setgray
137 608 M
(          0x10000000U) s
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 597 M
(VALID_IDE) s
/F-gs-font 10 10 SF
0 setgray
107 597 M
(\(ideno\)        \(\(\(ideno\) >= 0\) && \(\(ideno\) < MAX_IDE\) && \(ide_devices[ideno].) s
5 586 M
(valid\)\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 564 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 564 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 564 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 564 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 564 M
( {) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 553 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 553 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 553 M
(short) s
/F-gs-font 10 10 SF
0 setgray
113 553 M
( base;        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 553 M
(// I/O Base) s
/F-gs-font 10 10 SF
0 setgray
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 542 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 542 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 542 M
(short) s
/F-gs-font 10 10 SF
0 setgray
113 542 M
( ctrl;        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 542 M
(// Control Base) s
/F-gs-font 10 10 SF
0 setgray
5 531 M
(} channels[2] = {) s
5 520 M
(    {IO_BASE0, IO_CTRL0},) s
5 509 M
(    {IO_BASE1, IO_CTRL1},) s
5 498 M
(};) s
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 476 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 476 M
(IO_BASE) s
/F-gs-font 10 10 SF
0 setgray
95 476 M
(\(ideno\)          \(channels[\(ideno\) >> 1].base\)) s
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 465 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 465 M
(IO_CTRL) s
/F-gs-font 10 10 SF
0 setgray
95 465 M
(\(ideno\)          \(channels[\(ideno\) >> 1].ctrl\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 443 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 443 M
( ide_device {) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 432 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 432 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 432 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 432 M
( valid;        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 432 M
(// 0 or 1 \(If Device Really Exists\)) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 421 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 421 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 421 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 421 M
( sets;          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 421 M
(// Commend Sets Supported) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 410 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 410 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 410 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 410 M
( size;          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 410 M
(// Size in Sectors) s
/F-gs-font 10 10 SF
0 setgray
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 399 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 399 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 399 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 399 M
( model[41];    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 399 M
(// Model in String) s
/F-gs-font 10 10 SF
0 setgray
5 388 M
(} ide_devices[MAX_IDE];) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 366 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 366 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 366 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 355 M
(ide_wait_ready) s
/F-gs-font 10 10 SF
0 setgray
89 355 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 355 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
143 355 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 355 M
(short) s
/F-gs-font 10 10 SF
0 setgray
179 355 M
( iobase, bool check_error\) {) s
5 344 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 344 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 344 M
( r;) s
5 333 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 333 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 333 M
( \(\(r = inb\(iobase + ISA_STATUS\)\) & IDE_BSY\)) s
5 322 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 322 M
(/* nothing */) s
/F-gs-font 10 10 SF
0 setgray
131 322 M
(;) s
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 311 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 311 M
( \(check_error && \(r & \(IDE_DF | IDE_ERR\)\) != 0\) {) s
5 300 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 300 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 300 M
( -1;) s
5 289 M
(    }) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 278 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 278 M
( 0;) s
5 267 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 245 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 234 M
(ide_init) s
/F-gs-font 10 10 SF
0 setgray
53 234 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 234 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 234 M
(\) {) s
5 223 M
(    static_assert\(\(SECTSIZE % 4\) == 0\);) s
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 212 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 212 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 212 M
(short) s
/F-gs-font 10 10 SF
0 setgray
113 212 M
( ideno, iobase;) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 201 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( \(ideno = 0; ideno < MAX_IDE; ideno ++\) {) s
5 190 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 190 M
(/* assume that no device here */) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(        ide_devices[ideno].valid = 0;) s
5 157 M
(        iobase = IO_BASE\(ideno\);) s
5 135 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 135 M
(/* wait device ready */) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(        ide_wait_ready\(iobase, 0\);) s
5 102 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 102 M
(/* step1: select drive */) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(        outb\(iobase + ISA_SDH, 0xE0 | \(\(ideno & 1\) << 4\)\);) s
5 80 M
(        ide_wait_ready\(iobase, 0\);) s
5 58 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 58 M
(/* step2: send ATA identify command */) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(        outb\(iobase + ISA_COMMAND, IDE_CMD_IDENTIFY\);) s
5 36 M
(        ide_wait_ready\(iobase, 0\);) s
5 14 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 14 M
(/* step3: polling */) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 3 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 3 M
( \(inb\(iobase + ISA_STATUS\) == 0 || ide_wait_ready\(iobase, 1\) != 0\) {) s
_R
S
%%Page: (68) 68
%%BeginPageSetup
_S
18 36 translate
/pagenum 68 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 707 M
(continue) s
/F-gs-font 10 10 SF
0 setgray
125 707 M
( ;) s
5 696 M
(        }) s
5 674 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 674 M
(/* device is ok */) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(        ide_devices[ideno].valid = 1;) s
5 641 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 641 M
(/* read identification space of the device */) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 630 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
101 630 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 630 M
(int) s
/F-gs-font 10 10 SF
0 setgray
125 630 M
( buffer[128];) s
5 619 M
(        insl\(iobase + ISA_DATA, buffer, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
245 619 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
281 619 M
(\(buffer\) / ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
347 619 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
383 619 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
389 619 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
437 619 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
443 619 M
(int) s
/F-gs-font 10 10 SF
0 setgray
461 619 M
(\)\);) s
5 597 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 597 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
101 597 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 597 M
(char) s
/F-gs-font 10 10 SF
0 setgray
131 597 M
( *ident = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 597 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
245 597 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 597 M
(char) s
/F-gs-font 10 10 SF
0 setgray
275 597 M
( *\)buffer;) s
5 586 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 586 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
101 586 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 586 M
(int) s
/F-gs-font 10 10 SF
0 setgray
125 586 M
( sectors;) s
5 575 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 575 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
101 575 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 575 M
(int) s
/F-gs-font 10 10 SF
0 setgray
125 575 M
( cmdsets = *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 575 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
251 575 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 575 M
(int) s
/F-gs-font 10 10 SF
0 setgray
275 575 M
( *\)\(ident + IDE_IDENT_CMDSETS\);) s
5 564 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 564 M
(/* device use 48-bits or 28-bits addressing */) s
/F-gs-font 10 10 SF
0 setgray
5 553 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 553 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 553 M
( \(cmdsets & \(1 << 26\)\) {) s
5 542 M
(            sectors = *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 542 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
197 542 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 542 M
(int) s
/F-gs-font 10 10 SF
0 setgray
221 542 M
( *\)\(ident + IDE_IDENT_MAX_LBA_EXT\);) s
5 531 M
(        }) s
5 520 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 520 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 520 M
( {) s
5 509 M
(            sectors = *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 509 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
197 509 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 509 M
(int) s
/F-gs-font 10 10 SF
0 setgray
221 509 M
( *\)\(ident + IDE_IDENT_MAX_LBA\);) s
5 498 M
(        }) s
5 487 M
(        ide_devices[ideno].sets = cmdsets;) s
5 476 M
(        ide_devices[ideno].size = sectors;) s
5 454 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 454 M
(/* check if supports LBA */) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(        assert\(\(*\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 443 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
161 443 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 443 M
(short) s
/F-gs-font 10 10 SF
0 setgray
197 443 M
( *\)\(ident + IDE_IDENT_CAPABILITIES\) & 0x200\) != 0\);) s
5 421 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 421 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
101 421 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 421 M
(char) s
/F-gs-font 10 10 SF
0 setgray
131 421 M
( *model = ide_devices[ideno].model, *data = ident + IDE_IDENT_MODEL;) s
5 410 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 410 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
101 410 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 410 M
(int) s
/F-gs-font 10 10 SF
0 setgray
125 410 M
( i, length = 40;) s
5 399 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 399 M
(for) s
/F-gs-font 10 10 SF
0 setgray
71 399 M
( \(i = 0; i < length; i += 2\) {) s
5 388 M
(            model[i] = data[i + 1], model[i + 1] = data[i];) s
5 377 M
(        }) s
5 366 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 366 M
(do) s
/F-gs-font 10 10 SF
0 setgray
65 366 M
( {) s
5 355 M
(            model[i] = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 355 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
167 355 M
(;) s
5 344 M
(        } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 344 M
(while) s
/F-gs-font 10 10 SF
0 setgray
95 344 M
( \(i -- > 0 && model[i] == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
251 344 M
(' ') s
/F-gs-font 10 10 SF
0 setgray
269 344 M
(\);) s
5 322 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 322 M
("ide %d: %10u\(sectors\), '%s'.\\n") s
/F-gs-font 10 10 SF
0 setgray
293 322 M
(, ideno, ide_devices[ideno].size, ide_devices[) s
5 311 M
(ideno].model\);) s
5 300 M
(    }) s
5 278 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 278 M
(// enable ide interrupt) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(    pic_enable\(IRQ_IDE1\);) s
5 256 M
(    pic_enable\(IRQ_IDE2\);) s
5 245 M
(}) s
5 223 M
(bool) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 212 M
(ide_device_valid) s
/F-gs-font 10 10 SF
0 setgray
101 212 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 212 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
155 212 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
161 212 M
(short) s
/F-gs-font 10 10 SF
0 setgray
191 212 M
( ideno\) {) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 201 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 201 M
( VALID_IDE\(ideno\);) s
5 190 M
(}) s
5 168 M
(size_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 157 M
(ide_device_size) s
/F-gs-font 10 10 SF
0 setgray
95 157 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 157 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
149 157 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 157 M
(short) s
/F-gs-font 10 10 SF
0 setgray
185 157 M
( ideno\) {) s
5 146 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 146 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( \(ide_device_valid\(ideno\)\) {) s
5 135 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 135 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 135 M
( ide_devices[ideno].size;) s
5 124 M
(    }) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 113 M
( 0;) s
5 102 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 69 M
(ide_read_secs) s
/F-gs-font 10 10 SF
0 setgray
83 69 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 69 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
137 69 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 69 M
(short) s
/F-gs-font 10 10 SF
0 setgray
173 69 M
( ideno, uint32_t secno, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
317 69 M
(void) s
/F-gs-font 10 10 SF
0 setgray
341 69 M
( *dst, size_t nsecs\) {) s
5 58 M
(    assert\(nsecs <= MAX_NSECS && VALID_IDE\(ideno\)\);) s
5 47 M
(    assert\(secno < MAX_DISK_NSECS && secno + nsecs <= MAX_DISK_NSECS\);) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 36 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 36 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 36 M
(short) s
/F-gs-font 10 10 SF
0 setgray
113 36 M
( iobase = IO_BASE\(ideno\), ioctrl = IO_CTRL\(ideno\);) s
5 14 M
(    ide_wait_ready\(iobase, 0\);) s
_R
S
%%Page: (69) 69
%%BeginPageSetup
_S
18 36 translate
/pagenum 69 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 707 M
(// generate interrupt) s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(    outb\(ioctrl + ISA_CTRL, 0\);) s
5 685 M
(    outb\(iobase + ISA_SECCNT, nsecs\);) s
5 674 M
(    outb\(iobase + ISA_SECTOR, secno & 0xFF\);) s
5 663 M
(    outb\(iobase + ISA_CYL_LO, \(secno >> 8\) & 0xFF\);) s
5 652 M
(    outb\(iobase + ISA_CYL_HI, \(secno >> 16\) & 0xFF\);) s
5 641 M
(    outb\(iobase + ISA_SDH, 0xE0 | \(\(ideno & 1\) << 4\) | \(\(secno >> 24\) & 0xF\)\);) s
5 630 M
(    outb\(iobase + ISA_COMMAND, IDE_CMD_READ\);) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 608 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 608 M
( ret = 0;) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 597 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( \(; nsecs > 0; nsecs --, dst += SECTSIZE\) {) s
5 586 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 586 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 586 M
( \(\(ret = ide_wait_ready\(iobase, 1\)\) != 0\) {) s
5 575 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 575 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 575 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 575 M
(out) s
/F-gs-font 10 10 SF
0 setgray
125 575 M
(;) s
5 564 M
(        }) s
5 553 M
(        insl\(iobase, dst, SECTSIZE / ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
227 553 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
263 553 M
(\(uint32_t\)\);) s
5 542 M
(    }) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 520 M
(out) s
/F-gs-font 10 10 SF
0 setgray
23 520 M
(:) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 509 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
( ret;) s
5 498 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 476 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 465 M
(ide_write_secs) s
/F-gs-font 10 10 SF
0 setgray
89 465 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 465 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
143 465 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 465 M
(short) s
/F-gs-font 10 10 SF
0 setgray
179 465 M
( ideno, uint32_t secno, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
323 465 M
(const) s
/F-gs-font 10 10 SF
0 setgray
353 465 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
359 465 M
(void) s
/F-gs-font 10 10 SF
0 setgray
383 465 M
( *src, size_t nsecs\) {) s
5 454 M
(    assert\(nsecs <= MAX_NSECS && VALID_IDE\(ideno\)\);) s
5 443 M
(    assert\(secno < MAX_DISK_NSECS && secno + nsecs <= MAX_DISK_NSECS\);) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 432 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 432 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 432 M
(short) s
/F-gs-font 10 10 SF
0 setgray
113 432 M
( iobase = IO_BASE\(ideno\), ioctrl = IO_CTRL\(ideno\);) s
5 410 M
(    ide_wait_ready\(iobase, 0\);) s
5 388 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 388 M
(// generate interrupt) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(    outb\(ioctrl + ISA_CTRL, 0\);) s
5 366 M
(    outb\(iobase + ISA_SECCNT, nsecs\);) s
5 355 M
(    outb\(iobase + ISA_SECTOR, secno & 0xFF\);) s
5 344 M
(    outb\(iobase + ISA_CYL_LO, \(secno >> 8\) & 0xFF\);) s
5 333 M
(    outb\(iobase + ISA_CYL_HI, \(secno >> 16\) & 0xFF\);) s
5 322 M
(    outb\(iobase + ISA_SDH, 0xE0 | \(\(ideno & 1\) << 4\) | \(\(secno >> 24\) & 0xF\)\);) s
5 311 M
(    outb\(iobase + ISA_COMMAND, IDE_CMD_WRITE\);) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 289 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( ret = 0;) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 278 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 278 M
( \(; nsecs > 0; nsecs --, src += SECTSIZE\) {) s
5 267 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 267 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 267 M
( \(\(ret = ide_wait_ready\(iobase, 1\)\) != 0\) {) s
5 256 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 256 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 256 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 256 M
(out) s
/F-gs-font 10 10 SF
0 setgray
125 256 M
(;) s
5 245 M
(        }) s
5 234 M
(        outsl\(iobase, src, SECTSIZE / ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
233 234 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
269 234 M
(\(uint32_t\)\);) s
5 223 M
(    }) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 201 M
(out) s
/F-gs-font 10 10 SF
0 setgray
23 201 M
(:) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 190 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 190 M
( ret;) s
5 179 M
(}) s
5 157 M
([ucore/lab8_result/kern/driver/picirq.c] ++++++++++++++++++++++++++++++) s
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 146 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 146 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 135 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 135 M
(<x86.h>) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 124 M
(<picirq.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 102 M
(// I/O Addresses of the two programmable interrupt controllers) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 91 M
(IO_PIC1) s
/F-gs-font 10 10 SF
0 setgray
95 91 M
(             0x20    // Master \(IRQs 0-7\)) s
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 80 M
(IO_PIC2) s
/F-gs-font 10 10 SF
0 setgray
95 80 M
(             0xA0    // Slave \(IRQs 8-15\)) s
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 58 M
(IRQ_SLAVE) s
/F-gs-font 10 10 SF
0 setgray
107 58 M
(           2       // IRQ at which slave connects to master) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 36 M
(// Current IRQ mask.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 25 M
(// Initial IRQ mask has interrupt 2 enabled \(for slave 8259A\).) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( uint16_t irq_mask = 0xFFFF & ~\(1 << IRQ_SLAVE\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 3 M
( bool did_init = 0;) s
_R
S
%%Page: (70) 70
%%BeginPageSetup
_S
18 36 translate
/pagenum 70 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 696 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 696 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 696 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 685 M
(pic_setmask) s
/F-gs-font 10 10 SF
0 setgray
71 685 M
(\(uint16_t mask\) {) s
5 674 M
(    irq_mask = mask;) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 663 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 663 M
( \(did_init\) {) s
5 652 M
(        outb\(IO_PIC1 + 1, mask\);) s
5 641 M
(        outb\(IO_PIC2 + 1, mask >> 8\);) s
5 630 M
(    }) s
5 619 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 597 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 586 M
(pic_enable) s
/F-gs-font 10 10 SF
0 setgray
65 586 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 586 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
119 586 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 586 M
(int) s
/F-gs-font 10 10 SF
0 setgray
143 586 M
( irq\) {) s
5 575 M
(    pic_setmask\(irq_mask & ~\(1 << irq\)\);) s
5 564 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 542 M
(/* pic_init - initialize the 8259A interrupt controllers */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 531 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 520 M
(pic_init) s
/F-gs-font 10 10 SF
0 setgray
53 520 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 520 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 520 M
(\) {) s
5 509 M
(    did_init = 1;) s
5 487 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 487 M
(// mask all interrupts) s
/F-gs-font 10 10 SF
0 setgray
5 476 M
(    outb\(IO_PIC1 + 1, 0xFF\);) s
5 465 M
(    outb\(IO_PIC2 + 1, 0xFF\);) s
5 443 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 443 M
(// Set up master \(8259A-1\)) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 421 M
(// ICW1:  0001g0hi) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 410 M
(//    g:  0 = edge triggering, 1 = level triggering) s
/F-gs-font 10 10 SF
0 setgray
5 399 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 399 M
(//    h:  0 = cascaded PICs, 1 = master only) s
/F-gs-font 10 10 SF
0 setgray
5 388 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 388 M
(//    i:  0 = no ICW4, 1 = ICW4 required) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(    outb\(IO_PIC1, 0x11\);) s
5 355 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 355 M
(// ICW2:  Vector offset) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(    outb\(IO_PIC1 + 1, IRQ_OFFSET\);) s
5 322 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 322 M
(// ICW3:  \(master PIC\) bit mask of IR lines connected to slaves) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 311 M
(//        \(slave PIC\) 3-bit # of slave's connection to master) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(    outb\(IO_PIC1 + 1, 1 << IRQ_SLAVE\);) s
5 278 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 278 M
(// ICW4:  000nbmap) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 267 M
(//    n:  1 = special fully nested mode) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 256 M
(//    b:  1 = buffered mode) s
/F-gs-font 10 10 SF
0 setgray
5 245 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 245 M
(//    m:  0 = slave PIC, 1 = master PIC) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 234 M
(//        \(ignored when b is 0, as the master/slave role) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 223 M
(//         can be hardwired\).) s
/F-gs-font 10 10 SF
0 setgray
5 212 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 212 M
(//    a:  1 = Automatic EOI mode) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 201 M
(//    p:  0 = MCS-80/85 mode, 1 = intel x86 mode) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(    outb\(IO_PIC1 + 1, 0x3\);) s
5 168 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 168 M
(// Set up slave \(8259A-2\)) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(    outb\(IO_PIC2, 0x11\);    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 157 M
(// ICW1) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(    outb\(IO_PIC2 + 1, IRQ_OFFSET + 8\);  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
245 146 M
(// ICW2) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(    outb\(IO_PIC2 + 1, IRQ_SLAVE\);       ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
245 135 M
(// ICW3) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 124 M
(// NB Automatic EOI mode doesn't tend to work on the slave.) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 113 M
(// Linux source code says it's "to be investigated".) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(    outb\(IO_PIC2 + 1, 0x3\);             ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
245 102 M
(// ICW4) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 80 M
(// OCW3:  0ef01prs) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 69 M
(//   ef:  0x = NOP, 10 = clear specific mask, 11 = set specific mask) s
/F-gs-font 10 10 SF
0 setgray
5 58 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 58 M
(//    p:  0 = no polling, 1 = polling mode) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 47 M
(//   rs:  0x = NOP, 10 = read IRR, 11 = read ISR) s
/F-gs-font 10 10 SF
0 setgray
5 36 M
(    outb\(IO_PIC1, 0x68\);    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 36 M
(// clear specific mask) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(    outb\(IO_PIC1, 0x0a\);    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 25 M
(// read IRR by default) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(    outb\(IO_PIC2, 0x68\);    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 3 M
(// OCW3) s
_R
S
%%Page: (71) 71
%%BeginPageSetup
_S
18 36 translate
/pagenum 71 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
/F-gs-font 10 10 SF
0 setgray
5 707 M
(    outb\(IO_PIC2, 0x0a\);    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 707 M
(// OCW3) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 685 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( \(irq_mask != 0xFFFF\) {) s
5 674 M
(        pic_setmask\(irq_mask\);) s
5 663 M
(    }) s
5 652 M
(}) s
5 630 M
([ucore/lab8_result/kern/driver/picirq.h] ++++++++++++++++++++++++++++++) s
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 619 M
(__KERN_DRIVER_PICIRQ_H__) s
/F-gs-font 10 10 SF
0 setgray
5 608 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 608 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 608 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 608 M
(__KERN_DRIVER_PICIRQ_H__) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 586 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 586 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 586 M
(pic_init) s
/F-gs-font 10 10 SF
0 setgray
83 586 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 586 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 586 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 575 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 575 M
(pic_enable) s
/F-gs-font 10 10 SF
0 setgray
95 575 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 575 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
149 575 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 575 M
(int) s
/F-gs-font 10 10 SF
0 setgray
173 575 M
( irq\);) s
5 553 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 553 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 553 M
(IRQ_OFFSET) s
/F-gs-font 10 10 SF
0 setgray
113 553 M
(      32) s
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 531 M
(/* !__KERN_DRIVER_PICIRQ_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 509 M
([ucore/lab8_result/kern/driver/kbdreg.h] ++++++++++++++++++++++++++++++) s
5 498 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 498 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 498 M
(__KERN_DRIVER_KBDREG_H__) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 487 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 487 M
(__KERN_DRIVER_KBDREG_H__) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 465 M
(// Special keycodes) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 454 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 454 M
(KEY_HOME) s
/F-gs-font 10 10 SF
0 setgray
101 454 M
(            0xE0) s
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 443 M
(KEY_END) s
/F-gs-font 10 10 SF
0 setgray
95 443 M
(             0xE1) s
5 432 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 432 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 432 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 432 M
(KEY_UP) s
/F-gs-font 10 10 SF
0 setgray
89 432 M
(              0xE2) s
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 421 M
(KEY_DN) s
/F-gs-font 10 10 SF
0 setgray
89 421 M
(              0xE3) s
5 410 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 410 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 410 M
(KEY_LF) s
/F-gs-font 10 10 SF
0 setgray
89 410 M
(              0xE4) s
5 399 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 399 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 399 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 399 M
(KEY_RT) s
/F-gs-font 10 10 SF
0 setgray
89 399 M
(              0xE5) s
5 388 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 388 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 388 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 388 M
(KEY_PGUP) s
/F-gs-font 10 10 SF
0 setgray
101 388 M
(            0xE6) s
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 377 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 377 M
(KEY_PGDN) s
/F-gs-font 10 10 SF
0 setgray
101 377 M
(            0xE7) s
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 366 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 366 M
(KEY_INS) s
/F-gs-font 10 10 SF
0 setgray
95 366 M
(             0xE8) s
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 355 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 355 M
(KEY_DEL) s
/F-gs-font 10 10 SF
0 setgray
95 355 M
(             0xE9) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 322 M
(/* This is i8042reg.h + kbdreg.h from NetBSD. */) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 300 M
(KBSTATP) s
/F-gs-font 10 10 SF
0 setgray
95 300 M
(             0x64    // kbd controller status port\(I\)) s
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 289 M
(KBS_DIB) s
/F-gs-font 10 10 SF
0 setgray
95 289 M
(             0x01    // kbd data in buffer) s
5 278 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 278 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 278 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 278 M
(KBS_IBF) s
/F-gs-font 10 10 SF
0 setgray
95 278 M
(             0x02    // kbd input buffer low) s
5 267 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 267 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 267 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 267 M
(KBS_WARM) s
/F-gs-font 10 10 SF
0 setgray
101 267 M
(            0x04    // kbd input buffer low) s
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 256 M
(BS_OCMD) s
/F-gs-font 10 10 SF
0 setgray
95 256 M
(             0x08    // kbd output buffer has command) s
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 245 M
(KBS_NOSEC) s
/F-gs-font 10 10 SF
0 setgray
107 245 M
(           0x10    // kbd security lock not engaged) s
5 234 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 234 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 234 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 234 M
(KBS_TERR) s
/F-gs-font 10 10 SF
0 setgray
101 234 M
(            0x20    // kbd transmission error) s
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 223 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 223 M
(KBS_RERR) s
/F-gs-font 10 10 SF
0 setgray
101 223 M
(            0x40    // kbd receive error) s
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 212 M
(KBS_PERR) s
/F-gs-font 10 10 SF
0 setgray
101 212 M
(            0x80    // kbd parity error) s
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 190 M
(KBCMDP) s
/F-gs-font 10 10 SF
0 setgray
89 190 M
(              0x64    // kbd controller port\(O\)) s
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 179 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 179 M
(KBC_RAMREAD) s
/F-gs-font 10 10 SF
0 setgray
119 179 M
(         0x20    // read from RAM) s
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 168 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 168 M
(KBC_RAMWRITE) s
/F-gs-font 10 10 SF
0 setgray
125 168 M
(        0x60    // write to RAM) s
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 157 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 157 M
(KBC_AUXDISABLE) s
/F-gs-font 10 10 SF
0 setgray
137 157 M
(      0xa7    // disable auxiliary port) s
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 146 M
(KBC_AUXENABLE) s
/F-gs-font 10 10 SF
0 setgray
131 146 M
(       0xa8    // enable auxiliary port) s
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 135 M
(KBC_AUXTEST) s
/F-gs-font 10 10 SF
0 setgray
119 135 M
(         0xa9    // test auxiliary port) s
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 124 M
(KBC_KBDECHO) s
/F-gs-font 10 10 SF
0 setgray
119 124 M
(         0xd2    // echo to keyboard port) s
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 113 M
(KBC_AUXECHO) s
/F-gs-font 10 10 SF
0 setgray
119 113 M
(         0xd3    // echo to auxiliary port) s
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 102 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 102 M
(KBC_AUXWRITE) s
/F-gs-font 10 10 SF
0 setgray
125 102 M
(        0xd4    // write to auxiliary port) s
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 91 M
(KBC_SELFTEST) s
/F-gs-font 10 10 SF
0 setgray
125 91 M
(        0xaa    // start self-test) s
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 80 M
(KBC_KBDTEST) s
/F-gs-font 10 10 SF
0 setgray
119 80 M
(         0xab    // test keyboard port) s
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 69 M
(KBC_KBDDISABLE) s
/F-gs-font 10 10 SF
0 setgray
137 69 M
(      0xad    // disable keyboard port) s
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 58 M
(KBC_KBDENABLE) s
/F-gs-font 10 10 SF
0 setgray
131 58 M
(       0xae    // enable keyboard port) s
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 47 M
(KBC_PULSE0) s
/F-gs-font 10 10 SF
0 setgray
113 47 M
(          0xfe    // pulse output bit 0) s
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 36 M
(KBC_PULSE1) s
/F-gs-font 10 10 SF
0 setgray
113 36 M
(          0xfd    // pulse output bit 1) s
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 25 M
(KBC_PULSE2) s
/F-gs-font 10 10 SF
0 setgray
113 25 M
(          0xfb    // pulse output bit 2) s
5 14 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 14 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 14 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 14 M
(KBC_PULSE3) s
/F-gs-font 10 10 SF
0 setgray
113 14 M
(          0xf7    // pulse output bit 3) s
_R
S
%%Page: (72) 72
%%BeginPageSetup
_S
18 36 translate
/pagenum 72 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 707 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 707 M
(KBDATAP) s
/F-gs-font 10 10 SF
0 setgray
95 707 M
(             0x60    // kbd data port\(I\)) s
5 696 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 696 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 696 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 696 M
(KBOUTP) s
/F-gs-font 10 10 SF
0 setgray
89 696 M
(              0x60    // kbd data port\(O\)) s
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 674 M
(K_RDCMDBYTE) s
/F-gs-font 10 10 SF
0 setgray
119 674 M
(         0x20) s
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 663 M
(K_LDCMDBYTE) s
/F-gs-font 10 10 SF
0 setgray
119 663 M
(         0x60) s
5 641 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 641 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 641 M
(KC8_TRANS) s
/F-gs-font 10 10 SF
0 setgray
107 641 M
(           0x40    // convert to old scan codes) s
5 630 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 630 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 630 M
(KC8_MDISABLE) s
/F-gs-font 10 10 SF
0 setgray
125 630 M
(        0x20    // disable mouse) s
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 619 M
(KC8_KDISABLE) s
/F-gs-font 10 10 SF
0 setgray
125 619 M
(        0x10    // disable keyboard) s
5 608 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 608 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 608 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 608 M
(KC8_IGNSEC) s
/F-gs-font 10 10 SF
0 setgray
113 608 M
(          0x08    // ignore security lock) s
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 597 M
(KC8_CPU) s
/F-gs-font 10 10 SF
0 setgray
95 597 M
(             0x04    // exit from protected mode reset) s
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 586 M
(KC8_MENABLE) s
/F-gs-font 10 10 SF
0 setgray
119 586 M
(         0x02    // enable mouse interrupt) s
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 575 M
(KC8_KENABLE) s
/F-gs-font 10 10 SF
0 setgray
119 575 M
(         0x01    // enable keyboard interrupt) s
5 564 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 564 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 564 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 564 M
(CMDBYTE) s
/F-gs-font 10 10 SF
0 setgray
95 564 M
(             \(KC8_TRANS|KC8_CPU|KC8_MENABLE|KC8_KENABLE\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 542 M
(/* keyboard commands */) s
/F-gs-font 10 10 SF
0 setgray
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 531 M
(KBC_RESET) s
/F-gs-font 10 10 SF
0 setgray
107 531 M
(           0xFF    // reset the keyboard) s
5 520 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 520 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 520 M
(KBC_RESEND) s
/F-gs-font 10 10 SF
0 setgray
113 520 M
(          0xFE    // request the keyboard resend the last byte) s
5 509 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 509 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 509 M
(KBC_SETDEFAULT) s
/F-gs-font 10 10 SF
0 setgray
137 509 M
(      0xF6    // resets keyboard to its power-on defaults) s
5 498 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 498 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 498 M
(KBC_DISABLE) s
/F-gs-font 10 10 SF
0 setgray
119 498 M
(         0xF5    // as per KBC_SETDEFAULT, but also disable key scanning) s
5 487 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 487 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 487 M
(KBC_ENABLE) s
/F-gs-font 10 10 SF
0 setgray
113 487 M
(          0xF4    // enable key scanning) s
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 476 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 476 M
(KBC_TYPEMATIC) s
/F-gs-font 10 10 SF
0 setgray
131 476 M
(       0xF3    // set typematic rate and delay) s
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 465 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 465 M
(KBC_SETTABLE) s
/F-gs-font 10 10 SF
0 setgray
125 465 M
(        0xF0    // set scancode translation table) s
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 454 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 454 M
(KBC_MODEIND) s
/F-gs-font 10 10 SF
0 setgray
119 454 M
(         0xED    // set mode indicators\(i.e. LEDs\)) s
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 443 M
(KBC_ECHO) s
/F-gs-font 10 10 SF
0 setgray
101 443 M
(            0xEE    // request an echo from the keyboard) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 421 M
(/* keyboard responses */) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 410 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 410 M
(KBR_EXTENDED) s
/F-gs-font 10 10 SF
0 setgray
125 410 M
(        0xE0    // extended key sequence) s
5 399 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 399 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 399 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 399 M
(KBR_RESEND) s
/F-gs-font 10 10 SF
0 setgray
113 399 M
(          0xFE    // needs resend of command) s
5 388 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 388 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 388 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 388 M
(KBR_ACK) s
/F-gs-font 10 10 SF
0 setgray
95 388 M
(             0xFA    // received a valid command) s
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 377 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 377 M
(KBR_OVERRUN) s
/F-gs-font 10 10 SF
0 setgray
119 377 M
(         0x00    // flooded) s
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 366 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 366 M
(KBR_FAILURE) s
/F-gs-font 10 10 SF
0 setgray
119 366 M
(         0xFD    // diagnosic failure) s
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 355 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 355 M
(KBR_BREAK) s
/F-gs-font 10 10 SF
0 setgray
107 355 M
(           0xF0    // break code prefix - sent on key release) s
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 344 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 344 M
(KBR_RSTDONE) s
/F-gs-font 10 10 SF
0 setgray
119 344 M
(         0xAA    // reset complete) s
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 333 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 333 M
(KBR_ECHO) s
/F-gs-font 10 10 SF
0 setgray
101 333 M
(            0xEE    // echo response) s
5 311 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 311 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 311 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 311 M
(/* !__KERN_DRIVER_KBDREG_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
([ucore/lab8_result/kern/driver/intr.c] ++++++++++++++++++++++++++++++) s
5 278 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 278 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 278 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 278 M
(<x86.h>) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 267 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 267 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 267 M
(<intr.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 245 M
(/* intr_enable - enable irq interrupt */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 234 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 223 M
(intr_enable) s
/F-gs-font 10 10 SF
0 setgray
71 223 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 223 M
(void) s
/F-gs-font 10 10 SF
0 setgray
101 223 M
(\) {) s
5 212 M
(    sti\(\);) s
5 201 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 179 M
(/* intr_disable - disable irq interrupt */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 168 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 157 M
(intr_disable) s
/F-gs-font 10 10 SF
0 setgray
77 157 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 157 M
(void) s
/F-gs-font 10 10 SF
0 setgray
107 157 M
(\) {) s
5 146 M
(    cli\(\);) s
5 135 M
(}) s
5 113 M
([ucore/lab8_result/kern/driver/clock.h] ++++++++++++++++++++++++++++++) s
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 102 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 102 M
(__KERN_DRIVER_CLOCK_H__) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 91 M
(__KERN_DRIVER_CLOCK_H__) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 69 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 47 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 47 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 47 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
95 47 M
( size_t ticks;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 25 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 25 M
(clock_init) s
/F-gs-font 10 10 SF
0 setgray
95 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 25 M
(void) s
/F-gs-font 10 10 SF
0 setgray
125 25 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(long) s
/F-gs-font 10 10 SF
0 setgray
29 3 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 3 M
(SYSTEM_READ_TIMER) s
/F-gs-font 10 10 SF
0 setgray
137 3 M
(\( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
173 3 M
( \);) s
_R
S
%%Page: (73) 73
%%BeginPageSetup
_S
18 36 translate
/pagenum 73 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 685 M
(/* !__KERN_DRIVER_CLOCK_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
([ucore/lab8_result/kern/driver/intr.h] ++++++++++++++++++++++++++++++) s
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 652 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 652 M
(__KERN_DRIVER_INTR_H__) s
/F-gs-font 10 10 SF
0 setgray
5 641 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 641 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 641 M
(__KERN_DRIVER_INTR_H__) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 619 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 619 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 619 M
(intr_enable) s
/F-gs-font 10 10 SF
0 setgray
101 619 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 619 M
(void) s
/F-gs-font 10 10 SF
0 setgray
131 619 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 608 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 608 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 608 M
(intr_disable) s
/F-gs-font 10 10 SF
0 setgray
107 608 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 608 M
(void) s
/F-gs-font 10 10 SF
0 setgray
137 608 M
(\);) s
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 586 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 586 M
(/* !__KERN_DRIVER_INTR_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 564 M
([ucore/lab8_result/kern/driver/console.c] ++++++++++++++++++++++++++++++) s
5 553 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 553 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 553 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 553 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 542 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 542 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 542 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 542 M
(<x86.h>) s
/F-gs-font 10 10 SF
0 setgray
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 531 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 531 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 520 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 520 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 520 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 520 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 509 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 509 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 509 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 509 M
(<kbdreg.h>) s
/F-gs-font 10 10 SF
0 setgray
5 498 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 498 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 498 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 498 M
(<picirq.h>) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 487 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 487 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 487 M
(<trap.h>) s
/F-gs-font 10 10 SF
0 setgray
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 476 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 476 M
(<memlayout.h>) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 465 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 465 M
(<sync.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 443 M
(/* stupid I/O delay routine necessitated by historical PC design flaws */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 432 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 432 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 432 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 421 M
(delay) s
/F-gs-font 10 10 SF
0 setgray
35 421 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 421 M
(void) s
/F-gs-font 10 10 SF
0 setgray
65 421 M
(\) {) s
5 410 M
(    inb\(0x84\);) s
5 399 M
(    inb\(0x84\);) s
5 388 M
(    inb\(0x84\);) s
5 377 M
(    inb\(0x84\);) s
5 366 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 344 M
(/***** Serial I/O code *****/) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 333 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 333 M
(COM1) s
/F-gs-font 10 10 SF
0 setgray
77 333 M
(            0x3F8) s
5 311 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 311 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 311 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 311 M
(COM_RX) s
/F-gs-font 10 10 SF
0 setgray
89 311 M
(          0       // In:  Receive buffer \(DLAB=0\)) s
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 300 M
(COM_TX) s
/F-gs-font 10 10 SF
0 setgray
89 300 M
(          0       // Out: Transmit buffer \(DLAB=0\)) s
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 289 M
(COM_DLL) s
/F-gs-font 10 10 SF
0 setgray
95 289 M
(         0       // Out: Divisor Latch Low \(DLAB=1\)) s
5 278 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 278 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 278 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 278 M
(COM_DLM) s
/F-gs-font 10 10 SF
0 setgray
95 278 M
(         1       // Out: Divisor Latch High \(DLAB=1\)) s
5 267 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 267 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 267 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 267 M
(COM_IER) s
/F-gs-font 10 10 SF
0 setgray
95 267 M
(         1       // Out: Interrupt Enable Register) s
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 256 M
(COM_IER_RDI) s
/F-gs-font 10 10 SF
0 setgray
119 256 M
(     0x01    // Enable receiver data interrupt) s
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 245 M
(COM_IIR) s
/F-gs-font 10 10 SF
0 setgray
95 245 M
(         2       // In:  Interrupt ID Register) s
5 234 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 234 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 234 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 234 M
(COM_FCR) s
/F-gs-font 10 10 SF
0 setgray
95 234 M
(         2       // Out: FIFO Control Register) s
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 223 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 223 M
(COM_LCR) s
/F-gs-font 10 10 SF
0 setgray
95 223 M
(         3       // Out: Line Control Register) s
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 212 M
(COM_LCR_DLAB) s
/F-gs-font 10 10 SF
0 setgray
125 212 M
(    0x80    // Divisor latch access bit) s
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 201 M
(COM_LCR_WLEN8) s
/F-gs-font 10 10 SF
0 setgray
131 201 M
(   0x03    // Wordlength: 8 bits) s
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 190 M
(COM_MCR) s
/F-gs-font 10 10 SF
0 setgray
95 190 M
(         4       // Out: Modem Control Register) s
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 179 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 179 M
(COM_MCR_RTS) s
/F-gs-font 10 10 SF
0 setgray
119 179 M
(     0x02    // RTS complement) s
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 168 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 168 M
(COM_MCR_DTR) s
/F-gs-font 10 10 SF
0 setgray
119 168 M
(     0x01    // DTR complement) s
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 157 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 157 M
(COM_MCR_OUT2) s
/F-gs-font 10 10 SF
0 setgray
125 157 M
(    0x08    // Out2 complement) s
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 146 M
(COM_LSR) s
/F-gs-font 10 10 SF
0 setgray
95 146 M
(         5       // In:  Line Status Register) s
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 135 M
(COM_LSR_DATA) s
/F-gs-font 10 10 SF
0 setgray
125 135 M
(    0x01    // Data available) s
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 124 M
(COM_LSR_TXRDY) s
/F-gs-font 10 10 SF
0 setgray
131 124 M
(   0x20    // Transmit buffer avail) s
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 113 M
(COM_LSR_TSRE) s
/F-gs-font 10 10 SF
0 setgray
125 113 M
(    0x40    // Transmitter off) s
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 91 M
(MONO_BASE) s
/F-gs-font 10 10 SF
0 setgray
107 91 M
(       0x3B4) s
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 80 M
(MONO_BUF) s
/F-gs-font 10 10 SF
0 setgray
101 80 M
(        0xB0000) s
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 69 M
(CGA_BASE) s
/F-gs-font 10 10 SF
0 setgray
101 69 M
(        0x3D4) s
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 58 M
(CGA_BUF) s
/F-gs-font 10 10 SF
0 setgray
95 58 M
(         0xB8000) s
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 47 M
(CRT_ROWS) s
/F-gs-font 10 10 SF
0 setgray
101 47 M
(        25) s
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 36 M
(CRT_COLS) s
/F-gs-font 10 10 SF
0 setgray
101 36 M
(        80) s
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 25 M
(CRT_SIZE) s
/F-gs-font 10 10 SF
0 setgray
101 25 M
(        \(CRT_ROWS * CRT_COLS\)) s
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 3 M
(LPTPORT) s
/F-gs-font 10 10 SF
0 setgray
95 3 M
(         0x378) s
_R
S
%%Page: (74) 74
%%BeginPageSetup
_S
18 36 translate
/pagenum 74 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 696 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 696 M
( uint16_t *crt_buf;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 685 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( uint16_t crt_pos;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 674 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 674 M
( uint16_t addr_6845;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 652 M
(/* TEXT-mode CGA/VGA display output */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 630 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 630 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 630 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 619 M
(cga_init) s
/F-gs-font 10 10 SF
0 setgray
53 619 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 619 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 619 M
(\) {) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 608 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
77 608 M
( uint16_t *cp = \(uint16_t *\)\(CGA_BUF + KERNBASE\);) s
5 597 M
(    uint16_t was = *cp;) s
5 586 M
(    *cp = \(uint16_t\) 0xA55A;) s
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 575 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( \(*cp != 0xA55A\) {) s
5 564 M
(        cp = \(uint16_t*\)\(MONO_BUF + KERNBASE\);) s
5 553 M
(        addr_6845 = MONO_BASE;) s
5 542 M
(    } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
41 542 M
(else) s
/F-gs-font 10 10 SF
0 setgray
65 542 M
( {) s
5 531 M
(        *cp = was;) s
5 520 M
(        addr_6845 = CGA_BASE;) s
5 509 M
(    }) s
5 487 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 487 M
(// Extract cursor location) s
/F-gs-font 10 10 SF
0 setgray
5 476 M
(    uint32_t pos;) s
5 465 M
(    outb\(addr_6845, 14\);) s
5 454 M
(    pos = inb\(addr_6845 + 1\) << 8;) s
5 443 M
(    outb\(addr_6845, 15\);) s
5 432 M
(    pos |= inb\(addr_6845 + 1\);) s
5 410 M
(    crt_buf = \(uint16_t*\) cp;) s
5 399 M
(    crt_pos = pos;) s
5 388 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 366 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 366 M
( bool serial_exists = 0;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 344 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 344 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 344 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 333 M
(serial_init) s
/F-gs-font 10 10 SF
0 setgray
71 333 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 333 M
(void) s
/F-gs-font 10 10 SF
0 setgray
101 333 M
(\) {) s
5 322 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 322 M
(// Turn off the FIFO) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(    outb\(COM1 + COM_FCR, 0\);) s
5 289 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 289 M
(// Set speed; requires DLAB latch) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
(    outb\(COM1 + COM_LCR, COM_LCR_DLAB\);) s
5 267 M
(    outb\(COM1 + COM_DLL, \(uint8_t\) \(115200 / 9600\)\);) s
5 256 M
(    outb\(COM1 + COM_DLM, 0\);) s
5 234 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 234 M
(// 8 data bits, 1 stop bit, parity off; turn off DLAB latch) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(    outb\(COM1 + COM_LCR, COM_LCR_WLEN8 & ~COM_LCR_DLAB\);) s
5 201 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 201 M
(// No modem controls) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(    outb\(COM1 + COM_MCR, 0\);) s
5 179 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 179 M
(// Enable rcv interrupts) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(    outb\(COM1 + COM_IER, COM_IER_RDI\);) s
5 146 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 146 M
(// Clear any preexisting overrun indications and interrupts) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 135 M
(// Serial port doesn't exist if COM_LSR returns 0xFF) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(    serial_exists = \(inb\(COM1 + COM_LSR\) != 0xFF\);) s
5 113 M
(    \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 113 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 113 M
(\) inb\(COM1+COM_IIR\);) s
5 102 M
(    \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 102 M
(void) s
/F-gs-font 10 10 SF
0 setgray
59 102 M
(\) inb\(COM1+COM_RX\);) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 80 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 80 M
( \(serial_exists\) {) s
5 69 M
(        pic_enable\(IRQ_COM1\);) s
5 58 M
(    }) s
5 47 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 25 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 25 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 14 M
(lpt_putc_sub) s
/F-gs-font 10 10 SF
0 setgray
77 14 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 14 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 14 M
( c\) {) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( i;) s
_R
S
%%Page: (75) 75
%%BeginPageSetup
_S
18 36 translate
/pagenum 75 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 707 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 707 M
( \(i = 0; !\(inb\(LPTPORT + 1\) & 0x80\) && i < 12800; i ++\) {) s
5 696 M
(        delay\(\);) s
5 685 M
(    }) s
5 674 M
(    outb\(LPTPORT + 0, c\);) s
5 663 M
(    outb\(LPTPORT + 2, 0x08 | 0x04 | 0x01\);) s
5 652 M
(    outb\(LPTPORT + 2, 0x08\);) s
5 641 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 619 M
(/* lpt_putc - copy console output to parallel port */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 608 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 608 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 608 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 597 M
(lpt_putc) s
/F-gs-font 10 10 SF
0 setgray
53 597 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 597 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 597 M
( c\) {) s
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 586 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 586 M
( \(c != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 586 M
('\\b') s
/F-gs-font 10 10 SF
0 setgray
107 586 M
(\) {) s
5 575 M
(        lpt_putc_sub\(c\);) s
5 564 M
(    }) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 553 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 553 M
( {) s
5 542 M
(        lpt_putc_sub\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
131 542 M
('\\b') s
/F-gs-font 10 10 SF
0 setgray
155 542 M
(\);) s
5 531 M
(        lpt_putc_sub\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
131 531 M
(' ') s
/F-gs-font 10 10 SF
0 setgray
149 531 M
(\);) s
5 520 M
(        lpt_putc_sub\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
131 520 M
('\\b') s
/F-gs-font 10 10 SF
0 setgray
155 520 M
(\);) s
5 509 M
(    }) s
5 498 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 476 M
(/* cga_putc - print character to console */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 465 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 465 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 465 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 454 M
(cga_putc) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 454 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 454 M
( c\) {) s
5 443 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 443 M
(// set black on white) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 432 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 432 M
( \(!\(c & ~0xFF\)\) {) s
5 421 M
(        c |= 0x0700;) s
5 410 M
(    }) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(switch) s
/F-gs-font 10 10 SF
0 setgray
65 388 M
( \(c & 0xff\) {) s
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 377 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 377 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 377 M
('\\b') s
/F-gs-font 10 10 SF
0 setgray
83 377 M
(:) s
5 366 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 366 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 366 M
( \(crt_pos > 0\) {) s
5 355 M
(            crt_pos --;) s
5 344 M
(            crt_buf[crt_pos] = \(c & ~0xff\) | ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
275 344 M
(' ') s
/F-gs-font 10 10 SF
0 setgray
293 344 M
(;) s
5 333 M
(        }) s
5 322 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 322 M
(break) s
/F-gs-font 10 10 SF
0 setgray
83 322 M
(;) s
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 311 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 311 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 311 M
('\\n') s
/F-gs-font 10 10 SF
0 setgray
83 311 M
(:) s
5 300 M
(        crt_pos += CRT_COLS;) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 289 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 289 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 289 M
('\\r') s
/F-gs-font 10 10 SF
0 setgray
83 289 M
(:) s
5 278 M
(        crt_pos -= \(crt_pos % CRT_COLS\);) s
5 267 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 267 M
(break) s
/F-gs-font 10 10 SF
0 setgray
83 267 M
(;) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
29 256 M
(default) s
/F-gs-font 10 10 SF
0 setgray
71 256 M
(:) s
5 245 M
(        crt_buf[crt_pos ++] = c;     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
227 245 M
(// write the character) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 234 M
(break) s
/F-gs-font 10 10 SF
0 setgray
83 234 M
(;) s
5 223 M
(    }) s
5 201 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 201 M
(// What is the purpose of this?) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 190 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 190 M
( \(crt_pos >= CRT_SIZE\) {) s
5 179 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 179 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 179 M
( i;) s
5 168 M
(        memmove\(crt_buf, crt_buf + CRT_COLS, \(CRT_SIZE - CRT_COLS\) * ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
419 168 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
455 168 M
(\(uint16_t\)\);) s
5 157 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 157 M
(for) s
/F-gs-font 10 10 SF
0 setgray
71 157 M
( \(i = CRT_SIZE - CRT_COLS; i < CRT_SIZE; i ++\) {) s
5 146 M
(            crt_buf[i] = 0x0700 | ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 146 M
(' ') s
/F-gs-font 10 10 SF
0 setgray
227 146 M
(;) s
5 135 M
(        }) s
5 124 M
(        crt_pos -= CRT_COLS;) s
5 113 M
(    }) s
5 91 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 91 M
(// move that little blinky thing) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(    outb\(addr_6845, 14\);) s
5 69 M
(    outb\(addr_6845 + 1, crt_pos >> 8\);) s
5 58 M
(    outb\(addr_6845, 15\);) s
5 47 M
(    outb\(addr_6845 + 1, crt_pos\);) s
5 36 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 14 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 3 M
(serial_putc_sub) s
/F-gs-font 10 10 SF
0 setgray
95 3 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
119 3 M
( c\) {) s
_R
S
%%Page: (76) 76
%%BeginPageSetup
_S
18 36 translate
/pagenum 76 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 707 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 707 M
( i;) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 696 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 696 M
( \(i = 0; !\(inb\(COM1 + COM_LSR\) & COM_LSR_TXRDY\) && i < 12800; i ++\) {) s
5 685 M
(        delay\(\);) s
5 674 M
(    }) s
5 663 M
(    outb\(COM1 + COM_TX, c\);) s
5 652 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 630 M
(/* serial_putc - print character to serial port */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 619 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 619 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 608 M
(serial_putc) s
/F-gs-font 10 10 SF
0 setgray
71 608 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 608 M
(int) s
/F-gs-font 10 10 SF
0 setgray
95 608 M
( c\) {) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 597 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( \(c != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 597 M
('\\b') s
/F-gs-font 10 10 SF
0 setgray
107 597 M
(\) {) s
5 586 M
(        serial_putc_sub\(c\);) s
5 575 M
(    }) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 564 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 564 M
( {) s
5 553 M
(        serial_putc_sub\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 553 M
('\\b') s
/F-gs-font 10 10 SF
0 setgray
173 553 M
(\);) s
5 542 M
(        serial_putc_sub\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 542 M
(' ') s
/F-gs-font 10 10 SF
0 setgray
167 542 M
(\);) s
5 531 M
(        serial_putc_sub\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 531 M
('\\b') s
/F-gs-font 10 10 SF
0 setgray
173 531 M
(\);) s
5 520 M
(    }) s
5 509 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 487 M
(/* *) s
5 476 M
( * Here we manage the console input buffer, where we stash characters) s
5 465 M
( * received from the keyboard or serial port whenever the corresponding) s
5 454 M
( * interrupt occurs.) s
5 443 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 421 M
(CONSBUFSIZE) s
/F-gs-font 10 10 SF
0 setgray
119 421 M
( 512) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 399 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 399 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 399 M
( {) s
5 388 M
(    uint8_t buf[CONSBUFSIZE];) s
5 377 M
(    uint32_t rpos;) s
5 366 M
(    uint32_t wpos;) s
5 355 M
(} cons;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 333 M
(/* *) s
5 322 M
( * cons_intr - called by device interrupt routines to feed input) s
5 311 M
( * characters into the circular console input buffer.) s
5 300 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 289 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 278 M
(cons_intr) s
/F-gs-font 10 10 SF
0 setgray
59 278 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
83 278 M
( \(*proc\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 278 M
(void) s
/F-gs-font 10 10 SF
0 setgray
161 278 M
(\)\) {) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 267 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 267 M
( c;) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 256 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 256 M
( \(\(c = \(*proc\)\(\)\) != -1\) {) s
5 245 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 245 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 245 M
( \(c != 0\) {) s
5 234 M
(            cons.buf[cons.wpos ++] = c;) s
5 223 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 223 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 223 M
( \(cons.wpos == CONSBUFSIZE\) {) s
5 212 M
(                cons.wpos = 0;) s
5 201 M
(            }) s
5 190 M
(        }) s
5 179 M
(    }) s
5 168 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 146 M
(/* serial_proc_data - get data from serial port */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 135 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 135 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 124 M
(serial_proc_data) s
/F-gs-font 10 10 SF
0 setgray
101 124 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 124 M
(void) s
/F-gs-font 10 10 SF
0 setgray
131 124 M
(\) {) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( \(!\(inb\(COM1 + COM_LSR\) & COM_LSR_DATA\)\) {) s
5 102 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 102 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 102 M
( -1;) s
5 91 M
(    }) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( c = inb\(COM1 + COM_RX\);) s
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 69 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( \(c == 127\) {) s
5 58 M
(        c = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 58 M
('\\b') s
/F-gs-font 10 10 SF
0 setgray
101 58 M
(;) s
5 47 M
(    }) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 36 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 36 M
( c;) s
5 25 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 3 M
(/* serial_intr - try to feed input characters from serial port */) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (77) 77
%%BeginPageSetup
_S
18 36 translate
/pagenum 77 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 696 M
(serial_intr) s
/F-gs-font 10 10 SF
0 setgray
71 696 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 696 M
(void) s
/F-gs-font 10 10 SF
0 setgray
101 696 M
(\) {) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 685 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( \(serial_exists\) {) s
5 674 M
(        cons_intr\(serial_proc_data\);) s
5 663 M
(    }) s
5 652 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 630 M
(/***** Keyboard input code *****/) s
/F-gs-font 10 10 SF
0 setgray
5 608 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 608 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 608 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 608 M
(NO) s
/F-gs-font 10 10 SF
0 setgray
65 608 M
(              0) s
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 586 M
(SHIFT) s
/F-gs-font 10 10 SF
0 setgray
83 586 M
(           \(1<<0\)) s
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 575 M
(CTL) s
/F-gs-font 10 10 SF
0 setgray
71 575 M
(             \(1<<1\)) s
5 564 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 564 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 564 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 564 M
(ALT) s
/F-gs-font 10 10 SF
0 setgray
71 564 M
(             \(1<<2\)) s
5 542 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 542 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 542 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 542 M
(CAPSLOCK) s
/F-gs-font 10 10 SF
0 setgray
101 542 M
(        \(1<<3\)) s
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 531 M
(NUMLOCK) s
/F-gs-font 10 10 SF
0 setgray
95 531 M
(         \(1<<4\)) s
5 520 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 520 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 520 M
(SCROLLLOCK) s
/F-gs-font 10 10 SF
0 setgray
113 520 M
(      \(1<<5\)) s
5 498 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 498 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 498 M
(E0ESC) s
/F-gs-font 10 10 SF
0 setgray
83 498 M
(           \(1<<6\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 476 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 476 M
( uint8_t shiftcode[256] = {) s
5 465 M
(    [0x1D] CTL,) s
5 454 M
(    [0x2A] SHIFT,) s
5 443 M
(    [0x36] SHIFT,) s
5 432 M
(    [0x38] ALT,) s
5 421 M
(    [0x9D] CTL,) s
5 410 M
(    [0xB8] ALT) s
5 399 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 377 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
( uint8_t togglecode[256] = {) s
5 366 M
(    [0x3A] CAPSLOCK,) s
5 355 M
(    [0x45] NUMLOCK,) s
5 344 M
(    [0x46] SCROLLLOCK) s
5 333 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 311 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 311 M
( uint8_t normalmap[256] = {) s
5 300 M
(    NO,   0x1B, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 300 M
('1') s
/F-gs-font 10 10 SF
0 setgray
119 300 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 300 M
('2') s
/F-gs-font 10 10 SF
0 setgray
155 300 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 300 M
('3') s
/F-gs-font 10 10 SF
0 setgray
191 300 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 300 M
('4') s
/F-gs-font 10 10 SF
0 setgray
227 300 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 300 M
('5') s
/F-gs-font 10 10 SF
0 setgray
263 300 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 300 M
('6') s
/F-gs-font 10 10 SF
0 setgray
299 300 M
(,  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 300 M
(// 0x00) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
29 289 M
('7') s
/F-gs-font 10 10 SF
0 setgray
47 289 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 289 M
('8') s
/F-gs-font 10 10 SF
0 setgray
83 289 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 289 M
('9') s
/F-gs-font 10 10 SF
0 setgray
119 289 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 289 M
('0') s
/F-gs-font 10 10 SF
0 setgray
155 289 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 289 M
('-') s
/F-gs-font 10 10 SF
0 setgray
191 289 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 289 M
('=') s
/F-gs-font 10 10 SF
0 setgray
227 289 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 289 M
('\\b') s
/F-gs-font 10 10 SF
0 setgray
269 289 M
(, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 289 M
('\\t') s
/F-gs-font 10 10 SF
0 setgray
305 289 M
(,) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
29 278 M
('q') s
/F-gs-font 10 10 SF
0 setgray
47 278 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 278 M
('w') s
/F-gs-font 10 10 SF
0 setgray
83 278 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 278 M
('e') s
/F-gs-font 10 10 SF
0 setgray
119 278 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 278 M
('r') s
/F-gs-font 10 10 SF
0 setgray
155 278 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 278 M
('t') s
/F-gs-font 10 10 SF
0 setgray
191 278 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 278 M
('y') s
/F-gs-font 10 10 SF
0 setgray
227 278 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 278 M
('u') s
/F-gs-font 10 10 SF
0 setgray
263 278 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 278 M
('i') s
/F-gs-font 10 10 SF
0 setgray
299 278 M
(,  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 278 M
(// 0x10) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
29 267 M
('o') s
/F-gs-font 10 10 SF
0 setgray
47 267 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 267 M
('p') s
/F-gs-font 10 10 SF
0 setgray
83 267 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 267 M
('[') s
/F-gs-font 10 10 SF
0 setgray
119 267 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 267 M
(']') s
/F-gs-font 10 10 SF
0 setgray
155 267 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 267 M
('\\n') s
/F-gs-font 10 10 SF
0 setgray
197 267 M
(, NO,   ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 267 M
('a') s
/F-gs-font 10 10 SF
0 setgray
263 267 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 267 M
('s') s
/F-gs-font 10 10 SF
0 setgray
299 267 M
(,) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
29 256 M
('d') s
/F-gs-font 10 10 SF
0 setgray
47 256 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 256 M
('f') s
/F-gs-font 10 10 SF
0 setgray
83 256 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 256 M
('g') s
/F-gs-font 10 10 SF
0 setgray
119 256 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 256 M
('h') s
/F-gs-font 10 10 SF
0 setgray
155 256 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 256 M
('j') s
/F-gs-font 10 10 SF
0 setgray
191 256 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 256 M
('k') s
/F-gs-font 10 10 SF
0 setgray
227 256 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 256 M
('l') s
/F-gs-font 10 10 SF
0 setgray
263 256 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 256 M
(';') s
/F-gs-font 10 10 SF
0 setgray
299 256 M
(,  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 256 M
(// 0x20) s
/F-gs-font 10 10 SF
0 setgray
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
29 245 M
('\\'') s
/F-gs-font 10 10 SF
0 setgray
53 245 M
(, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 245 M
('`') s
/F-gs-font 10 10 SF
0 setgray
83 245 M
(,  NO,   ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 245 M
('\\\\') s
/F-gs-font 10 10 SF
0 setgray
161 245 M
(, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 245 M
('z') s
/F-gs-font 10 10 SF
0 setgray
191 245 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 245 M
('x') s
/F-gs-font 10 10 SF
0 setgray
227 245 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 245 M
('c') s
/F-gs-font 10 10 SF
0 setgray
263 245 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 245 M
('v') s
/F-gs-font 10 10 SF
0 setgray
299 245 M
(,) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
29 234 M
('b') s
/F-gs-font 10 10 SF
0 setgray
47 234 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 234 M
('n') s
/F-gs-font 10 10 SF
0 setgray
83 234 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 234 M
('m') s
/F-gs-font 10 10 SF
0 setgray
119 234 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 234 M
(',') s
/F-gs-font 10 10 SF
0 setgray
155 234 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 234 M
('.') s
/F-gs-font 10 10 SF
0 setgray
191 234 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 234 M
('/') s
/F-gs-font 10 10 SF
0 setgray
227 234 M
(,  NO,   ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 234 M
('*') s
/F-gs-font 10 10 SF
0 setgray
299 234 M
(,  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 234 M
(// 0x30) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(    NO,   ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 223 M
(' ') s
/F-gs-font 10 10 SF
0 setgray
83 223 M
(,  NO,   NO,   NO,   NO,   NO,   NO,) s
5 212 M
(    NO,   NO,   NO,   NO,   NO,   NO,   NO,   ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 212 M
('7') s
/F-gs-font 10 10 SF
0 setgray
299 212 M
(,  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 212 M
(// 0x40) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
29 201 M
('8') s
/F-gs-font 10 10 SF
0 setgray
47 201 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 201 M
('9') s
/F-gs-font 10 10 SF
0 setgray
83 201 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 201 M
('-') s
/F-gs-font 10 10 SF
0 setgray
119 201 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 201 M
('4') s
/F-gs-font 10 10 SF
0 setgray
155 201 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 201 M
('5') s
/F-gs-font 10 10 SF
0 setgray
191 201 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 201 M
('6') s
/F-gs-font 10 10 SF
0 setgray
227 201 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 201 M
('+') s
/F-gs-font 10 10 SF
0 setgray
263 201 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 201 M
('1') s
/F-gs-font 10 10 SF
0 setgray
299 201 M
(,) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
29 190 M
('2') s
/F-gs-font 10 10 SF
0 setgray
47 190 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 190 M
('3') s
/F-gs-font 10 10 SF
0 setgray
83 190 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 190 M
('0') s
/F-gs-font 10 10 SF
0 setgray
119 190 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 190 M
('.') s
/F-gs-font 10 10 SF
0 setgray
155 190 M
(,  NO,   NO,   NO,   NO,   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 190 M
(// 0x50) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(    [0xC7] KEY_HOME,    [0x9C] ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
191 179 M
('\\n') s
/F-gs-font 10 10 SF
0 setgray
215 179 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 179 M
(/*KP_Enter*/) s
/F-gs-font 10 10 SF
0 setgray
293 179 M
(,) s
5 168 M
(    [0xB5] ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 168 M
('/') s
/F-gs-font 10 10 SF
0 setgray
89 168 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
95 168 M
(/*KP_Div*/) s
/F-gs-font 10 10 SF
0 setgray
155 168 M
(,  [0xC8] KEY_UP,) s
5 157 M
(    [0xC9] KEY_PGUP,    [0xCB] KEY_LF,) s
5 146 M
(    [0xCD] KEY_RT,      [0xCF] KEY_END,) s
5 135 M
(    [0xD0] KEY_DN,      [0xD1] KEY_PGDN,) s
5 124 M
(    [0xD2] KEY_INS,     [0xD3] KEY_DEL) s
5 113 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 91 M
( uint8_t shiftmap[256] = {) s
5 80 M
(    NO,   033,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 80 M
('!') s
/F-gs-font 10 10 SF
0 setgray
119 80 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 80 M
('@') s
/F-gs-font 10 10 SF
0 setgray
155 80 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 80 M
('#') s
/F-gs-font 10 10 SF
0 setgray
191 80 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 80 M
('$') s
/F-gs-font 10 10 SF
0 setgray
227 80 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 80 M
('%') s
/F-gs-font 10 10 SF
0 setgray
263 80 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 80 M
('^') s
/F-gs-font 10 10 SF
0 setgray
299 80 M
(,  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 80 M
(// 0x00) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
29 69 M
('&') s
/F-gs-font 10 10 SF
0 setgray
47 69 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 69 M
('*') s
/F-gs-font 10 10 SF
0 setgray
83 69 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 69 M
('\(') s
/F-gs-font 10 10 SF
0 setgray
119 69 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 69 M
('\)') s
/F-gs-font 10 10 SF
0 setgray
155 69 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 69 M
('_') s
/F-gs-font 10 10 SF
0 setgray
191 69 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 69 M
('+') s
/F-gs-font 10 10 SF
0 setgray
227 69 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 69 M
('\\b') s
/F-gs-font 10 10 SF
0 setgray
269 69 M
(, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 69 M
('\\t') s
/F-gs-font 10 10 SF
0 setgray
305 69 M
(,) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
29 58 M
('Q') s
/F-gs-font 10 10 SF
0 setgray
47 58 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 58 M
('W') s
/F-gs-font 10 10 SF
0 setgray
83 58 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 58 M
('E') s
/F-gs-font 10 10 SF
0 setgray
119 58 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 58 M
('R') s
/F-gs-font 10 10 SF
0 setgray
155 58 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 58 M
('T') s
/F-gs-font 10 10 SF
0 setgray
191 58 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 58 M
('Y') s
/F-gs-font 10 10 SF
0 setgray
227 58 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 58 M
('U') s
/F-gs-font 10 10 SF
0 setgray
263 58 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 58 M
('I') s
/F-gs-font 10 10 SF
0 setgray
299 58 M
(,  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 58 M
(// 0x10) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
29 47 M
('O') s
/F-gs-font 10 10 SF
0 setgray
47 47 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 47 M
('P') s
/F-gs-font 10 10 SF
0 setgray
83 47 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 47 M
('{') s
/F-gs-font 10 10 SF
0 setgray
119 47 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 47 M
('}') s
/F-gs-font 10 10 SF
0 setgray
155 47 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 47 M
('\\n') s
/F-gs-font 10 10 SF
0 setgray
197 47 M
(, NO,   ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 47 M
('A') s
/F-gs-font 10 10 SF
0 setgray
263 47 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 47 M
('S') s
/F-gs-font 10 10 SF
0 setgray
299 47 M
(,) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
29 36 M
('D') s
/F-gs-font 10 10 SF
0 setgray
47 36 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 36 M
('F') s
/F-gs-font 10 10 SF
0 setgray
83 36 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 36 M
('G') s
/F-gs-font 10 10 SF
0 setgray
119 36 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 36 M
('H') s
/F-gs-font 10 10 SF
0 setgray
155 36 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 36 M
('J') s
/F-gs-font 10 10 SF
0 setgray
191 36 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 36 M
('K') s
/F-gs-font 10 10 SF
0 setgray
227 36 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 36 M
('L') s
/F-gs-font 10 10 SF
0 setgray
263 36 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 36 M
(':') s
/F-gs-font 10 10 SF
0 setgray
299 36 M
(,  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 36 M
(// 0x20) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
29 25 M
('"') s
/F-gs-font 10 10 SF
0 setgray
47 25 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 25 M
('~') s
/F-gs-font 10 10 SF
0 setgray
83 25 M
(,  NO,   ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 25 M
('|') s
/F-gs-font 10 10 SF
0 setgray
155 25 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 25 M
('Z') s
/F-gs-font 10 10 SF
0 setgray
191 25 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 25 M
('X') s
/F-gs-font 10 10 SF
0 setgray
227 25 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 25 M
('C') s
/F-gs-font 10 10 SF
0 setgray
263 25 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 25 M
('V') s
/F-gs-font 10 10 SF
0 setgray
299 25 M
(,) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
29 14 M
('B') s
/F-gs-font 10 10 SF
0 setgray
47 14 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 14 M
('N') s
/F-gs-font 10 10 SF
0 setgray
83 14 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 14 M
('M') s
/F-gs-font 10 10 SF
0 setgray
119 14 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 14 M
('<') s
/F-gs-font 10 10 SF
0 setgray
155 14 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 14 M
('>') s
/F-gs-font 10 10 SF
0 setgray
191 14 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 14 M
('?') s
/F-gs-font 10 10 SF
0 setgray
227 14 M
(,  NO,   ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 14 M
('*') s
/F-gs-font 10 10 SF
0 setgray
299 14 M
(,  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 14 M
(// 0x30) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(    NO,   ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 3 M
(' ') s
/F-gs-font 10 10 SF
0 setgray
83 3 M
(,  NO,   NO,   NO,   NO,   NO,   NO,) s
_R
S
%%Page: (78) 78
%%BeginPageSetup
_S
18 36 translate
/pagenum 78 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    NO,   NO,   NO,   NO,   NO,   NO,   NO,   ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 707 M
('7') s
/F-gs-font 10 10 SF
0 setgray
299 707 M
(,  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 707 M
(// 0x40) s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
29 696 M
('8') s
/F-gs-font 10 10 SF
0 setgray
47 696 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 696 M
('9') s
/F-gs-font 10 10 SF
0 setgray
83 696 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 696 M
('-') s
/F-gs-font 10 10 SF
0 setgray
119 696 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 696 M
('4') s
/F-gs-font 10 10 SF
0 setgray
155 696 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 696 M
('5') s
/F-gs-font 10 10 SF
0 setgray
191 696 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 696 M
('6') s
/F-gs-font 10 10 SF
0 setgray
227 696 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 696 M
('+') s
/F-gs-font 10 10 SF
0 setgray
263 696 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 696 M
('1') s
/F-gs-font 10 10 SF
0 setgray
299 696 M
(,) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
29 685 M
('2') s
/F-gs-font 10 10 SF
0 setgray
47 685 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 685 M
('3') s
/F-gs-font 10 10 SF
0 setgray
83 685 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 685 M
('0') s
/F-gs-font 10 10 SF
0 setgray
119 685 M
(,  ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 685 M
('.') s
/F-gs-font 10 10 SF
0 setgray
155 685 M
(,  NO,   NO,   NO,   NO,   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 685 M
(// 0x50) s
/F-gs-font 10 10 SF
0 setgray
5 674 M
(    [0xC7] KEY_HOME,    [0x9C] ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
191 674 M
('\\n') s
/F-gs-font 10 10 SF
0 setgray
215 674 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 674 M
(/*KP_Enter*/) s
/F-gs-font 10 10 SF
0 setgray
293 674 M
(,) s
5 663 M
(    [0xB5] ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 663 M
('/') s
/F-gs-font 10 10 SF
0 setgray
89 663 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
95 663 M
(/*KP_Div*/) s
/F-gs-font 10 10 SF
0 setgray
155 663 M
(,  [0xC8] KEY_UP,) s
5 652 M
(    [0xC9] KEY_PGUP,    [0xCB] KEY_LF,) s
5 641 M
(    [0xCD] KEY_RT,      [0xCF] KEY_END,) s
5 630 M
(    [0xD0] KEY_DN,      [0xD1] KEY_PGDN,) s
5 619 M
(    [0xD2] KEY_INS,     [0xD3] KEY_DEL) s
5 608 M
(};) s
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 586 M
(C) s
/F-gs-font 10 10 SF
0 setgray
59 586 M
(\(x\) \(x - ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 586 M
('@') s
/F-gs-font 10 10 SF
0 setgray
131 586 M
(\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 564 M
( uint8_t ctlmap[256] = {) s
5 553 M
(    NO,      NO,      NO,      NO,      NO,      NO,      NO,      NO,) s
5 542 M
(    NO,      NO,      NO,      NO,      NO,      NO,      NO,      NO,) s
5 531 M
(    C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
41 531 M
('Q') s
/F-gs-font 10 10 SF
0 setgray
59 531 M
(\),  C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
95 531 M
('W') s
/F-gs-font 10 10 SF
0 setgray
113 531 M
(\),  C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 531 M
('E') s
/F-gs-font 10 10 SF
0 setgray
167 531 M
(\),  C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
203 531 M
('R') s
/F-gs-font 10 10 SF
0 setgray
221 531 M
(\),  C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
257 531 M
('T') s
/F-gs-font 10 10 SF
0 setgray
275 531 M
(\),  C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
311 531 M
('Y') s
/F-gs-font 10 10 SF
0 setgray
329 531 M
(\),  C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
365 531 M
('U') s
/F-gs-font 10 10 SF
0 setgray
383 531 M
(\),  C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
419 531 M
('I') s
/F-gs-font 10 10 SF
0 setgray
437 531 M
(\),) s
5 520 M
(    C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
41 520 M
('O') s
/F-gs-font 10 10 SF
0 setgray
59 520 M
(\),  C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
95 520 M
('P') s
/F-gs-font 10 10 SF
0 setgray
113 520 M
(\),  NO,      NO,      ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 520 M
('\\r') s
/F-gs-font 10 10 SF
0 setgray
269 520 M
(,    NO,      C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
365 520 M
('A') s
/F-gs-font 10 10 SF
0 setgray
383 520 M
(\),  C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
419 520 M
('S') s
/F-gs-font 10 10 SF
0 setgray
437 520 M
(\),) s
5 509 M
(    C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
41 509 M
('D') s
/F-gs-font 10 10 SF
0 setgray
59 509 M
(\),  C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
95 509 M
('F') s
/F-gs-font 10 10 SF
0 setgray
113 509 M
(\),  C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 509 M
('G') s
/F-gs-font 10 10 SF
0 setgray
167 509 M
(\),  C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
203 509 M
('H') s
/F-gs-font 10 10 SF
0 setgray
221 509 M
(\),  C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
257 509 M
('J') s
/F-gs-font 10 10 SF
0 setgray
275 509 M
(\),  C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
311 509 M
('K') s
/F-gs-font 10 10 SF
0 setgray
329 509 M
(\),  C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
365 509 M
('L') s
/F-gs-font 10 10 SF
0 setgray
383 509 M
(\),  NO,) s
5 498 M
(    NO,      NO,      NO,      C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
203 498 M
('\\\\') s
/F-gs-font 10 10 SF
0 setgray
227 498 M
(\), C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
257 498 M
('Z') s
/F-gs-font 10 10 SF
0 setgray
275 498 M
(\),  C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
311 498 M
('X') s
/F-gs-font 10 10 SF
0 setgray
329 498 M
(\),  C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
365 498 M
('C') s
/F-gs-font 10 10 SF
0 setgray
383 498 M
(\),  C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
419 498 M
('V') s
/F-gs-font 10 10 SF
0 setgray
437 498 M
(\),) s
5 487 M
(    C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
41 487 M
('B') s
/F-gs-font 10 10 SF
0 setgray
59 487 M
(\),  C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
95 487 M
('N') s
/F-gs-font 10 10 SF
0 setgray
113 487 M
(\),  C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 487 M
('M') s
/F-gs-font 10 10 SF
0 setgray
167 487 M
(\),  NO,      NO,      C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
311 487 M
('/') s
/F-gs-font 10 10 SF
0 setgray
329 487 M
(\),  NO,      NO,) s
5 476 M
(    [0x97] KEY_HOME,) s
5 465 M
(    [0xB5] C\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 465 M
('/') s
/F-gs-font 10 10 SF
0 setgray
101 465 M
(\),      [0xC8] KEY_UP,) s
5 454 M
(    [0xC9] KEY_PGUP,    [0xCB] KEY_LF,) s
5 443 M
(    [0xCD] KEY_RT,      [0xCF] KEY_END,) s
5 432 M
(    [0xD0] KEY_DN,      [0xD1] KEY_PGDN,) s
5 421 M
(    [0xD2] KEY_INS,     [0xD3] KEY_DEL) s
5 410 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 388 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 388 M
( uint8_t *charcode[4] = {) s
5 377 M
(    normalmap,) s
5 366 M
(    shiftmap,) s
5 355 M
(    ctlmap,) s
5 344 M
(    ctlmap) s
5 333 M
(};) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 311 M
(/* *) s
5 300 M
( * kbd_proc_data - get data from keyboard) s
5 289 M
( *) s
5 278 M
( * The kbd_proc_data\(\) function gets data from the keyboard.) s
5 267 M
( * If we finish a character, return it, else 0. And return -1 if no data.) s
5 256 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 245 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 245 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 245 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 234 M
(kbd_proc_data) s
/F-gs-font 10 10 SF
0 setgray
83 234 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 234 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 234 M
(\) {) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 223 M
( c;) s
5 212 M
(    uint8_t data;) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 201 M
(static) s
/F-gs-font 10 10 SF
0 setgray
65 201 M
( uint32_t shift;) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 179 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 179 M
( \(\(inb\(KBSTATP\) & KBS_DIB\) == 0\) {) s
5 168 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 168 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 168 M
( -1;) s
5 157 M
(    }) s
5 135 M
(    data = inb\(KBDATAP\);) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( \(data == 0xE0\) {) s
5 102 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 102 M
(// E0 escape character) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(        shift |= E0ESC;) s
5 80 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 80 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 80 M
( 0;) s
5 69 M
(    } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
41 69 M
(else) s
/F-gs-font 10 10 SF
0 setgray
65 69 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
71 69 M
(if) s
/F-gs-font 10 10 SF
0 setgray
83 69 M
( \(data & 0x80\) {) s
5 58 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 58 M
(// Key released) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(        data = \(shift & E0ESC ? data : data & 0x7F\);) s
5 36 M
(        shift &= ~\(shiftcode[data] | E0ESC\);) s
5 25 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 25 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 25 M
( 0;) s
5 14 M
(    } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
41 14 M
(else) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
71 14 M
(if) s
/F-gs-font 10 10 SF
0 setgray
83 14 M
( \(shift & E0ESC\) {) s
5 3 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 3 M
(// Last character was an E0 escape; or with 0x80) s
_R
S
%%Page: (79) 79
%%BeginPageSetup
_S
18 36 translate
/pagenum 79 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
/F-gs-font 10 10 SF
0 setgray
5 707 M
(        data |= 0x80;) s
5 696 M
(        shift &= ~E0ESC;) s
5 685 M
(    }) s
5 663 M
(    shift |= shiftcode[data];) s
5 652 M
(    shift ^= togglecode[data];) s
5 630 M
(    c = charcode[shift & \(CTL | SHIFT\)][data];) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 619 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
( \(shift & CAPSLOCK\) {) s
5 608 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 608 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 608 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 608 M
('a') s
/F-gs-font 10 10 SF
0 setgray
95 608 M
( <= c && c <= ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 608 M
('z') s
/F-gs-font 10 10 SF
0 setgray
197 608 M
(\)) s
5 597 M
(            c += ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 597 M
('A') s
/F-gs-font 10 10 SF
0 setgray
125 597 M
( - ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 597 M
('a') s
/F-gs-font 10 10 SF
0 setgray
161 597 M
(;) s
5 586 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 586 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 586 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
83 586 M
(if) s
/F-gs-font 10 10 SF
0 setgray
95 586 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 586 M
('A') s
/F-gs-font 10 10 SF
0 setgray
125 586 M
( <= c && c <= ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
209 586 M
('Z') s
/F-gs-font 10 10 SF
0 setgray
227 586 M
(\)) s
5 575 M
(            c += ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 575 M
('a') s
/F-gs-font 10 10 SF
0 setgray
125 575 M
( - ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 575 M
('A') s
/F-gs-font 10 10 SF
0 setgray
161 575 M
(;) s
5 564 M
(    }) s
5 542 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 542 M
(// Process special keys) s
/F-gs-font 10 10 SF
0 setgray
5 531 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 531 M
(// Ctrl-Alt-Del: reboot) s
/F-gs-font 10 10 SF
0 setgray
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 520 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 520 M
( \(!\(~shift & \(CTL | ALT\)\) && c == KEY_DEL\) {) s
5 509 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 509 M
("Rebooting!\\n") s
/F-gs-font 10 10 SF
0 setgray
185 509 M
(\);) s
5 498 M
(        outb\(0x92, 0x3\); ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
155 498 M
(// courtesy of Chris Frost) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(    }) s
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 476 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 476 M
( c;) s
5 465 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 443 M
(/* kbd_intr - try to feed input characters from keyboard */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 432 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 432 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 432 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 421 M
(kbd_intr) s
/F-gs-font 10 10 SF
0 setgray
53 421 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 421 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 421 M
(\) {) s
5 410 M
(    cons_intr\(kbd_proc_data\);) s
5 399 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 377 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 377 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 366 M
(kbd_init) s
/F-gs-font 10 10 SF
0 setgray
53 366 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 366 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 366 M
(\) {) s
5 355 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 355 M
(// drain the kbd buffer) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(    kbd_intr\(\);) s
5 333 M
(    pic_enable\(IRQ_KBD\);) s
5 322 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 300 M
(/* cons_init - initializes the console devices */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 278 M
(cons_init) s
/F-gs-font 10 10 SF
0 setgray
59 278 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 278 M
(void) s
/F-gs-font 10 10 SF
0 setgray
89 278 M
(\) {) s
5 267 M
(    cga_init\(\);) s
5 256 M
(    serial_init\(\);) s
5 245 M
(    kbd_init\(\);) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 234 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 234 M
( \(!serial_exists\) {) s
5 223 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 223 M
("serial port does not exist!!\\n") s
/F-gs-font 10 10 SF
0 setgray
293 223 M
(\);) s
5 212 M
(    }) s
5 201 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 179 M
(/* cons_putc - print a single character @c to console devices */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 168 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 157 M
(cons_putc) s
/F-gs-font 10 10 SF
0 setgray
59 157 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 157 M
(int) s
/F-gs-font 10 10 SF
0 setgray
83 157 M
( c\) {) s
5 146 M
(    bool intr_flag;) s
5 135 M
(    local_intr_save\(intr_flag\);) s
5 124 M
(    {) s
5 113 M
(        lpt_putc\(c\);) s
5 102 M
(        cga_putc\(c\);) s
5 91 M
(        serial_putc\(c\);) s
5 80 M
(    }) s
5 69 M
(    local_intr_restore\(intr_flag\);) s
5 58 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 36 M
(/* *) s
5 25 M
( * cons_getc - return the next input character from console,) s
5 14 M
( * or 0 if none waiting.) s
5 3 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (80) 80
%%BeginPageSetup
_S
18 36 translate
/pagenum 80 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 696 M
(cons_getc) s
/F-gs-font 10 10 SF
0 setgray
59 696 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 696 M
(void) s
/F-gs-font 10 10 SF
0 setgray
89 696 M
(\) {) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 685 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
( c = 0;) s
5 674 M
(    bool intr_flag;) s
5 663 M
(    local_intr_save\(intr_flag\);) s
5 652 M
(    {) s
5 641 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 641 M
(// poll for any pending input characters,) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 630 M
(// so that this function works even when interrupts are disabled) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 619 M
(// \(e.g., when called from the kernel monitor\).) s
/F-gs-font 10 10 SF
0 setgray
5 608 M
(        serial_intr\(\);) s
5 597 M
(        kbd_intr\(\);) s
5 575 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 575 M
(// grab the next character from the input buffer.) s
/F-gs-font 10 10 SF
0 setgray
5 564 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 564 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 564 M
( \(cons.rpos != cons.wpos\) {) s
5 553 M
(            c = cons.buf[cons.rpos ++];) s
5 542 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 542 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 542 M
( \(cons.rpos == CONSBUFSIZE\) {) s
5 531 M
(                cons.rpos = 0;) s
5 520 M
(            }) s
5 509 M
(        }) s
5 498 M
(    }) s
5 487 M
(    local_intr_restore\(intr_flag\);) s
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 476 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 476 M
( c;) s
5 465 M
(}) s
5 443 M
([ucore/lab8_result/kern/driver/ide.h] ++++++++++++++++++++++++++++++) s
5 432 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 432 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 432 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 432 M
(__KERN_DRIVER_IDE_H__) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 421 M
(__KERN_DRIVER_IDE_H__) s
/F-gs-font 10 10 SF
0 setgray
5 399 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 399 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 399 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 399 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 377 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 377 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 377 M
(ide_init) s
/F-gs-font 10 10 SF
0 setgray
83 377 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 377 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 377 M
(\);) s
5 366 M
(bool ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 366 M
(ide_device_valid) s
/F-gs-font 10 10 SF
0 setgray
131 366 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 366 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
185 366 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 366 M
(short) s
/F-gs-font 10 10 SF
0 setgray
221 366 M
( ideno\);) s
5 355 M
(size_t ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
47 355 M
(ide_device_size) s
/F-gs-font 10 10 SF
0 setgray
137 355 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 355 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
191 355 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 355 M
(short) s
/F-gs-font 10 10 SF
0 setgray
227 355 M
( ideno\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 333 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 333 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 333 M
(ide_read_secs) s
/F-gs-font 10 10 SF
0 setgray
107 333 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 333 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
161 333 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 333 M
(short) s
/F-gs-font 10 10 SF
0 setgray
197 333 M
( ideno, uint32_t secno, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
341 333 M
(void) s
/F-gs-font 10 10 SF
0 setgray
365 333 M
( *dst, size_t nsecs\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 322 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 322 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 322 M
(ide_write_secs) s
/F-gs-font 10 10 SF
0 setgray
113 322 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 322 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
167 322 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 322 M
(short) s
/F-gs-font 10 10 SF
0 setgray
203 322 M
( ideno, uint32_t secno, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
347 322 M
(const) s
/F-gs-font 10 10 SF
0 setgray
377 322 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
383 322 M
(void) s
/F-gs-font 10 10 SF
0 setgray
407 322 M
( *src, size_t nsecs\);) s
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 300 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 300 M
(/* !__KERN_DRIVER_IDE_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
([ucore/lab8_result/kern/process/entry.S] ++++++++++++++++++++++++++++++) s
5 267 M
(.text) s
5 256 M
(.globl kernel_thread_entry) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 245 M
(kernel_thread_entry) s
/F-gs-font 10 10 SF
0 setgray
119 245 M
(:        # ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 245 M
(void) s
/F-gs-font 10 10 SF
0 setgray
209 245 M
( kernel_thread\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
299 245 M
(void) s
/F-gs-font 10 10 SF
0 setgray
323 245 M
(\)) s
5 223 M
(    pushl %edx              # push arg) s
5 212 M
(    call *%ebx              # call fn) s
5 190 M
(    pushl %eax              # save the ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
239 190 M
(return) s
/F-gs-font 10 10 SF
0 setgray
275 190 M
( value of fn\(arg\)) s
5 179 M
(    call do_exit            # call do_exit to terminate current thread) s
5 157 M
([ucore/lab8_result/kern/process/proc.h] ++++++++++++++++++++++++++++++) s
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 146 M
(__KERN_PROCESS_PROC_H__) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 135 M
(__KERN_PROCESS_PROC_H__) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 113 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 113 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 102 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 102 M
(<list.h>) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 91 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 91 M
(<trap.h>) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 80 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 80 M
(<memlayout.h>) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 69 M
(<skew_heap.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 36 M
(// process's state in his life cycle) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(enum) s
/F-gs-font 10 10 SF
0 setgray
29 25 M
( proc_state {) s
5 14 M
(    PROC_UNINIT = 0,  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
137 14 M
(// uninitialized) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(    PROC_SLEEPING,    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
137 3 M
(// sleeping) s
_R
S
%%Page: (81) 81
%%BeginPageSetup
_S
18 36 translate
/pagenum 81 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
/F-gs-font 10 10 SF
0 setgray
5 707 M
(    PROC_RUNNABLE,    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
137 707 M
(// runnable\(maybe running\)) s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(    PROC_ZOMBIE,      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
137 696 M
(// almost dead, and wait parent proc to reclaim his resource) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(};) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 663 M
(// Saved registers for kernel context switches.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 652 M
(// Don't need to save all the %fs etc. segment registers,) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 641 M
(// because they are constant across kernel contexts.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 630 M
(// Save all the regular registers so we don't need to care) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 619 M
(// which are caller save, but not the return register %eax.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 608 M
(// \(Not saving %eax just simplifies the switching code.\)) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 597 M
(// The layout of context must match code in switch.S.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 586 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 586 M
( context {) s
5 575 M
(    uint32_t eip;) s
5 564 M
(    uint32_t esp;) s
5 553 M
(    uint32_t ebx;) s
5 542 M
(    uint32_t ecx;) s
5 531 M
(    uint32_t edx;) s
5 520 M
(    uint32_t esi;) s
5 509 M
(    uint32_t edi;) s
5 498 M
(    uint32_t ebp;) s
5 487 M
(};) s
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 465 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 465 M
(PROC_NAME_LEN) s
/F-gs-font 10 10 SF
0 setgray
131 465 M
(               50) s
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 454 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 454 M
(MAX_PROCESS) s
/F-gs-font 10 10 SF
0 setgray
119 454 M
(                 4096) s
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 443 M
(MAX_PID) s
/F-gs-font 10 10 SF
0 setgray
95 443 M
(                     \(MAX_PROCESS * 2\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 421 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
( list_entry_t proc_list;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 399 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
( inode;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 377 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
( proc_struct {) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 366 M
(enum) s
/F-gs-font 10 10 SF
0 setgray
53 366 M
( proc_state state;                      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 366 M
(// Process state) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 355 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 355 M
( pid;                                    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 355 M
(// Process ID) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 344 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 344 M
( runs;                                   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 344 M
(// the running times of Proces) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(    uintptr_t kstack;                           ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 333 M
(// Process kernel stack) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 322 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
77 322 M
( bool need_resched;                 ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 322 M
(// bool value: need to be rescheduled to relea) s
5 311 M
(se CPU?) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 300 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 300 M
( proc_struct *parent;                 ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 300 M
(// the parent process) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 289 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 289 M
( mm_struct *mm;                       ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 289 M
(// Process's memory management field) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 278 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 278 M
( context context;                     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 278 M
(// Switch here to run process) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 267 M
( trapframe *tf;                       ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 267 M
(// Trap frame for current interrupt) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(    uintptr_t cr3;                              ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 256 M
(// CR3 register: the base addr of Page Directr) s
5 245 M
(oy Table\(PDT\)) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(    uint32_t flags;                             ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 234 M
(// Process flag) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 223 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 223 M
( name[PROC_NAME_LEN + 1];               ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 223 M
(// Process name) s
/F-gs-font 10 10 SF
0 setgray
5 212 M
(    list_entry_t list_link;                     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 212 M
(// Process link list) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(    list_entry_t hash_link;                     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 201 M
(// Process hash list) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 190 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( exit_code;                              ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 190 M
(// exit code \(be sent to parent proc\)) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(    uint32_t wait_state;                        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 179 M
(// waiting state) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 168 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 168 M
( proc_struct *cptr, *yptr, *optr;     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 168 M
(// relations between processes) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 157 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 157 M
( run_queue *rq;                       ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 157 M
(// running queue contains Process) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(    list_entry_t run_link;                      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 146 M
(// the entry linked in run queue) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( time_slice;                             ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 135 M
(// time slice for occupying the CPU) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(    skew_heap_entry_t lab6_run_pool;            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 124 M
(// FOR LAB6 ONLY: the entry in the run pool) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(    uint32_t lab6_stride;                       ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 113 M
(// FOR LAB6 ONLY: the current stride of the pr) s
5 102 M
(ocess) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(    uint32_t lab6_priority;                     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 91 M
(// FOR LAB6 ONLY: the priority of process, set) s
5 80 M
( by lab6_set_priority\(uint32_t\)) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 69 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 69 M
( files_struct *filesp;                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 69 M
(// the file related info\(pwd, files_count, fil) s
5 58 M
(es_array, fs_semaphore\) of process) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(};) s
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 25 M
(PF_EXITING) s
/F-gs-font 10 10 SF
0 setgray
113 25 M
(                  0x00000001      // getting shutdown) s
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 3 M
(WT_INTERRUPTED) s
/F-gs-font 10 10 SF
0 setgray
137 3 M
(               0x80000000                    // the wait state could be ) s
_R
S
%%Page: (82) 82
%%BeginPageSetup
_S
18 36 translate
/pagenum 82 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(interrupted) s
5 696 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 696 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 696 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 696 M
(WT_CHILD) s
/F-gs-font 10 10 SF
0 setgray
101 696 M
(                    \(0x00000001 | WT_INTERRUPTED\)  // wait child process) s
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 685 M
(WT_KSEM) s
/F-gs-font 10 10 SF
0 setgray
95 685 M
(                      0x00000100                    // wait kernel semaphore) s
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 674 M
(WT_TIMER) s
/F-gs-font 10 10 SF
0 setgray
101 674 M
(                    \(0x00000002 | WT_INTERRUPTED\)  // wait timer) s
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 663 M
(WT_KBD) s
/F-gs-font 10 10 SF
0 setgray
89 663 M
(                      \(0x00000004 | WT_INTERRUPTED\)  // wait the input of keyboa) s
5 652 M
(rd) s
5 630 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 630 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 630 M
(le2proc) s
/F-gs-font 10 10 SF
0 setgray
95 630 M
(\(le, member\)         \\) s
5 619 M
(    to_struct\(\(le\), struct proc_struct, member\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 597 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 597 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 597 M
( proc_struct *idleproc, *initproc, *current;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 575 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 575 M
(proc_init) s
/F-gs-font 10 10 SF
0 setgray
89 575 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 575 M
(void) s
/F-gs-font 10 10 SF
0 setgray
119 575 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 564 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 564 M
(proc_run) s
/F-gs-font 10 10 SF
0 setgray
83 564 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 564 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 564 M
( proc_struct *proc\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 553 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 553 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 553 M
(kernel_thread) s
/F-gs-font 10 10 SF
0 setgray
107 553 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 553 M
(int) s
/F-gs-font 10 10 SF
0 setgray
131 553 M
( \(*fn\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 553 M
(void) s
/F-gs-font 10 10 SF
0 setgray
197 553 M
( *\), ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 553 M
(void) s
/F-gs-font 10 10 SF
0 setgray
251 553 M
( *arg, uint32_t clone_flags\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 531 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 531 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
41 531 M
(set_proc_name) s
/F-gs-font 10 10 SF
0 setgray
119 531 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 531 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
161 531 M
( proc_struct *proc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
281 531 M
(const) s
/F-gs-font 10 10 SF
0 setgray
311 531 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
317 531 M
(char) s
/F-gs-font 10 10 SF
0 setgray
341 531 M
( *name\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 520 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 520 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
41 520 M
(get_proc_name) s
/F-gs-font 10 10 SF
0 setgray
119 520 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 520 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
161 520 M
( proc_struct *proc\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 509 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 509 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 509 M
(cpu_idle) s
/F-gs-font 10 10 SF
0 setgray
83 509 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 509 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 509 M
(\) __attribute__\(\(noreturn\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 487 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( proc_struct *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
125 487 M
(find_proc) s
/F-gs-font 10 10 SF
0 setgray
179 487 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 487 M
(int) s
/F-gs-font 10 10 SF
0 setgray
203 487 M
( pid\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 476 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 476 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 476 M
(do_fork) s
/F-gs-font 10 10 SF
0 setgray
71 476 M
(\(uint32_t clone_flags, uintptr_t stack, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
311 476 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
347 476 M
( trapframe *tf\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 465 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 465 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 465 M
(do_exit) s
/F-gs-font 10 10 SF
0 setgray
71 465 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 465 M
(int) s
/F-gs-font 10 10 SF
0 setgray
95 465 M
( error_code\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 454 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 454 M
(do_yield) s
/F-gs-font 10 10 SF
0 setgray
77 454 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 454 M
(void) s
/F-gs-font 10 10 SF
0 setgray
107 454 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 443 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 443 M
(do_execve) s
/F-gs-font 10 10 SF
0 setgray
83 443 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 443 M
(const) s
/F-gs-font 10 10 SF
0 setgray
119 443 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 443 M
(char) s
/F-gs-font 10 10 SF
0 setgray
149 443 M
( *name, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
215 443 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 443 M
(const) s
/F-gs-font 10 10 SF
0 setgray
287 443 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
293 443 M
(char) s
/F-gs-font 10 10 SF
0 setgray
317 443 M
( **argv\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 432 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 432 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 432 M
(do_wait) s
/F-gs-font 10 10 SF
0 setgray
71 432 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 432 M
(int) s
/F-gs-font 10 10 SF
0 setgray
95 432 M
( pid, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 432 M
(int) s
/F-gs-font 10 10 SF
0 setgray
149 432 M
( *code_store\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 421 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 421 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 421 M
(do_kill) s
/F-gs-font 10 10 SF
0 setgray
71 421 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 421 M
(int) s
/F-gs-font 10 10 SF
0 setgray
95 421 M
( pid\);) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 410 M
(//FOR LAB6, set the process's priority \(bigger value will get more CPU time\)) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 399 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 399 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 399 M
(lab6_set_priority) s
/F-gs-font 10 10 SF
0 setgray
137 399 M
(\(uint32_t priority\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 388 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 388 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 388 M
(do_sleep) s
/F-gs-font 10 10 SF
0 setgray
77 388 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 388 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
131 388 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 388 M
(int) s
/F-gs-font 10 10 SF
0 setgray
155 388 M
( time\);) s
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 377 M
(/* !__KERN_PROCESS_PROC_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
([ucore/lab8_result/kern/process/proc.c] ++++++++++++++++++++++++++++++) s
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 344 M
(<proc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 333 M
(<kmalloc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 322 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 322 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 311 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 311 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 311 M
(<sync.h>) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 300 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 300 M
(<pmm.h>) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 289 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 289 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 278 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 278 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 278 M
(<sched.h>) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 267 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 267 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 267 M
(<elf.h>) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 256 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 256 M
(<vmm.h>) s
/F-gs-font 10 10 SF
0 setgray
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 245 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 245 M
(<trap.h>) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 234 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 234 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 234 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 223 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 223 M
(<stdlib.h>) s
/F-gs-font 10 10 SF
0 setgray
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 212 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 212 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 201 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 201 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 190 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 190 M
(<fs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 179 M
(<vfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 168 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 168 M
(<sysfile.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 146 M
(/* ------------- process/thread mechanism design&implementation -------------) s
5 135 M
(\(an simplified Linux process/thread mechanism \)) s
5 124 M
(introduction:) s
5 113 M
(  ucore implements a simple process/thread mechanism. process contains the independent memory ) s
5 102 M
(sapce, at least one threads) s
5 91 M
(for execution, the kernel data\(for management\), processor state \(for context switch\), files\(in) s
5 80 M
( lab6\), etc. ucore needs to) s
5 69 M
(manage all these details efficiently. In ucore, a thread is just a special kind of process\(sha) s
5 58 M
(re process's memory\).) s
5 47 M
(------------------------------) s
5 36 M
(process state       :     meaning               -- reason) s
5 25 M
(    PROC_UNINIT     :   uninitialized           -- alloc_proc) s
5 14 M
(    PROC_SLEEPING   :   sleeping                -- try_free_pages, do_wait, do_sleep) s
5 3 M
(    PROC_RUNNABLE   :   runnable\(maybe running\) -- proc_init, wakeup_proc, ) s
_R
S
%%Page: (83) 83
%%BeginPageSetup
_S
18 36 translate
/pagenum 83 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
(    PROC_ZOMBIE     :   almost dead             -- do_exit) s
5 685 M
(-----------------------------) s
5 674 M
(process state changing:) s
5 663 M
(                                            ) s
5 652 M
(  alloc_proc                                 RUNNING) s
5 641 M
(      +                                   +--<----<--+) s
5 630 M
(      +                                   + proc_run +) s
5 619 M
(      V                                   +-->---->--+ ) s
5 608 M
(PROC_UNINIT -- proc_init/wakeup_proc --> PROC_RUNNABLE -- try_free_pages/do_wait/do_sleep --> ) s
5 597 M
(PROC_SLEEPING --) s
5 586 M
(                                           A      +                                           ) s
5 575 M
(                +) s
5 564 M
(                                           |      +--- do_exit --> PROC_ZOMBIE                ) s
5 553 M
(                +) s
5 542 M
(                                           +                                                  ) s
5 531 M
(                + ) s
5 520 M
(                                           -----------------------wakeup_proc-----------------) s
5 509 M
(-----------------) s
5 498 M
(-----------------------------) s
5 487 M
(process relations) s
5 476 M
(parent:           proc->parent  \(proc is children\)) s
5 465 M
(children:         proc->cptr    \(proc is parent\)) s
5 454 M
(older sibling:    proc->optr    \(proc is younger sibling\)) s
5 443 M
(younger sibling:  proc->yptr    \(proc is older sibling\)) s
5 432 M
(-----------------------------) s
5 421 M
(related syscall for process:) s
5 410 M
(SYS_exit        : process exit,                           -->do_exit) s
5 399 M
(SYS_fork        : create child process, dup mm            -->do_fork-->wakeup_proc) s
5 388 M
(SYS_wait        : wait process                            -->do_wait) s
5 377 M
(SYS_exec        : after fork, process execute a program   -->load a program and refresh the mm) s
5 366 M
(SYS_clone       : create child thread                     -->do_fork-->wakeup_proc) s
5 355 M
(SYS_yield       : process flag itself need resecheduling, -- proc->need_sched=1, then schedule) s
5 344 M
(r will rescheule this process) s
5 333 M
(SYS_sleep       : process sleep                           -->do_sleep ) s
5 322 M
(SYS_kill        : kill process                            -->do_kill-->proc->flags |= PF_EXITI) s
5 311 M
(NG) s
5 300 M
(                                                                 -->wakeup_proc-->do_wait-->do) s
5 289 M
(_exit   ) s
5 278 M
(SYS_getpid      : get the process's pid) s
5 256 M
(*/) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 234 M
(// the process set's list) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(list_entry_t proc_list;) s
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 201 M
(HASH_SHIFT) s
/F-gs-font 10 10 SF
0 setgray
113 201 M
(          10) s
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 190 M
(HASH_LIST_SIZE) s
/F-gs-font 10 10 SF
0 setgray
137 190 M
(      \(1 << HASH_SHIFT\)) s
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 179 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 179 M
(pid_hashfn) s
/F-gs-font 10 10 SF
0 setgray
113 179 M
(\(x\)       \(hash32\(x, HASH_SHIFT\)\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 157 M
(// has list for process set based on pid) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( list_entry_t hash_list[HASH_LIST_SIZE];) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 124 M
(// idle proc) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 113 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( proc_struct *idleproc = NULL;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 102 M
(// init proc) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 91 M
( proc_struct *initproc = NULL;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 80 M
(// current proc) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( proc_struct *current = NULL;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 47 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 47 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 47 M
(int) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
( nr_process = 0;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 25 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 25 M
(kernel_thread_entry) s
/F-gs-font 10 10 SF
0 setgray
149 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 25 M
(void) s
/F-gs-font 10 10 SF
0 setgray
179 25 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 14 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 14 M
(forkrets) s
/F-gs-font 10 10 SF
0 setgray
83 14 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 14 M
( trapframe *tf\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 3 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 3 M
(switch_to) s
/F-gs-font 10 10 SF
0 setgray
89 3 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 3 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 3 M
( context *from, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 3 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
263 3 M
( context *to\);) s
_R
S
%%Page: (84) 84
%%BeginPageSetup
_S
18 36 translate
/pagenum 84 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 696 M
(// alloc_proc - alloc a proc_struct and init all fields of proc_struct) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 685 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 685 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 685 M
( proc_struct *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 674 M
(alloc_proc) s
/F-gs-font 10 10 SF
0 setgray
65 674 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 674 M
(void) s
/F-gs-font 10 10 SF
0 setgray
95 674 M
(\) {) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 663 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 663 M
( proc_struct *proc = kmalloc\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
239 663 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
275 663 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
281 663 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
317 663 M
( proc_struct\)\);) s
5 652 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 652 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 652 M
( \(proc != NULL\) {) s
5 641 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 641 M
(//LAB4:EXERCISE1 YOUR CODE) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 630 M
(/*) s
5 619 M
(     * below fields in proc_struct need to be initialized) s
5 608 M
(     *       enum proc_state state;                      // Process state) s
5 597 M
(     *       int pid;                                    // Process ID) s
5 586 M
(     *       int runs;                                   // the running times of Proces) s
5 575 M
(     *       uintptr_t kstack;                           // Process kernel stack) s
5 564 M
(     *       volatile bool need_resched;                 // bool value: need to be rescheduled) s
5 553 M
( to release CPU?) s
5 542 M
(     *       struct proc_struct *parent;                 // the parent process) s
5 531 M
(     *       struct mm_struct *mm;                       // Process's memory management field) s
5 520 M
(     *       struct context context;                     // Switch here to run process) s
5 509 M
(     *       struct trapframe *tf;                       // Trap frame for current interrupt) s
5 498 M
(     *       uintptr_t cr3;                              // CR3 register: the base addr of Pag) s
5 487 M
(e Directroy Table\(PDT\)) s
5 476 M
(     *       uint32_t flags;                             // Process flag) s
5 465 M
(     *       char name[PROC_NAME_LEN + 1];               // Process name) s
5 454 M
(     */) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 443 M
(//LAB5 YOUR CODE : \(update LAB4 steps\)) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 432 M
(/*) s
5 421 M
(     * below fields\(add in LAB5\) in proc_struct need to be initialized  ) s
5 410 M
(     *       uint32_t wait_state;                        // waiting state) s
5 399 M
(     *       struct proc_struct *cptr, *yptr, *optr;     // relations between processes) s
5 388 M
(         */) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 377 M
(//LAB8:EXERCISE2 YOUR CODE HINT:need add some code to init fs in proc_struct, ...) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
(        proc->state = PROC_UNINIT;) s
5 355 M
(        proc->pid = -1;) s
5 344 M
(        proc->runs = 0;) s
5 333 M
(        proc->kstack = 0;) s
5 322 M
(        proc->need_resched = 0;) s
5 311 M
(        proc->parent = NULL;) s
5 300 M
(        proc->mm = NULL;) s
5 289 M
(        memset\(&\(proc->context\), 0, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
221 289 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
257 289 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
263 289 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
299 289 M
( context\)\);) s
5 278 M
(        proc->tf = NULL;) s
5 267 M
(        proc->cr3 = boot_cr3;) s
5 256 M
(        proc->flags = 0;) s
5 245 M
(        memset\(proc->name, 0, PROC_NAME_LEN\);) s
5 234 M
(        proc->wait_state = 0;) s
5 223 M
(        proc->cptr = proc->optr = proc->yptr = NULL;) s
5 212 M
(        proc->rq = NULL;) s
5 201 M
(        list_init\(&\(proc->run_link\)\);) s
5 190 M
(        proc->time_slice = 0;) s
5 179 M
(        proc->lab6_run_pool.left = proc->lab6_run_pool.right = proc->lab6_run_pool.parent = NU) s
5 168 M
(LL;) s
5 157 M
(        proc->lab6_stride = 0;) s
5 146 M
(        proc->lab6_priority = 0;) s
5 135 M
(        proc->filesp = NULL;) s
5 124 M
(    }) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 113 M
( proc;) s
5 102 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 80 M
(// set_proc_name - set the name of proc) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 69 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 58 M
(set_proc_name) s
/F-gs-font 10 10 SF
0 setgray
83 58 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 58 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 58 M
( proc_struct *proc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 58 M
(const) s
/F-gs-font 10 10 SF
0 setgray
275 58 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
281 58 M
(char) s
/F-gs-font 10 10 SF
0 setgray
305 58 M
( *name\) {) s
5 47 M
(    memset\(proc->name, 0, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
161 47 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
197 47 M
(\(proc->name\)\);) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 36 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 36 M
( memcpy\(proc->name, name, PROC_NAME_LEN\);) s
5 25 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 3 M
(// get_proc_name - get the name of proc) s
_R
S
%%Page: (85) 85
%%BeginPageSetup
_S
18 36 translate
/pagenum 85 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 707 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 696 M
(get_proc_name) s
/F-gs-font 10 10 SF
0 setgray
83 696 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 696 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 696 M
( proc_struct *proc\) {) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 685 M
(static) s
/F-gs-font 10 10 SF
0 setgray
65 685 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 685 M
(char) s
/F-gs-font 10 10 SF
0 setgray
95 685 M
( name[PROC_NAME_LEN + 1];) s
5 674 M
(    memset\(name, 0, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 674 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
161 674 M
(\(name\)\);) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 663 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 663 M
( memcpy\(name, proc->name, PROC_NAME_LEN\);) s
5 652 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 630 M
(// set_links - set the relation links of process) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 619 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 619 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 608 M
(set_links) s
/F-gs-font 10 10 SF
0 setgray
59 608 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 608 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 608 M
( proc_struct *proc\) {) s
5 597 M
(    list_add\(&proc_list, &\(proc->list_link\)\);) s
5 586 M
(    proc->yptr = NULL;) s
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 575 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( \(\(proc->optr = proc->parent->cptr\) != NULL\) {) s
5 564 M
(        proc->optr->yptr = proc;) s
5 553 M
(    }) s
5 542 M
(    proc->parent->cptr = proc;) s
5 531 M
(    nr_process ++;) s
5 520 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 498 M
(// remove_links - clean the relation links of process) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 487 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 487 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 476 M
(remove_links) s
/F-gs-font 10 10 SF
0 setgray
77 476 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 476 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 476 M
( proc_struct *proc\) {) s
5 465 M
(    list_del\(&\(proc->list_link\)\);) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( \(proc->optr != NULL\) {) s
5 443 M
(        proc->optr->yptr = proc->yptr;) s
5 432 M
(    }) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 421 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
( \(proc->yptr != NULL\) {) s
5 410 M
(        proc->yptr->optr = proc->optr;) s
5 399 M
(    }) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 388 M
( {) s
5 377 M
(       proc->parent->cptr = proc->optr;) s
5 366 M
(    }) s
5 355 M
(    nr_process --;) s
5 344 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 322 M
(// get_pid - alloc a unique pid for process) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 311 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 311 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 311 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 300 M
(get_pid) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 300 M
(void) s
/F-gs-font 10 10 SF
0 setgray
77 300 M
(\) {) s
5 289 M
(    static_assert\(MAX_PID > MAX_PROCESS\);) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 278 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 278 M
( proc_struct *proc;) s
5 267 M
(    list_entry_t *list = &proc_list, *le;) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 256 M
(static) s
/F-gs-font 10 10 SF
0 setgray
65 256 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 256 M
(int) s
/F-gs-font 10 10 SF
0 setgray
89 256 M
( next_safe = MAX_PID, last_pid = MAX_PID;) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 245 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 245 M
( \(++ last_pid >= MAX_PID\) {) s
5 234 M
(        last_pid = 1;) s
5 223 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 223 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 223 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 223 M
(inside) s
/F-gs-font 10 10 SF
0 setgray
119 223 M
(;) s
5 212 M
(    }) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 201 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 201 M
( \(last_pid >= next_safe\) {) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
29 190 M
(inside) s
/F-gs-font 10 10 SF
0 setgray
65 190 M
(:) s
5 179 M
(        next_safe = MAX_PID;) s
5 168 M
(    ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
29 168 M
(repeat) s
/F-gs-font 10 10 SF
0 setgray
65 168 M
(:) s
5 157 M
(        le = list;) s
5 146 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 146 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 146 M
( \(\(le = list_next\(le\)\) != list\) {) s
5 135 M
(            proc = le2proc\(le, list_link\);) s
5 124 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 124 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 124 M
( \(proc->pid == last_pid\) {) s
5 113 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 113 M
( \(++ last_pid >= next_safe\) {) s
5 102 M
(                    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 102 M
(if) s
/F-gs-font 10 10 SF
0 setgray
137 102 M
( \(last_pid >= MAX_PID\) {) s
5 91 M
(                        last_pid = 1;) s
5 80 M
(                    }) s
5 69 M
(                    next_safe = MAX_PID;) s
5 58 M
(                    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 58 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
149 58 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
155 58 M
(repeat) s
/F-gs-font 10 10 SF
0 setgray
191 58 M
(;) s
5 47 M
(                }) s
5 36 M
(            }) s
5 25 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 25 M
(else) s
/F-gs-font 10 10 SF
0 setgray
101 25 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
107 25 M
(if) s
/F-gs-font 10 10 SF
0 setgray
119 25 M
( \(proc->pid > last_pid && next_safe > proc->pid\) {) s
5 14 M
(                next_safe = proc->pid;) s
5 3 M
(            }) s
_R
S
%%Page: (86) 86
%%BeginPageSetup
_S
18 36 translate
/pagenum 86 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        }) s
5 696 M
(    }) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 685 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 685 M
( last_pid;) s
5 674 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 652 M
(// proc_run - make process "proc" running on cpu) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 641 M
(// NOTE: before call switch_to, should load  base addr of "proc"'s new PDT) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 630 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 619 M
(proc_run) s
/F-gs-font 10 10 SF
0 setgray
53 619 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 619 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 619 M
( proc_struct *proc\) {) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 608 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 608 M
( \(proc != current\) {) s
5 597 M
(        bool intr_flag;) s
5 586 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 586 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 586 M
( proc_struct *prev = current, *next = proc;) s
5 575 M
(        local_intr_save\(intr_flag\);) s
5 564 M
(        {) s
5 553 M
(            current = proc;) s
5 542 M
(            load_esp0\(next->kstack + KSTACKSIZE\);) s
5 531 M
(            lcr3\(next->cr3\);) s
5 520 M
(            switch_to\(&\(prev->context\), &\(next->context\)\);) s
5 509 M
(        }) s
5 498 M
(        local_intr_restore\(intr_flag\);) s
5 487 M
(    }) s
5 476 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 454 M
(// forkret -- the first kernel entry point of a new thread/process) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 443 M
(// NOTE: the addr of forkret is setted in copy_thread function) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 432 M
(//       after switch_to, the current proc will execute here.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 421 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 421 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 410 M
(forkret) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 410 M
(void) s
/F-gs-font 10 10 SF
0 setgray
77 410 M
(\) {) s
5 399 M
(    forkrets\(current->tf\);) s
5 388 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 366 M
(// hash_proc - add proc into proc hash_list) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 355 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 355 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 355 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 344 M
(hash_proc) s
/F-gs-font 10 10 SF
0 setgray
59 344 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 344 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 344 M
( proc_struct *proc\) {) s
5 333 M
(    list_add\(hash_list + pid_hashfn\(proc->pid\), &\(proc->hash_link\)\);) s
5 322 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 300 M
(// unhash_proc - delete proc from proc hash_list) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 289 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 278 M
(unhash_proc) s
/F-gs-font 10 10 SF
0 setgray
71 278 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 278 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 278 M
( proc_struct *proc\) {) s
5 267 M
(    list_del\(&\(proc->hash_link\)\);) s
5 256 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 234 M
(// find_proc - find proc frome proc hash_list according to pid) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 223 M
( proc_struct *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 212 M
(find_proc) s
/F-gs-font 10 10 SF
0 setgray
59 212 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
83 212 M
( pid\) {) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 201 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 201 M
( \(0 < pid && pid < MAX_PID\) {) s
5 190 M
(        list_entry_t *list = hash_list + pid_hashfn\(pid\), *le = list;) s
5 179 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 179 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 179 M
( \(\(le = list_next\(le\)\) != list\) {) s
5 168 M
(            ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 168 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 168 M
( proc_struct *proc = le2proc\(le, hash_link\);) s
5 157 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 157 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 157 M
( \(proc->pid == pid\) {) s
5 146 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 146 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 146 M
( proc;) s
5 135 M
(            }) s
5 124 M
(        }) s
5 113 M
(    }) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 102 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 102 M
( NULL;) s
5 91 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 69 M
(// kernel_thread - create a kernel thread using "fn" function) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 58 M
(// NOTE: the contents of temp trapframe tf will be copied to ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 47 M
(//       proc->tf in do_fork-->copy_thread function) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 25 M
(kernel_thread) s
/F-gs-font 10 10 SF
0 setgray
83 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 25 M
( \(*fn\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 25 M
(void) s
/F-gs-font 10 10 SF
0 setgray
173 25 M
( *\), ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 25 M
(void) s
/F-gs-font 10 10 SF
0 setgray
227 25 M
( *arg, uint32_t clone_flags\) {) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
( trapframe tf;) s
5 3 M
(    memset\(&tf, 0, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
119 3 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
155 3 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
161 3 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
197 3 M
( trapframe\)\);) s
_R
S
%%Page: (87) 87
%%BeginPageSetup
_S
18 36 translate
/pagenum 87 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    tf.tf_cs = KERNEL_CS;) s
5 696 M
(    tf.tf_ds = tf.tf_es = tf.tf_ss = KERNEL_DS;) s
5 685 M
(    tf.tf_regs.reg_ebx = \(uint32_t\)fn;) s
5 674 M
(    tf.tf_regs.reg_edx = \(uint32_t\)arg;) s
5 663 M
(    tf.tf_eip = \(uint32_t\)kernel_thread_entry;) s
5 652 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 652 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 652 M
( do_fork\(clone_flags | CLONE_VM, 0, &tf\);) s
5 641 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 619 M
(// setup_kstack - alloc pages with size KSTACKPAGE as process kernel stack) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 608 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 608 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 608 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 597 M
(setup_kstack) s
/F-gs-font 10 10 SF
0 setgray
77 597 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 597 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 597 M
( proc_struct *proc\) {) s
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 586 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 586 M
( Page *page = alloc_pages\(KSTACKPAGE\);) s
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 575 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( \(page != NULL\) {) s
5 564 M
(        proc->kstack = \(uintptr_t\)page2kva\(page\);) s
5 553 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 553 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 553 M
( 0;) s
5 542 M
(    }) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 531 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 531 M
( -E_NO_MEM;) s
5 520 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 498 M
(// put_kstack - free the memory space of process kernel stack) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 487 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 487 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 476 M
(put_kstack) s
/F-gs-font 10 10 SF
0 setgray
65 476 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 476 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 476 M
( proc_struct *proc\) {) s
5 465 M
(    free_pages\(kva2page\(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 465 M
(void) s
/F-gs-font 10 10 SF
0 setgray
179 465 M
( *\)\(proc->kstack\)\), KSTACKPAGE\);) s
5 454 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 432 M
(// setup_pgdir - alloc one page as PDT) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 421 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 421 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 410 M
(setup_pgdir) s
/F-gs-font 10 10 SF
0 setgray
71 410 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 410 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 410 M
( mm_struct *mm\) {) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 399 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 399 M
( Page *page;) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 388 M
( \(\(page = alloc_page\(\)\) == NULL\) {) s
5 377 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 377 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 377 M
( -E_NO_MEM;) s
5 366 M
(    }) s
5 355 M
(    pde_t *pgdir = page2kva\(page\);) s
5 344 M
(    memcpy\(pgdir, boot_pgdir, PGSIZE\);) s
5 333 M
(    pgdir[PDX\(VPT\)] = PADDR\(pgdir\) | PTE_P | PTE_W;) s
5 322 M
(    mm->pgdir = pgdir;) s
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 311 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 311 M
( 0;) s
5 300 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 278 M
(// put_pgdir - free the memory space of PDT) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 267 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 256 M
(put_pgdir) s
/F-gs-font 10 10 SF
0 setgray
59 256 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 256 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 256 M
( mm_struct *mm\) {) s
5 245 M
(    free_page\(kva2page\(mm->pgdir\)\);) s
5 234 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 212 M
(// copy_mm - process "proc" duplicate OR share process "current"'s mm according clone_flags) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 201 M
(//         - if clone_flags & CLONE_VM, then "share" ; else "duplicate") s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 190 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 190 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 190 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 179 M
(copy_mm) s
/F-gs-font 10 10 SF
0 setgray
47 179 M
(\(uint32_t clone_flags, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 179 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
221 179 M
( proc_struct *proc\) {) s
5 168 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 168 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 168 M
( mm_struct *mm, *oldmm = current->mm;) s
5 146 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 146 M
(/* current is a kernel thread */) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 135 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 135 M
( \(oldmm == NULL\) {) s
5 124 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 124 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 124 M
( 0;) s
5 113 M
(    }) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 102 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 102 M
( \(clone_flags & CLONE_VM\) {) s
5 91 M
(        mm = oldmm;) s
5 80 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 80 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 80 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 80 M
(good_mm) s
/F-gs-font 10 10 SF
0 setgray
125 80 M
(;) s
5 69 M
(    }) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 47 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( ret = -E_NO_MEM;) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 36 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 36 M
( \(\(mm = mm_create\(\)\) == NULL\) {) s
5 25 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 25 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 25 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 25 M
(bad_mm) s
/F-gs-font 10 10 SF
0 setgray
119 25 M
(;) s
5 14 M
(    }) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 3 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 3 M
( \(setup_pgdir\(mm\) != 0\) {) s
_R
S
%%Page: (88) 88
%%BeginPageSetup
_S
18 36 translate
/pagenum 88 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 707 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 707 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 707 M
(bad_pgdir_cleanup_mm) s
/F-gs-font 10 10 SF
0 setgray
203 707 M
(;) s
5 696 M
(    }) s
5 674 M
(    lock_mm\(oldmm\);) s
5 663 M
(    {) s
5 652 M
(        ret = dup_mmap\(mm, oldmm\);) s
5 641 M
(    }) s
5 630 M
(    unlock_mm\(oldmm\);) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 608 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 608 M
( \(ret != 0\) {) s
5 597 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 597 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 597 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 597 M
(bad_dup_cleanup_mmap) s
/F-gs-font 10 10 SF
0 setgray
203 597 M
(;) s
5 586 M
(    }) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(good_mm) s
/F-gs-font 10 10 SF
0 setgray
47 564 M
(:) s
5 553 M
(    mm_count_inc\(mm\);) s
5 542 M
(    proc->mm = mm;) s
5 531 M
(    proc->cr3 = PADDR\(mm->pgdir\);) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 520 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
( 0;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 509 M
(bad_dup_cleanup_mmap) s
/F-gs-font 10 10 SF
0 setgray
125 509 M
(:) s
5 498 M
(    exit_mmap\(mm\);) s
5 487 M
(    put_pgdir\(mm\);) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 476 M
(bad_pgdir_cleanup_mm) s
/F-gs-font 10 10 SF
0 setgray
125 476 M
(:) s
5 465 M
(    mm_destroy\(mm\);) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 454 M
(bad_mm) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
(:) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 443 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 443 M
( ret;) s
5 432 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 410 M
(// copy_thread - setup the trapframe on the  process's kernel stack top and) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 399 M
(//             - setup the kernel entry point and stack of process) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 388 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 388 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 388 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 377 M
(copy_thread) s
/F-gs-font 10 10 SF
0 setgray
71 377 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 377 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 377 M
( proc_struct *proc, uintptr_t esp, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
323 377 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
359 377 M
( trapframe *tf\) {) s
5 366 M
(    proc->tf = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 366 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 366 M
( trapframe *\)\(proc->kstack + KSTACKSIZE\) - 1;) s
5 355 M
(    *\(proc->tf\) = *tf;) s
5 344 M
(    proc->tf->tf_regs.reg_eax = 0;) s
5 333 M
(    proc->tf->tf_esp = esp;) s
5 322 M
(    proc->tf->tf_eflags |= FL_IF;) s
5 300 M
(    proc->context.eip = \(uintptr_t\)forkret;) s
5 289 M
(    proc->context.esp = \(uintptr_t\)\(proc->tf\);) s
5 278 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 256 M
(//copy_fs&put_fs function used by do_fork in LAB8) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 245 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 245 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 245 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 234 M
(copy_fs) s
/F-gs-font 10 10 SF
0 setgray
47 234 M
(\(uint32_t clone_flags, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 234 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
221 234 M
( proc_struct *proc\) {) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 223 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 223 M
( files_struct *filesp, *old_filesp = current->filesp;) s
5 212 M
(    assert\(old_filesp != NULL\);) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 190 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 190 M
( \(clone_flags & CLONE_FS\) {) s
5 179 M
(        filesp = old_filesp;) s
5 168 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 168 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 168 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 168 M
(good_files_struct) s
/F-gs-font 10 10 SF
0 setgray
185 168 M
(;) s
5 157 M
(    }) s
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( ret = -E_NO_MEM;) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 124 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 124 M
( \(\(filesp = files_create\(\)\) == NULL\) {) s
5 113 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 113 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 113 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 113 M
(bad_files_struct) s
/F-gs-font 10 10 SF
0 setgray
179 113 M
(;) s
5 102 M
(    }) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 80 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 80 M
( \(\(ret = dup_files\(filesp, old_filesp\)\) != 0\) {) s
5 69 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 69 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 69 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 69 M
(bad_dup_cleanup_fs) s
/F-gs-font 10 10 SF
0 setgray
191 69 M
(;) s
5 58 M
(    }) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 36 M
(good_files_struct) s
/F-gs-font 10 10 SF
0 setgray
107 36 M
(:) s
5 25 M
(    files_count_inc\(filesp\);) s
5 14 M
(    proc->filesp = filesp;) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 3 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 3 M
( 0;) s
_R
S
%%Page: (89) 89
%%BeginPageSetup
_S
18 36 translate
/pagenum 89 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 696 M
(bad_dup_cleanup_fs) s
/F-gs-font 10 10 SF
0 setgray
113 696 M
(:) s
5 685 M
(    files_destroy\(filesp\);) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 674 M
(bad_files_struct) s
/F-gs-font 10 10 SF
0 setgray
101 674 M
(:) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 663 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 663 M
( ret;) s
5 652 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 630 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 630 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 630 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 619 M
(put_fs) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 619 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 619 M
( proc_struct *proc\) {) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 608 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 608 M
( files_struct *filesp = proc->filesp;) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 597 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( \(filesp != NULL\) {) s
5 586 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 586 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 586 M
( \(files_count_dec\(filesp\) == 0\) {) s
5 575 M
(            files_destroy\(filesp\);) s
5 564 M
(        }) s
5 553 M
(    }) s
5 542 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 520 M
(/* do_fork -     parent process for a new child process) s
5 509 M
( * @clone_flags: used to guide how to clone the child process) s
5 498 M
( * @stack:       the parent's user stack pointer. if stack==0, It means to fork a kernel threa) s
5 487 M
(d.) s
5 476 M
( * @tf:          the trapframe info, which will be copied to child process's proc->tf) s
5 465 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 443 M
(do_fork) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
(\(uint32_t clone_flags, uintptr_t stack, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
287 443 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
323 443 M
( trapframe *tf\) {) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 432 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 432 M
( ret = -E_NO_FREE_PROC;) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 421 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 421 M
( proc_struct *proc;) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 410 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 410 M
( \(nr_process >= MAX_PROCESS\) {) s
5 399 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 399 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 399 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 399 M
(fork_out) s
/F-gs-font 10 10 SF
0 setgray
131 399 M
(;) s
5 388 M
(    }) s
5 377 M
(    ret = -E_NO_MEM;) s
5 366 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 366 M
(//LAB4:EXERCISE2 YOUR CODE) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 355 M
(//LAB8:EXERCISE2 YOUR CODE  HINT:how to copy the fs in parent's proc_struct?) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 344 M
(/*) s
5 333 M
(     * Some Useful MACROs, Functions and DEFINEs, you can use them in below implementation.) s
5 322 M
(     * MACROs or Functions:) s
5 311 M
(     *   alloc_proc:   create a proc struct and init fields \(lab4:exercise1\)) s
5 300 M
(     *   setup_kstack: alloc pages with size KSTACKPAGE as process kernel stack) s
5 289 M
(     *   copy_mm:      process "proc" duplicate OR share process "current"'s mm according clon) s
5 278 M
(e_flags) s
5 267 M
(     *                 if clone_flags & CLONE_VM, then "share" ; else "duplicate") s
5 256 M
(     *   copy_thread:  setup the trapframe on the  process's kernel stack top and) s
5 245 M
(     *                 setup the kernel entry point and stack of process) s
5 234 M
(     *   hash_proc:    add proc into proc hash_list) s
5 223 M
(     *   get_pid:      alloc a unique pid for process) s
5 212 M
(     *   wakeup_proc:  set proc->state = PROC_RUNNABLE) s
5 201 M
(     * VARIABLES:) s
5 190 M
(     *   proc_list:    the process set's list) s
5 179 M
(     *   nr_process:   the number of process set) s
5 168 M
(     */) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 146 M
(//    1. call alloc_proc to allocate a proc_struct) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 135 M
(//    2. call setup_kstack to allocate a kernel stack for child process) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 124 M
(//    3. call copy_mm to dup OR share mm according clone_flag) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 113 M
(//    4. call copy_thread to setup tf & context in proc_struct) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 102 M
(//    5. insert proc_struct into hash_list && proc_list) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 91 M
(//    6. call wakeup_proc to make the new child process RUNNABLE) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 80 M
(//    7. set ret vaule using child proc's pid) s
/F-gs-font 10 10 SF
0 setgray
5 58 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 58 M
(//LAB5 YOUR CODE : \(update LAB4 steps\)) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
23 47 M
(/* Some Functions) s
5 36 M
(    *    set_links:  set the relation links of process.  ALSO SEE: remove_links:  lean the rel) s
5 25 M
(ation links of process ) s
5 14 M
(    *    -------------------) s
5 3 M
(        *    update step 1: set child proc's parent to current process, make sure current proc) s
_R
S
%%Page: (90) 90
%%BeginPageSetup
_S
18 36 translate
/pagenum 90 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
(ess's wait_state is 0) s
5 696 M
(        *    update step 5: insert proc_struct into hash_list && proc_list, set the relation l) s
5 685 M
(inks of process) s
5 674 M
(    */) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 663 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 663 M
( \(\(proc = alloc_proc\(\)\) == NULL\) {) s
5 652 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 652 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 652 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 652 M
(fork_out) s
/F-gs-font 10 10 SF
0 setgray
131 652 M
(;) s
5 641 M
(    }) s
5 619 M
(    proc->parent = current;) s
5 608 M
(    assert\(current->wait_state == 0\);) s
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 586 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 586 M
( \(setup_kstack\(proc\) != 0\) {) s
5 575 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 575 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 575 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 575 M
(bad_fork_cleanup_proc) s
/F-gs-font 10 10 SF
0 setgray
209 575 M
(;) s
5 564 M
(    }) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 553 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 553 M
( \(copy_fs\(clone_flags, proc\) != 0\) { ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
263 553 M
(//for LAB8) s
/F-gs-font 10 10 SF
0 setgray
5 542 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 542 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 542 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 542 M
(bad_fork_cleanup_kstack) s
/F-gs-font 10 10 SF
0 setgray
221 542 M
(;) s
5 531 M
(    }) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 520 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 520 M
( \(copy_mm\(clone_flags, proc\) != 0\) {) s
5 509 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 509 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 509 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 509 M
(bad_fork_cleanup_fs) s
/F-gs-font 10 10 SF
0 setgray
197 509 M
(;) s
5 498 M
(    }) s
5 487 M
(    copy_thread\(proc, stack, tf\);) s
5 465 M
(    bool intr_flag;) s
5 454 M
(    local_intr_save\(intr_flag\);) s
5 443 M
(    {) s
5 432 M
(        proc->pid = get_pid\(\);) s
5 421 M
(        hash_proc\(proc\);) s
5 410 M
(        set_links\(proc\);) s
5 388 M
(    }) s
5 377 M
(    local_intr_restore\(intr_flag\);) s
5 355 M
(    wakeup_proc\(proc\);) s
5 333 M
(    ret = proc->pid;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 322 M
(fork_out) s
/F-gs-font 10 10 SF
0 setgray
53 322 M
(:) s
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 311 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 311 M
( ret;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 289 M
(bad_fork_cleanup_fs) s
/F-gs-font 10 10 SF
0 setgray
119 289 M
(:  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
137 289 M
(//for LAB8) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
(    put_fs\(proc\);) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 267 M
(bad_fork_cleanup_kstack) s
/F-gs-font 10 10 SF
0 setgray
143 267 M
(:) s
5 256 M
(    put_kstack\(proc\);) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 245 M
(bad_fork_cleanup_proc) s
/F-gs-font 10 10 SF
0 setgray
131 245 M
(:) s
5 234 M
(    kfree\(proc\);) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 223 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
53 223 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 223 M
(fork_out) s
/F-gs-font 10 10 SF
0 setgray
107 223 M
(;) s
5 212 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 190 M
(// do_exit - called by sys_exit) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 179 M
(//   1. call exit_mmap & put_pgdir & mm_destroy to free the almost all memory space of process) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 168 M
(//   2. set process' state as PROC_ZOMBIE, then call wakeup_proc\(parent\) to ask parent reclaim) s
5 157 M
( itself.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 146 M
(//   3. call scheduler to switch to other process) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 124 M
(do_exit) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 124 M
( error_code\) {) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( \(current == idleproc\) {) s
5 102 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 102 M
("idleproc exit.\\n") s
/F-gs-font 10 10 SF
0 setgray
197 102 M
(\);) s
5 91 M
(    }) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 80 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 80 M
( \(current == initproc\) {) s
5 69 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 69 M
("initproc exit.\\n") s
/F-gs-font 10 10 SF
0 setgray
197 69 M
(\);) s
5 58 M
(    }) s
5 47 M
(    ) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 36 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 36 M
( mm_struct *mm = current->mm;) s
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 25 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 25 M
( \(mm != NULL\) {) s
5 14 M
(        lcr3\(boot_cr3\);) s
5 3 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 3 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 3 M
( \(mm_count_dec\(mm\) == 0\) {) s
_R
S
%%Page: (91) 91
%%BeginPageSetup
_S
18 36 translate
/pagenum 91 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(            exit_mmap\(mm\);) s
5 696 M
(            put_pgdir\(mm\);) s
5 685 M
(            mm_destroy\(mm\);) s
5 674 M
(        }) s
5 663 M
(        current->mm = NULL;) s
5 652 M
(    }) s
5 641 M
(    put_fs\(current\); ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
131 641 M
(//for LAB8) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(    current->state = PROC_ZOMBIE;) s
5 619 M
(    current->exit_code = error_code;) s
5 608 M
(    ) s
5 597 M
(    bool intr_flag;) s
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 586 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 586 M
( proc_struct *proc;) s
5 575 M
(    local_intr_save\(intr_flag\);) s
5 564 M
(    {) s
5 553 M
(        proc = current->parent;) s
5 542 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 542 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 542 M
( \(proc->wait_state == WT_CHILD\) {) s
5 531 M
(            wakeup_proc\(proc\);) s
5 520 M
(        }) s
5 509 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 509 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 509 M
( \(current->cptr != NULL\) {) s
5 498 M
(            proc = current->cptr;) s
5 487 M
(            current->cptr = proc->optr;) s
5 476 M
(    ) s
5 465 M
(            proc->yptr = NULL;) s
5 454 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 454 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 454 M
( \(\(proc->optr = initproc->cptr\) != NULL\) {) s
5 443 M
(                initproc->cptr->yptr = proc;) s
5 432 M
(            }) s
5 421 M
(            proc->parent = initproc;) s
5 410 M
(            initproc->cptr = proc;) s
5 399 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 399 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 399 M
( \(proc->state == PROC_ZOMBIE\) {) s
5 388 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 388 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 388 M
( \(initproc->wait_state == WT_CHILD\) {) s
5 377 M
(                    wakeup_proc\(initproc\);) s
5 366 M
(                }) s
5 355 M
(            }) s
5 344 M
(        }) s
5 333 M
(    }) s
5 322 M
(    local_intr_restore\(intr_flag\);) s
5 311 M
(    ) s
5 300 M
(    schedule\(\);) s
5 289 M
(    panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 289 M
("do_exit will not return!! %d.\\n") s
/F-gs-font 10 10 SF
0 setgray
263 289 M
(, current->pid\);) s
5 278 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 256 M
(//load_icode_read is used by load_icode in LAB8) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 245 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 245 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 245 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 234 M
(load_icode_read) s
/F-gs-font 10 10 SF
0 setgray
95 234 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 234 M
(int) s
/F-gs-font 10 10 SF
0 setgray
119 234 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 234 M
(void) s
/F-gs-font 10 10 SF
0 setgray
173 234 M
( *buf, size_t len, off_t offset\) {) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 223 M
( ret;) s
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 212 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 212 M
( \(\(ret = sysfile_seek\(fd, offset, LSEEK_SET\)\) != 0\) {) s
5 201 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 201 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 201 M
( ret;) s
5 190 M
(    }) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 179 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 179 M
( \(\(ret = sysfile_read\(fd, buf, len\)\) != len\) {) s
5 168 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 168 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 168 M
( \(ret < 0\) ? ret : -1;) s
5 157 M
(    }) s
5 146 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 146 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 146 M
( 0;) s
5 135 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 113 M
(// load_icode -  called by sys_exec-->do_execve) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(  ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 91 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 80 M
(load_icode) s
/F-gs-font 10 10 SF
0 setgray
65 80 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
89 80 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
137 80 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 80 M
(char) s
/F-gs-font 10 10 SF
0 setgray
203 80 M
( **kargv\) {) s
5 69 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 69 M
(/* LAB8:EXERCISE2 YOUR CODE  HINT:how to load the file with handler fd  in to process's me) s
5 58 M
(mory? how to setup argc/argv?) s
5 47 M
(     * MACROs or Functions:) s
5 36 M
(     *  mm_create        - create a mm) s
5 25 M
(     *  setup_pgdir      - setup pgdir in mm) s
5 14 M
(     *  load_icode_read  - read raw data content of program file) s
5 3 M
(     *  mm_map           - build new vma) s
_R
S
%%Page: (92) 92
%%BeginPageSetup
_S
18 36 translate
/pagenum 92 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
(     *  pgdir_alloc_page - allocate new memory for  TEXT/DATA/BSS/stack parts) s
5 696 M
(     *  lcr3             - update Page Directory Addr Register -- CR3) s
5 685 M
(     */) s
/F-gs-font 10 10 SF
0 setgray
5 674 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 674 M
(/* \(1\) create a new mm for current process) s
5 663 M
(     * \(2\) create a new PDT, and mm->pgdir= kernel virtual addr of PDT) s
5 652 M
(     * \(3\) copy TEXT/DATA/BSS parts in binary to memory space of process) s
5 641 M
(     *    \(3.1\) read raw data content in file and resolve elfhdr) s
5 630 M
(     *    \(3.2\) read raw data content in file and resolve proghdr based on info in elfhdr) s
5 619 M
(     *    \(3.3\) call mm_map to build vma related to TEXT/DATA) s
5 608 M
(     *    \(3.4\) callpgdir_alloc_page to allocate page for TEXT/DATA, read contents in file) s
5 597 M
(     *          and copy them into the new allocated pages) s
5 586 M
(     *    \(3.5\) callpgdir_alloc_page to allocate pages for BSS, memset zero in these pages) s
5 575 M
(     * \(4\) call mm_map to setup user stack, and put parameters into user stack) s
5 564 M
(     * \(5\) setup current process's mm, cr3, reset pgidr \(using lcr3 MARCO\)) s
5 553 M
(     * \(6\) setup uargc and uargv in user stacks) s
5 542 M
(     * \(7\) setup trapframe for user environment) s
5 531 M
(     * \(8\) if up steps failed, you should cleanup the env.) s
5 520 M
(     */) s
/F-gs-font 10 10 SF
0 setgray
5 509 M
(    assert\(argc >= 0 && argc <= EXEC_MAX_ARG_NUM\);) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 487 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( \(current->mm != NULL\) {) s
5 476 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 476 M
("load_icode: current->mm must be empty.\\n") s
/F-gs-font 10 10 SF
0 setgray
341 476 M
(\);) s
5 465 M
(    }) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( ret = -E_NO_MEM;) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 432 M
( mm_struct *mm;) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 421 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
( \(\(mm = mm_create\(\)\) == NULL\) {) s
5 410 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 410 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 410 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 410 M
(bad_mm) s
/F-gs-font 10 10 SF
0 setgray
119 410 M
(;) s
5 399 M
(    }) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 388 M
( \(setup_pgdir\(mm\) != 0\) {) s
5 377 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 377 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 377 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 377 M
(bad_pgdir_cleanup_mm) s
/F-gs-font 10 10 SF
0 setgray
203 377 M
(;) s
5 366 M
(    }) s
5 344 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 344 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 344 M
( Page *page;) s
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 322 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 322 M
( elfhdr __elf, *elf = &__elf;) s
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 311 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 311 M
( \(\(ret = load_icode_read\(fd, elf, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
245 311 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
281 311 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
287 311 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
323 311 M
( elfhdr\), 0\)\) != 0\) {) s
5 300 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 300 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 300 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 300 M
(bad_elf_cleanup_pgdir) s
/F-gs-font 10 10 SF
0 setgray
209 300 M
(;) s
5 289 M
(    }) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 267 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( \(elf->e_magic != ELF_MAGIC\) {) s
5 256 M
(        ret = -E_INVAL_ELF;) s
5 245 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 245 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 245 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 245 M
(bad_elf_cleanup_pgdir) s
/F-gs-font 10 10 SF
0 setgray
209 245 M
(;) s
5 234 M
(    }) s
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 212 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 212 M
( proghdr __ph, *ph = &__ph;) s
5 201 M
(    uint32_t vm_flags, perm, phnum;) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 190 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( \(phnum = 0; phnum < elf->e_phnum; phnum ++\) {) s
5 179 M
(        off_t phoff = elf->e_phoff + ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
227 179 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
263 179 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
269 179 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
305 179 M
( proghdr\) * phnum;) s
5 168 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 168 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 168 M
( \(\(ret = load_icode_read\(fd, ph, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
263 168 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
299 168 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
305 168 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
341 168 M
( proghdr\), phoff\)\) != 0\) {) s
5 157 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 157 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 157 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 157 M
(bad_cleanup_mmap) s
/F-gs-font 10 10 SF
0 setgray
203 157 M
(;) s
5 146 M
(        }) s
5 135 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 135 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 135 M
( \(ph->p_type != ELF_PT_LOAD\) {) s
5 124 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 124 M
(continue) s
/F-gs-font 10 10 SF
0 setgray
125 124 M
( ;) s
5 113 M
(        }) s
5 102 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 102 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 102 M
( \(ph->p_filesz > ph->p_memsz\) {) s
5 91 M
(            ret = -E_INVAL_ELF;) s
5 80 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 80 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 80 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 80 M
(bad_cleanup_mmap) s
/F-gs-font 10 10 SF
0 setgray
203 80 M
(;) s
5 69 M
(        }) s
5 58 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 58 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 58 M
( \(ph->p_filesz == 0\) {) s
5 47 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 47 M
(continue) s
/F-gs-font 10 10 SF
0 setgray
125 47 M
( ;) s
5 36 M
(        }) s
5 25 M
(        vm_flags = 0, perm = PTE_U;) s
5 14 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 14 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
( \(ph->p_flags & ELF_PF_X\) vm_flags |= VM_EXEC;) s
5 3 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 3 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 3 M
( \(ph->p_flags & ELF_PF_W\) vm_flags |= VM_WRITE;) s
_R
S
%%Page: (93) 93
%%BeginPageSetup
_S
18 36 translate
/pagenum 93 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 707 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
( \(ph->p_flags & ELF_PF_R\) vm_flags |= VM_READ;) s
5 696 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 696 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 696 M
( \(vm_flags & VM_WRITE\) perm |= PTE_W;) s
5 685 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 685 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 685 M
( \(\(ret = mm_map\(mm, ph->p_va, ph->p_memsz, vm_flags, NULL\)\) != 0\) {) s
5 674 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 674 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 674 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 674 M
(bad_cleanup_mmap) s
/F-gs-font 10 10 SF
0 setgray
203 674 M
(;) s
5 663 M
(        }) s
5 652 M
(        off_t offset = ph->p_offset;) s
5 641 M
(        size_t off, size;) s
5 630 M
(        uintptr_t start = ph->p_va, end, la = ROUNDDOWN\(start, PGSIZE\);) s
5 608 M
(        ret = -E_NO_MEM;) s
5 586 M
(        end = ph->p_va + ph->p_filesz;) s
5 575 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 575 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 575 M
( \(start < end\) {) s
5 564 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 564 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 564 M
( \(\(page = pgdir_alloc_page\(mm->pgdir, la, perm\)\) == NULL\) {) s
5 553 M
(                ret = -E_NO_MEM;) s
5 542 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 542 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
125 542 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
131 542 M
(bad_cleanup_mmap) s
/F-gs-font 10 10 SF
0 setgray
227 542 M
(;) s
5 531 M
(            }) s
5 520 M
(            off = start - la, size = PGSIZE - off, la += PGSIZE;) s
5 509 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 509 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 509 M
( \(end < la\) {) s
5 498 M
(                size -= la - end;) s
5 487 M
(            }) s
5 476 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 476 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 476 M
( \(\(ret = load_icode_read\(fd, page2kva\(page\) + off, size, offset\)\) != 0\) {) s
5 465 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 465 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
125 465 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
131 465 M
(bad_cleanup_mmap) s
/F-gs-font 10 10 SF
0 setgray
227 465 M
(;) s
5 454 M
(            }) s
5 443 M
(            start += size, offset += size;) s
5 432 M
(        }) s
5 421 M
(        end = ph->p_va + ph->p_memsz;) s
5 399 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 399 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 399 M
( \(start < la\) {) s
5 388 M
(            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
77 388 M
(/* ph->p_memsz == ph->p_filesz */) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 377 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 377 M
( \(start == end\) {) s
5 366 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 366 M
(continue) s
/F-gs-font 10 10 SF
0 setgray
149 366 M
( ;) s
5 355 M
(            }) s
5 344 M
(            off = start + PGSIZE - la, size = PGSIZE - off;) s
5 333 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 333 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 333 M
( \(end < la\) {) s
5 322 M
(                size -= la - end;) s
5 311 M
(            }) s
5 300 M
(            memset\(page2kva\(page\) + off, 0, size\);) s
5 289 M
(            start += size;) s
5 278 M
(            assert\(\(end < la && start == end\) || \(end >= la && start == la\)\);) s
5 267 M
(        }) s
5 256 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 256 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 256 M
( \(start < end\) {) s
5 245 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 245 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 245 M
( \(\(page = pgdir_alloc_page\(mm->pgdir, la, perm\)\) == NULL\) {) s
5 234 M
(                ret = -E_NO_MEM;) s
5 223 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 223 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
125 223 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
131 223 M
(bad_cleanup_mmap) s
/F-gs-font 10 10 SF
0 setgray
227 223 M
(;) s
5 212 M
(            }) s
5 201 M
(            off = start - la, size = PGSIZE - off, la += PGSIZE;) s
5 190 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 190 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 190 M
( \(end < la\) {) s
5 179 M
(                size -= la - end;) s
5 168 M
(            }) s
5 157 M
(            memset\(page2kva\(page\) + off, 0, size\);) s
5 146 M
(            start += size;) s
5 135 M
(        }) s
5 124 M
(    }) s
5 113 M
(    sysfile_close\(fd\);) s
5 91 M
(    vm_flags = VM_READ | VM_WRITE | VM_STACK;) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 80 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 80 M
( \(\(ret = mm_map\(mm, USTACKTOP - USTACKSIZE, USTACKSIZE, vm_flags, NULL\)\) != 0\) {) s
5 69 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 69 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 69 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 69 M
(bad_cleanup_mmap) s
/F-gs-font 10 10 SF
0 setgray
179 69 M
(;) s
5 58 M
(    }) s
5 47 M
(    assert\(pgdir_alloc_page\(mm->pgdir, USTACKTOP-PGSIZE , PTE_USER\) != NULL\);) s
5 36 M
(    assert\(pgdir_alloc_page\(mm->pgdir, USTACKTOP-2*PGSIZE , PTE_USER\) != NULL\);) s
5 25 M
(    assert\(pgdir_alloc_page\(mm->pgdir, USTACKTOP-3*PGSIZE , PTE_USER\) != NULL\);) s
5 14 M
(    assert\(pgdir_alloc_page\(mm->pgdir, USTACKTOP-4*PGSIZE , PTE_USER\) != NULL\);) s
5 3 M
(    ) s
_R
S
%%Page: (94) 94
%%BeginPageSetup
_S
18 36 translate
/pagenum 94 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    mm_count_inc\(mm\);) s
5 696 M
(    current->mm = mm;) s
5 685 M
(    current->cr3 = PADDR\(mm->pgdir\);) s
5 674 M
(    lcr3\(PADDR\(mm->pgdir\)\);) s
5 652 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 652 M
(//setup argc, argv) s
/F-gs-font 10 10 SF
0 setgray
5 641 M
(    uint32_t argv_size=0, i;) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 630 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( \(i = 0; i < argc; i ++\) {) s
5 619 M
(        argv_size += strnlen\(kargv[i],EXEC_MAX_ARG_LEN + 1\)+1;) s
5 608 M
(    }) s
5 586 M
(    uintptr_t stacktop = USTACKTOP - \(argv_size/) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
293 586 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
329 586 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
335 586 M
(long) s
/F-gs-font 10 10 SF
0 setgray
359 586 M
(\)+1\)*) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
389 586 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
425 586 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
431 586 M
(long) s
/F-gs-font 10 10 SF
0 setgray
455 586 M
(\);) s
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 575 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 575 M
(** uargv=\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 575 M
(char) s
/F-gs-font 10 10 SF
0 setgray
137 575 M
( **\)\(stacktop  - argc * ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
281 575 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
317 575 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
323 575 M
(char) s
/F-gs-font 10 10 SF
0 setgray
347 575 M
( *\)\);) s
5 564 M
(    ) s
5 553 M
(    argv_size = 0;) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 542 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 542 M
( \(i = 0; i < argc; i ++\) {) s
5 531 M
(        uargv[i] = strcpy\(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 531 M
(char) s
/F-gs-font 10 10 SF
0 setgray
191 531 M
( *\)\(stacktop + argv_size \), kargv[i]\);) s
5 520 M
(        argv_size +=  strnlen\(kargv[i],EXEC_MAX_ARG_LEN + 1\)+1;) s
5 509 M
(    }) s
5 498 M
(    ) s
5 487 M
(    stacktop = \(uintptr_t\)uargv - ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
209 487 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
245 487 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 487 M
(int) s
/F-gs-font 10 10 SF
0 setgray
269 487 M
(\);) s
5 476 M
(    *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 476 M
(int) s
/F-gs-font 10 10 SF
0 setgray
59 476 M
( *\)stacktop = argc;) s
5 465 M
(    ) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 454 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 454 M
( trapframe *tf = current->tf;) s
5 443 M
(    memset\(tf, 0, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
113 443 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
149 443 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 443 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
191 443 M
( trapframe\)\);) s
5 432 M
(    tf->tf_cs = USER_CS;) s
5 421 M
(    tf->tf_ds = tf->tf_es = tf->tf_ss = USER_DS;) s
5 410 M
(    tf->tf_esp = stacktop;) s
5 399 M
(    tf->tf_eip = elf->e_entry;) s
5 388 M
(    tf->tf_eflags = FL_IF;) s
5 377 M
(    ret = 0;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 366 M
(out) s
/F-gs-font 10 10 SF
0 setgray
23 366 M
(:) s
5 355 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 355 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 355 M
( ret;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 344 M
(bad_cleanup_mmap) s
/F-gs-font 10 10 SF
0 setgray
101 344 M
(:) s
5 333 M
(    exit_mmap\(mm\);) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 322 M
(bad_elf_cleanup_pgdir) s
/F-gs-font 10 10 SF
0 setgray
131 322 M
(:) s
5 311 M
(    put_pgdir\(mm\);) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 300 M
(bad_pgdir_cleanup_mm) s
/F-gs-font 10 10 SF
0 setgray
125 300 M
(:) s
5 289 M
(    mm_destroy\(mm\);) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 278 M
(bad_mm) s
/F-gs-font 10 10 SF
0 setgray
41 278 M
(:) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 267 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
53 267 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 267 M
(out) s
/F-gs-font 10 10 SF
0 setgray
77 267 M
(;) s
5 256 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 234 M
(// this function isn't very correct in LAB8) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 223 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 223 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 212 M
(put_kargv) s
/F-gs-font 10 10 SF
0 setgray
59 212 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
83 212 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 212 M
(char) s
/F-gs-font 10 10 SF
0 setgray
149 212 M
( **kargv\) {) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 201 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 201 M
( \(argc > 0\) {) s
5 190 M
(        kfree\(kargv[-- argc]\);) s
5 179 M
(    }) s
5 168 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 146 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 135 M
(copy_kargv) s
/F-gs-font 10 10 SF
0 setgray
65 135 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 135 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 135 M
( mm_struct *mm, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
221 135 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
263 135 M
(char) s
/F-gs-font 10 10 SF
0 setgray
287 135 M
( **kargv, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
347 135 M
(const) s
/F-gs-font 10 10 SF
0 setgray
377 135 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
383 135 M
(char) s
/F-gs-font 10 10 SF
0 setgray
407 135 M
( **argv\) {) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( i, ret = -E_INVAL;) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( \(!user_mem_check\(mm, \(uintptr_t\)argv, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
275 113 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
311 113 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
317 113 M
(const) s
/F-gs-font 10 10 SF
0 setgray
347 113 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
353 113 M
(char) s
/F-gs-font 10 10 SF
0 setgray
377 113 M
( *\) * argc, 0\)\) {) s
5 102 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 102 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 102 M
( ret;) s
5 91 M
(    }) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 80 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( \(i = 0; i < argc; i ++\) {) s
5 69 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 69 M
(char) s
/F-gs-font 10 10 SF
0 setgray
77 69 M
( *buffer;) s
5 58 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 58 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 58 M
( \(\(buffer = kmalloc\(EXEC_MAX_ARG_LEN + 1\)\) == NULL\) {) s
5 47 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 47 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 47 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 47 M
(failed_nomem) s
/F-gs-font 10 10 SF
0 setgray
179 47 M
(;) s
5 36 M
(        }) s
5 25 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 25 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 25 M
( \(!copy_string\(mm, buffer, argv[i], EXEC_MAX_ARG_LEN + 1\)\) {) s
5 14 M
(            kfree\(buffer\);) s
5 3 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 3 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 3 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 3 M
(failed_cleanup) s
/F-gs-font 10 10 SF
0 setgray
191 3 M
(;) s
_R
S
%%Page: (95) 95
%%BeginPageSetup
_S
18 36 translate
/pagenum 95 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        }) s
5 696 M
(        kargv[i] = buffer;) s
5 685 M
(    }) s
5 674 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 674 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 674 M
( 0;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 652 M
(failed_nomem) s
/F-gs-font 10 10 SF
0 setgray
77 652 M
(:) s
5 641 M
(    ret = -E_NO_MEM;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 630 M
(failed_cleanup) s
/F-gs-font 10 10 SF
0 setgray
89 630 M
(:) s
5 619 M
(    put_kargv\(i, kargv\);) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 608 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 608 M
( ret;) s
5 597 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 575 M
(// do_execve - call exit_mmap\(mm\)&put_pgdir\(mm\) to reclaim memory space of current process) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 564 M
(//           - call load_icode to setup new memory space accroding binary prog.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 553 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 542 M
(do_execve) s
/F-gs-font 10 10 SF
0 setgray
59 542 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 542 M
(const) s
/F-gs-font 10 10 SF
0 setgray
95 542 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 542 M
(char) s
/F-gs-font 10 10 SF
0 setgray
125 542 M
( *name, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 542 M
(int) s
/F-gs-font 10 10 SF
0 setgray
191 542 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
233 542 M
(const) s
/F-gs-font 10 10 SF
0 setgray
263 542 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
269 542 M
(char) s
/F-gs-font 10 10 SF
0 setgray
293 542 M
( **argv\) {) s
5 531 M
(    static_assert\(EXEC_MAX_ARG_LEN >= FS_MAX_FPATH_LEN\);) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 520 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
( mm_struct *mm = current->mm;) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 509 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 509 M
( \(!\(argc >= 1 && argc <= EXEC_MAX_ARG_NUM\)\) {) s
5 498 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 498 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 498 M
( -E_INVAL;) s
5 487 M
(    }) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 465 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 465 M
( local_name[PROC_NAME_LEN + 1];) s
5 454 M
(    memset\(local_name, 0, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
161 454 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
197 454 M
(\(local_name\)\);) s
5 443 M
(    ) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 432 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 432 M
( *kargv[EXEC_MAX_ARG_NUM];) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 421 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 421 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 421 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 421 M
( *path;) s
5 410 M
(    ) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 399 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 399 M
( ret = -E_INVAL;) s
5 388 M
(    ) s
5 377 M
(    lock_mm\(mm\);) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 366 M
( \(name == NULL\) {) s
5 355 M
(        snprintf\(local_name, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
179 355 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
215 355 M
(\(local_name\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
299 355 M
("<null> %d") s
/F-gs-font 10 10 SF
0 setgray
365 355 M
(, current->pid\);) s
5 344 M
(    }) s
5 333 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 333 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
( {) s
5 322 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 322 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 322 M
( \(!copy_string\(mm, local_name, name, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
287 322 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
323 322 M
(\(local_name\)\)\) {) s
5 311 M
(            unlock_mm\(mm\);) s
5 300 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 300 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 300 M
( ret;) s
5 289 M
(        }) s
5 278 M
(    }) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 267 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( \(\(ret = copy_kargv\(mm, argc, kargv, argv\)\) != 0\) {) s
5 256 M
(        unlock_mm\(mm\);) s
5 245 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 245 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 245 M
( ret;) s
5 234 M
(    }) s
5 223 M
(    path = argv[0];) s
5 212 M
(    unlock_mm\(mm\);) s
5 201 M
(    files_closeall\(current->filesp\);) s
5 179 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 179 M
(/* sysfile_open will check the first argument path, thus we have to use a user-space point) s
5 168 M
(er, and argv[0] may be incorrect */) s
/F-gs-font 10 10 SF
0 setgray
215 168 M
(    ) s
5 157 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 157 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 157 M
( fd;) s
5 146 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 146 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( \(\(ret = fd = sysfile_open\(path, O_RDONLY\)\) < 0\) {) s
5 135 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 135 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 135 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 135 M
(execve_exit) s
/F-gs-font 10 10 SF
0 setgray
149 135 M
(;) s
5 124 M
(    }) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( \(mm != NULL\) {) s
5 102 M
(        lcr3\(boot_cr3\);) s
5 91 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 91 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 91 M
( \(mm_count_dec\(mm\) == 0\) {) s
5 80 M
(            exit_mmap\(mm\);) s
5 69 M
(            put_pgdir\(mm\);) s
5 58 M
(            mm_destroy\(mm\);) s
5 47 M
(        }) s
5 36 M
(        current->mm = NULL;) s
5 25 M
(    }) s
5 14 M
(    ret= -E_NO_MEM;;) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 3 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 3 M
( \(\(ret = load_icode\(fd, argc, kargv\)\) != 0\) {) s
_R
S
%%Page: (96) 96
%%BeginPageSetup
_S
18 36 translate
/pagenum 96 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 707 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 707 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 707 M
(execve_exit) s
/F-gs-font 10 10 SF
0 setgray
149 707 M
(;) s
5 696 M
(    }) s
5 685 M
(    put_kargv\(argc, kargv\);) s
5 674 M
(    set_proc_name\(current, local_name\);) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 663 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 663 M
( 0;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 641 M
(execve_exit) s
/F-gs-font 10 10 SF
0 setgray
71 641 M
(:) s
5 630 M
(    put_kargv\(argc, kargv\);) s
5 619 M
(    do_exit\(ret\);) s
5 608 M
(    panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 608 M
("already exit: %e.\\n") s
/F-gs-font 10 10 SF
0 setgray
191 608 M
(, ret\);) s
5 597 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 575 M
(// do_yield - ask the scheduler to reschedule) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 553 M
(do_yield) s
/F-gs-font 10 10 SF
0 setgray
53 553 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 553 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 553 M
(\) {) s
5 542 M
(    current->need_resched = 1;) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 531 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 531 M
( 0;) s
5 520 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 498 M
(// do_wait - wait one OR any children with PROC_ZOMBIE state, and free memory space of kernel ) s
5 487 M
(stack) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 476 M
(//         - proc struct of this child.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 465 M
(// NOTE: only after do_wait function, all resources of the child proces are free.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 443 M
(do_wait) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 443 M
( pid, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
125 443 M
( *code_store\) {) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 432 M
( mm_struct *mm = current->mm;) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 421 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
( \(code_store != NULL\) {) s
5 410 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 410 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 410 M
( \(!user_mem_check\(mm, \(uintptr_t\)code_store, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
335 410 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
371 410 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
377 410 M
(int) s
/F-gs-font 10 10 SF
0 setgray
395 410 M
(\), 1\)\) {) s
5 399 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 399 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 399 M
( -E_INVAL;) s
5 388 M
(        }) s
5 377 M
(    }) s
5 355 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 355 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 355 M
( proc_struct *proc;) s
5 344 M
(    bool intr_flag, haskid;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 333 M
(repeat) s
/F-gs-font 10 10 SF
0 setgray
41 333 M
(:) s
5 322 M
(    haskid = 0;) s
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 311 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 311 M
( \(pid != 0\) {) s
5 300 M
(        proc = find_proc\(pid\);) s
5 289 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 289 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 289 M
( \(proc != NULL && proc->parent == current\) {) s
5 278 M
(            haskid = 1;) s
5 267 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 267 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 267 M
( \(proc->state == PROC_ZOMBIE\) {) s
5 256 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 256 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
125 256 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
131 256 M
(found) s
/F-gs-font 10 10 SF
0 setgray
161 256 M
(;) s
5 245 M
(            }) s
5 234 M
(        }) s
5 223 M
(    }) s
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 212 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 212 M
( {) s
5 201 M
(        proc = current->cptr;) s
5 190 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 190 M
(for) s
/F-gs-font 10 10 SF
0 setgray
71 190 M
( \(; proc != NULL; proc = proc->optr\) {) s
5 179 M
(            haskid = 1;) s
5 168 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 168 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 168 M
( \(proc->state == PROC_ZOMBIE\) {) s
5 157 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 157 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
125 157 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
131 157 M
(found) s
/F-gs-font 10 10 SF
0 setgray
161 157 M
(;) s
5 146 M
(            }) s
5 135 M
(        }) s
5 124 M
(    }) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( \(haskid\) {) s
5 102 M
(        current->state = PROC_SLEEPING;) s
5 91 M
(        current->wait_state = WT_CHILD;) s
5 80 M
(        schedule\(\);) s
5 69 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 69 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 69 M
( \(current->flags & PF_EXITING\) {) s
5 58 M
(            do_exit\(-E_KILLED\);) s
5 47 M
(        }) s
5 36 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 36 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 36 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 36 M
(repeat) s
/F-gs-font 10 10 SF
0 setgray
119 36 M
(;) s
5 25 M
(    }) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 14 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
( -E_BAD_PROC;) s
_R
S
%%Page: (97) 97
%%BeginPageSetup
_S
18 36 translate
/pagenum 97 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 707 M
(found) s
/F-gs-font 10 10 SF
0 setgray
35 707 M
(:) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 696 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 696 M
( \(proc == idleproc || proc == initproc\) {) s
5 685 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 685 M
("wait idleproc or initproc.\\n") s
/F-gs-font 10 10 SF
0 setgray
269 685 M
(\);) s
5 674 M
(    }) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 663 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 663 M
( \(code_store != NULL\) {) s
5 652 M
(        *code_store = proc->exit_code;) s
5 641 M
(    }) s
5 630 M
(    local_intr_save\(intr_flag\);) s
5 619 M
(    {) s
5 608 M
(        unhash_proc\(proc\);) s
5 597 M
(        remove_links\(proc\);) s
5 586 M
(    }) s
5 575 M
(    local_intr_restore\(intr_flag\);) s
5 564 M
(    put_kstack\(proc\);) s
5 553 M
(    kfree\(proc\);) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 542 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 542 M
( 0;) s
5 531 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 509 M
(// do_kill - kill process with pid by set this process's flags with PF_EXITING) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 498 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 487 M
(do_kill) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 487 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 487 M
( pid\) {) s
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 476 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 476 M
( proc_struct *proc;) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 465 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 465 M
( \(\(proc = find_proc\(pid\)\) != NULL\) {) s
5 454 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 454 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 454 M
( \(!\(proc->flags & PF_EXITING\)\) {) s
5 443 M
(            proc->flags |= PF_EXITING;) s
5 432 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 432 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 432 M
( \(proc->wait_state & WT_INTERRUPTED\) {) s
5 421 M
(                wakeup_proc\(proc\);) s
5 410 M
(            }) s
5 399 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 399 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 399 M
( 0;) s
5 388 M
(        }) s
5 377 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 377 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 377 M
( -E_KILLED;) s
5 366 M
(    }) s
5 355 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 355 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 355 M
( -E_INVAL;) s
5 344 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 322 M
(// kernel_execve - do SYS_exec syscall to exec a user program called by user_main kernel_threa) s
5 311 M
(d) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 300 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 300 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 300 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 289 M
(kernel_execve) s
/F-gs-font 10 10 SF
0 setgray
83 289 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 289 M
(const) s
/F-gs-font 10 10 SF
0 setgray
119 289 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 289 M
(char) s
/F-gs-font 10 10 SF
0 setgray
149 289 M
( *name, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 289 M
(const) s
/F-gs-font 10 10 SF
0 setgray
227 289 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
233 289 M
(char) s
/F-gs-font 10 10 SF
0 setgray
257 289 M
( **argv\) {) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 278 M
( argc = 0, ret;) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 267 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 267 M
( \(argv[argc] != NULL\) {) s
5 256 M
(        argc ++;) s
5 245 M
(    }) s
5 234 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 234 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 234 M
( \() s
5 223 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 223 M
("int %1;") s
/F-gs-font 10 10 SF
0 setgray
5 212 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 212 M
("=a") s
/F-gs-font 10 10 SF
0 setgray
89 212 M
( \(ret\)) s
5 201 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 201 M
("i") s
/F-gs-font 10 10 SF
0 setgray
83 201 M
( \(T_SYSCALL\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
167 201 M
("0") s
/F-gs-font 10 10 SF
0 setgray
185 201 M
( \(SYS_exec\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
263 201 M
("d") s
/F-gs-font 10 10 SF
0 setgray
281 201 M
( \(name\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
335 201 M
("c") s
/F-gs-font 10 10 SF
0 setgray
353 201 M
( \(argc\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
407 201 M
("b") s
/F-gs-font 10 10 SF
0 setgray
425 201 M
( \(argv\)) s
5 190 M
(        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 190 M
("memory") s
/F-gs-font 10 10 SF
0 setgray
113 190 M
(\);) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 179 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 179 M
( ret;) s
5 168 M
(}) s
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 146 M
(__KERNEL_EXECVE) s
/F-gs-font 10 10 SF
0 setgray
143 146 M
(\(name, path, ...\) \({                         \\) s
5 135 M
(const char *argv[] = {path, ##__VA_ARGS__, NULL};       \\) s
5 124 M
(                     cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 124 M
("kernel_execve: pid = %d, name = \\"%s\\".\\n") s
/F-gs-font 10 10 SF
0 setgray
437 124 M
(,    \\) s
5 113 M
(                             current->pid, name\);                            \\) s
5 102 M
(                     kernel_execve\(name, argv\);                              \\) s
5 91 M
(}\)) s
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 69 M
(KERNEL_EXECVE) s
/F-gs-font 10 10 SF
0 setgray
131 69 M
(\(x, ...\)                   __KERNEL_EXECVE\(#x, #x, ##__VA_ARGS__\)) s
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 47 M
(KERNEL_EXECVE2) s
/F-gs-font 10 10 SF
0 setgray
137 47 M
(\(x, ...\)                  KERNEL_EXECVE\(x, ##__VA_ARGS__\)) s
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 25 M
(__KERNEL_EXECVE3) s
/F-gs-font 10 10 SF
0 setgray
149 25 M
(\(x, s, ...\)             KERNEL_EXECVE\(x, #s, ##__VA_ARGS__\)) s
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 3 M
(KERNEL_EXECVE3) s
/F-gs-font 10 10 SF
0 setgray
137 3 M
(\(x, s, ...\)               __KERNEL_EXECVE3\(x, s, ##__VA_ARGS__\)) s
_R
S
%%Page: (98) 98
%%BeginPageSetup
_S
18 36 translate
/pagenum 98 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 696 M
(// user_main - kernel thread used to exec a user program) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 685 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 685 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 674 M
(user_main) s
/F-gs-font 10 10 SF
0 setgray
59 674 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 674 M
(void) s
/F-gs-font 10 10 SF
0 setgray
89 674 M
( *arg\) {) s
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(ifdef) s
/F-gs-font 10 10 SF
0 setgray
41 663 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
47 663 M
(TEST) s
/F-gs-font 10 10 SF
0 setgray
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(ifdef) s
/F-gs-font 10 10 SF
0 setgray
41 652 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
47 652 M
(TESTSCRIPT) s
/F-gs-font 10 10 SF
0 setgray
5 641 M
(    KERNEL_EXECVE3\(TEST, TESTSCRIPT\);) s
5 630 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 630 M
(else) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
(    KERNEL_EXECVE2\(TEST\);) s
5 608 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 608 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(else) s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(    KERNEL_EXECVE\(sh\);) s
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
5 564 M
(    panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 564 M
("user_main execve failed.\\n") s
/F-gs-font 10 10 SF
0 setgray
233 564 M
(\);) s
5 553 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 531 M
(// init_main - the second kernel thread used to create user_main kernel threads) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 520 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 520 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 520 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 509 M
(init_main) s
/F-gs-font 10 10 SF
0 setgray
59 509 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 509 M
(void) s
/F-gs-font 10 10 SF
0 setgray
89 509 M
( *arg\) {) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 498 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 498 M
( ret;) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 487 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( \(\(ret = vfs_set_bootfs\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
185 487 M
("disk0:") s
/F-gs-font 10 10 SF
0 setgray
233 487 M
(\)\) != 0\) {) s
5 476 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 476 M
("set boot fs failed: %e.\\n") s
/F-gs-font 10 10 SF
0 setgray
251 476 M
(, ret\);) s
5 465 M
(    }) s
5 454 M
(    ) s
5 443 M
(    size_t nr_free_pages_store = nr_free_pages\(\);) s
5 432 M
(    size_t kernel_allocated_store = kallocated\(\);) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 410 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( pid = kernel_thread\(user_main, NULL, 0\);) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 399 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
( \(pid <= 0\) {) s
5 388 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 388 M
("create user_main failed.\\n") s
/F-gs-font 10 10 SF
0 setgray
257 388 M
(\);) s
5 377 M
(    }) s
5 366 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
11 366 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
47 366 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 366 M
(void) s
/F-gs-font 10 10 SF
0 setgray
77 366 M
( check_sync\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 366 M
(void) s
/F-gs-font 10 10 SF
0 setgray
173 366 M
(\);) s
5 355 M
(    check_sync\(\);                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
203 355 M
(// check philosopher sync problem) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 333 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 333 M
( \(do_wait\(0, NULL\) == 0\) {) s
5 322 M
(        schedule\(\);) s
5 311 M
(    }) s
5 289 M
(    fs_cleanup\(\);) s
5 278 M
(        ) s
5 267 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 267 M
("all user-mode processes have quit.\\n") s
/F-gs-font 10 10 SF
0 setgray
305 267 M
(\);) s
5 256 M
(    assert\(initproc->cptr == NULL && initproc->yptr == NULL && initproc->optr == NULL\);) s
5 245 M
(    assert\(nr_process == 2\);) s
5 234 M
(    assert\(list_next\(&proc_list\) == &\(initproc->list_link\)\);) s
5 223 M
(    assert\(list_prev\(&proc_list\) == &\(initproc->list_link\)\);) s
5 212 M
(    assert\(nr_free_pages_store == nr_free_pages\(\)\);) s
5 201 M
(    assert\(kernel_allocated_store == kallocated\(\)\);) s
5 190 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 190 M
("init check memory pass.\\n") s
/F-gs-font 10 10 SF
0 setgray
239 190 M
(\);) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 179 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 179 M
( 0;) s
5 168 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 146 M
(// proc_init - set up the first kernel thread idleproc "idle" by itself and ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 135 M
(//           - create the second kernel thread init_main) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 113 M
(proc_init) s
/F-gs-font 10 10 SF
0 setgray
59 113 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 113 M
(void) s
/F-gs-font 10 10 SF
0 setgray
89 113 M
(\) {) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 102 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 102 M
( i;) s
5 80 M
(    list_init\(&proc_list\);) s
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 69 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( \(i = 0; i < HASH_LIST_SIZE; i ++\) {) s
5 58 M
(        list_init\(hash_list + i\);) s
5 47 M
(    }) s
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 25 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 25 M
( \(\(idleproc = alloc_proc\(\)\) == NULL\) {) s
5 14 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 14 M
("cannot alloc idleproc.\\n") s
/F-gs-font 10 10 SF
0 setgray
245 14 M
(\);) s
5 3 M
(    }) s
_R
S
%%Page: (99) 99
%%BeginPageSetup
_S
18 36 translate
/pagenum 99 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 696 M
(    idleproc->pid = 0;) s
5 685 M
(    idleproc->state = PROC_RUNNABLE;) s
5 674 M
(    idleproc->kstack = \(uintptr_t\)bootstack;) s
5 663 M
(    idleproc->need_resched = 1;) s
5 652 M
(    ) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 641 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 641 M
( \(\(idleproc->filesp = files_create\(\)\) == NULL\) {) s
5 630 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 630 M
("create filesp \(idleproc\) failed.\\n") s
/F-gs-font 10 10 SF
0 setgray
305 630 M
(\);) s
5 619 M
(    }) s
5 608 M
(    files_count_inc\(idleproc->filesp\);) s
5 597 M
(    ) s
5 586 M
(    set_proc_name\(idleproc, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 586 M
("idle") s
/F-gs-font 10 10 SF
0 setgray
209 586 M
(\);) s
5 575 M
(    nr_process ++;) s
5 553 M
(    current = idleproc;) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 531 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( pid = kernel_thread\(init_main, NULL, 0\);) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 520 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 520 M
( \(pid <= 0\) {) s
5 509 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 509 M
("create init_main failed.\\n") s
/F-gs-font 10 10 SF
0 setgray
257 509 M
(\);) s
5 498 M
(    }) s
5 476 M
(    initproc = find_proc\(pid\);) s
5 465 M
(    set_proc_name\(initproc, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 465 M
("init") s
/F-gs-font 10 10 SF
0 setgray
209 465 M
(\);) s
5 443 M
(    assert\(idleproc != NULL && idleproc->pid == 0\);) s
5 432 M
(    assert\(initproc != NULL && initproc->pid == 1\);) s
5 421 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 399 M
(// cpu_idle - at the end of kern_init, the first kernel thread idleproc will do below works) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 388 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 377 M
(cpu_idle) s
/F-gs-font 10 10 SF
0 setgray
53 377 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 377 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 377 M
(\) {) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 366 M
( \(1\) {) s
5 355 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 355 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 355 M
( \(current->need_resched\) {) s
5 344 M
(            schedule\(\);) s
5 333 M
(        }) s
5 322 M
(    }) s
5 311 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 289 M
(//FOR LAB6, set the process's priority \(bigger value will get more CPU time\) ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 278 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 267 M
(lab6_set_priority) s
/F-gs-font 10 10 SF
0 setgray
107 267 M
(\(uint32_t priority\)) s
5 256 M
({) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 245 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 245 M
( \(priority == 0\)) s
5 234 M
(        current->lab6_priority = 1;) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 223 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 223 M
( current->lab6_priority = priority;) s
5 212 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 190 M
(// do_sleep - set current process state to sleep and add timer with "time") s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 179 M
(//          - then call scheduler. if process run again, delete timer first.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 168 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 157 M
(do_sleep) s
/F-gs-font 10 10 SF
0 setgray
53 157 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 157 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
107 157 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 157 M
(int) s
/F-gs-font 10 10 SF
0 setgray
131 157 M
( time\) {) s
5 146 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 146 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( \(time == 0\) {) s
5 135 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 135 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 135 M
( 0;) s
5 124 M
(    }) s
5 113 M
(    bool intr_flag;) s
5 102 M
(    local_intr_save\(intr_flag\);) s
5 91 M
(    timer_t __timer, *timer = timer_init\(&__timer, current, time\);) s
5 80 M
(    current->state = PROC_SLEEPING;) s
5 69 M
(    current->wait_state = WT_TIMER;) s
5 58 M
(    add_timer\(timer\);) s
5 47 M
(    local_intr_restore\(intr_flag\);) s
5 25 M
(    schedule\(\);) s
5 3 M
(    del_timer\(timer\);) s
_R
S
%%Page: (100) 100
%%BeginPageSetup
_S
18 36 translate
/pagenum 100 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 707 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
( 0;) s
5 696 M
(}) s
5 685 M
([ucore/lab8_result/kern/process/) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 685 M
(switch) s
/F-gs-font 10 10 SF
0 setgray
233 685 M
(.S] ++++++++++++++++++++++++++++++) s
5 674 M
(.text) s
5 663 M
(.globl switch_to) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 652 M
(switch_to) s
/F-gs-font 10 10 SF
0 setgray
59 652 M
(:                      # switch_to\(from, to\)) s
5 630 M
(    # save from's registers) s
5 619 M
(    movl 4\(%esp\), %eax          # eax points to from) s
5 608 M
(    popl 0\(%eax\)                # save eip !popl) s
5 597 M
(    movl %esp, 4\(%eax\)) s
5 586 M
(    movl %ebx, 8\(%eax\)) s
5 575 M
(    movl %ecx, 12\(%eax\)) s
5 564 M
(    movl %edx, 16\(%eax\)) s
5 553 M
(    movl %esi, 20\(%eax\)) s
5 542 M
(    movl %edi, 24\(%eax\)) s
5 531 M
(    movl %ebp, 28\(%eax\)) s
5 509 M
(    # restore to's registers) s
5 498 M
(    movl 4\(%esp\), %eax          # not 8\(%esp\): popped ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
329 498 M
(return) s
/F-gs-font 10 10 SF
0 setgray
365 498 M
( address already) s
5 487 M
(                                # eax now points to to) s
5 476 M
(    movl 28\(%eax\), %ebp) s
5 465 M
(    movl 24\(%eax\), %edi) s
5 454 M
(    movl 20\(%eax\), %esi) s
5 443 M
(    movl 16\(%eax\), %edx) s
5 432 M
(    movl 12\(%eax\), %ecx) s
5 421 M
(    movl 8\(%eax\), %ebx) s
5 410 M
(    movl 4\(%eax\), %esp) s
5 388 M
(    pushl 0\(%eax\)               # push eip) s
5 366 M
(    ret) s
5 344 M
([ucore/lab8_result/kern/fs/devs/dev_disk0.c] ++++++++++++++++++++++++++++++) s
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 333 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 322 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 322 M
(<mmu.h>) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 311 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 311 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 311 M
(<sem.h>) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 300 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 300 M
(<ide.h>) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 289 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 289 M
(<inode.h>) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 278 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 278 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 278 M
(<kmalloc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 267 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 267 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 267 M
(<dev.h>) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 256 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 256 M
(<vfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 245 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 245 M
(<iobuf.h>) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 234 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 234 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 234 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 223 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 223 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 201 M
(DISK0_BLKSIZE) s
/F-gs-font 10 10 SF
0 setgray
131 201 M
(                   PGSIZE) s
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 190 M
(DISK0_BUFSIZE) s
/F-gs-font 10 10 SF
0 setgray
131 190 M
(                   \(4 * DISK0_BLKSIZE\)) s
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 179 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 179 M
(DISK0_BLK_NSECT) s
/F-gs-font 10 10 SF
0 setgray
143 179 M
(                 \(DISK0_BLKSIZE / SECTSIZE\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 157 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 157 M
(char) s
/F-gs-font 10 10 SF
0 setgray
71 157 M
( *disk0_buffer;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( semaphore_t disk0_sem;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 124 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 124 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 113 M
(lock_disk0) s
/F-gs-font 10 10 SF
0 setgray
65 113 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 113 M
(void) s
/F-gs-font 10 10 SF
0 setgray
95 113 M
(\) {) s
5 102 M
(    down\(&\(disk0_sem\)\);) s
5 91 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 69 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 58 M
(unlock_disk0) s
/F-gs-font 10 10 SF
0 setgray
77 58 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 58 M
(void) s
/F-gs-font 10 10 SF
0 setgray
107 58 M
(\) {) s
5 47 M
(    up\(&\(disk0_sem\)\);) s
5 36 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 14 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 3 M
(disk0_open) s
/F-gs-font 10 10 SF
0 setgray
65 3 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 3 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 3 M
( device *dev, uint32_t open_flags\) {) s
_R
S
%%Page: (101) 101
%%BeginPageSetup
_S
18 36 translate
/pagenum 101 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 707 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
( 0;) s
5 696 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 674 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 674 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 674 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 663 M
(disk0_close) s
/F-gs-font 10 10 SF
0 setgray
71 663 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 663 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 663 M
( device *dev\) {) s
5 652 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 652 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 652 M
( 0;) s
5 641 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 619 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 619 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 608 M
(disk0_read_blks_nolock) s
/F-gs-font 10 10 SF
0 setgray
137 608 M
(\(uint32_t blkno, uint32_t nblks\) {) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 597 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( ret;) s
5 586 M
(    uint32_t sectno = blkno * DISK0_BLK_NSECT, nsecs = nblks * DISK0_BLK_NSECT;) s
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 575 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( \(\(ret = ide_read_secs\(DISK0_DEV_NO, sectno, disk0_buffer, nsecs\)\) != 0\) {) s
5 564 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 564 M
("disk0: read blkno = %d \(sectno = %d\), nblks = %d \(nsecs = %d\): 0x%08x.\\n") s
/F-gs-font 10 10 SF
0 setgray
533 564 M
(,) s
5 553 M
(                blkno, sectno, nblks, nsecs, ret\);) s
5 542 M
(    }) s
5 531 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 509 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 509 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 509 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 498 M
(disk0_write_blks_nolock) s
/F-gs-font 10 10 SF
0 setgray
143 498 M
(\(uint32_t blkno, uint32_t nblks\) {) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 487 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( ret;) s
5 476 M
(    uint32_t sectno = blkno * DISK0_BLK_NSECT, nsecs = nblks * DISK0_BLK_NSECT;) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 465 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 465 M
( \(\(ret = ide_write_secs\(DISK0_DEV_NO, sectno, disk0_buffer, nsecs\)\) != 0\) {) s
5 454 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 454 M
("disk0: write blkno = %d \(sectno = %d\), nblks = %d \(nsecs = %d\): 0x%08x.\\n") s
/F-gs-font 10 10 SF
0 setgray
539 454 M
(,) s
5 443 M
(                blkno, sectno, nblks, nsecs, ret\);) s
5 432 M
(    }) s
5 421 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 399 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 399 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 388 M
(disk0_io) s
/F-gs-font 10 10 SF
0 setgray
53 388 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 388 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 388 M
( device *dev, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 388 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
215 388 M
( iobuf *iob, bool write\) {) s
5 377 M
(    off_t offset = iob->io_offset;) s
5 366 M
(    size_t resid = iob->io_resid;) s
5 355 M
(    uint32_t blkno = offset / DISK0_BLKSIZE;) s
5 344 M
(    uint32_t nblks = resid / DISK0_BLKSIZE;) s
5 322 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 322 M
(/* don't allow I/O that isn't block-aligned */) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 311 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 311 M
( \(\(offset % DISK0_BLKSIZE\) != 0 || \(resid % DISK0_BLKSIZE\) != 0\) {) s
5 300 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 300 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 300 M
( -E_INVAL;) s
5 289 M
(    }) s
5 267 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 267 M
(/* don't allow I/O past the end of disk0 */) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 256 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 256 M
( \(blkno + nblks > dev->d_blocks\) {) s
5 245 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 245 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 245 M
( -E_INVAL;) s
5 234 M
(    }) s
5 212 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 212 M
(/* read/write nothing ? */) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 201 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 201 M
( \(nblks == 0\) {) s
5 190 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 190 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 190 M
( 0;) s
5 179 M
(    }) s
5 157 M
(    lock_disk0\(\);) s
5 146 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 146 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 146 M
( \(resid != 0\) {) s
5 135 M
(        size_t copied, alen = DISK0_BUFSIZE;) s
5 124 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 124 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 124 M
( \(write\) {) s
5 113 M
(            iobuf_move\(iob, disk0_buffer, alen, 0, &copied\);) s
5 102 M
(            assert\(copied != 0 && copied <= resid && copied % DISK0_BLKSIZE == 0\);) s
5 91 M
(            nblks = copied / DISK0_BLKSIZE;) s
5 80 M
(            disk0_write_blks_nolock\(blkno, nblks\);) s
5 69 M
(        }) s
5 58 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 58 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 58 M
( {) s
5 47 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 47 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 47 M
( \(alen > resid\) {) s
5 36 M
(                alen = resid;) s
5 25 M
(            }) s
5 14 M
(            nblks = alen / DISK0_BLKSIZE;) s
5 3 M
(            disk0_read_blks_nolock\(blkno, nblks\);) s
_R
S
%%Page: (102) 102
%%BeginPageSetup
_S
18 36 translate
/pagenum 102 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(            iobuf_move\(iob, disk0_buffer, alen, 1, &copied\);) s
5 696 M
(            assert\(copied == alen && copied % DISK0_BLKSIZE == 0\);) s
5 685 M
(        }) s
5 674 M
(        resid -= copied, blkno += nblks;) s
5 663 M
(    }) s
5 652 M
(    unlock_disk0\(\);) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 641 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 641 M
( 0;) s
5 630 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 608 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 608 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 608 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 597 M
(disk0_ioctl) s
/F-gs-font 10 10 SF
0 setgray
71 597 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 597 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 597 M
( device *dev, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 597 M
(int) s
/F-gs-font 10 10 SF
0 setgray
215 597 M
( op, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 597 M
(void) s
/F-gs-font 10 10 SF
0 setgray
269 597 M
( *data\) {) s
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 586 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 586 M
( -E_UNIMP;) s
5 575 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 553 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 553 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 553 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 542 M
(disk0_device_init) s
/F-gs-font 10 10 SF
0 setgray
107 542 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 542 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
149 542 M
( device *dev\) {) s
5 531 M
(    static_assert\(DISK0_BLKSIZE % SECTSIZE == 0\);) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 520 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 520 M
( \(!ide_device_valid\(DISK0_DEV_NO\)\) {) s
5 509 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 509 M
("disk0 device isn't available.\\n") s
/F-gs-font 10 10 SF
0 setgray
287 509 M
(\);) s
5 498 M
(    }) s
5 487 M
(    dev->d_blocks = ide_device_size\(DISK0_DEV_NO\) / DISK0_BLK_NSECT;) s
5 476 M
(    dev->d_blocksize = DISK0_BLKSIZE;) s
5 465 M
(    dev->d_open = disk0_open;) s
5 454 M
(    dev->d_close = disk0_close;) s
5 443 M
(    dev->d_io = disk0_io;) s
5 432 M
(    dev->d_ioctl = disk0_ioctl;) s
5 421 M
(    sem_init\(&\(disk0_sem\), 1\);) s
5 399 M
(    static_assert\(DISK0_BUFSIZE % DISK0_BLKSIZE == 0\);) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 388 M
( \(\(disk0_buffer = kmalloc\(DISK0_BUFSIZE\)\) == NULL\) {) s
5 377 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 377 M
("disk0 alloc buffer failed.\\n") s
/F-gs-font 10 10 SF
0 setgray
269 377 M
(\);) s
5 366 M
(    }) s
5 355 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 333 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 322 M
(dev_init_disk0) s
/F-gs-font 10 10 SF
0 setgray
89 322 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 322 M
(void) s
/F-gs-font 10 10 SF
0 setgray
119 322 M
(\) {) s
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 311 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 311 M
( inode *node;) s
5 300 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 300 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 300 M
( \(\(node = dev_create_inode\(\)\) == NULL\) {) s
5 289 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 289 M
("disk0: dev_create_node.\\n") s
/F-gs-font 10 10 SF
0 setgray
251 289 M
(\);) s
5 278 M
(    }) s
5 267 M
(    disk0_device_init\(vop_info\(node, device\)\);) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 245 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( ret;) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 234 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 234 M
( \(\(ret = vfs_add_dev\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
167 234 M
("disk0") s
/F-gs-font 10 10 SF
0 setgray
209 234 M
(, node, 1\)\) != 0\) {) s
5 223 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 223 M
("disk0: vfs_add_dev: %e.\\n") s
/F-gs-font 10 10 SF
0 setgray
251 223 M
(, ret\);) s
5 212 M
(    }) s
5 201 M
(}) s
5 179 M
([ucore/lab8_result/kern/fs/devs/dev_stdin.c] ++++++++++++++++++++++++++++++) s
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 168 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 168 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 157 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 157 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 146 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 146 M
(<wait.h>) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 135 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 135 M
(<sync.h>) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 124 M
(<proc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 113 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 113 M
(<sched.h>) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 102 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 102 M
(<dev.h>) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 91 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 91 M
(<vfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 80 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 80 M
(<iobuf.h>) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 69 M
(<inode.h>) s
/F-gs-font 10 10 SF
0 setgray
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 58 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 58 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 47 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 47 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 36 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 36 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
5 14 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 14 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 14 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 14 M
(STDIN_BUFSIZE) s
/F-gs-font 10 10 SF
0 setgray
131 14 M
(               4096) s
_R
S
%%Page: (103) 103
%%BeginPageSetup
_S
18 36 translate
/pagenum 103 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 707 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 707 M
(char) s
/F-gs-font 10 10 SF
0 setgray
71 707 M
( stdin_buffer[STDIN_BUFSIZE];) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 696 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 696 M
( off_t p_rpos, p_wpos;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 685 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( wait_queue_t __wait_queue, *wait_queue = &__wait_queue;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 652 M
(dev_stdin_write) s
/F-gs-font 10 10 SF
0 setgray
95 652 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 652 M
(char) s
/F-gs-font 10 10 SF
0 setgray
125 652 M
( c\) {) s
5 641 M
(    bool intr_flag;) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 630 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 630 M
( \(c != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 630 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
107 630 M
(\) {) s
5 619 M
(        local_intr_save\(intr_flag\);) s
5 608 M
(        {) s
5 597 M
(            stdin_buffer[p_wpos % STDIN_BUFSIZE] = c;) s
5 586 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 586 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 586 M
( \(p_wpos - p_rpos < STDIN_BUFSIZE\) {) s
5 575 M
(                p_wpos ++;) s
5 564 M
(            }) s
5 553 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 553 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 553 M
( \(!wait_queue_empty\(wait_queue\)\) {) s
5 542 M
(                wakeup_queue\(wait_queue, WT_KBD, 1\);) s
5 531 M
(            }) s
5 520 M
(        }) s
5 509 M
(        local_intr_restore\(intr_flag\);) s
5 498 M
(    }) s
5 487 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 465 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 465 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 465 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 454 M
(dev_stdin_read) s
/F-gs-font 10 10 SF
0 setgray
89 454 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 454 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 454 M
( *buf, size_t len\) {) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( ret = 0;) s
5 432 M
(    bool intr_flag;) s
5 421 M
(    local_intr_save\(intr_flag\);) s
5 410 M
(    {) s
5 399 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 399 M
(for) s
/F-gs-font 10 10 SF
0 setgray
71 399 M
( \(; ret < len; ret ++, p_rpos ++\) {) s
5 388 M
(        ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
53 388 M
(try_again) s
/F-gs-font 10 10 SF
0 setgray
107 388 M
(:) s
5 377 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 377 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 377 M
( \(p_rpos < p_wpos\) {) s
5 366 M
(                *buf ++ = stdin_buffer[p_rpos % STDIN_BUFSIZE];) s
5 355 M
(            }) s
5 344 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 344 M
(else) s
/F-gs-font 10 10 SF
0 setgray
101 344 M
( {) s
5 333 M
(                wait_t __wait, *wait = &__wait;) s
5 322 M
(                wait_current_set\(wait_queue, wait, WT_KBD\);) s
5 311 M
(                local_intr_restore\(intr_flag\);) s
5 289 M
(                schedule\(\);) s
5 267 M
(                local_intr_save\(intr_flag\);) s
5 256 M
(                wait_current_del\(wait_queue, wait\);) s
5 245 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 245 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 245 M
( \(wait->wakeup_flags == WT_KBD\) {) s
5 234 M
(                    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 234 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
149 234 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
155 234 M
(try_again) s
/F-gs-font 10 10 SF
0 setgray
209 234 M
(;) s
5 223 M
(                }) s
5 212 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 212 M
(break) s
/F-gs-font 10 10 SF
0 setgray
131 212 M
(;) s
5 201 M
(            }) s
5 190 M
(        }) s
5 179 M
(    }) s
5 168 M
(    local_intr_restore\(intr_flag\);) s
5 157 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 157 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 157 M
( ret;) s
5 146 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 124 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 113 M
(stdin_open) s
/F-gs-font 10 10 SF
0 setgray
65 113 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 113 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 113 M
( device *dev, uint32_t open_flags\) {) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 102 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 102 M
( \(open_flags != O_RDONLY\) {) s
5 91 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 91 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 91 M
( -E_INVAL;) s
5 80 M
(    }) s
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 69 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 69 M
( 0;) s
5 58 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 36 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 25 M
(stdin_close) s
/F-gs-font 10 10 SF
0 setgray
71 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 25 M
( device *dev\) {) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 14 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
( 0;) s
5 3 M
(}) s
_R
S
%%Page: (104) 104
%%BeginPageSetup
_S
18 36 translate
/pagenum 104 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 696 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 696 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 696 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 685 M
(stdin_io) s
/F-gs-font 10 10 SF
0 setgray
53 685 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 685 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 685 M
( device *dev, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 685 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
215 685 M
( iobuf *iob, bool write\) {) s
5 674 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 674 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 674 M
( \(!write\) {) s
5 663 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 663 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 663 M
( ret;) s
5 652 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 652 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 652 M
( \(\(ret = dev_stdin_read\(iob->io_base, iob->io_resid\)\) > 0\) {) s
5 641 M
(            iob->io_resid -= ret;) s
5 630 M
(        }) s
5 619 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 619 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 619 M
( ret;) s
5 608 M
(    }) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 597 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 597 M
( -E_INVAL;) s
5 586 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 564 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 564 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 553 M
(stdin_ioctl) s
/F-gs-font 10 10 SF
0 setgray
71 553 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 553 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 553 M
( device *dev, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 553 M
(int) s
/F-gs-font 10 10 SF
0 setgray
215 553 M
( op, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 553 M
(void) s
/F-gs-font 10 10 SF
0 setgray
269 553 M
( *data\) {) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 542 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 542 M
( -E_INVAL;) s
5 531 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 509 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 509 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 509 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 498 M
(stdin_device_init) s
/F-gs-font 10 10 SF
0 setgray
107 498 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 498 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
149 498 M
( device *dev\) {) s
5 487 M
(    dev->d_blocks = 0;) s
5 476 M
(    dev->d_blocksize = 1;) s
5 465 M
(    dev->d_open = stdin_open;) s
5 454 M
(    dev->d_close = stdin_close;) s
5 443 M
(    dev->d_io = stdin_io;) s
5 432 M
(    dev->d_ioctl = stdin_ioctl;) s
5 410 M
(    p_rpos = p_wpos = 0;) s
5 399 M
(    wait_queue_init\(wait_queue\);) s
5 388 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 366 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 355 M
(dev_init_stdin) s
/F-gs-font 10 10 SF
0 setgray
89 355 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 355 M
(void) s
/F-gs-font 10 10 SF
0 setgray
119 355 M
(\) {) s
5 344 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 344 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 344 M
( inode *node;) s
5 333 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 333 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 333 M
( \(\(node = dev_create_inode\(\)\) == NULL\) {) s
5 322 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 322 M
("stdin: dev_create_node.\\n") s
/F-gs-font 10 10 SF
0 setgray
251 322 M
(\);) s
5 311 M
(    }) s
5 300 M
(    stdin_device_init\(vop_info\(node, device\)\);) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 278 M
( ret;) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 267 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( \(\(ret = vfs_add_dev\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
167 267 M
("stdin") s
/F-gs-font 10 10 SF
0 setgray
209 267 M
(, node, 0\)\) != 0\) {) s
5 256 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 256 M
("stdin: vfs_add_dev: %e.\\n") s
/F-gs-font 10 10 SF
0 setgray
251 256 M
(, ret\);) s
5 245 M
(    }) s
5 234 M
(}) s
5 212 M
([ucore/lab8_result/kern/fs/devs/dev_stdout.c] ++++++++++++++++++++++++++++++) s
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 201 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 201 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 190 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 190 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 179 M
(<dev.h>) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 168 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 168 M
(<vfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 157 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 157 M
(<iobuf.h>) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 146 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 146 M
(<inode.h>) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 135 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 135 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 124 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 113 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 113 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 91 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 80 M
(stdout_open) s
/F-gs-font 10 10 SF
0 setgray
71 80 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 80 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 80 M
( device *dev, uint32_t open_flags\) {) s
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 69 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( \(open_flags != O_WRONLY\) {) s
5 58 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 58 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 58 M
( -E_INVAL;) s
5 47 M
(    }) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 36 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 36 M
( 0;) s
5 25 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 3 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (105) 105
%%BeginPageSetup
_S
18 36 translate
/pagenum 105 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 707 M
(stdout_close) s
/F-gs-font 10 10 SF
0 setgray
77 707 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 707 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 707 M
( device *dev\) {) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 696 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 696 M
( 0;) s
5 685 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 663 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 663 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 652 M
(stdout_io) s
/F-gs-font 10 10 SF
0 setgray
59 652 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 652 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 652 M
( device *dev, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 652 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
221 652 M
( iobuf *iob, bool write\) {) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 641 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 641 M
( \(write\) {) s
5 630 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 630 M
(char) s
/F-gs-font 10 10 SF
0 setgray
77 630 M
( *data = iob->io_base;) s
5 619 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 619 M
(for) s
/F-gs-font 10 10 SF
0 setgray
71 619 M
( \(; iob->io_resid != 0; iob->io_resid --\) {) s
5 608 M
(            cputchar\(*data ++\);) s
5 597 M
(        }) s
5 586 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 586 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 586 M
( 0;) s
5 575 M
(    }) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 564 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 564 M
( -E_INVAL;) s
5 553 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 531 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 531 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 520 M
(stdout_ioctl) s
/F-gs-font 10 10 SF
0 setgray
77 520 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 520 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 520 M
( device *dev, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 520 M
(int) s
/F-gs-font 10 10 SF
0 setgray
221 520 M
( op, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 520 M
(void) s
/F-gs-font 10 10 SF
0 setgray
275 520 M
( *data\) {) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 509 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
( -E_INVAL;) s
5 498 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 476 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 476 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 476 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 465 M
(stdout_device_init) s
/F-gs-font 10 10 SF
0 setgray
113 465 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 465 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 465 M
( device *dev\) {) s
5 454 M
(    dev->d_blocks = 0;) s
5 443 M
(    dev->d_blocksize = 1;) s
5 432 M
(    dev->d_open = stdout_open;) s
5 421 M
(    dev->d_close = stdout_close;) s
5 410 M
(    dev->d_io = stdout_io;) s
5 399 M
(    dev->d_ioctl = stdout_ioctl;) s
5 388 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 366 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 355 M
(dev_init_stdout) s
/F-gs-font 10 10 SF
0 setgray
95 355 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 355 M
(void) s
/F-gs-font 10 10 SF
0 setgray
125 355 M
(\) {) s
5 344 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 344 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 344 M
( inode *node;) s
5 333 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 333 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 333 M
( \(\(node = dev_create_inode\(\)\) == NULL\) {) s
5 322 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 322 M
("stdout: dev_create_node.\\n") s
/F-gs-font 10 10 SF
0 setgray
257 322 M
(\);) s
5 311 M
(    }) s
5 300 M
(    stdout_device_init\(vop_info\(node, device\)\);) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 278 M
( ret;) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 267 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( \(\(ret = vfs_add_dev\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
167 267 M
("stdout") s
/F-gs-font 10 10 SF
0 setgray
215 267 M
(, node, 0\)\) != 0\) {) s
5 256 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 256 M
("stdout: vfs_add_dev: %e.\\n") s
/F-gs-font 10 10 SF
0 setgray
257 256 M
(, ret\);) s
5 245 M
(    }) s
5 234 M
(}) s
5 212 M
([ucore/lab8_result/kern/fs/devs/dev.h] ++++++++++++++++++++++++++++++) s
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 201 M
(__KERN_FS_DEVS_DEV_H__) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 190 M
(__KERN_FS_DEVS_DEV_H__) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 168 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 168 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( inode;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 135 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 135 M
( iobuf;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 113 M
(/*) s
5 102 M
( * Filesystem-namespace-accessible device.) s
5 91 M
( * d_io is for both reads and writes; the iobuf will indicates the direction.) s
5 80 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( device {) s
5 58 M
(    size_t d_blocks;) s
5 47 M
(    size_t d_blocksize;) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( \(*d_open\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 36 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
149 36 M
( device *dev, uint32_t open_flags\);) s
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( \(*d_close\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 25 M
( device *dev\);) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 14 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 14 M
( \(*d_io\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 14 M
( device *dev, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
221 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
257 14 M
( iobuf *iob, bool write\);) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( \(*d_ioctl\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 3 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 3 M
( device *dev, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
239 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
257 3 M
( op, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
287 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
311 3 M
( *data\);) s
_R
S
%%Page: (106) 106
%%BeginPageSetup
_S
18 36 translate
/pagenum 106 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(};) s
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 685 M
(dop_open) s
/F-gs-font 10 10 SF
0 setgray
101 685 M
(\(dev, open_flags\)           \(\(dev\)->d_open\(dev, open_flags\)\)) s
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 674 M
(dop_close) s
/F-gs-font 10 10 SF
0 setgray
107 674 M
(\(dev\)                      \(\(dev\)->d_close\(dev\)\)) s
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 663 M
(dop_io) s
/F-gs-font 10 10 SF
0 setgray
89 663 M
(\(dev, iob, write\)             \(\(dev\)->d_io\(dev, iob, write\)\)) s
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 652 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 652 M
(dop_ioctl) s
/F-gs-font 10 10 SF
0 setgray
107 652 M
(\(dev, op, data\)            \(\(dev\)->d_ioctl\(dev, op, data\)\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 630 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 630 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 630 M
(dev_init) s
/F-gs-font 10 10 SF
0 setgray
83 630 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 630 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 630 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 619 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
( inode *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
89 619 M
(dev_create_inode) s
/F-gs-font 10 10 SF
0 setgray
185 619 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 619 M
(void) s
/F-gs-font 10 10 SF
0 setgray
215 619 M
(\);) s
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 597 M
(/* !__KERN_FS_DEVS_DEV_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
([ucore/lab8_result/kern/fs/devs/dev.c] ++++++++++++++++++++++++++++++) s
5 564 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 564 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 564 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 564 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 553 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 553 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 553 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 553 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 542 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 542 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 542 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 542 M
(<stat.h>) s
/F-gs-font 10 10 SF
0 setgray
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 531 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 531 M
(<dev.h>) s
/F-gs-font 10 10 SF
0 setgray
5 520 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 520 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 520 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 520 M
(<inode.h>) s
/F-gs-font 10 10 SF
0 setgray
5 509 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 509 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 509 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 509 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
5 498 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 498 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 498 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 498 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 476 M
(/*) s
5 465 M
( * dev_open - Called for each open\(\).) s
5 454 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 432 M
(dev_open) s
/F-gs-font 10 10 SF
0 setgray
53 432 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 432 M
( inode *node, uint32_t open_flags\) {) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 421 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
( \(open_flags & \(O_CREAT | O_TRUNC | O_EXCL | O_APPEND\)\) {) s
5 410 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 410 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 410 M
( -E_INVAL;) s
5 399 M
(    }) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 388 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 388 M
( device *dev = vop_info\(node, device\);) s
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 377 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 377 M
( dop_open\(dev, open_flags\);) s
5 366 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 344 M
(/*) s
5 333 M
( * dev_close - Called on the last close\(\). Just pass through.) s
5 322 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 311 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 311 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 311 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 300 M
(dev_close) s
/F-gs-font 10 10 SF
0 setgray
59 300 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 300 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 300 M
( inode *node\) {) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 289 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 289 M
( device *dev = vop_info\(node, device\);) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 278 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 278 M
( dop_close\(dev\);) s
5 267 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 245 M
(/*) s
5 234 M
( * dev_read -Called for read. Hand off to iobuf.) s
5 223 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 212 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 212 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 201 M
(dev_read) s
/F-gs-font 10 10 SF
0 setgray
53 201 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 201 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
215 201 M
( iobuf *iob\) {) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 190 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 190 M
( device *dev = vop_info\(node, device\);) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 179 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 179 M
( dop_io\(dev, iob, 0\);) s
5 168 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 146 M
(/*) s
5 135 M
( * dev_write -Called for write. Hand off to iobuf.) s
5 124 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 113 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 113 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 102 M
(dev_write) s
/F-gs-font 10 10 SF
0 setgray
59 102 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 102 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 102 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 102 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
221 102 M
( iobuf *iob\) {) s
5 91 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 91 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 91 M
( device *dev = vop_info\(node, device\);) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 80 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 80 M
( dop_io\(dev, iob, 1\);) s
5 69 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 47 M
(/*) s
5 36 M
( * dev_ioctl - Called for ioctl\(\). Just pass through.) s
5 25 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 14 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 3 M
(dev_ioctl) s
/F-gs-font 10 10 SF
0 setgray
59 3 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 3 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 3 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
203 3 M
( op, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
233 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
257 3 M
( *data\) {) s
_R
S
%%Page: (107) 107
%%BeginPageSetup
_S
18 36 translate
/pagenum 107 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 707 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
( device *dev = vop_info\(node, device\);) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 696 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 696 M
( dop_ioctl\(dev, op, data\);) s
5 685 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 663 M
(/*) s
5 652 M
( * dev_fstat - Called for stat\(\).) s
5 641 M
( *             Set the type and the size \(block devices only\).) s
5 630 M
( *             The link count for a device is always 1.) s
5 619 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 608 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 608 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 608 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 597 M
(dev_fstat) s
/F-gs-font 10 10 SF
0 setgray
59 597 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 597 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 597 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 597 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
221 597 M
( stat *stat\) {) s
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 586 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( ret;) s
5 575 M
(    memset\(stat, 0, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 575 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
161 575 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 575 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
203 575 M
( stat\)\);) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 564 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 564 M
( \(\(ret = vop_gettype\(node, &\(stat->st_mode\)\)\) != 0\) {) s
5 553 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 553 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 553 M
( ret;) s
5 542 M
(    }) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 531 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 531 M
( device *dev = vop_info\(node, device\);) s
5 520 M
(    stat->st_nlinks = 1;) s
5 509 M
(    stat->st_blocks = dev->d_blocks;) s
5 498 M
(    stat->st_size = stat->st_blocks * dev->d_blocksize;) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 487 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 487 M
( 0;) s
5 476 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 454 M
(/*) s
5 443 M
( * dev_gettype - Return the type. A device is a "block device" if it has a known) s
5 432 M
( *               length. A device that generates data in a stream is a "character) s
5 421 M
( *               device".) s
5 410 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 399 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 399 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 388 M
(dev_gettype) s
/F-gs-font 10 10 SF
0 setgray
71 388 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 388 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 388 M
( inode *node, uint32_t *type_store\) {) s
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 377 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 377 M
( device *dev = vop_info\(node, device\);) s
5 366 M
(    *type_store = \(dev->d_blocks > 0\) ? S_IFBLK : S_IFCHR;) s
5 355 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 355 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 355 M
( 0;) s
5 344 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 322 M
(/*) s
5 311 M
( * dev_tryseek - Attempt a seek.) s
5 300 M
( *               For block devices, require block alignment.) s
5 289 M
( *               For character devices, prohibit seeking entirely.) s
5 278 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 267 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 256 M
(dev_tryseek) s
/F-gs-font 10 10 SF
0 setgray
71 256 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 256 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 256 M
( inode *node, off_t pos\) {) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 245 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 245 M
( device *dev = vop_info\(node, device\);) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 234 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 234 M
( \(dev->d_blocks > 0\) {) s
5 223 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 223 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 223 M
( \(\(pos % dev->d_blocksize\) == 0\) {) s
5 212 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 212 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 212 M
( \(pos >= 0 && pos < dev->d_blocks * dev->d_blocksize\) {) s
5 201 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 201 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 201 M
( 0;) s
5 190 M
(            }) s
5 179 M
(        }) s
5 168 M
(    }) s
5 157 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 157 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 157 M
( -E_INVAL;) s
5 146 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 124 M
(/*) s
5 113 M
( * dev_lookup - Name lookup.) s
5 102 M
( *) s
5 91 M
( * One interesting feature of device:name pathname syntax is that you) s
5 80 M
( * can implement pathnames on arbitrary devices. For instance, if you) s
5 69 M
( * had a graphics device that supported multiple resolutions \(which we) s
5 58 M
( * don't\), you might arrange things so that you could open it with) s
5 47 M
( * pathnames like "video:800x600/24bpp" in order to select the operating) s
5 36 M
( * mode.) s
5 25 M
( *) s
5 14 M
( * However, we have no support for this in the base system.) s
5 3 M
( */) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (108) 108
%%BeginPageSetup
_S
18 36 translate
/pagenum 108 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 707 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 707 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 696 M
(dev_lookup) s
/F-gs-font 10 10 SF
0 setgray
65 696 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 696 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 696 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 696 M
(char) s
/F-gs-font 10 10 SF
0 setgray
215 696 M
( *path, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
263 696 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
299 696 M
( inode **node_store\) {) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 685 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( \(*path != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 685 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
131 685 M
(\) {) s
5 674 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 674 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 674 M
( -E_NOENT;) s
5 663 M
(    }) s
5 652 M
(    vop_ref_inc\(node\);) s
5 641 M
(    *node_store = node;) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 630 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 630 M
( 0;) s
5 619 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 597 M
(/*) s
5 586 M
( * Function table for device inodes.) s
5 575 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 564 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 564 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 564 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 564 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 564 M
( inode_ops dev_node_ops = {) s
5 553 M
(    .vop_magic                      = VOP_MAGIC,) s
5 542 M
(    .vop_open                       = dev_open,) s
5 531 M
(    .vop_close                      = dev_close,) s
5 520 M
(    .vop_read                       = dev_read,) s
5 509 M
(    .vop_write                      = dev_write,) s
5 498 M
(    .vop_fstat                      = dev_fstat,) s
5 487 M
(    .vop_ioctl                      = dev_ioctl,) s
5 476 M
(    .vop_gettype                    = dev_gettype,) s
5 465 M
(    .vop_tryseek                    = dev_tryseek,) s
5 454 M
(    .vop_lookup                     = dev_lookup,) s
5 443 M
(};) s
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 421 M
(init_device) s
/F-gs-font 10 10 SF
0 setgray
119 421 M
(\(x\)                                  \\) s
5 410 M
(    do {                                                \\) s
5 399 M
(        extern void dev_init_##x\(void\);                 \\) s
5 388 M
(        dev_init_##x\(\);                                 \\) s
5 377 M
(    } while \(0\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 355 M
(/* dev_init - Initialization functions for builtin vfs-level devices. */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 344 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 333 M
(dev_init) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 333 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 333 M
(\) {) s
5 322 M
(   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
23 322 M
(// init_device\(null\);) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(    init_device\(stdin\);) s
5 300 M
(    init_device\(stdout\);) s
5 289 M
(    init_device\(disk0\);) s
5 278 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 267 M
(/* dev_create_inode - Create inode for a vfs-level device. */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 256 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 256 M
( inode *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 245 M
(dev_create_inode) s
/F-gs-font 10 10 SF
0 setgray
101 245 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 245 M
(void) s
/F-gs-font 10 10 SF
0 setgray
131 245 M
(\) {) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 234 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 234 M
( inode *node;) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 223 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 223 M
( \(\(node = alloc_inode\(device\)\) != NULL\) {) s
5 212 M
(        vop_init\(node, &dev_node_ops, NULL\);) s
5 201 M
(    }) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 190 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 190 M
( node;) s
5 179 M
(}) s
5 157 M
([ucore/lab8_result/kern/fs/sysfile.c] ++++++++++++++++++++++++++++++) s
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 146 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 146 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 135 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 135 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 124 M
(<vmm.h>) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 113 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 113 M
(<proc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 102 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 102 M
(<kmalloc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 91 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 91 M
(<vfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 80 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 80 M
(<file.h>) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 69 M
(<iobuf.h>) s
/F-gs-font 10 10 SF
0 setgray
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 58 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 58 M
(<sysfile.h>) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 47 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 47 M
(<stat.h>) s
/F-gs-font 10 10 SF
0 setgray
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 36 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 36 M
(<dirent.h>) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 25 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 25 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
5 14 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 14 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 14 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 14 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 3 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 3 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (109) 109
%%BeginPageSetup
_S
18 36 translate
/pagenum 109 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 696 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 696 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 696 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 696 M
(IOBUF_SIZE) s
/F-gs-font 10 10 SF
0 setgray
113 696 M
(                          4096) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 674 M
(/* copy_path - copy path name */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 663 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 663 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 652 M
(copy_path) s
/F-gs-font 10 10 SF
0 setgray
59 652 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 652 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 652 M
( **to, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 652 M
(const) s
/F-gs-font 10 10 SF
0 setgray
161 652 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 652 M
(char) s
/F-gs-font 10 10 SF
0 setgray
191 652 M
( *from\) {) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 641 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 641 M
( mm_struct *mm = current->mm;) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 630 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 630 M
( *buffer;) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 619 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
( \(\(buffer = kmalloc\(FS_MAX_FPATH_LEN + 1\)\) == NULL\) {) s
5 608 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 608 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 608 M
( -E_NO_MEM;) s
5 597 M
(    }) s
5 586 M
(    lock_mm\(mm\);) s
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 575 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( \(!copy_string\(mm, buffer, from, FS_MAX_FPATH_LEN + 1\)\) {) s
5 564 M
(        unlock_mm\(mm\);) s
5 553 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 553 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 553 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 553 M
(failed_cleanup) s
/F-gs-font 10 10 SF
0 setgray
167 553 M
(;) s
5 542 M
(    }) s
5 531 M
(    unlock_mm\(mm\);) s
5 520 M
(    *to = buffer;) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 509 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
( 0;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 487 M
(failed_cleanup) s
/F-gs-font 10 10 SF
0 setgray
89 487 M
(:) s
5 476 M
(    kfree\(buffer\);) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 465 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 465 M
( -E_INVAL;) s
5 454 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 432 M
(/* sysfile_open - open file */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 421 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 410 M
(sysfile_open) s
/F-gs-font 10 10 SF
0 setgray
77 410 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 410 M
(const) s
/F-gs-font 10 10 SF
0 setgray
113 410 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 410 M
(char) s
/F-gs-font 10 10 SF
0 setgray
143 410 M
( *__path, uint32_t open_flags\) {) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 399 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 399 M
( ret;) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 388 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 388 M
( *path;) s
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 377 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
( \(\(ret = copy_path\(&path, __path\)\) != 0\) {) s
5 366 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 366 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 366 M
( ret;) s
5 355 M
(    }) s
5 344 M
(    ret = file_open\(path, open_flags\);) s
5 333 M
(    kfree\(path\);) s
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 322 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 322 M
( ret;) s
5 311 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 289 M
(/* sysfile_close - close file */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 267 M
(sysfile_close) s
/F-gs-font 10 10 SF
0 setgray
83 267 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 267 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 267 M
( fd\) {) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 256 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 256 M
( file_close\(fd\);) s
5 245 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 223 M
(/* sysfile_read - read file */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 201 M
(sysfile_read) s
/F-gs-font 10 10 SF
0 setgray
77 201 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 201 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 201 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 201 M
(void) s
/F-gs-font 10 10 SF
0 setgray
155 201 M
( *base, size_t len\) {) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 190 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 190 M
( mm_struct *mm = current->mm;) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 179 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 179 M
( \(len == 0\) {) s
5 168 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 168 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 168 M
( 0;) s
5 157 M
(    }) s
5 146 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 146 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( \(!file_testfd\(fd, 1, 0\)\) {) s
5 135 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 135 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 135 M
( -E_INVAL;) s
5 124 M
(    }) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 113 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 113 M
( *buffer;) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 102 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 102 M
( \(\(buffer = kmalloc\(IOBUF_SIZE\)\) == NULL\) {) s
5 91 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 91 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 91 M
( -E_NO_MEM;) s
5 80 M
(    }) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 58 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( ret = 0;) s
5 47 M
(    size_t copied = 0, alen;) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 36 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 36 M
( \(len != 0\) {) s
5 25 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 25 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 25 M
( \(\(alen = IOBUF_SIZE\) > len\) {) s
5 14 M
(            alen = len;) s
5 3 M
(        }) s
_R
S
%%Page: (110) 110
%%BeginPageSetup
_S
18 36 translate
/pagenum 110 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        ret = file_read\(fd, buffer, alen, &alen\);) s
5 696 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 696 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 696 M
( \(alen != 0\) {) s
5 685 M
(            lock_mm\(mm\);) s
5 674 M
(            {) s
5 663 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 663 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 663 M
( \(copy_to_user\(mm, base, buffer, alen\)\) {) s
5 652 M
(                    assert\(len >= alen\);) s
5 641 M
(                    base += alen, len -= alen, copied += alen;) s
5 630 M
(                }) s
5 619 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 619 M
(else) s
/F-gs-font 10 10 SF
0 setgray
125 619 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
131 619 M
(if) s
/F-gs-font 10 10 SF
0 setgray
143 619 M
( \(ret == 0\) {) s
5 608 M
(                    ret = -E_INVAL;) s
5 597 M
(                }) s
5 586 M
(            }) s
5 575 M
(            unlock_mm\(mm\);) s
5 564 M
(        }) s
5 553 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 553 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 553 M
( \(ret != 0 || alen == 0\) {) s
5 542 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 542 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 542 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 542 M
(out) s
/F-gs-font 10 10 SF
0 setgray
125 542 M
(;) s
5 531 M
(        }) s
5 520 M
(    }) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 498 M
(out) s
/F-gs-font 10 10 SF
0 setgray
23 498 M
(:) s
5 487 M
(    kfree\(buffer\);) s
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 476 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 476 M
( \(copied != 0\) {) s
5 465 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 465 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 465 M
( copied;) s
5 454 M
(    }) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 443 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 443 M
( ret;) s
5 432 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 410 M
(/* sysfile_write - write file */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 399 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 388 M
(sysfile_write) s
/F-gs-font 10 10 SF
0 setgray
83 388 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 388 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 388 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 388 M
(void) s
/F-gs-font 10 10 SF
0 setgray
161 388 M
( *base, size_t len\) {) s
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 377 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 377 M
( mm_struct *mm = current->mm;) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 366 M
( \(len == 0\) {) s
5 355 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 355 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 355 M
( 0;) s
5 344 M
(    }) s
5 333 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 333 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 333 M
( \(!file_testfd\(fd, 0, 1\)\) {) s
5 322 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 322 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 322 M
( -E_INVAL;) s
5 311 M
(    }) s
5 300 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 300 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 300 M
( *buffer;) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 289 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( \(\(buffer = kmalloc\(IOBUF_SIZE\)\) == NULL\) {) s
5 278 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 278 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 278 M
( -E_NO_MEM;) s
5 267 M
(    }) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 245 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( ret = 0;) s
5 234 M
(    size_t copied = 0, alen;) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 223 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 223 M
( \(len != 0\) {) s
5 212 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 212 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 212 M
( \(\(alen = IOBUF_SIZE\) > len\) {) s
5 201 M
(            alen = len;) s
5 190 M
(        }) s
5 179 M
(        lock_mm\(mm\);) s
5 168 M
(        {) s
5 157 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 157 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 157 M
( \(!copy_from_user\(mm, buffer, base, alen, 0\)\) {) s
5 146 M
(                ret = -E_INVAL;) s
5 135 M
(            }) s
5 124 M
(        }) s
5 113 M
(        unlock_mm\(mm\);) s
5 102 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 102 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 102 M
( \(ret == 0\) {) s
5 91 M
(            ret = file_write\(fd, buffer, alen, &alen\);) s
5 80 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 80 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 80 M
( \(alen != 0\) {) s
5 69 M
(                assert\(len >= alen\);) s
5 58 M
(                base += alen, len -= alen, copied += alen;) s
5 47 M
(            }) s
5 36 M
(        }) s
5 25 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 25 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 25 M
( \(ret != 0 || alen == 0\) {) s
5 14 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 14 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 14 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 14 M
(out) s
/F-gs-font 10 10 SF
0 setgray
125 14 M
(;) s
5 3 M
(        }) s
_R
S
%%Page: (111) 111
%%BeginPageSetup
_S
18 36 translate
/pagenum 111 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    }) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 685 M
(out) s
/F-gs-font 10 10 SF
0 setgray
23 685 M
(:) s
5 674 M
(    kfree\(buffer\);) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 663 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 663 M
( \(copied != 0\) {) s
5 652 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 652 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 652 M
( copied;) s
5 641 M
(    }) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 630 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 630 M
( ret;) s
5 619 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 597 M
(/* sysfile_seek - seek file */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 586 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 575 M
(sysfile_seek) s
/F-gs-font 10 10 SF
0 setgray
77 575 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 575 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 575 M
( fd, off_t pos, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 575 M
(int) s
/F-gs-font 10 10 SF
0 setgray
215 575 M
( whence\) {) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 564 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 564 M
( file_seek\(fd, pos, whence\);) s
5 553 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 531 M
(/* sysfile_fstat - stat file */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 520 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 509 M
(sysfile_fstat) s
/F-gs-font 10 10 SF
0 setgray
83 509 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 509 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 509 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 509 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
173 509 M
( stat *__stat\) {) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 498 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 498 M
( mm_struct *mm = current->mm;) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 487 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( ret;) s
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 476 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 476 M
( stat __local_stat, *stat = &__local_stat;) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 465 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 465 M
( \(\(ret = file_fstat\(fd, stat\)\) != 0\) {) s
5 454 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 454 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 454 M
( ret;) s
5 443 M
(    }) s
5 421 M
(    lock_mm\(mm\);) s
5 410 M
(    {) s
5 399 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 399 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 399 M
( \(!copy_to_user\(mm, __stat, stat, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
269 399 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
305 399 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
311 399 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
347 399 M
( stat\)\)\) {) s
5 388 M
(            ret = -E_INVAL;) s
5 377 M
(        }) s
5 366 M
(    }) s
5 355 M
(    unlock_mm\(mm\);) s
5 344 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 344 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 344 M
( ret;) s
5 333 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 311 M
(/* sysfile_fsync - sync file */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 300 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 289 M
(sysfile_fsync) s
/F-gs-font 10 10 SF
0 setgray
83 289 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 289 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 289 M
( fd\) {) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 278 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 278 M
( file_fsync\(fd\);) s
5 267 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 245 M
(/* sysfile_chdir - change dir */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 234 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 223 M
(sysfile_chdir) s
/F-gs-font 10 10 SF
0 setgray
83 223 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 223 M
(const) s
/F-gs-font 10 10 SF
0 setgray
119 223 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 223 M
(char) s
/F-gs-font 10 10 SF
0 setgray
149 223 M
( *__path\) {) s
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( ret;) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 201 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 201 M
( *path;) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 190 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 190 M
( \(\(ret = copy_path\(&path, __path\)\) != 0\) {) s
5 179 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 179 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 179 M
( ret;) s
5 168 M
(    }) s
5 157 M
(    ret = vfs_chdir\(path\);) s
5 146 M
(    kfree\(path\);) s
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 135 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 135 M
( ret;) s
5 124 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 102 M
(/* sysfile_link - link file */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 80 M
(sysfile_link) s
/F-gs-font 10 10 SF
0 setgray
77 80 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 80 M
(const) s
/F-gs-font 10 10 SF
0 setgray
113 80 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 80 M
(char) s
/F-gs-font 10 10 SF
0 setgray
143 80 M
( *__path1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
209 80 M
(const) s
/F-gs-font 10 10 SF
0 setgray
239 80 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 80 M
(char) s
/F-gs-font 10 10 SF
0 setgray
269 80 M
( *__path2\) {) s
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 69 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( ret;) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 58 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 58 M
( *old_path, *new_path;) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 47 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 47 M
( \(\(ret = copy_path\(&old_path, __path1\)\) != 0\) {) s
5 36 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 36 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 36 M
( ret;) s
5 25 M
(    }) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 14 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( \(\(ret = copy_path\(&new_path, __path2\)\) != 0\) {) s
5 3 M
(        kfree\(old_path\);) s
_R
S
%%Page: (112) 112
%%BeginPageSetup
_S
18 36 translate
/pagenum 112 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 707 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 707 M
( ret;) s
5 696 M
(    }) s
5 685 M
(    ret = vfs_link\(old_path, new_path\);) s
5 674 M
(    kfree\(old_path\), kfree\(new_path\);) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 663 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 663 M
( ret;) s
5 652 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 630 M
(/* sysfile_rename - rename file */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 619 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 608 M
(sysfile_rename) s
/F-gs-font 10 10 SF
0 setgray
89 608 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 608 M
(const) s
/F-gs-font 10 10 SF
0 setgray
125 608 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 608 M
(char) s
/F-gs-font 10 10 SF
0 setgray
155 608 M
( *__path1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
221 608 M
(const) s
/F-gs-font 10 10 SF
0 setgray
251 608 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 608 M
(char) s
/F-gs-font 10 10 SF
0 setgray
281 608 M
( *__path2\) {) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 597 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( ret;) s
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 586 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 586 M
( *old_path, *new_path;) s
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 575 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( \(\(ret = copy_path\(&old_path, __path1\)\) != 0\) {) s
5 564 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 564 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 564 M
( ret;) s
5 553 M
(    }) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 542 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 542 M
( \(\(ret = copy_path\(&new_path, __path2\)\) != 0\) {) s
5 531 M
(        kfree\(old_path\);) s
5 520 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 520 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 520 M
( ret;) s
5 509 M
(    }) s
5 498 M
(    ret = vfs_rename\(old_path, new_path\);) s
5 487 M
(    kfree\(old_path\), kfree\(new_path\);) s
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 476 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 476 M
( ret;) s
5 465 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 443 M
(/* sysfile_unlink - unlink file */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 432 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 421 M
(sysfile_unlink) s
/F-gs-font 10 10 SF
0 setgray
89 421 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 421 M
(const) s
/F-gs-font 10 10 SF
0 setgray
125 421 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 421 M
(char) s
/F-gs-font 10 10 SF
0 setgray
155 421 M
( *__path\) {) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 410 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( ret;) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 399 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 399 M
( *path;) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 388 M
( \(\(ret = copy_path\(&path, __path\)\) != 0\) {) s
5 377 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 377 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 377 M
( ret;) s
5 366 M
(    }) s
5 355 M
(    ret = vfs_unlink\(path\);) s
5 344 M
(    kfree\(path\);) s
5 333 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 333 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 333 M
( ret;) s
5 322 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 300 M
(/* sysfile_get cwd - get current working directory */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 278 M
(sysfile_getcwd) s
/F-gs-font 10 10 SF
0 setgray
89 278 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 278 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 278 M
( *buf, size_t len\) {) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 267 M
( mm_struct *mm = current->mm;) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 256 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 256 M
( \(len == 0\) {) s
5 245 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 245 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 245 M
( -E_INVAL;) s
5 234 M
(    }) s
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( ret = -E_INVAL;) s
5 201 M
(    lock_mm\(mm\);) s
5 190 M
(    {) s
5 179 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 179 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 179 M
( \(user_mem_check\(mm, \(uintptr_t\)buf, len, 1\)\) {) s
5 168 M
(            ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 168 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 168 M
( iobuf __iob, *iob = iobuf_init\(&__iob, buf, len, 0\);) s
5 157 M
(            ret = vfs_getcwd\(iob\);) s
5 146 M
(        }) s
5 135 M
(    }) s
5 124 M
(    unlock_mm\(mm\);) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 113 M
( ret;) s
5 102 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 80 M
(/* sysfile_getdirentry - get the file entry in DIR */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 58 M
(sysfile_getdirentry) s
/F-gs-font 10 10 SF
0 setgray
119 58 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 58 M
(int) s
/F-gs-font 10 10 SF
0 setgray
143 58 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 58 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
209 58 M
( dirent *__direntp\) {) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 47 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
( mm_struct *mm = current->mm;) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 36 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 36 M
( dirent *direntp;) s
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 25 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 25 M
( \(\(direntp = kmalloc\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
167 25 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
203 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
209 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
245 25 M
( dirent\)\)\) == NULL\) {) s
5 14 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 14 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 14 M
( -E_NO_MEM;) s
5 3 M
(    }) s
_R
S
%%Page: (113) 113
%%BeginPageSetup
_S
18 36 translate
/pagenum 113 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 696 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 696 M
( ret = 0;) s
5 685 M
(    lock_mm\(mm\);) s
5 674 M
(    {) s
5 663 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 663 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 663 M
( \(!copy_from_user\(mm, &\(direntp->offset\), &\(__direntp->offset\), ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
449 663 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
485 663 M
(\(direntp->offs) s
5 652 M
(et\), 1\)\) {) s
5 641 M
(            ret = -E_INVAL;) s
5 630 M
(        }) s
5 619 M
(    }) s
5 608 M
(    unlock_mm\(mm\);) s
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 586 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 586 M
( \(ret != 0 || \(ret = file_getdirentry\(fd, direntp\)\) != 0\) {) s
5 575 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 575 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 575 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 575 M
(out) s
/F-gs-font 10 10 SF
0 setgray
101 575 M
(;) s
5 564 M
(    }) s
5 542 M
(    lock_mm\(mm\);) s
5 531 M
(    {) s
5 520 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 520 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
( \(!copy_to_user\(mm, __direntp, direntp, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
305 520 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
341 520 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
347 520 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
383 520 M
( dirent\)\)\) {) s
5 509 M
(            ret = -E_INVAL;) s
5 498 M
(        }) s
5 487 M
(    }) s
5 476 M
(    unlock_mm\(mm\);) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 454 M
(out) s
/F-gs-font 10 10 SF
0 setgray
23 454 M
(:) s
5 443 M
(    kfree\(direntp\);) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 432 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 432 M
( ret;) s
5 421 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 399 M
(/* sysfile_dup -  duplicate fd1 to fd2 */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 388 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 377 M
(sysfile_dup) s
/F-gs-font 10 10 SF
0 setgray
71 377 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 377 M
(int) s
/F-gs-font 10 10 SF
0 setgray
95 377 M
( fd1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 377 M
(int) s
/F-gs-font 10 10 SF
0 setgray
149 377 M
( fd2\) {) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 366 M
( file_dup\(fd1, fd2\);) s
5 355 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 333 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 322 M
(sysfile_pipe) s
/F-gs-font 10 10 SF
0 setgray
77 322 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 322 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 322 M
( *fd_store\) {) s
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 311 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 311 M
( -E_UNIMP;) s
5 300 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 267 M
(sysfile_mkfifo) s
/F-gs-font 10 10 SF
0 setgray
89 267 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 267 M
(const) s
/F-gs-font 10 10 SF
0 setgray
125 267 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 267 M
(char) s
/F-gs-font 10 10 SF
0 setgray
155 267 M
( *__name, uint32_t open_flags\) {) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 256 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 256 M
( -E_UNIMP;) s
5 245 M
(}) s
5 223 M
([ucore/lab8_result/kern/fs/vfs/vfspath.c] ++++++++++++++++++++++++++++++) s
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 212 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 212 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 201 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 201 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 190 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 190 M
(<vfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 179 M
(<inode.h>) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 168 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 168 M
(<iobuf.h>) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 157 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 157 M
(<stat.h>) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 146 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 146 M
(<proc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 135 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 135 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 124 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 102 M
(/*) s
5 91 M
( * get_cwd_nolock - retrieve current process's working directory. without lock protect) s
5 80 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 69 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 69 M
( inode *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 58 M
(get_cwd_nolock) s
/F-gs-font 10 10 SF
0 setgray
89 58 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 58 M
(void) s
/F-gs-font 10 10 SF
0 setgray
119 58 M
(\) {) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 47 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
( current->filesp->pwd;) s
5 36 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 25 M
(/*) s
5 14 M
( * set_cwd_nolock - set current working directory.) s
5 3 M
( */) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (114) 114
%%BeginPageSetup
_S
18 36 translate
/pagenum 114 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 707 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 696 M
(set_cwd_nolock) s
/F-gs-font 10 10 SF
0 setgray
89 696 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 696 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 696 M
( inode *pwd\) {) s
5 685 M
(    current->filesp->pwd = pwd;) s
5 674 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 652 M
(/*) s
5 641 M
( * lock_cfs - lock the fs related process on current process ) s
5 630 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 619 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 619 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 608 M
(lock_cfs) s
/F-gs-font 10 10 SF
0 setgray
53 608 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 608 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 608 M
(\) {) s
5 597 M
(    lock_files\(current->filesp\);) s
5 586 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 575 M
(/*) s
5 564 M
( * unlock_cfs - unlock the fs related process on current process ) s
5 553 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 542 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 542 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 542 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 531 M
(unlock_cfs) s
/F-gs-font 10 10 SF
0 setgray
65 531 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 531 M
(void) s
/F-gs-font 10 10 SF
0 setgray
95 531 M
(\) {) s
5 520 M
(    unlock_files\(current->filesp\);) s
5 509 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 487 M
(/*) s
5 476 M
( *  vfs_get_curdir - Get current directory as a inode.) s
5 465 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 443 M
(vfs_get_curdir) s
/F-gs-font 10 10 SF
0 setgray
89 443 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 443 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 443 M
( inode **dir_store\) {) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 432 M
( inode *node;) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 421 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
( \(\(node = get_cwd_nolock\(\)\) != NULL\) {) s
5 410 M
(        vop_ref_inc\(node\);) s
5 399 M
(        *dir_store = node;) s
5 388 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 388 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 388 M
( 0;) s
5 377 M
(    }) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 366 M
( -E_NOENT;) s
5 355 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 333 M
(/*) s
5 322 M
( * vfs_set_curdir - Set current directory as a inode.) s
5 311 M
( *                  The passed inode must in fact be a directory.) s
5 300 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 278 M
(vfs_set_curdir) s
/F-gs-font 10 10 SF
0 setgray
89 278 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 278 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 278 M
( inode *dir\) {) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 267 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 267 M
( ret = 0;) s
5 256 M
(    lock_cfs\(\);) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 245 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 245 M
( inode *old_dir;) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 234 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 234 M
( \(\(old_dir = get_cwd_nolock\(\)\) != dir\) {) s
5 223 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 223 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 223 M
( \(dir != NULL\) {) s
5 212 M
(            uint32_t type;) s
5 201 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 201 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 201 M
( \(\(ret = vop_gettype\(dir, &type\)\) != 0\) {) s
5 190 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 190 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
125 190 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
131 190 M
(out) s
/F-gs-font 10 10 SF
0 setgray
149 190 M
(;) s
5 179 M
(            }) s
5 168 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 168 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 168 M
( \(!S_ISDIR\(type\)\) {) s
5 157 M
(                ret = -E_NOTDIR;) s
5 146 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 146 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
125 146 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
131 146 M
(out) s
/F-gs-font 10 10 SF
0 setgray
149 146 M
(;) s
5 135 M
(            }) s
5 124 M
(            vop_ref_inc\(dir\);) s
5 113 M
(        }) s
5 102 M
(        set_cwd_nolock\(dir\);) s
5 91 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 91 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 91 M
( \(old_dir != NULL\) {) s
5 80 M
(            vop_ref_dec\(old_dir\);) s
5 69 M
(        }) s
5 58 M
(    }) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 47 M
(out) s
/F-gs-font 10 10 SF
0 setgray
23 47 M
(:) s
5 36 M
(    unlock_cfs\(\);) s
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 25 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 25 M
( ret;) s
5 14 M
(}) s
_R
S
%%Page: (115) 115
%%BeginPageSetup
_S
18 36 translate
/pagenum 115 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
(/*) s
5 696 M
( * vfs_chdir - Set current directory, as a pathname. Use vfs_lookup to translate) s
5 685 M
( *             it to a inode.) s
5 674 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 652 M
(vfs_chdir) s
/F-gs-font 10 10 SF
0 setgray
59 652 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 652 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 652 M
( *path\) {) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( ret;) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 630 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 630 M
( inode *node;) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 619 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
( \(\(ret = vfs_lookup\(path, &node\)\) == 0\) {) s
5 608 M
(        ret = vfs_set_curdir\(node\);) s
5 597 M
(        vop_ref_dec\(node\);) s
5 586 M
(    }) s
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 575 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 575 M
( ret;) s
5 564 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 553 M
(/*) s
5 542 M
( * vfs_getcwd - retrieve current working directory\(cwd\).) s
5 531 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 520 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 509 M
(vfs_getcwd) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 509 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 509 M
( iobuf *iob\) {) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 498 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 498 M
( ret;) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 487 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 487 M
( inode *node;) s
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 476 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 476 M
( \(\(ret = vfs_get_curdir\(&node\)\) != 0\) {) s
5 465 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 465 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 465 M
( ret;) s
5 454 M
(    }) s
5 443 M
(    assert\(node->in_fs != NULL\);) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 421 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 421 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 421 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 421 M
( *devname = vfs_get_devname\(node->in_fs\);) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 410 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 410 M
( \(\(ret = iobuf_move\(iob, \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 410 M
(char) s
/F-gs-font 10 10 SF
0 setgray
221 410 M
( *\)devname, strlen\(devname\), 1, NULL\)\) != 0\) {) s
5 399 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 399 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 399 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 399 M
(out) s
/F-gs-font 10 10 SF
0 setgray
101 399 M
(;) s
5 388 M
(    }) s
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 377 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 377 M
( colon = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 377 M
(':') s
/F-gs-font 10 10 SF
0 setgray
125 377 M
(;) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 366 M
( \(\(ret = iobuf_move\(iob, &colon, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
239 366 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
275 366 M
(\(colon\), 1, NULL\)\) != 0\) {) s
5 355 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 355 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 355 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 355 M
(out) s
/F-gs-font 10 10 SF
0 setgray
101 355 M
(;) s
5 344 M
(    }) s
5 333 M
(    ret = vop_namefile\(node, iob\);) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 311 M
(out) s
/F-gs-font 10 10 SF
0 setgray
23 311 M
(:) s
5 300 M
(    vop_ref_dec\(node\);) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 289 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 289 M
( ret;) s
5 278 M
(}) s
5 256 M
([ucore/lab8_result/kern/fs/vfs/vfsfile.c] ++++++++++++++++++++++++++++++) s
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 245 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 245 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 234 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 234 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 234 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 223 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 223 M
(<vfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 212 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 212 M
(<inode.h>) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 201 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 201 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 190 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 190 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 179 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 146 M
(// open file in vfs, get/create inode for file with filename path.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 124 M
(vfs_open) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 124 M
(char) s
/F-gs-font 10 10 SF
0 setgray
83 124 M
( *path, uint32_t open_flags, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 124 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
293 124 M
( inode **node_store\) {) s
5 113 M
(    bool can_write = 0;) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 102 M
(switch) s
/F-gs-font 10 10 SF
0 setgray
65 102 M
( \(open_flags & O_ACCMODE\) {) s
5 91 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 91 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 91 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 91 M
(O_RDONLY) s
/F-gs-font 10 10 SF
0 setgray
107 91 M
(:) s
5 80 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 80 M
(break) s
/F-gs-font 10 10 SF
0 setgray
83 80 M
(;) s
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 69 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 69 M
(O_WRONLY) s
/F-gs-font 10 10 SF
0 setgray
107 69 M
(:) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 58 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 58 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 58 M
(O_RDWR) s
/F-gs-font 10 10 SF
0 setgray
95 58 M
(:) s
5 47 M
(        can_write = 1;) s
5 36 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 36 M
(break) s
/F-gs-font 10 10 SF
0 setgray
83 36 M
(;) s
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
29 25 M
(default) s
/F-gs-font 10 10 SF
0 setgray
71 25 M
(:) s
5 14 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 14 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 14 M
( -E_INVAL;) s
5 3 M
(    }) s
_R
S
%%Page: (116) 116
%%BeginPageSetup
_S
18 36 translate
/pagenum 116 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 696 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 696 M
( \(open_flags & O_TRUNC\) {) s
5 685 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 685 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 685 M
( \(!can_write\) {) s
5 674 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 674 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 674 M
( -E_INVAL;) s
5 663 M
(        }) s
5 652 M
(    }) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 630 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( ret; ) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 619 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 619 M
( inode *node;) s
5 608 M
(    bool excl = \(open_flags & O_EXCL\) != 0;) s
5 597 M
(    bool create = \(open_flags & O_CREAT\) != 0;) s
5 586 M
(    ret = vfs_lookup\(path, &node\);) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 564 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 564 M
( \(ret != 0\) {) s
5 553 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 553 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 553 M
( \(ret == -16 && \(create\)\) {) s
5 542 M
(            ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 542 M
(char) s
/F-gs-font 10 10 SF
0 setgray
101 542 M
( *name;) s
5 531 M
(            ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 531 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 531 M
( inode *dir;) s
5 520 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 520 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 520 M
( \(\(ret = vfs_lookup_parent\(path, &dir, &name\)\) != 0\) {) s
5 509 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 509 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 509 M
( ret;) s
5 498 M
(            }) s
5 487 M
(            ret = vop_create\(dir, name, excl, &node\);) s
5 476 M
(        } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 476 M
(else) s
/F-gs-font 10 10 SF
0 setgray
89 476 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
95 476 M
(return) s
/F-gs-font 10 10 SF
0 setgray
131 476 M
( ret;) s
5 465 M
(    } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
41 465 M
(else) s
/F-gs-font 10 10 SF
0 setgray
65 465 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
71 465 M
(if) s
/F-gs-font 10 10 SF
0 setgray
83 465 M
( \(excl && create\) {) s
5 454 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 454 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 454 M
( -E_EXISTS;) s
5 443 M
(    }) s
5 432 M
(    assert\(node != NULL\);) s
5 421 M
(    ) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 410 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 410 M
( \(\(ret = vop_open\(node, open_flags\)\) != 0\) {) s
5 399 M
(        vop_ref_dec\(node\);) s
5 388 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 388 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 388 M
( ret;) s
5 377 M
(    }) s
5 355 M
(    vop_open_inc\(node\);) s
5 344 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 344 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 344 M
( \(open_flags & O_TRUNC || create\) {) s
5 333 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 333 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 333 M
( \(\(ret = vop_truncate\(node, 0\)\) != 0\) {) s
5 322 M
(            vop_open_dec\(node\);) s
5 311 M
(            vop_ref_dec\(node\);) s
5 300 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 300 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 300 M
( ret;) s
5 289 M
(        }) s
5 278 M
(    }) s
5 267 M
(    *node_store = node;) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 256 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 256 M
( 0;) s
5 245 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 223 M
(// close file in vfs) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 201 M
(vfs_close) s
/F-gs-font 10 10 SF
0 setgray
59 201 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 201 M
( inode *node\) {) s
5 190 M
(    vop_open_dec\(node\);) s
5 179 M
(    vop_ref_dec\(node\);) s
5 168 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 168 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 168 M
( 0;) s
5 157 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 135 M
(// unimplement) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 113 M
(vfs_unlink) s
/F-gs-font 10 10 SF
0 setgray
65 113 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 113 M
(char) s
/F-gs-font 10 10 SF
0 setgray
95 113 M
( *path\) {) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 102 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 102 M
( -E_UNIMP;) s
5 91 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 69 M
(// unimplement) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 58 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 47 M
(vfs_rename) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 47 M
(char) s
/F-gs-font 10 10 SF
0 setgray
95 47 M
( *old_path, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 47 M
(char) s
/F-gs-font 10 10 SF
0 setgray
191 47 M
( *new_path\) {) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 36 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 36 M
( -E_UNIMP;) s
5 25 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 3 M
(// unimplement) s
_R
S
%%Page: (117) 117
%%BeginPageSetup
_S
18 36 translate
/pagenum 117 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 696 M
(vfs_link) s
/F-gs-font 10 10 SF
0 setgray
53 696 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 696 M
(char) s
/F-gs-font 10 10 SF
0 setgray
83 696 M
( *old_path, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 696 M
(char) s
/F-gs-font 10 10 SF
0 setgray
179 696 M
( *new_path\) {) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 685 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 685 M
( -E_UNIMP;) s
5 674 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 652 M
(// unimplement) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 630 M
(vfs_symlink) s
/F-gs-font 10 10 SF
0 setgray
71 630 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 630 M
(char) s
/F-gs-font 10 10 SF
0 setgray
101 630 M
( *old_path, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 630 M
(char) s
/F-gs-font 10 10 SF
0 setgray
197 630 M
( *new_path\) {) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 619 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 619 M
( -E_UNIMP;) s
5 608 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 586 M
(// unimplement) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 564 M
(vfs_readlink) s
/F-gs-font 10 10 SF
0 setgray
77 564 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 564 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 564 M
( *path, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 564 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
191 564 M
( iobuf *iob\) {) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 553 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 553 M
( -E_UNIMP;) s
5 542 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 520 M
(// unimplement) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 509 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 498 M
(vfs_mkdir) s
/F-gs-font 10 10 SF
0 setgray
59 498 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 498 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 498 M
( *path\){) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 487 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 487 M
( -E_UNIMP;) s
5 476 M
(}) s
5 465 M
([ucore/lab8_result/kern/fs/vfs/vfsdev.c] ++++++++++++++++++++++++++++++) s
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 454 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 443 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 443 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 432 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 432 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 432 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 421 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 421 M
(<vfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 410 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 410 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 410 M
(<dev.h>) s
/F-gs-font 10 10 SF
0 setgray
5 399 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 399 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 399 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 399 M
(<inode.h>) s
/F-gs-font 10 10 SF
0 setgray
5 388 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 388 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 388 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 388 M
(<sem.h>) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 377 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 377 M
(<list.h>) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 366 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 366 M
(<kmalloc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 355 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 355 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 344 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 333 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 311 M
(// device info entry in vdev_list ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 300 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 300 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 300 M
( {) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 289 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 289 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 289 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 289 M
( *devname;) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 278 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 278 M
( inode *devnode;) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 267 M
( fs *fs;) s
5 256 M
(    bool mountable;) s
5 245 M
(    list_entry_t vdev_link;) s
5 234 M
(} vfs_dev_t;) s
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 212 M
(le2vdev) s
/F-gs-font 10 10 SF
0 setgray
95 212 M
(\(le, member\)                         \\) s
5 201 M
(    to_struct\(\(le\), vfs_dev_t, member\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 179 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 179 M
( list_entry_t vdev_list;     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
215 179 M
(// device info list in vfs layer) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 168 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 168 M
( semaphore_t vdev_list_sem;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 146 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 135 M
(lock_vdev_list) s
/F-gs-font 10 10 SF
0 setgray
89 135 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 135 M
(void) s
/F-gs-font 10 10 SF
0 setgray
119 135 M
(\) {) s
5 124 M
(    down\(&vdev_list_sem\);) s
5 113 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 91 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 91 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 80 M
(unlock_vdev_list) s
/F-gs-font 10 10 SF
0 setgray
101 80 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 80 M
(void) s
/F-gs-font 10 10 SF
0 setgray
131 80 M
(\) {) s
5 69 M
(    up\(&vdev_list_sem\);) s
5 58 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 25 M
(vfs_devlist_init) s
/F-gs-font 10 10 SF
0 setgray
101 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 25 M
(void) s
/F-gs-font 10 10 SF
0 setgray
131 25 M
(\) {) s
5 14 M
(    list_init\(&vdev_list\);) s
5 3 M
(    sem_init\(&vdev_list_sem, 1\);) s
_R
S
%%Page: (118) 118
%%BeginPageSetup
_S
18 36 translate
/pagenum 118 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 685 M
(// vfs_cleanup - finally clean \(or sync\) fs) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 674 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 663 M
(vfs_cleanup) s
/F-gs-font 10 10 SF
0 setgray
71 663 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 663 M
(void) s
/F-gs-font 10 10 SF
0 setgray
101 663 M
(\) {) s
5 652 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 652 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 652 M
( \(!list_empty\(&vdev_list\)\) {) s
5 641 M
(        lock_vdev_list\(\);) s
5 630 M
(        {) s
5 619 M
(            list_entry_t *list = &vdev_list, *le = list;) s
5 608 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 608 M
(while) s
/F-gs-font 10 10 SF
0 setgray
107 608 M
( \(\(le = list_next\(le\)\) != list\) {) s
5 597 M
(                vfs_dev_t *vdev = le2vdev\(le, vdev_link\);) s
5 586 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 586 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 586 M
( \(vdev->fs != NULL\) {) s
5 575 M
(                    fsop_cleanup\(vdev->fs\);) s
5 564 M
(                }) s
5 553 M
(            }) s
5 542 M
(        }) s
5 531 M
(        unlock_vdev_list\(\);) s
5 520 M
(    }) s
5 509 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 487 M
(/*) s
5 476 M
( * vfs_get_root - Given a device name \(stdin, stdout, etc.\), hand) s
5 465 M
( *                back an appropriate inode.) s
5 454 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 432 M
(vfs_get_root) s
/F-gs-font 10 10 SF
0 setgray
77 432 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 432 M
(const) s
/F-gs-font 10 10 SF
0 setgray
113 432 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 432 M
(char) s
/F-gs-font 10 10 SF
0 setgray
143 432 M
( *devname, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
209 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
245 432 M
( inode **node_store\) {) s
5 421 M
(    assert\(devname != NULL\);) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 410 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( ret = -E_NO_DEV;) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 399 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
( \(!list_empty\(&vdev_list\)\) {) s
5 388 M
(        lock_vdev_list\(\);) s
5 377 M
(        {) s
5 366 M
(            list_entry_t *list = &vdev_list, *le = list;) s
5 355 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 355 M
(while) s
/F-gs-font 10 10 SF
0 setgray
107 355 M
( \(\(le = list_next\(le\)\) != list\) {) s
5 344 M
(                vfs_dev_t *vdev = le2vdev\(le, vdev_link\);) s
5 333 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 333 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 333 M
( \(strcmp\(devname, vdev->devname\) == 0\) {) s
5 322 M
(                    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 322 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
161 322 M
( inode *found = NULL;) s
5 311 M
(                    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 311 M
(if) s
/F-gs-font 10 10 SF
0 setgray
137 311 M
( \(vdev->fs != NULL\) {) s
5 300 M
(                        found = fsop_get_root\(vdev->fs\);) s
5 289 M
(                    }) s
5 278 M
(                    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 278 M
(else) s
/F-gs-font 10 10 SF
0 setgray
149 278 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
155 278 M
(if) s
/F-gs-font 10 10 SF
0 setgray
167 278 M
( \(!vdev->mountable\) {) s
5 267 M
(                        vop_ref_inc\(vdev->devnode\);) s
5 256 M
(                        found = vdev->devnode;) s
5 245 M
(                    }) s
5 234 M
(                    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 234 M
(if) s
/F-gs-font 10 10 SF
0 setgray
137 234 M
( \(found != NULL\) {) s
5 223 M
(                        ret = 0, *node_store = found;) s
5 212 M
(                    }) s
5 201 M
(                    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 201 M
(else) s
/F-gs-font 10 10 SF
0 setgray
149 201 M
( {) s
5 190 M
(                        ret = -E_NA_DEV;) s
5 179 M
(                    }) s
5 168 M
(                    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 168 M
(break) s
/F-gs-font 10 10 SF
0 setgray
155 168 M
(;) s
5 157 M
(                }) s
5 146 M
(            }) s
5 135 M
(        }) s
5 124 M
(        unlock_vdev_list\(\);) s
5 113 M
(    }) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 102 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 102 M
( ret;) s
5 91 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 69 M
(/*) s
5 58 M
( * vfs_get_devname - Given a filesystem, hand back the name of the device it's mounted on.) s
5 47 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(const) s
/F-gs-font 10 10 SF
0 setgray
35 36 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 36 M
(char) s
/F-gs-font 10 10 SF
0 setgray
65 36 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 25 M
(vfs_get_devname) s
/F-gs-font 10 10 SF
0 setgray
95 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 25 M
( fs *fs\) {) s
5 14 M
(    assert\(fs != NULL\);) s
5 3 M
(    list_entry_t *list = &vdev_list, *le = list;) s
_R
S
%%Page: (119) 119
%%BeginPageSetup
_S
18 36 translate
/pagenum 119 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 707 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 707 M
( \(\(le = list_next\(le\)\) != list\) {) s
5 696 M
(        vfs_dev_t *vdev = le2vdev\(le, vdev_link\);) s
5 685 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 685 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 685 M
( \(vdev->fs == fs\) {) s
5 674 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 674 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 674 M
( vdev->devname;) s
5 663 M
(        }) s
5 652 M
(    }) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 641 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 641 M
( NULL;) s
5 630 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 608 M
(/*) s
5 597 M
( * check_devname_confilct - Is there alreadily device which has the same name?) s
5 586 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( bool) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 564 M
(check_devname_conflict) s
/F-gs-font 10 10 SF
0 setgray
137 564 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 564 M
(const) s
/F-gs-font 10 10 SF
0 setgray
173 564 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 564 M
(char) s
/F-gs-font 10 10 SF
0 setgray
203 564 M
( *devname\) {) s
5 553 M
(    list_entry_t *list = &vdev_list, *le = list;) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 542 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 542 M
( \(\(le = list_next\(le\)\) != list\) {) s
5 531 M
(        vfs_dev_t *vdev = le2vdev\(le, vdev_link\);) s
5 520 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 520 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
( \(strcmp\(vdev->devname, devname\) == 0\) {) s
5 509 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 509 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 509 M
( 0;) s
5 498 M
(        }) s
5 487 M
(    }) s
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 476 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 476 M
( 1;) s
5 465 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 432 M
(/*) s
5 421 M
(* vfs_do_add - Add a new device to the VFS layer's device table.) s
5 410 M
(*) s
5 399 M
(* If "mountable" is set, the device will be treated as one that expects) s
5 388 M
(* to have a filesystem mounted on it, and a raw device will be created) s
5 377 M
(* for direct access.) s
5 366 M
(*/) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 355 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 355 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 355 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 344 M
(vfs_do_add) s
/F-gs-font 10 10 SF
0 setgray
65 344 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 344 M
(const) s
/F-gs-font 10 10 SF
0 setgray
101 344 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 344 M
(char) s
/F-gs-font 10 10 SF
0 setgray
131 344 M
( *devname, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 344 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
233 344 M
( inode *devnode, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
335 344 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
371 344 M
( fs *fs, bool mountable\) {) s
5 333 M
(    assert\(devname != NULL\);) s
5 322 M
(    assert\(\(devnode == NULL && !mountable\) || \(devnode != NULL && check_inode_type\(devnode, de) s
5 311 M
(vice\)\)\);) s
5 300 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 300 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 300 M
( \(strlen\(devname\) > FS_MAX_DNAME_LEN\) {) s
5 289 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 289 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 289 M
( -E_TOO_BIG;) s
5 278 M
(    }) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 256 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( ret = -E_NO_MEM;) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 245 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 245 M
( *s_devname;) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 234 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 234 M
( \(\(s_devname = strdup\(devname\)\) == NULL\) {) s
5 223 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 223 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 223 M
( ret;) s
5 212 M
(    }) s
5 190 M
(    vfs_dev_t *vdev;) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 179 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 179 M
( \(\(vdev = kmalloc\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 179 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
185 179 M
(\(vfs_dev_t\)\)\) == NULL\) {) s
5 168 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 168 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 168 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 168 M
(failed_cleanup_name) s
/F-gs-font 10 10 SF
0 setgray
197 168 M
(;) s
5 157 M
(    }) s
5 135 M
(    ret = -E_EXISTS;) s
5 124 M
(    lock_vdev_list\(\);) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( \(!check_devname_conflict\(s_devname\)\) {) s
5 102 M
(        unlock_vdev_list\(\);) s
5 91 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 91 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 91 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 91 M
(failed_cleanup_vdev) s
/F-gs-font 10 10 SF
0 setgray
197 91 M
(;) s
5 80 M
(    }) s
5 69 M
(    vdev->devname = s_devname;) s
5 58 M
(    vdev->devnode = devnode;) s
5 47 M
(    vdev->mountable = mountable;) s
5 36 M
(    vdev->fs = fs;) s
5 14 M
(    list_add\(&vdev_list, &\(vdev->vdev_link\)\);) s
5 3 M
(    unlock_vdev_list\(\);) s
_R
S
%%Page: (120) 120
%%BeginPageSetup
_S
18 36 translate
/pagenum 120 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 707 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
( 0;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 685 M
(failed_cleanup_vdev) s
/F-gs-font 10 10 SF
0 setgray
119 685 M
(:) s
5 674 M
(    kfree\(vdev\);) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 663 M
(failed_cleanup_name) s
/F-gs-font 10 10 SF
0 setgray
119 663 M
(:) s
5 652 M
(    kfree\(s_devname\);) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 641 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 641 M
( ret;) s
5 630 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 608 M
(/*) s
5 597 M
( * vfs_add_fs - Add a new fs,  by name. See  vfs_do_add information for the description of) s
5 586 M
( *              mountable.) s
5 575 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 553 M
(vfs_add_fs) s
/F-gs-font 10 10 SF
0 setgray
65 553 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 553 M
(const) s
/F-gs-font 10 10 SF
0 setgray
101 553 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 553 M
(char) s
/F-gs-font 10 10 SF
0 setgray
131 553 M
( *devname, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 553 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
233 553 M
( fs *fs\) {) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 542 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 542 M
( vfs_do_add\(devname, NULL, fs, 0\);) s
5 531 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 509 M
(/*) s
5 498 M
( * vfs_add_dev - Add a new device, by name. See  vfs_do_add information for the description of) s
5 487 M
( *               mountable.) s
5 476 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 465 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 454 M
(vfs_add_dev) s
/F-gs-font 10 10 SF
0 setgray
71 454 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 454 M
(const) s
/F-gs-font 10 10 SF
0 setgray
107 454 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 454 M
(char) s
/F-gs-font 10 10 SF
0 setgray
137 454 M
( *devname, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 454 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
239 454 M
( inode *devnode, bool mountable\) {) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 443 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 443 M
( vfs_do_add\(devname, devnode, NULL, mountable\);) s
5 432 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 410 M
(/*) s
5 399 M
( * find_mount - Look for a mountable device named DEVNAME.) s
5 388 M
( *              Should already hold vdev_list lock.) s
5 377 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 366 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 366 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 366 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 355 M
(find_mount) s
/F-gs-font 10 10 SF
0 setgray
65 355 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 355 M
(const) s
/F-gs-font 10 10 SF
0 setgray
101 355 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 355 M
(char) s
/F-gs-font 10 10 SF
0 setgray
131 355 M
( *devname, vfs_dev_t **vdev_store\) {) s
5 344 M
(    assert\(devname != NULL\);) s
5 333 M
(    list_entry_t *list = &vdev_list, *le = list;) s
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 322 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 322 M
( \(\(le = list_next\(le\)\) != list\) {) s
5 311 M
(        vfs_dev_t *vdev = le2vdev\(le, vdev_link\);) s
5 300 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 300 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 300 M
( \(vdev->mountable && strcmp\(vdev->devname, devname\) == 0\) {) s
5 289 M
(            *vdev_store = vdev;) s
5 278 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 278 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 278 M
( 0;) s
5 267 M
(        }) s
5 256 M
(    }) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 245 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 245 M
( -E_NO_DEV;) s
5 234 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 212 M
(/*) s
5 201 M
( * vfs_mount - Mount a filesystem. Once we've found the device, call MOUNTFUNC to) s
5 190 M
( *             set up the filesystem and hand back a struct fs.) s
5 179 M
( *) s
5 168 M
( * The DATA argument is passed through unchanged to MOUNTFUNC.) s
5 157 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 135 M
(vfs_mount) s
/F-gs-font 10 10 SF
0 setgray
59 135 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 135 M
(const) s
/F-gs-font 10 10 SF
0 setgray
95 135 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 135 M
(char) s
/F-gs-font 10 10 SF
0 setgray
125 135 M
( *devname, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
209 135 M
( \(*mountfunc\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
293 135 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
329 135 M
( device *dev, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
413 135 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
449 135 M
( fs **fs_store\)\) {) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( ret;) s
5 113 M
(    lock_vdev_list\(\);) s
5 102 M
(    vfs_dev_t *vdev;) s
5 91 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 91 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 91 M
( \(\(ret = find_mount\(devname, &vdev\)\) != 0\) {) s
5 80 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 80 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 80 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 80 M
(out) s
/F-gs-font 10 10 SF
0 setgray
101 80 M
(;) s
5 69 M
(    }) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 58 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 58 M
( \(vdev->fs != NULL\) {) s
5 47 M
(        ret = -E_BUSY;) s
5 36 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 36 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 36 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 36 M
(out) s
/F-gs-font 10 10 SF
0 setgray
101 36 M
(;) s
5 25 M
(    }) s
5 14 M
(    assert\(vdev->devname != NULL && vdev->mountable\);) s
_R
S
%%Page: (121) 121
%%BeginPageSetup
_S
18 36 translate
/pagenum 121 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 707 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
( device *dev = vop_info\(vdev->devnode, device\);) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 696 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 696 M
( \(\(ret = mountfunc\(dev, &\(vdev->fs\)\)\) == 0\) {) s
5 685 M
(        assert\(vdev->fs != NULL\);) s
5 674 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 674 M
("vfs: mount %s.\\n") s
/F-gs-font 10 10 SF
0 setgray
209 674 M
(, vdev->devname\);) s
5 663 M
(    }) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 641 M
(out) s
/F-gs-font 10 10 SF
0 setgray
23 641 M
(:) s
5 630 M
(    unlock_vdev_list\(\);) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 619 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 619 M
( ret;) s
5 608 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 586 M
(/*) s
5 575 M
( * vfs_unmount - Unmount a filesystem/device by name.) s
5 564 M
( *               First calls FSOP_SYNC on the filesystem; then calls FSOP_UNMOUNT.) s
5 553 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 542 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 531 M
(vfs_unmount) s
/F-gs-font 10 10 SF
0 setgray
71 531 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 531 M
(const) s
/F-gs-font 10 10 SF
0 setgray
107 531 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 531 M
(char) s
/F-gs-font 10 10 SF
0 setgray
137 531 M
( *devname\) {) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 520 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
( ret;) s
5 509 M
(    lock_vdev_list\(\);) s
5 498 M
(    vfs_dev_t *vdev;) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 487 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( \(\(ret = find_mount\(devname, &vdev\)\) != 0\) {) s
5 476 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 476 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 476 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 476 M
(out) s
/F-gs-font 10 10 SF
0 setgray
101 476 M
(;) s
5 465 M
(    }) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( \(vdev->fs == NULL\) {) s
5 443 M
(        ret = -E_INVAL;) s
5 432 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 432 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 432 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 432 M
(out) s
/F-gs-font 10 10 SF
0 setgray
101 432 M
(;) s
5 421 M
(    }) s
5 410 M
(    assert\(vdev->devname != NULL && vdev->mountable\);) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 388 M
( \(\(ret = fsop_sync\(vdev->fs\)\) != 0\) {) s
5 377 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 377 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 377 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 377 M
(out) s
/F-gs-font 10 10 SF
0 setgray
101 377 M
(;) s
5 366 M
(    }) s
5 355 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 355 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 355 M
( \(\(ret = fsop_unmount\(vdev->fs\)\) == 0\) {) s
5 344 M
(        vdev->fs = NULL;) s
5 333 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 333 M
("vfs: unmount %s.\\n") s
/F-gs-font 10 10 SF
0 setgray
221 333 M
(, vdev->devname\);) s
5 322 M
(    }) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 300 M
(out) s
/F-gs-font 10 10 SF
0 setgray
23 300 M
(:) s
5 289 M
(    unlock_vdev_list\(\);) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 278 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 278 M
( ret;) s
5 267 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 245 M
(/*) s
5 234 M
( * vfs_unmount_all - Global unmount function.) s
5 223 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 201 M
(vfs_unmount_all) s
/F-gs-font 10 10 SF
0 setgray
95 201 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 201 M
(void) s
/F-gs-font 10 10 SF
0 setgray
125 201 M
(\) {) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 190 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 190 M
( \(!list_empty\(&vdev_list\)\) {) s
5 179 M
(        lock_vdev_list\(\);) s
5 168 M
(        {) s
5 157 M
(            list_entry_t *list = &vdev_list, *le = list;) s
5 146 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 146 M
(while) s
/F-gs-font 10 10 SF
0 setgray
107 146 M
( \(\(le = list_next\(le\)\) != list\) {) s
5 135 M
(                vfs_dev_t *vdev = le2vdev\(le, vdev_link\);) s
5 124 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 124 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 124 M
( \(vdev->mountable && vdev->fs != NULL\) {) s
5 113 M
(                    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 113 M
(int) s
/F-gs-font 10 10 SF
0 setgray
143 113 M
( ret;) s
5 102 M
(                    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 102 M
(if) s
/F-gs-font 10 10 SF
0 setgray
137 102 M
( \(\(ret = fsop_sync\(vdev->fs\)\) != 0\) {) s
5 91 M
(                        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 91 M
("vfs: warning: sync failed for %s: %e.\\n") s
/F-gs-font 10 10 SF
0 setgray
443 91 M
(, vdev->devname, ret\)) s
5 80 M
(;) s
5 69 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 69 M
(continue) s
/F-gs-font 10 10 SF
0 setgray
197 69 M
( ;) s
5 58 M
(                    }) s
5 47 M
(                    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 47 M
(if) s
/F-gs-font 10 10 SF
0 setgray
137 47 M
( \(\(ret = fsop_unmount\(vdev->fs\)\) != 0\) {) s
5 36 M
(                        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 36 M
("vfs: warning: unmount failed for %s: %e.\\n") s
/F-gs-font 10 10 SF
0 setgray
461 36 M
(, vdev->devname, r) s
5 25 M
(et\);) s
5 14 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 14 M
(continue) s
/F-gs-font 10 10 SF
0 setgray
197 14 M
( ;) s
5 3 M
(                    }) s
_R
S
%%Page: (122) 122
%%BeginPageSetup
_S
18 36 translate
/pagenum 122 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(                    vdev->fs = NULL;) s
5 696 M
(                    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 696 M
("vfs: unmount %s.\\n") s
/F-gs-font 10 10 SF
0 setgray
293 696 M
(, vdev->devname\);) s
5 685 M
(                }) s
5 674 M
(            }) s
5 663 M
(        }) s
5 652 M
(        unlock_vdev_list\(\);) s
5 641 M
(    }) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 630 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 630 M
( 0;) s
5 619 M
(}) s
5 597 M
([ucore/lab8_result/kern/fs/vfs/vfslookup.c] ++++++++++++++++++++++++++++++) s
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 586 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 586 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 575 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 575 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 564 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 564 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 564 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 564 M
(<vfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 553 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 553 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 553 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 553 M
(<inode.h>) s
/F-gs-font 10 10 SF
0 setgray
5 542 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 542 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 542 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 542 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 531 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 531 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 509 M
(/*) s
5 498 M
( * get_device- Common code to pull the device name, if any, off the front of a) s
5 487 M
( *             path and choose the inode to begin the name lookup relative to.) s
5 476 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 454 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 443 M
(get_device) s
/F-gs-font 10 10 SF
0 setgray
65 443 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 443 M
(char) s
/F-gs-font 10 10 SF
0 setgray
95 443 M
( *path, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 443 M
(char) s
/F-gs-font 10 10 SF
0 setgray
167 443 M
( **subpath, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
239 443 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
275 443 M
( inode **node_store\) {) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 432 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 432 M
( i, slash = -1, colon = -1;) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 421 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( \(i = 0; path[i] != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
167 421 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
191 421 M
(; i ++\) {) s
5 410 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 410 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 410 M
( \(path[i] == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 410 M
(':') s
/F-gs-font 10 10 SF
0 setgray
161 410 M
(\) { colon = i; ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
251 410 M
(break) s
/F-gs-font 10 10 SF
0 setgray
281 410 M
(; }) s
5 399 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 399 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 399 M
( \(path[i] == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 399 M
('/') s
/F-gs-font 10 10 SF
0 setgray
161 399 M
(\) { slash = i; ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
251 399 M
(break) s
/F-gs-font 10 10 SF
0 setgray
281 399 M
(; }) s
5 388 M
(    }) s
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 377 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
( \(colon < 0 && slash != 0\) {) s
5 366 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 366 M
(/* *) s
5 355 M
(         * No colon before a slash, so no device name specified, and the slash isn't leading) s
5 344 M
(         * or is also absent, so this is a relative path or just a bare filename. Start from) s
5 333 M
(         * the current directory, and use the whole thing as the subpath.) s
5 322 M
(         * */) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(        *subpath = path;) s
5 300 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 300 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 300 M
( vfs_get_curdir\(node_store\);) s
5 289 M
(    }) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 278 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 278 M
( \(colon > 0\) {) s
5 267 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 267 M
(/* device:path - get root of device's filesystem */) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(        path[colon] = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 256 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
161 256 M
(;) s
5 234 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 234 M
(/* device:/path - skip slash, treat as device:path */) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 223 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 223 M
( \(path[++ colon] == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
203 223 M
('/') s
/F-gs-font 10 10 SF
0 setgray
221 223 M
(\);) s
5 212 M
(        *subpath = path + colon;) s
5 201 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 201 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 201 M
( vfs_get_root\(path, node_store\);) s
5 190 M
(    }) s
5 168 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 168 M
(/* *) s
5 157 M
(     * we have either /path or :path) s
5 146 M
(     * /path is a path relative to the root of the "boot filesystem") s
5 135 M
(     * :path is a path relative to the root of the current filesystem) s
5 124 M
(     * */) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 113 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( ret;) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 102 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 102 M
( \(*path == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 102 M
('/') s
/F-gs-font 10 10 SF
0 setgray
125 102 M
(\) {) s
5 91 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 91 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 91 M
( \(\(ret = vfs_get_bootfs\(node_store\)\) != 0\) {) s
5 80 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 80 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 80 M
( ret;) s
5 69 M
(        }) s
5 58 M
(    }) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 47 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 47 M
( {) s
5 36 M
(        assert\(*path == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 36 M
(':') s
/F-gs-font 10 10 SF
0 setgray
167 36 M
(\);) s
5 25 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 25 M
( inode *node;) s
5 14 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 14 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
( \(\(ret = vfs_get_curdir\(&node\)\) != 0\) {) s
5 3 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 3 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 3 M
( ret;) s
_R
S
%%Page: (123) 123
%%BeginPageSetup
_S
18 36 translate
/pagenum 123 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        }) s
5 696 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 696 M
(/* The current directory may not be a device, so it must have a fs. */) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(        assert\(node->in_fs != NULL\);) s
5 674 M
(        *node_store = fsop_get_root\(node->in_fs\);) s
5 663 M
(        vop_ref_dec\(node\);) s
5 652 M
(    }) s
5 630 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 630 M
(/* ///... or :/... */) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 619 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 619 M
( \(*\(++ path\) == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
155 619 M
('/') s
/F-gs-font 10 10 SF
0 setgray
173 619 M
(\);) s
5 608 M
(    *subpath = path;) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 597 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 597 M
( 0;) s
5 586 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 564 M
(/*) s
5 553 M
( * vfs_lookup - get the inode according to the path filename) s
5 542 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 531 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 520 M
(vfs_lookup) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 520 M
(char) s
/F-gs-font 10 10 SF
0 setgray
95 520 M
( *path, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 520 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
179 520 M
( inode **node_store\) {) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 509 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( ret;) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 498 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 498 M
( inode *node;) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 487 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( \(\(ret = get_device\(path, &path, &node\)\) != 0\) {) s
5 476 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 476 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 476 M
( ret;) s
5 465 M
(    }) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( \(*path != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 454 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
131 454 M
(\) {) s
5 443 M
(        ret = vop_lookup\(node, path, node_store\);) s
5 432 M
(        vop_ref_dec\(node\);) s
5 421 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 421 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 421 M
( ret;) s
5 410 M
(    }) s
5 399 M
(    *node_store = node;) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 388 M
( 0;) s
5 377 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 355 M
(/*) s
5 344 M
( * vfs_lookup_parent - Name-to-vnode translation.) s
5 333 M
( *  \(In BSD, both of these are subsumed by namei\(\).\)) s
5 322 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 311 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 300 M
(vfs_lookup_parent) s
/F-gs-font 10 10 SF
0 setgray
107 300 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 300 M
(char) s
/F-gs-font 10 10 SF
0 setgray
137 300 M
( *path, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 300 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
221 300 M
( inode **node_store, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
347 300 M
(char) s
/F-gs-font 10 10 SF
0 setgray
371 300 M
( **endp\){) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 289 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( ret;) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 278 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 278 M
( inode *node;) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 267 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( \(\(ret = get_device\(path, &path, &node\)\) != 0\) {) s
5 256 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 256 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 256 M
( ret;) s
5 245 M
(    }) s
5 234 M
(    *endp = path;) s
5 223 M
(    *node_store = node;) s
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 212 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 212 M
( 0;) s
5 201 M
(}) s
5 190 M
([ucore/lab8_result/kern/fs/vfs/vfs.c] ++++++++++++++++++++++++++++++) s
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 179 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 168 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 168 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 157 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 157 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 146 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 146 M
(<vfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 135 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 135 M
(<inode.h>) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 124 M
(<sem.h>) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 113 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 113 M
(<kmalloc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 102 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 102 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 80 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 80 M
( semaphore_t bootfs_sem;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 69 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 69 M
( inode *bootfs_node = NULL;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 47 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 47 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 47 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 47 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
77 47 M
(vfs_devlist_init) s
/F-gs-font 10 10 SF
0 setgray
173 47 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 47 M
(void) s
/F-gs-font 10 10 SF
0 setgray
203 47 M
(\);) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 25 M
(// __alloc_fs - allocate memory for fs, and set fs type) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( fs *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 3 M
(__alloc_fs) s
/F-gs-font 10 10 SF
0 setgray
65 3 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
89 3 M
( type\) {) s
_R
S
%%Page: (124) 124
%%BeginPageSetup
_S
18 36 translate
/pagenum 124 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 707 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
( fs *fs;) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 696 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 696 M
( \(\(fs = kmalloc\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
137 696 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
173 696 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 696 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
215 696 M
( fs\)\)\) != NULL\) {) s
5 685 M
(        fs->fs_type = type;) s
5 674 M
(    }) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 663 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 663 M
( fs;) s
5 652 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 630 M
(// vfs_init -  vfs initialize) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 619 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 608 M
(vfs_init) s
/F-gs-font 10 10 SF
0 setgray
53 608 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 608 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 608 M
(\) {) s
5 597 M
(    sem_init\(&bootfs_sem, 1\);) s
5 586 M
(    vfs_devlist_init\(\);) s
5 575 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 553 M
(// lock_bootfs - lock  for bootfs) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 542 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 542 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 542 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 531 M
(lock_bootfs) s
/F-gs-font 10 10 SF
0 setgray
71 531 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 531 M
(void) s
/F-gs-font 10 10 SF
0 setgray
101 531 M
(\) {) s
5 520 M
(    down\(&bootfs_sem\);) s
5 509 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 498 M
(// ulock_bootfs - ulock for bootfs) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 487 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 487 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 476 M
(unlock_bootfs) s
/F-gs-font 10 10 SF
0 setgray
83 476 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 476 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 476 M
(\) {) s
5 465 M
(    up\(&bootfs_sem\);) s
5 454 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 432 M
(// change_bootfs - set the new fs inode ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 421 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 421 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 410 M
(change_bootfs) s
/F-gs-font 10 10 SF
0 setgray
83 410 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 410 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 410 M
( inode *node\) {) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 399 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 399 M
( inode *old;) s
5 388 M
(    lock_bootfs\(\);) s
5 377 M
(    {) s
5 366 M
(        old = bootfs_node, bootfs_node = node;) s
5 355 M
(    }) s
5 344 M
(    unlock_bootfs\(\);) s
5 333 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 333 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 333 M
( \(old != NULL\) {) s
5 322 M
(        vop_ref_dec\(old\);) s
5 311 M
(    }) s
5 300 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 278 M
(// vfs_set_bootfs - change the dir of file system) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 256 M
(vfs_set_bootfs) s
/F-gs-font 10 10 SF
0 setgray
89 256 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 256 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 256 M
( *fsname\) {) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 245 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 245 M
( inode *node = NULL;) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 234 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 234 M
( \(fsname != NULL\) {) s
5 223 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 223 M
(char) s
/F-gs-font 10 10 SF
0 setgray
77 223 M
( *s;) s
5 212 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 212 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 212 M
( \(\(s = strchr\(fsname, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 212 M
(':') s
/F-gs-font 10 10 SF
0 setgray
215 212 M
(\)\) == NULL || s[1] != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
347 212 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
371 212 M
(\) {) s
5 201 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 201 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 201 M
( -E_INVAL;) s
5 190 M
(        }) s
5 179 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 179 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 179 M
( ret;) s
5 168 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 168 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 168 M
( \(\(ret = vfs_chdir\(fsname\)\) != 0\) {) s
5 157 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 157 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 157 M
( ret;) s
5 146 M
(        }) s
5 135 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 135 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 135 M
( \(\(ret = vfs_get_curdir\(&node\)\) != 0\) {) s
5 124 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 124 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 124 M
( ret;) s
5 113 M
(        }) s
5 102 M
(    }) s
5 91 M
(    change_bootfs\(node\);) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 80 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 80 M
( 0;) s
5 69 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 47 M
(// vfs_get_bootfs - get the inode of bootfs) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 25 M
(vfs_get_bootfs) s
/F-gs-font 10 10 SF
0 setgray
89 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 25 M
( inode **node_store\) {) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
( inode *node = NULL;) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 3 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 3 M
( \(bootfs_node != NULL\) {) s
_R
S
%%Page: (125) 125
%%BeginPageSetup
_S
18 36 translate
/pagenum 125 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        lock_bootfs\(\);) s
5 696 M
(        {) s
5 685 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 685 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 685 M
( \(\(node = bootfs_node\) != NULL\) {) s
5 674 M
(                vop_ref_inc\(bootfs_node\);) s
5 663 M
(            }) s
5 652 M
(        }) s
5 641 M
(        unlock_bootfs\(\);) s
5 630 M
(    }) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 619 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
( \(node == NULL\) {) s
5 608 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 608 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 608 M
( -E_NOENT;) s
5 597 M
(    }) s
5 586 M
(    *node_store = node;) s
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 575 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 575 M
( 0;) s
5 564 M
(}) s
5 542 M
([ucore/lab8_result/kern/fs/vfs/inode.h] ++++++++++++++++++++++++++++++) s
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 531 M
(__KERN_FS_VFS_INODE_H__) s
/F-gs-font 10 10 SF
0 setgray
5 520 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 520 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 520 M
(__KERN_FS_VFS_INODE_H__) s
/F-gs-font 10 10 SF
0 setgray
5 498 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 498 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 498 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 498 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 487 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 487 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 487 M
(<dev.h>) s
/F-gs-font 10 10 SF
0 setgray
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 476 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 476 M
(<sfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 465 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 465 M
(<atomic.h>) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 454 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 432 M
( stat;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 421 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
( iobuf;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 399 M
(/*) s
5 388 M
( * A struct inode is an abstract representation of a file.) s
5 377 M
( *) s
5 366 M
( * It is an interface that allows the kernel's filesystem-independent ) s
5 355 M
( * code to interact usefully with multiple sets of filesystem code.) s
5 344 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 322 M
(/*) s
5 311 M
( * Abstract low-level file.) s
5 300 M
( *) s
5 289 M
( * Note: in_info is Filesystem-specific data, in_type is the inode type) s
5 278 M
( *) s
5 267 M
( * open_count is managed using VOP_INCOPEN and VOP_DECOPEN by) s
5 256 M
( * vfs_open\(\) and vfs_close\(\). Code above the VFS layer should not) s
5 245 M
( * need to worry about it.) s
5 234 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 223 M
( inode {) s
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 212 M
(union) s
/F-gs-font 10 10 SF
0 setgray
59 212 M
( {) s
5 201 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 201 M
( device __device_info;) s
5 190 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 190 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 190 M
( sfs_inode __sfs_inode_info;) s
5 179 M
(    } in_info;) s
5 168 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 168 M
(enum) s
/F-gs-font 10 10 SF
0 setgray
53 168 M
( {) s
5 157 M
(        inode_type_device_info = 0x1234,) s
5 146 M
(        inode_type_sfs_inode_info,) s
5 135 M
(    } in_type;) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( ref_count;) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 113 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( open_count;) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 102 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 102 M
( fs *in_fs;) s
5 91 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 91 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 91 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 91 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 91 M
( inode_ops *in_ops;) s
5 80 M
(};) s
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 58 M
(__in_type) s
/F-gs-font 10 10 SF
0 setgray
107 58 M
(\(type\)                                             inode_type_##type##_info) s
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 36 M
(check_inode_type) s
/F-gs-font 10 10 SF
0 setgray
149 36 M
(\(node, type\)                                \(\(node\)->in_type == __in_t) s
5 25 M
(ype\(type\)\)) s
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 3 M
(__vop_info) s
/F-gs-font 10 10 SF
0 setgray
113 3 M
(\(node, type\)                                      \\) s
_R
S
%%Page: (126) 126
%%BeginPageSetup
_S
18 36 translate
/pagenum 126 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    \({                                                              \\) s
5 696 M
(        struct inode *__node = \(node\);                              \\) s
5 685 M
(        assert\(__node != NULL && check_inode_type\(__node, type\)\);   \\) s
5 674 M
(        &\(__node->in_info.__##type##_info\);                         \\) s
5 663 M
(     }\)) s
5 641 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 641 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 641 M
(vop_info) s
/F-gs-font 10 10 SF
0 setgray
101 641 M
(\(node, type\)                                        __vop_info\(node, type\)) s
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 619 M
(info2node) s
/F-gs-font 10 10 SF
0 setgray
107 619 M
(\(info, type\)                                       \\) s
5 608 M
(    to_struct\(\(info\), struct inode, in_info.__##type##_info\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 586 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 586 M
( inode *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
89 586 M
(__alloc_inode) s
/F-gs-font 10 10 SF
0 setgray
167 586 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 586 M
(int) s
/F-gs-font 10 10 SF
0 setgray
191 586 M
( type\);) s
5 564 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 564 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 564 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 564 M
(alloc_inode) s
/F-gs-font 10 10 SF
0 setgray
119 564 M
(\(type\)                                           __alloc_inode\(__in_type\(ty) s
5 553 M
(pe\)\)) s
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 531 M
(MAX_INODE_COUNT) s
/F-gs-font 10 10 SF
0 setgray
143 531 M
(                     0x10000) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 509 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 509 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 509 M
(inode_ref_inc) s
/F-gs-font 10 10 SF
0 setgray
107 509 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 509 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
149 509 M
( inode *node\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 498 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 498 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 498 M
(inode_ref_dec) s
/F-gs-font 10 10 SF
0 setgray
107 498 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 498 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
149 498 M
( inode *node\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 487 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 487 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 487 M
(inode_open_inc) s
/F-gs-font 10 10 SF
0 setgray
113 487 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 487 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 487 M
( inode *node\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 476 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 476 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 476 M
(inode_open_dec) s
/F-gs-font 10 10 SF
0 setgray
113 476 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 476 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 476 M
( inode *node\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 454 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 454 M
(inode_init) s
/F-gs-font 10 10 SF
0 setgray
95 454 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 454 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 454 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
221 454 M
(const) s
/F-gs-font 10 10 SF
0 setgray
251 454 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 454 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
293 454 M
( inode_ops *ops, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
395 454 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
431 454 M
( fs *fs\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 443 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 443 M
(inode_kill) s
/F-gs-font 10 10 SF
0 setgray
95 443 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 443 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 443 M
( inode *node\);) s
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 421 M
(VOP_MAGIC) s
/F-gs-font 10 10 SF
0 setgray
107 421 M
(                           0x8c4ba476) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 399 M
(/*) s
5 388 M
( * Abstract operations on a inode.) s
5 377 M
( *) s
5 366 M
( * These are used in the form VOP_FOO\(inode, args\), which are macros) s
5 355 M
( * that expands to inode->inode_ops->vop_foo\(inode, args\). The operations) s
5 344 M
( * "foo" are:) s
5 333 M
( *) s
5 322 M
( *    vop_open        - Called on open\(\) of a file. Can be used to) s
5 311 M
( *                      reject illegal or undesired open modes. Note that) s
5 300 M
( *                      various operations can be performed without the) s
5 289 M
( *                      file actually being opened.) s
5 278 M
( *                      The inode need not look at O_CREAT, O_EXCL, or ) s
5 267 M
( *                      O_TRUNC, as these are handled in the VFS layer.) s
5 256 M
( *) s
5 245 M
( *                      VOP_EACHOPEN should not be called directly from) s
5 234 M
( *                      above the VFS layer - use vfs_open\(\) to open inodes.) s
5 223 M
( *                      This maintains the open count so VOP_LASTCLOSE can) s
5 212 M
( *                      be called at the right time.) s
5 201 M
( *) s
5 190 M
( *    vop_close       - To be called on *last* close\(\) of a file.) s
5 179 M
( *) s
5 168 M
( *                      VOP_LASTCLOSE should not be called directly from) s
5 157 M
( *                      above the VFS layer - use vfs_close\(\) to close) s
5 146 M
( *                      inodes opened with vfs_open\(\).) s
5 135 M
( *) s
5 124 M
( *    vop_reclaim     - Called when inode is no longer in use. Note that) s
5 113 M
( *                      this may be substantially after vop_lastclose is) s
5 102 M
( *                      called.) s
5 91 M
( *) s
5 80 M
( *****************************************) s
5 69 M
( *) s
5 58 M
( *    vop_read        - Read data from file to uio, at offset specified) s
5 47 M
( *                      in the uio, updating uio_resid to reflect the) s
5 36 M
( *                      amount read, and updating uio_offset to match.) s
5 25 M
( *                      Not allowed on directories or symlinks.) s
5 14 M
( *) s
5 3 M
( *    vop_getdirentry - Read a single filename from a directory into a) s
_R
S
%%Page: (127) 127
%%BeginPageSetup
_S
18 36 translate
/pagenum 127 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
( *                      uio, choosing what name based on the offset) s
5 696 M
( *                      field in the uio, and updating that field.) s
5 685 M
( *                      Unlike with I/O on regular files, the value of) s
5 674 M
( *                      the offset field is not interpreted outside) s
5 663 M
( *                      the filesystem and thus need not be a byte) s
5 652 M
( *                      count. However, the uio_resid field should be) s
5 641 M
( *                      handled in the normal fashion.) s
5 630 M
( *                      On non-directory objects, return ENOTDIR.) s
5 619 M
( *) s
5 608 M
( *    vop_write       - Write data from uio to file at offset specified) s
5 597 M
( *                      in the uio, updating uio_resid to reflect the) s
5 586 M
( *                      amount written, and updating uio_offset to match.) s
5 575 M
( *                      Not allowed on directories or symlinks.) s
5 564 M
( *) s
5 553 M
( *    vop_ioctl       - Perform ioctl operation OP on file using data) s
5 542 M
( *                      DATA. The interpretation of the data is specific) s
5 531 M
( *                      to each ioctl.) s
5 520 M
( *) s
5 509 M
( *    vop_fstat        -Return info about a file. The pointer is a ) s
5 498 M
( *                      pointer to struct stat; see stat.h.) s
5 487 M
( *) s
5 476 M
( *    vop_gettype     - Return type of file. The values for file types) s
5 465 M
( *                      are in sfs.h.) s
5 454 M
( *) s
5 443 M
( *    vop_tryseek     - Check if seeking to the specified position within) s
5 432 M
( *                      the file is legal. \(For instance, all seeks) s
5 421 M
( *                      are illegal on serial port devices, and seeks) s
5 410 M
( *                      past EOF on files whose sizes are fixed may be) s
5 399 M
( *                      as well.\)) s
5 388 M
( *) s
5 377 M
( *    vop_fsync       - Force any dirty buffers associated with this file) s
5 366 M
( *                      to stable storage.) s
5 355 M
( *) s
5 344 M
( *    vop_truncate    - Forcibly set size of file to the length passed) s
5 333 M
( *                      in, discarding any excess blocks.) s
5 322 M
( *) s
5 311 M
( *    vop_namefile    - Compute pathname relative to filesystem root) s
5 300 M
( *                      of the file and copy to the specified io buffer. ) s
5 289 M
( *                      Need not work on objects that are not) s
5 278 M
( *                      directories.) s
5 267 M
( *) s
5 256 M
( *****************************************) s
5 245 M
( *) s
5 234 M
( *    vop_creat       - Create a regular file named NAME in the passed) s
5 223 M
( *                      directory DIR. If boolean EXCL is true, fail if) s
5 212 M
( *                      the file already exists; otherwise, use the) s
5 201 M
( *                      existing file if there is one. Hand back the) s
5 190 M
( *                      inode for the file as per vop_lookup.) s
5 179 M
( *) s
5 168 M
( *****************************************) s
5 157 M
( *) s
5 146 M
( *    vop_lookup      - Parse PATHNAME relative to the passed directory) s
5 135 M
( *                      DIR, and hand back the inode for the file it) s
5 124 M
( *                      refers to. May destroy PATHNAME. Should increment) s
5 113 M
( *                      refcount on inode handed back.) s
5 102 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 91 M
( inode_ops {) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 80 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 80 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 80 M
(long) s
/F-gs-font 10 10 SF
0 setgray
107 80 M
( vop_magic;) s
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 69 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( \(*vop_open\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 69 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
161 69 M
( inode *node, uint32_t open_flags\);) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 58 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( \(*vop_close\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 58 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
167 58 M
( inode *node\);) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 47 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( \(*vop_read\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 47 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
161 47 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 47 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
281 47 M
( iobuf *iob\);) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( \(*vop_write\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 36 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
167 36 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 36 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
287 36 M
( iobuf *iob\);) s
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( \(*vop_fstat\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
167 25 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
287 25 M
( stat *stat\);) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 14 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 14 M
( \(*vop_fsync\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
167 14 M
( inode *node\);) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( \(*vop_namefile\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 3 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
185 3 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
269 3 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
305 3 M
( iobuf *iob\);) s
_R
S
%%Page: (128) 128
%%BeginPageSetup
_S
18 36 translate
/pagenum 128 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 707 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 707 M
( \(*vop_getdirentry\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 707 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
203 707 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
287 707 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
323 707 M
( iobuf *iob\);) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 696 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 696 M
( \(*vop_reclaim\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 696 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
179 696 M
( inode *node\);) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 685 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
( \(*vop_gettype\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 685 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
179 685 M
( inode *node, uint32_t *type_store\);) s
5 674 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 674 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
( \(*vop_tryseek\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 674 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
179 674 M
( inode *node, off_t pos\);) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 663 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( \(*vop_truncate\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 663 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
185 663 M
( inode *node, off_t len\);) s
5 652 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 652 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 652 M
( \(*vop_create\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 652 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
173 652 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 652 M
(const) s
/F-gs-font 10 10 SF
0 setgray
287 652 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
293 652 M
(char) s
/F-gs-font 10 10 SF
0 setgray
317 652 M
( *name, bool excl, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
431 652 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
467 652 M
( inode **node_sto) s
5 641 M
(re\);) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 630 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( \(*vop_lookup\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 630 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
173 630 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 630 M
(char) s
/F-gs-font 10 10 SF
0 setgray
281 630 M
( *path, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
329 630 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
365 630 M
( inode **node_store\);) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 619 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( \(*vop_ioctl\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 619 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
167 619 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 619 M
(int) s
/F-gs-font 10 10 SF
0 setgray
269 619 M
( op, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
299 619 M
(void) s
/F-gs-font 10 10 SF
0 setgray
323 619 M
( *data\);) s
5 608 M
(};) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 586 M
(/*) s
5 575 M
( * Consistency check) s
5 564 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 553 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 553 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 553 M
(inode_check) s
/F-gs-font 10 10 SF
0 setgray
101 553 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 553 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 553 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 553 M
(const) s
/F-gs-font 10 10 SF
0 setgray
257 553 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
263 553 M
(char) s
/F-gs-font 10 10 SF
0 setgray
287 553 M
( *opstr\);) s
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 531 M
(__vop_op) s
/F-gs-font 10 10 SF
0 setgray
101 531 M
(\(node, sym\)                                                                   ) s
5 520 M
(      \\) s
5 509 M
(    \({                                                                                        ) s
5 498 M
(      \\) s
5 487 M
(        struct inode *__node = \(node\);                                                        ) s
5 476 M
(      \\) s
5 465 M
(        assert\(__node != NULL && __node->in_ops != NULL && __node->in_ops->vop_##sym != NULL\);) s
5 454 M
(      \\) s
5 443 M
(        inode_check\(__node, #sym\);                                                            ) s
5 432 M
(      \\) s
5 421 M
(        __node->in_ops->vop_##sym;                                                            ) s
5 410 M
(      \\) s
5 399 M
(     }\)) s
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 377 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 377 M
(vop_open) s
/F-gs-font 10 10 SF
0 setgray
101 377 M
(\(node, open_flags\)                                  \(__vop_op\(node, open\)\(node) s
5 366 M
(, open_flags\)\)) s
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 355 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 355 M
(vop_close) s
/F-gs-font 10 10 SF
0 setgray
107 355 M
(\(node\)                                             \(__vop_op\(node, close\)\(nod) s
5 344 M
(e\)\)) s
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 333 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 333 M
(vop_read) s
/F-gs-font 10 10 SF
0 setgray
101 333 M
(\(node, iob\)                                         \(__vop_op\(node, read\)\(node) s
5 322 M
(, iob\)\)) s
5 311 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 311 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 311 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 311 M
(vop_write) s
/F-gs-font 10 10 SF
0 setgray
107 311 M
(\(node, iob\)                                        \(__vop_op\(node, write\)\(nod) s
5 300 M
(e, iob\)\)) s
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 289 M
(vop_fstat) s
/F-gs-font 10 10 SF
0 setgray
107 289 M
(\(node, stat\)                                       \(__vop_op\(node, fstat\)\(nod) s
5 278 M
(e, stat\)\)) s
5 267 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 267 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 267 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 267 M
(vop_fsync) s
/F-gs-font 10 10 SF
0 setgray
107 267 M
(\(node\)                                             \(__vop_op\(node, fsync\)\(nod) s
5 256 M
(e\)\)) s
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 245 M
(vop_namefile) s
/F-gs-font 10 10 SF
0 setgray
125 245 M
(\(node, iob\)                                     \(__vop_op\(node, namefile\)\() s
5 234 M
(node, iob\)\)) s
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 223 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 223 M
(vop_getdirentry) s
/F-gs-font 10 10 SF
0 setgray
143 223 M
(\(node, iob\)                                  \(__vop_op\(node, getdirentr) s
5 212 M
(y\)\(node, iob\)\)) s
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 201 M
(vop_reclaim) s
/F-gs-font 10 10 SF
0 setgray
119 201 M
(\(node\)                                           \(__vop_op\(node, reclaim\)\(n) s
5 190 M
(ode\)\)) s
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 179 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 179 M
(vop_ioctl) s
/F-gs-font 10 10 SF
0 setgray
107 179 M
(\(node, op, data\)                                   \(__vop_op\(node, ioctl\)\(nod) s
5 168 M
(e, op, data\)\)) s
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 157 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 157 M
(vop_gettype) s
/F-gs-font 10 10 SF
0 setgray
119 157 M
(\(node, type_store\)                               \(__vop_op\(node, gettype\)\(n) s
5 146 M
(ode, type_store\)\)) s
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 135 M
(vop_tryseek) s
/F-gs-font 10 10 SF
0 setgray
119 135 M
(\(node, pos\)                                      \(__vop_op\(node, tryseek\)\(n) s
5 124 M
(ode, pos\)\)) s
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 113 M
(vop_truncate) s
/F-gs-font 10 10 SF
0 setgray
125 113 M
(\(node, len\)                                     \(__vop_op\(node, truncate\)\() s
5 102 M
(node, len\)\)) s
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 91 M
(vop_create) s
/F-gs-font 10 10 SF
0 setgray
113 91 M
(\(node, name, excl, node_store\)                    \(__vop_op\(node, create\)\(no) s
5 80 M
(de, name, excl, node_store\)\)) s
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 69 M
(vop_lookup) s
/F-gs-font 10 10 SF
0 setgray
113 69 M
(\(node, path, node_store\)                          \(__vop_op\(node, lookup\)\(no) s
5 58 M
(de, path, node_store\)\)) s
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 25 M
(vop_fs) s
/F-gs-font 10 10 SF
0 setgray
89 25 M
(\(node\)                                                \(\(node\)->in_fs\)) s
5 14 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 14 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 14 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 14 M
(vop_init) s
/F-gs-font 10 10 SF
0 setgray
101 14 M
(\(node, ops, fs\)                                     inode_init\(node, ops, fs\)) s
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 3 M
(vop_kill) s
/F-gs-font 10 10 SF
0 setgray
101 3 M
(\(node\)                                              inode_kill\(node\)) s
_R
S
%%Page: (129) 129
%%BeginPageSetup
_S
18 36 translate
/pagenum 129 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 696 M
(/*) s
5 685 M
( * Reference count manipulation \(handled above filesystem level\)) s
5 674 M
( */) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 663 M
(vop_ref_inc) s
/F-gs-font 10 10 SF
0 setgray
119 663 M
(\(node\)                                           inode_ref_inc\(node\)) s
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 652 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 652 M
(vop_ref_dec) s
/F-gs-font 10 10 SF
0 setgray
119 652 M
(\(node\)                                           inode_ref_dec\(node\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 641 M
(/*) s
5 630 M
( * Open count manipulation \(handled above filesystem level\)) s
5 619 M
( *) s
5 608 M
( * VOP_INCOPEN is called by vfs_open. VOP_DECOPEN is called by vfs_close.) s
5 597 M
( * Neither of these should need to be called from above the vfs layer.) s
5 586 M
( */) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 575 M
(vop_open_inc) s
/F-gs-font 10 10 SF
0 setgray
125 575 M
(\(node\)                                          inode_open_inc\(node\)) s
5 564 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 564 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 564 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 564 M
(vop_open_dec) s
/F-gs-font 10 10 SF
0 setgray
125 564 M
(\(node\)                                          inode_open_dec\(node\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 531 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 531 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 520 M
(inode_ref_count) s
/F-gs-font 10 10 SF
0 setgray
95 520 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 520 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 520 M
( inode *node\) {) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 509 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
( node->ref_count;) s
5 498 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 476 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 476 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 476 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 465 M
(inode_open_count) s
/F-gs-font 10 10 SF
0 setgray
101 465 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 465 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 465 M
( inode *node\) {) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 454 M
( node->open_count;) s
5 443 M
(}) s
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 421 M
(/* !__KERN_FS_VFS_INODE_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 399 M
([ucore/lab8_result/kern/fs/vfs/inode.c] ++++++++++++++++++++++++++++++) s
5 388 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 388 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 388 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 388 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 377 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 377 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 366 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 366 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 355 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 355 M
(<atomic.h>) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 344 M
(<vfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 333 M
(<inode.h>) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 322 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 322 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 311 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 311 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 311 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 300 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 300 M
(<kmalloc.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 278 M
(/* *) s
5 267 M
( * __alloc_inode - alloc a inode structure and initialize in_type) s
5 256 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 245 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 245 M
( inode *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 234 M
(__alloc_inode) s
/F-gs-font 10 10 SF
0 setgray
83 234 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 234 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 234 M
( type\) {) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 223 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 223 M
( inode *node;) s
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 212 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 212 M
( \(\(node = kmalloc\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 212 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
185 212 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 212 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
227 212 M
( inode\)\)\) != NULL\) {) s
5 201 M
(        node->in_type = type;) s
5 190 M
(    }) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 179 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 179 M
( node;) s
5 168 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 146 M
(/* *) s
5 135 M
( * inode_init - initialize a inode structure) s
5 124 M
( * invoked by vop_init) s
5 113 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 102 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 91 M
(inode_init) s
/F-gs-font 10 10 SF
0 setgray
65 91 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 91 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 91 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 91 M
(const) s
/F-gs-font 10 10 SF
0 setgray
221 91 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 91 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
263 91 M
( inode_ops *ops, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
365 91 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
401 91 M
( fs *fs\) {) s
5 80 M
(    node->ref_count = 0;) s
5 69 M
(    node->open_count = 0;) s
5 58 M
(    node->in_ops = ops, node->in_fs = fs;) s
5 47 M
(    vop_ref_inc\(node\);) s
5 36 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 14 M
(/* *) s
5 3 M
( * inode_kill - kill a inode structure) s
_R
S
%%Page: (130) 130
%%BeginPageSetup
_S
18 36 translate
/pagenum 130 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
( * invoked by vop_kill) s
5 696 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 685 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 674 M
(inode_kill) s
/F-gs-font 10 10 SF
0 setgray
65 674 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 674 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 674 M
( inode *node\) {) s
5 663 M
(    assert\(inode_ref_count\(node\) == 0\);) s
5 652 M
(    assert\(inode_open_count\(node\) == 0\);) s
5 641 M
(    kfree\(node\);) s
5 630 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 608 M
(/* *) s
5 597 M
( * inode_ref_inc - increment ref_count) s
5 586 M
( * invoked by vop_ref_inc) s
5 575 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 553 M
(inode_ref_inc) s
/F-gs-font 10 10 SF
0 setgray
83 553 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 553 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 553 M
( inode *node\) {) s
5 542 M
(    node->ref_count += 1;) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 531 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 531 M
( node->ref_count;) s
5 520 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 498 M
(/* *) s
5 487 M
( * inode_ref_dec - decrement ref_count) s
5 476 M
( * invoked by vop_ref_dec) s
5 465 M
( * calls vop_reclaim if the ref_count hits zero) s
5 454 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 432 M
(inode_ref_dec) s
/F-gs-font 10 10 SF
0 setgray
83 432 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 432 M
( inode *node\) {) s
5 421 M
(    assert\(inode_ref_count\(node\) > 0\);) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 410 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( ref_count, ret;) s
5 399 M
(    node->ref_count-= 1;) s
5 388 M
(    ref_count = node->ref_count;) s
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 377 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
( \(ref_count == 0\) {) s
5 366 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 366 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 366 M
( \(\(ret = vop_reclaim\(node\)\) != 0 && ret != -E_BUSY\) {) s
5 355 M
(            cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
125 355 M
("vfs: warning: vop_reclaim: %e.\\n") s
/F-gs-font 10 10 SF
0 setgray
329 355 M
(, ret\);) s
5 344 M
(        }) s
5 333 M
(    }) s
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 322 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 322 M
( ref_count;) s
5 311 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 289 M
(/* *) s
5 278 M
( * inode_open_inc - increment the open_count) s
5 267 M
( * invoked by vop_open_inc) s
5 256 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 245 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 234 M
(inode_open_inc) s
/F-gs-font 10 10 SF
0 setgray
89 234 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 234 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 234 M
( inode *node\) {) s
5 223 M
(    node->open_count += 1;) s
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 212 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 212 M
( node->open_count;) s
5 201 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 179 M
(/* *) s
5 168 M
( * inode_open_dec - decrement the open_count) s
5 157 M
( * invoked by vop_open_dec) s
5 146 M
( * calls vop_close if the open_count hits zero) s
5 135 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 113 M
(inode_open_dec) s
/F-gs-font 10 10 SF
0 setgray
89 113 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 113 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 113 M
( inode *node\) {) s
5 102 M
(    assert\(inode_open_count\(node\) > 0\);) s
5 91 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( open_count, ret;) s
5 80 M
(    node->open_count -= 1;) s
5 69 M
(    open_count = node->open_count;) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 58 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 58 M
( \(open_count == 0\) {) s
5 47 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 47 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
( \(\(ret = vop_close\(node\)\) != 0\) {) s
5 36 M
(            cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
125 36 M
("vfs: warning: vop_close: %e.\\n") s
/F-gs-font 10 10 SF
0 setgray
317 36 M
(, ret\);) s
5 25 M
(        }) s
5 14 M
(    }) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 3 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 3 M
( open_count;) s
_R
S
%%Page: (131) 131
%%BeginPageSetup
_S
18 36 translate
/pagenum 131 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 685 M
(/* *) s
5 674 M
( * inode_check - check the various things being valid) s
5 663 M
( * called before all vop_* calls) s
5 652 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 641 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 630 M
(inode_check) s
/F-gs-font 10 10 SF
0 setgray
71 630 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 630 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 630 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 630 M
(const) s
/F-gs-font 10 10 SF
0 setgray
227 630 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
233 630 M
(char) s
/F-gs-font 10 10 SF
0 setgray
257 630 M
( *opstr\) {) s
5 619 M
(    assert\(node != NULL && node->in_ops != NULL\);) s
5 608 M
(    assert\(node->in_ops->vop_magic == VOP_MAGIC\);) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 597 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( ref_count = inode_ref_count\(node\), open_count = inode_open_count\(node\);) s
5 586 M
(    assert\(ref_count >= open_count && open_count >= 0\);) s
5 575 M
(    assert\(ref_count < MAX_INODE_COUNT && open_count < MAX_INODE_COUNT\);) s
5 564 M
(}) s
5 542 M
([ucore/lab8_result/kern/fs/vfs/vfs.h] ++++++++++++++++++++++++++++++) s
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 531 M
(__KERN_FS_VFS_VFS_H__) s
/F-gs-font 10 10 SF
0 setgray
5 520 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 520 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 520 M
(__KERN_FS_VFS_VFS_H__) s
/F-gs-font 10 10 SF
0 setgray
5 498 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 498 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 498 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 498 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 487 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 487 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 487 M
(<fs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 476 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 476 M
(<sfs.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( inode;   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
101 454 M
(// abstract structure for an on-disk file \(inode.h\)) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
( device;  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
101 443 M
(// abstract structure for a device \(dev.h\)) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 432 M
( iobuf;   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
101 432 M
(// kernel or userspace I/O buffer \(iobuf.h\)) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 410 M
(/*) s
5 399 M
( * Abstract filesystem. \(Or device accessible as a file.\)) s
5 388 M
( *) s
5 377 M
( * Information:) s
5 366 M
( *      fs_info   : filesystem-specific data \(sfs_fs\)) s
5 355 M
( *      fs_type   : filesystem type) s
5 344 M
( * Operations:) s
5 333 M
( *) s
5 322 M
( *      fs_sync       - Flush all dirty buffers to disk.) s
5 311 M
( *      fs_get_root   - Return root inode of filesystem.) s
5 300 M
( *      fs_unmount    - Attempt unmount of filesystem.) s
5 289 M
( *      fs_cleanup    - Cleanup of filesystem.???) s
5 278 M
( *      ) s
5 267 M
( *) s
5 256 M
( * fs_get_root should increment the refcount of the inode returned.) s
5 245 M
( * It should not ever return NULL.) s
5 234 M
( *) s
5 223 M
( * If fs_unmount returns an error, the filesystem stays mounted, and) s
5 212 M
( * consequently the struct fs instance should remain valid. On success,) s
5 201 M
( * however, the filesystem object and all storage associated with the) s
5 190 M
( * filesystem should have been discarded/released.) s
5 179 M
( *) s
5 168 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 157 M
( fs {) s
5 146 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 146 M
(union) s
/F-gs-font 10 10 SF
0 setgray
59 146 M
( {) s
5 135 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 135 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 135 M
( sfs_fs __sfs_info;                   ) s
5 124 M
(    } fs_info;                                     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
311 124 M
(// filesystem-specific data ) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 113 M
(enum) s
/F-gs-font 10 10 SF
0 setgray
53 113 M
( {) s
5 102 M
(        fs_type_sfs_info,) s
5 91 M
(    } fs_type;                                     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
311 91 M
(// filesystem type ) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( \(*fs_sync\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 80 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 80 M
( fs *fs\);                 ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
311 80 M
(// Flush all dirty buffers to disk ) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 69 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 69 M
( inode *\(*fs_get_root\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 69 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
239 69 M
( fs *fs\);   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
311 69 M
(// Return root inode of filesystem.) s
/F-gs-font 10 10 SF
0 setgray
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 58 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( \(*fs_unmount\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 58 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
173 58 M
( fs *fs\);              ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
311 58 M
(// Attempt unmount of filesystem.) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 47 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 47 M
( \(*fs_cleanup\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 47 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
179 47 M
( fs *fs\);             ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
311 47 M
(// Cleanup of filesystem.???) s
/F-gs-font 10 10 SF
0 setgray
5 36 M
(};) s
5 14 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 14 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 14 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 14 M
(__fs_type) s
/F-gs-font 10 10 SF
0 setgray
107 14 M
(\(type\)                                             fs_type_##type##_info) s
_R
S
%%Page: (132) 132
%%BeginPageSetup
_S
18 36 translate
/pagenum 132 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 707 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 707 M
(check_fs_type) s
/F-gs-font 10 10 SF
0 setgray
131 707 M
(\(fs, type\)                                     \(\(fs\)->fs_type == __fs_typ) s
5 696 M
(e\(type\)\)) s
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 674 M
(__fsop_info) s
/F-gs-font 10 10 SF
0 setgray
119 674 M
(\(_fs, type\) \({                                   \\) s
5 663 M
(            struct fs *__fs = \(_fs\);                                \\) s
5 652 M
(            assert\(__fs != NULL && check_fs_type\(__fs, type\)\);      \\) s
5 641 M
(            &\(__fs->fs_info.__##type##_info\);                       \\) s
5 630 M
(        }\)) s
5 608 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 608 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 608 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 608 M
(fsop_info) s
/F-gs-font 10 10 SF
0 setgray
107 608 M
(\(fs, type\)                 __fsop_info\(fs, type\)) s
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 586 M
(info2fs) s
/F-gs-font 10 10 SF
0 setgray
95 586 M
(\(info, type\)                                         \\) s
5 575 M
(    to_struct\(\(info\), struct fs, fs_info.__##type##_info\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 553 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 553 M
( fs *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
71 553 M
(__alloc_fs) s
/F-gs-font 10 10 SF
0 setgray
131 553 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 553 M
(int) s
/F-gs-font 10 10 SF
0 setgray
155 553 M
( type\);) s
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 531 M
(alloc_fs) s
/F-gs-font 10 10 SF
0 setgray
101 531 M
(\(type\)                                              __alloc_fs\(__fs_type\(type\)) s
5 520 M
(\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 498 M
(// Macros to shorten the calling sequences.) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 487 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 487 M
(fsop_sync) s
/F-gs-font 10 10 SF
0 setgray
107 487 M
(\(fs\)                       \(\(fs\)->fs_sync\(fs\)\)) s
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 476 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 476 M
(fsop_get_root) s
/F-gs-font 10 10 SF
0 setgray
131 476 M
(\(fs\)                   \(\(fs\)->fs_get_root\(fs\)\)) s
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 465 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 465 M
(fsop_unmount) s
/F-gs-font 10 10 SF
0 setgray
125 465 M
(\(fs\)                    \(\(fs\)->fs_unmount\(fs\)\)) s
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 454 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 454 M
(fsop_cleanup) s
/F-gs-font 10 10 SF
0 setgray
125 454 M
(\(fs\)                    \(\(fs\)->fs_cleanup\(fs\)\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 432 M
(/*) s
5 421 M
( * Virtual File System layer functions.) s
5 410 M
( *) s
5 399 M
( * The VFS layer translates operations on abstract on-disk files or) s
5 388 M
( * pathnames to operations on specific files on specific filesystems.) s
5 377 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 366 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 366 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 366 M
(vfs_init) s
/F-gs-font 10 10 SF
0 setgray
83 366 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 366 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 366 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 355 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 355 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 355 M
(vfs_cleanup) s
/F-gs-font 10 10 SF
0 setgray
101 355 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 355 M
(void) s
/F-gs-font 10 10 SF
0 setgray
131 355 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 344 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 344 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 344 M
(vfs_devlist_init) s
/F-gs-font 10 10 SF
0 setgray
131 344 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 344 M
(void) s
/F-gs-font 10 10 SF
0 setgray
161 344 M
(\);) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 322 M
(/*) s
5 311 M
( * VFS layer low-level operations. ) s
5 300 M
( * See inode.h for direct operations on inodes.) s
5 289 M
( * See fs.h for direct operations on filesystems/devices.) s
5 278 M
( *) s
5 267 M
( *    vfs_set_curdir   - change current directory of current thread by inode) s
5 256 M
( *    vfs_get_curdir   - retrieve inode of current directory of current thread) s
5 245 M
( *    vfs_get_root     - get root inode for the filesystem named DEVNAME) s
5 234 M
( *    vfs_get_devname  - get mounted device name for the filesystem passed in) s
5 223 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 212 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 212 M
(vfs_set_curdir) s
/F-gs-font 10 10 SF
0 setgray
113 212 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 212 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 212 M
( inode *dir\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 201 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 201 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 201 M
(vfs_get_curdir) s
/F-gs-font 10 10 SF
0 setgray
113 201 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 201 M
( inode **dir_store\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 190 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 190 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 190 M
(vfs_get_root) s
/F-gs-font 10 10 SF
0 setgray
101 190 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 190 M
(const) s
/F-gs-font 10 10 SF
0 setgray
137 190 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 190 M
(char) s
/F-gs-font 10 10 SF
0 setgray
167 190 M
( *devname, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
233 190 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
269 190 M
( inode **root_store\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 179 M
(const) s
/F-gs-font 10 10 SF
0 setgray
35 179 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 179 M
(char) s
/F-gs-font 10 10 SF
0 setgray
65 179 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
77 179 M
(vfs_get_devname) s
/F-gs-font 10 10 SF
0 setgray
167 179 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 179 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
209 179 M
( fs *fs\);) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 146 M
(/*) s
5 135 M
( * VFS layer high-level operations on pathnames) s
5 124 M
( * Because namei may destroy pathnames, these all may too.) s
5 113 M
( *) s
5 102 M
( *    vfs_open         - Open or create a file. FLAGS/MODE per the syscall. ) s
5 91 M
( *    vfs_close  - Close a inode opened with vfs_open. Does not fail.) s
5 80 M
( *                 \(See vfspath.c for a discussion of why.\)) s
5 69 M
( *    vfs_link         - Create a hard link to a file.) s
5 58 M
( *    vfs_symlink      - Create a symlink PATH containing contents CONTENTS.) s
5 47 M
( *    vfs_readlink     - Read contents of a symlink into a uio.) s
5 36 M
( *    vfs_mkdir        - Create a directory. MODE per the syscall.) s
5 25 M
( *    vfs_unlink       - Delete a file/directory.) s
5 14 M
( *    vfs_rename       - rename a file.) s
5 3 M
( *    vfs_chdir  - Change current directory of current thread by name.) s
_R
S
%%Page: (133) 133
%%BeginPageSetup
_S
18 36 translate
/pagenum 133 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
( *    vfs_getcwd - Retrieve name of current directory of current thread.) s
5 696 M
( *) s
5 685 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 674 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 674 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 674 M
(vfs_open) s
/F-gs-font 10 10 SF
0 setgray
77 674 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 674 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 674 M
( *path, uint32_t open_flags, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
281 674 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
317 674 M
( inode **inode_store\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 663 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 663 M
(vfs_close) s
/F-gs-font 10 10 SF
0 setgray
83 663 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 663 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 663 M
( inode *node\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 652 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 652 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 652 M
(vfs_link) s
/F-gs-font 10 10 SF
0 setgray
77 652 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 652 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 652 M
( *old_path, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 652 M
(char) s
/F-gs-font 10 10 SF
0 setgray
203 652 M
( *new_path\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 641 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 641 M
(vfs_symlink) s
/F-gs-font 10 10 SF
0 setgray
95 641 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 641 M
(char) s
/F-gs-font 10 10 SF
0 setgray
125 641 M
( *old_path, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 641 M
(char) s
/F-gs-font 10 10 SF
0 setgray
221 641 M
( *new_path\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 630 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 630 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 630 M
(vfs_readlink) s
/F-gs-font 10 10 SF
0 setgray
101 630 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 630 M
(char) s
/F-gs-font 10 10 SF
0 setgray
131 630 M
( *path, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 630 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
215 630 M
( iobuf *iob\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 619 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 619 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 619 M
(vfs_mkdir) s
/F-gs-font 10 10 SF
0 setgray
83 619 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 619 M
(char) s
/F-gs-font 10 10 SF
0 setgray
113 619 M
( *path\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 608 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 608 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 608 M
(vfs_unlink) s
/F-gs-font 10 10 SF
0 setgray
89 608 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 608 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 608 M
( *path\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 597 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 597 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 597 M
(vfs_rename) s
/F-gs-font 10 10 SF
0 setgray
89 597 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 597 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 597 M
( *old_path, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 597 M
(char) s
/F-gs-font 10 10 SF
0 setgray
215 597 M
( *new_path\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 586 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 586 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 586 M
(vfs_chdir) s
/F-gs-font 10 10 SF
0 setgray
83 586 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 586 M
(char) s
/F-gs-font 10 10 SF
0 setgray
113 586 M
( *path\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 575 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 575 M
(vfs_getcwd) s
/F-gs-font 10 10 SF
0 setgray
89 575 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 575 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 575 M
( iobuf *iob\);) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 542 M
(/*) s
5 531 M
( * VFS layer mid-level operations.) s
5 520 M
( *) s
5 509 M
( *    vfs_lookup     - Like VOP_LOOKUP, but takes a full device:path name,) s
5 498 M
( *                     or a name relative to the current directory, and) s
5 487 M
( *                     goes to the correct filesystem.) s
5 476 M
( *    vfs_lookparent - Likewise, for VOP_LOOKPARENT.) s
5 465 M
( *) s
5 454 M
( * Both of these may destroy the path passed in.) s
5 443 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 432 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 432 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 432 M
(vfs_lookup) s
/F-gs-font 10 10 SF
0 setgray
89 432 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 432 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 432 M
( *path, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
203 432 M
( inode **node_store\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 421 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 421 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 421 M
(vfs_lookup_parent) s
/F-gs-font 10 10 SF
0 setgray
131 421 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 421 M
(char) s
/F-gs-font 10 10 SF
0 setgray
161 421 M
( *path, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
209 421 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
245 421 M
( inode **node_store, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
371 421 M
(char) s
/F-gs-font 10 10 SF
0 setgray
395 421 M
( **endp\);) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 399 M
(/*) s
5 388 M
( * Misc) s
5 377 M
( *) s
5 366 M
( *    vfs_set_bootfs - Set the filesystem that paths beginning with a) s
5 355 M
( *                    slash are sent to. If not set, these paths fail) s
5 344 M
( *                    with ENOENT. The argument should be the device) s
5 333 M
( *                    name or volume name for the filesystem \(such as) s
5 322 M
( *                    "lhd0:"\) but need not have the trailing colon.) s
5 311 M
( *) s
5 300 M
( *    vfs_get_bootfs - return the inode of the bootfs filesystem. ) s
5 289 M
( *) s
5 278 M
( *    vfs_add_fs     - Add a hardwired filesystem to the VFS named device) s
5 267 M
( *                    list. It will be accessible as "devname:". This is) s
5 256 M
( *                    intended for filesystem-devices like emufs, and) s
5 245 M
( *                    gizmos like Linux procfs or BSD kernfs, not for) s
5 234 M
( *                    mounting filesystems on disk devices.) s
5 223 M
( *) s
5 212 M
( *    vfs_add_dev    - Add a device to the VFS named device list. If) s
5 201 M
( *                    MOUNTABLE is zero, the device will be accessible) s
5 190 M
( *                    as "DEVNAME:". If the mountable flag is set, the) s
5 179 M
( *                    device will be accessible as "DEVNAMEraw:" and) s
5 168 M
( *                    mountable under the name "DEVNAME". Thus, the) s
5 157 M
( *                    console, added with MOUNTABLE not set, would be) s
5 146 M
( *                    accessed by pathname as "con:", and lhd0, added) s
5 135 M
( *                    with mountable set, would be accessed by) s
5 124 M
( *                    pathname as "lhd0raw:" and mounted by passing) s
5 113 M
( *                    "lhd0" to vfs_mount.) s
5 102 M
( *) s
5 91 M
( *    vfs_mount      - Attempt to mount a filesystem on a device. The) s
5 80 M
( *                    device named by DEVNAME will be looked up and ) s
5 69 M
( *                    passed, along with DATA, to the supplied function) s
5 58 M
( *                    MOUNTFUNC, which should create a struct fs and) s
5 47 M
( *                    return it in RESULT.) s
5 36 M
( *) s
5 25 M
( *    vfs_unmount    - Unmount the filesystem presently mounted on the) s
5 14 M
( *                    specified device.) s
5 3 M
( *) s
_R
S
%%Page: (134) 134
%%BeginPageSetup
_S
18 36 translate
/pagenum 134 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
( *    vfs_unmountall - Unmount all mounted filesystems.) s
5 696 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 685 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 685 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 685 M
(vfs_set_bootfs) s
/F-gs-font 10 10 SF
0 setgray
113 685 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 685 M
(char) s
/F-gs-font 10 10 SF
0 setgray
143 685 M
( *fsname\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 674 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 674 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 674 M
(vfs_get_bootfs) s
/F-gs-font 10 10 SF
0 setgray
113 674 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 674 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 674 M
( inode **node_store\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 652 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 652 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 652 M
(vfs_add_fs) s
/F-gs-font 10 10 SF
0 setgray
89 652 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 652 M
(const) s
/F-gs-font 10 10 SF
0 setgray
125 652 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 652 M
(char) s
/F-gs-font 10 10 SF
0 setgray
155 652 M
( *devname, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
221 652 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
257 652 M
( fs *fs\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 641 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 641 M
(vfs_add_dev) s
/F-gs-font 10 10 SF
0 setgray
95 641 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 641 M
(const) s
/F-gs-font 10 10 SF
0 setgray
131 641 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 641 M
(char) s
/F-gs-font 10 10 SF
0 setgray
161 641 M
( *devname, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 641 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
263 641 M
( inode *devnode, bool mountable\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 619 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 619 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 619 M
(vfs_mount) s
/F-gs-font 10 10 SF
0 setgray
83 619 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 619 M
(const) s
/F-gs-font 10 10 SF
0 setgray
119 619 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 619 M
(char) s
/F-gs-font 10 10 SF
0 setgray
149 619 M
( *devname, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 619 M
(int) s
/F-gs-font 10 10 SF
0 setgray
233 619 M
( \(*mountfunc\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
317 619 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
353 619 M
( device *dev, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
437 619 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
473 619 M
( fs **fs_store\)\)) s
5 608 M
(;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 597 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 597 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 597 M
(vfs_unmount) s
/F-gs-font 10 10 SF
0 setgray
95 597 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 597 M
(const) s
/F-gs-font 10 10 SF
0 setgray
131 597 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 597 M
(char) s
/F-gs-font 10 10 SF
0 setgray
161 597 M
( *devname\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 586 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 586 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 586 M
(vfs_unmount_all) s
/F-gs-font 10 10 SF
0 setgray
119 586 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 586 M
(void) s
/F-gs-font 10 10 SF
0 setgray
149 586 M
(\);) s
5 564 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 564 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 564 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 564 M
(/* !__KERN_FS_VFS_VFS_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 542 M
([ucore/lab8_result/kern/fs/file.h] ++++++++++++++++++++++++++++++) s
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 531 M
(__KERN_FS_FILE_H__) s
/F-gs-font 10 10 SF
0 setgray
5 520 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 520 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 520 M
(__KERN_FS_FILE_H__) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 498 M
(//#include <types.h>) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 487 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 487 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 487 M
(<fs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 476 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 476 M
(<proc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 465 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 465 M
(<atomic.h>) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 454 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 432 M
( inode;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 421 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
( stat;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 410 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 410 M
( dirent;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 388 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 388 M
( file {) s
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 377 M
(enum) s
/F-gs-font 10 10 SF
0 setgray
53 377 M
( {) s
5 366 M
(        FD_NONE, FD_INIT, FD_OPENED, FD_CLOSED,) s
5 355 M
(    } status;) s
5 344 M
(    bool readable;) s
5 333 M
(    bool writable;) s
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 322 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 322 M
( fd;) s
5 311 M
(    off_t pos;) s
5 300 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 300 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 300 M
( inode *node;) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 289 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( open_count;) s
5 278 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 256 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 256 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 256 M
(fd_array_init) s
/F-gs-font 10 10 SF
0 setgray
113 256 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 256 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 256 M
( file *fd_array\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 245 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 245 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 245 M
(fd_array_open) s
/F-gs-font 10 10 SF
0 setgray
113 245 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 245 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 245 M
( file *file\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 234 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 234 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 234 M
(fd_array_close) s
/F-gs-font 10 10 SF
0 setgray
119 234 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 234 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
161 234 M
( file *file\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 223 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 223 M
(fd_array_dup) s
/F-gs-font 10 10 SF
0 setgray
107 223 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 223 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
149 223 M
( file *to, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 223 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
251 223 M
( file *from\);) s
5 212 M
(bool ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 212 M
(file_testfd) s
/F-gs-font 10 10 SF
0 setgray
101 212 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
125 212 M
( fd, bool readable, bool writable\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 190 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 190 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 190 M
(file_open) s
/F-gs-font 10 10 SF
0 setgray
83 190 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 190 M
(char) s
/F-gs-font 10 10 SF
0 setgray
113 190 M
( *path, uint32_t open_flags\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 179 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 179 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 179 M
(file_close) s
/F-gs-font 10 10 SF
0 setgray
89 179 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 179 M
(int) s
/F-gs-font 10 10 SF
0 setgray
113 179 M
( fd\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 168 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 168 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 168 M
(file_read) s
/F-gs-font 10 10 SF
0 setgray
83 168 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 168 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 168 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 168 M
(void) s
/F-gs-font 10 10 SF
0 setgray
161 168 M
( *base, size_t len, size_t *copied_store\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 157 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 157 M
(file_write) s
/F-gs-font 10 10 SF
0 setgray
89 157 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 157 M
(int) s
/F-gs-font 10 10 SF
0 setgray
113 157 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 157 M
(void) s
/F-gs-font 10 10 SF
0 setgray
167 157 M
( *base, size_t len, size_t *copied_store\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 146 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 146 M
(file_seek) s
/F-gs-font 10 10 SF
0 setgray
83 146 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 146 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 146 M
( fd, off_t pos, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 146 M
(int) s
/F-gs-font 10 10 SF
0 setgray
221 146 M
( whence\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 135 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 135 M
(file_fstat) s
/F-gs-font 10 10 SF
0 setgray
89 135 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
113 135 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 135 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
179 135 M
( stat *stat\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 124 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 124 M
(file_fsync) s
/F-gs-font 10 10 SF
0 setgray
89 124 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
113 124 M
( fd\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 113 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 113 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 113 M
(file_getdirentry) s
/F-gs-font 10 10 SF
0 setgray
125 113 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 113 M
(int) s
/F-gs-font 10 10 SF
0 setgray
149 113 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 113 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
215 113 M
( dirent *dirent\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 102 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 102 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 102 M
(file_dup) s
/F-gs-font 10 10 SF
0 setgray
77 102 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 102 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 102 M
( fd1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 102 M
(int) s
/F-gs-font 10 10 SF
0 setgray
155 102 M
( fd2\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 91 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 91 M
(file_pipe) s
/F-gs-font 10 10 SF
0 setgray
83 91 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 91 M
( fd[]\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 80 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 80 M
(file_mkfifo) s
/F-gs-font 10 10 SF
0 setgray
95 80 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 80 M
(const) s
/F-gs-font 10 10 SF
0 setgray
131 80 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 80 M
(char) s
/F-gs-font 10 10 SF
0 setgray
161 80 M
( *name, uint32_t open_flags\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 58 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 58 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 58 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 47 M
(fopen_count) s
/F-gs-font 10 10 SF
0 setgray
71 47 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 47 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 47 M
( file *file\) {) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 36 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 36 M
( file->open_count;) s
5 25 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 3 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (135) 135
%%BeginPageSetup
_S
18 36 translate
/pagenum 135 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 707 M
(fopen_count_inc) s
/F-gs-font 10 10 SF
0 setgray
95 707 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 707 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 707 M
( file *file\) {) s
5 696 M
(    file->open_count += 1;) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 685 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 685 M
( file->open_count;) s
5 674 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 652 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 652 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 652 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 641 M
(fopen_count_dec) s
/F-gs-font 10 10 SF
0 setgray
95 641 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 641 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 641 M
( file *file\) {) s
5 630 M
(    file->open_count -= 1;) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 619 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 619 M
( file->open_count;) s
5 608 M
(}) s
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 586 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 586 M
(/* !__KERN_FS_FILE_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 564 M
([ucore/lab8_result/kern/fs/swap/swapfs.h] ++++++++++++++++++++++++++++++) s
5 553 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 553 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 553 M
(__KERN_FS_SWAP_SWAPFS_H__) s
/F-gs-font 10 10 SF
0 setgray
5 542 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 542 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 542 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 542 M
(__KERN_FS_SWAP_SWAPFS_H__) s
/F-gs-font 10 10 SF
0 setgray
5 520 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 520 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 520 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 520 M
(<memlayout.h>) s
/F-gs-font 10 10 SF
0 setgray
5 509 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 509 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 509 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 509 M
(<swap.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 487 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 487 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 487 M
(swapfs_init) s
/F-gs-font 10 10 SF
0 setgray
101 487 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 487 M
(void) s
/F-gs-font 10 10 SF
0 setgray
131 487 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 476 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 476 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 476 M
(swapfs_read) s
/F-gs-font 10 10 SF
0 setgray
95 476 M
(\(swap_entry_t entry, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
221 476 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
257 476 M
( Page *page\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 465 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 465 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 465 M
(swapfs_write) s
/F-gs-font 10 10 SF
0 setgray
101 465 M
(\(swap_entry_t entry, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 465 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
263 465 M
( Page *page\);) s
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 443 M
(/* !__KERN_FS_SWAP_SWAPFS_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
([ucore/lab8_result/kern/fs/swap/swapfs.c] ++++++++++++++++++++++++++++++) s
5 410 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 410 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 410 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 410 M
(<swap.h>) s
/F-gs-font 10 10 SF
0 setgray
5 399 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 399 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 399 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 399 M
(<swapfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 388 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 388 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 388 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 388 M
(<mmu.h>) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 377 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 377 M
(<fs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 366 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 366 M
(<ide.h>) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 355 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 355 M
(<pmm.h>) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 344 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 322 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 311 M
(swapfs_init) s
/F-gs-font 10 10 SF
0 setgray
71 311 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 311 M
(void) s
/F-gs-font 10 10 SF
0 setgray
101 311 M
(\) {) s
5 300 M
(    static_assert\(\(PGSIZE % SECTSIZE\) == 0\);) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 289 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( \(!ide_device_valid\(SWAP_DEV_NO\)\) {) s
5 278 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 278 M
("swap fs isn't available.\\n") s
/F-gs-font 10 10 SF
0 setgray
257 278 M
(\);) s
5 267 M
(    }) s
5 256 M
(    max_swap_offset = ide_device_size\(SWAP_DEV_NO\) / \(PGSIZE / SECTSIZE\);) s
5 245 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 212 M
(swapfs_read) s
/F-gs-font 10 10 SF
0 setgray
71 212 M
(\(swap_entry_t entry, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 212 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
233 212 M
( Page *page\) {) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 201 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 201 M
( ide_read_secs\(SWAP_DEV_NO, swap_offset\(entry\) * PAGE_NSECT, page2kva\(page\), PAGE_NS) s
5 190 M
(ECT\);) s
5 179 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 146 M
(swapfs_write) s
/F-gs-font 10 10 SF
0 setgray
77 146 M
(\(swap_entry_t entry, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 146 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
239 146 M
( Page *page\) {) s
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 135 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 135 M
( ide_write_secs\(SWAP_DEV_NO, swap_offset\(entry\) * PAGE_NSECT, page2kva\(page\), PAGE_N) s
5 124 M
(SECT\);) s
5 113 M
(}) s
5 91 M
([ucore/lab8_result/kern/fs/fs.h] ++++++++++++++++++++++++++++++) s
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 80 M
(__KERN_FS_FS_H__) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 69 M
(__KERN_FS_FS_H__) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 47 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 47 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 36 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 36 M
(<mmu.h>) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 25 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 25 M
(<sem.h>) s
/F-gs-font 10 10 SF
0 setgray
5 14 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 14 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 14 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 14 M
(<atomic.h>) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (136) 136
%%BeginPageSetup
_S
18 36 translate
/pagenum 136 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 707 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 707 M
(SECTSIZE) s
/F-gs-font 10 10 SF
0 setgray
101 707 M
(            512) s
5 696 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 696 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 696 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 696 M
(PAGE_NSECT) s
/F-gs-font 10 10 SF
0 setgray
113 696 M
(          \(PGSIZE / SECTSIZE\)) s
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 674 M
(SWAP_DEV_NO) s
/F-gs-font 10 10 SF
0 setgray
119 674 M
(         1) s
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 663 M
(DISK0_DEV_NO) s
/F-gs-font 10 10 SF
0 setgray
125 663 M
(        2) s
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 652 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 652 M
(DISK1_DEV_NO) s
/F-gs-font 10 10 SF
0 setgray
125 652 M
(        3) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 630 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 630 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 630 M
(fs_init) s
/F-gs-font 10 10 SF
0 setgray
77 630 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 630 M
(void) s
/F-gs-font 10 10 SF
0 setgray
107 630 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 619 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 619 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 619 M
(fs_cleanup) s
/F-gs-font 10 10 SF
0 setgray
95 619 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 619 M
(void) s
/F-gs-font 10 10 SF
0 setgray
125 619 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 597 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( inode;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 586 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 586 M
( file;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 564 M
(/*) s
5 553 M
( * process's file related informaction) s
5 542 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 531 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( files_struct {) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 520 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
( inode *pwd;      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 520 M
(// inode of present working directory) s
/F-gs-font 10 10 SF
0 setgray
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 509 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
( file *fd_array;  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 509 M
(// opened files array) s
/F-gs-font 10 10 SF
0 setgray
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 498 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 498 M
( files_count;        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 498 M
(// the number of opened files) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(    semaphore_t files_sem;  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 487 M
(// lock protect sem) s
/F-gs-font 10 10 SF
0 setgray
5 476 M
(};) s
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 454 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 454 M
(FILES_STRUCT_BUFSIZE) s
/F-gs-font 10 10 SF
0 setgray
173 454 M
(                       \(PGSIZE - sizeof\(struct files_struct\)\)) s
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 443 M
(FILES_STRUCT_NENTRY) s
/F-gs-font 10 10 SF
0 setgray
167 443 M
(                        \(FILES_STRUCT_BUFSIZE / sizeof\(struct file\)) s
5 432 M
(\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 410 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 410 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 410 M
(lock_files) s
/F-gs-font 10 10 SF
0 setgray
95 410 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 410 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 410 M
( files_struct *filesp\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 399 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 399 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 399 M
(unlock_files) s
/F-gs-font 10 10 SF
0 setgray
107 399 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 399 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
149 399 M
( files_struct *filesp\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 377 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
( files_struct *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
131 377 M
(files_create) s
/F-gs-font 10 10 SF
0 setgray
203 377 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
209 377 M
(void) s
/F-gs-font 10 10 SF
0 setgray
233 377 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 366 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 366 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 366 M
(files_destroy) s
/F-gs-font 10 10 SF
0 setgray
113 366 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 366 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 366 M
( files_struct *filesp\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 355 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 355 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 355 M
(files_closeall) s
/F-gs-font 10 10 SF
0 setgray
119 355 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 355 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
161 355 M
( files_struct *filesp\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 344 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 344 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 344 M
(dup_files) s
/F-gs-font 10 10 SF
0 setgray
83 344 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 344 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 344 M
( files_struct *to, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
239 344 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
275 344 M
( files_struct *from\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 322 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 322 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 322 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 311 M
(files_count) s
/F-gs-font 10 10 SF
0 setgray
71 311 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 311 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 311 M
( files_struct *filesp\) {) s
5 300 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 300 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 300 M
( filesp->files_count;) s
5 289 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 267 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 256 M
(files_count_inc) s
/F-gs-font 10 10 SF
0 setgray
95 256 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 256 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 256 M
( files_struct *filesp\) {) s
5 245 M
(    filesp->files_count += 1;) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 234 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 234 M
( filesp->files_count;) s
5 223 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 201 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 201 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 201 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 190 M
(files_count_dec) s
/F-gs-font 10 10 SF
0 setgray
95 190 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 190 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 190 M
( files_struct *filesp\) {) s
5 179 M
(    filesp->files_count -= 1;) s
5 168 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 168 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 168 M
( filesp->files_count;) s
5 157 M
(}) s
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 135 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 135 M
(/* !__KERN_FS_FS_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
([ucore/lab8_result/kern/fs/sfs/sfs.h] ++++++++++++++++++++++++++++++) s
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 102 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 102 M
(__KERN_FS_SFS_SFS_H__) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 91 M
(__KERN_FS_SFS_SFS_H__) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 69 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 58 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 58 M
(<mmu.h>) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 47 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 47 M
(<list.h>) s
/F-gs-font 10 10 SF
0 setgray
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 36 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 36 M
(<sem.h>) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 25 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 25 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 3 M
(/*) s
_R
S
%%Page: (137) 137
%%BeginPageSetup
_S
18 36 translate
/pagenum 137 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
( * Simple FS \(SFS\) definitions visible to ucore. This covers the on-disk format) s
5 696 M
( * and is used by tools that work on SFS volumes, such as mksfs.) s
5 685 M
( */) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 663 M
(SFS_MAGIC) s
/F-gs-font 10 10 SF
0 setgray
107 663 M
(                                   0x2f8dbe2a              ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
461 663 M
(/* magic number fo) s
5 652 M
(r sfs */) s
/F-gs-font 10 10 SF
0 setgray
5 641 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 641 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 641 M
(SFS_BLKSIZE) s
/F-gs-font 10 10 SF
0 setgray
119 641 M
(                                 PGSIZE                  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
461 641 M
(/* size of block *) s
5 630 M
(/) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 619 M
(SFS_NDIRECT) s
/F-gs-font 10 10 SF
0 setgray
119 619 M
(                                 12                      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
461 619 M
(/* # of direct blo) s
5 608 M
(cks in inode */) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 597 M
(SFS_MAX_INFO_LEN) s
/F-gs-font 10 10 SF
0 setgray
149 597 M
(                            31                      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
461 597 M
(/* max length of i) s
5 586 M
(nfomation */) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 575 M
(SFS_MAX_FNAME_LEN) s
/F-gs-font 10 10 SF
0 setgray
155 575 M
(                           FS_MAX_FNAME_LEN        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
461 575 M
(/* max length of f) s
5 564 M
(ilename */) s
/F-gs-font 10 10 SF
0 setgray
5 553 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 553 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 553 M
(SFS_MAX_FILE_SIZE) s
/F-gs-font 10 10 SF
0 setgray
155 553 M
(                           \(1024UL * 1024 * 128\)   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
461 553 M
(/* max file size \() s
5 542 M
(128M\) */) s
/F-gs-font 10 10 SF
0 setgray
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 531 M
(SFS_BLKN_SUPER) s
/F-gs-font 10 10 SF
0 setgray
137 531 M
(                              0                       ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
461 531 M
(/* block the super) s
5 520 M
(block lives in */) s
/F-gs-font 10 10 SF
0 setgray
5 509 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 509 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 509 M
(SFS_BLKN_ROOT) s
/F-gs-font 10 10 SF
0 setgray
131 509 M
(                               1                       ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
461 509 M
(/* location of the) s
5 498 M
( root dir inode */) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 487 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 487 M
(SFS_BLKN_FREEMAP) s
/F-gs-font 10 10 SF
0 setgray
149 487 M
(                            2                       ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
461 487 M
(/* 1st block of th) s
5 476 M
(e freemap */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 454 M
(/* # of bits in a block */) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 443 M
(SFS_BLKBITS) s
/F-gs-font 10 10 SF
0 setgray
119 443 M
(                                 \(SFS_BLKSIZE * CHAR_BIT\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 421 M
(/* # of entries in a block */) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 410 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 410 M
(SFS_BLK_NENTRY) s
/F-gs-font 10 10 SF
0 setgray
137 410 M
(                              \(SFS_BLKSIZE / sizeof\(uint32_t\)\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 388 M
(/* file types */) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 377 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 377 M
(SFS_TYPE_INVAL) s
/F-gs-font 10 10 SF
0 setgray
137 377 M
(                              0       ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
365 377 M
(/* Should not appear on disk */) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 366 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 366 M
(SFS_TYPE_FILE) s
/F-gs-font 10 10 SF
0 setgray
131 366 M
(                               1) s
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 355 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 355 M
(SFS_TYPE_DIR) s
/F-gs-font 10 10 SF
0 setgray
125 355 M
(                                2) s
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 344 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 344 M
(SFS_TYPE_LINK) s
/F-gs-font 10 10 SF
0 setgray
131 344 M
(                               3) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 322 M
(/*) s
5 311 M
( * On-disk superblock) s
5 300 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( sfs_super {) s
5 278 M
(    uint32_t magic;                                 ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 278 M
(/* magic number, should be SFS_MAGIC */) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(    uint32_t blocks;                                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 267 M
(/* # of blocks in fs */) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(    uint32_t unused_blocks;                         ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 256 M
(/* # of unused blocks in fs */) s
/F-gs-font 10 10 SF
0 setgray
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 245 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 245 M
( info[SFS_MAX_INFO_LEN + 1];                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 245 M
(/* infomation for sfs  */) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(};) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 212 M
(/* inode \(on disk\) */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 201 M
( sfs_disk_inode {) s
5 190 M
(    uint32_t size;                                  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 190 M
(/* size of the file \(in bytes\) */) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(    uint16_t type;                                  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 179 M
(/* one of SYS_TYPE_* above */) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(    uint16_t nlinks;                                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 168 M
(/* # of hard links to this file */) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(    uint32_t blocks;                                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 157 M
(/* # of blocks */) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(    uint32_t direct[SFS_NDIRECT];                   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 146 M
(/* direct blocks */) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(    uint32_t indirect;                              ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 135 M
(/* indirect blocks */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 124 M
(//    uint32_t db_indirect;                           /* double indirect blocks */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 113 M
(//   unused) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(};) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 80 M
(/* file entry \(on disk\) */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( sfs_disk_entry {) s
5 58 M
(    uint32_t ino;                                   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 58 M
(/* inode number */) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 47 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 47 M
( name[SFS_MAX_FNAME_LEN + 1];               ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 47 M
(/* file name */) s
/F-gs-font 10 10 SF
0 setgray
5 36 M
(};) s
5 14 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 14 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 14 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 14 M
(sfs_dentry_size) s
/F-gs-font 10 10 SF
0 setgray
143 14 M
(                             \\) s
5 3 M
(    sizeof\(\(\(struct sfs_disk_entry *\)0\)->name\)) s
_R
S
%%Page: (138) 138
%%BeginPageSetup
_S
18 36 translate
/pagenum 138 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 696 M
(/* inode for sfs */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 685 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( sfs_inode {) s
5 674 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 674 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 674 M
( sfs_disk_inode *din;                     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 674 M
(/* on-disk inode */) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(    uint32_t ino;                                   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 663 M
(/* inode number */) s
/F-gs-font 10 10 SF
0 setgray
5 652 M
(    bool dirty;                                     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 652 M
(/* true if inode modified */) s
/F-gs-font 10 10 SF
0 setgray
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( reclaim_count;                              ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 641 M
(/* kill inode if it hits zero */) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(    semaphore_t sem;                                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 630 M
(/* semaphore for din */) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
(    list_entry_t inode_link;                        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 619 M
(/* entry for linked-list in sfs_fs */) s
/F-gs-font 10 10 SF
0 setgray
5 608 M
(    list_entry_t hash_link;                         ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 608 M
(/* entry for hash linked-list in sfs_fs */) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(};) s
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 575 M
(le2sin) s
/F-gs-font 10 10 SF
0 setgray
89 575 M
(\(le, member\)                          \\) s
5 564 M
(    to_struct\(\(le\), struct sfs_inode, member\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 542 M
(/* filesystem for sfs */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 531 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( sfs_fs {) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 520 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
( sfs_super super;                         ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 520 M
(/* on-disk superblock */) s
/F-gs-font 10 10 SF
0 setgray
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 509 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
( device *dev;                             ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 509 M
(/* device mounted on */) s
/F-gs-font 10 10 SF
0 setgray
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 498 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 498 M
( bitmap *freemap;                         ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 498 M
(/* blocks in use are mared 0 */) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(    bool super_dirty;                               ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 487 M
(/* true if super/freemap modified */) s
/F-gs-font 10 10 SF
0 setgray
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 476 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 476 M
( *sfs_buffer;                               ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 476 M
(/* buffer for non-block aligned io */) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(    semaphore_t fs_sem;                             ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 465 M
(/* semaphore for fs */) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(    semaphore_t io_sem;                             ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 454 M
(/* semaphore for io */) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(    semaphore_t mutex_sem;                          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 443 M
(/* semaphore for link/unlink and rename */) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(    list_entry_t inode_list;                        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 432 M
(/* inode linked-list */) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(    list_entry_t *hash_list;                        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 421 M
(/* inode hash linked-list */) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(};) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 388 M
(/* hash for sfs */) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 377 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 377 M
(SFS_HLIST_SHIFT) s
/F-gs-font 10 10 SF
0 setgray
143 377 M
(                             10) s
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 366 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 366 M
(SFS_HLIST_SIZE) s
/F-gs-font 10 10 SF
0 setgray
137 366 M
(                              \(1 << SFS_HLIST_SHIFT\)) s
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 355 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 355 M
(sin_hashfn) s
/F-gs-font 10 10 SF
0 setgray
113 355 M
(\(x\)                               \(hash32\(x, SFS_HLIST_SHIFT\)\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 333 M
(/* size of freemap \(in bits\) */) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 322 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 322 M
(sfs_freemap_bits) s
/F-gs-font 10 10 SF
0 setgray
149 322 M
(\(super\)                     ROUNDUP\(\(super\)->blocks, SFS_BLKBITS\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 300 M
(/* size of freemap \(in blocks\) */) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 289 M
(sfs_freemap_blocks) s
/F-gs-font 10 10 SF
0 setgray
161 289 M
(\(super\)                   ROUNDUP_DIV\(\(super\)->blocks, SFS_BLKBITS\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( fs;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 256 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 256 M
( inode;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 234 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 234 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 234 M
(sfs_init) s
/F-gs-font 10 10 SF
0 setgray
83 234 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 234 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 234 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 223 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 223 M
(sfs_mount) s
/F-gs-font 10 10 SF
0 setgray
83 223 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 223 M
(const) s
/F-gs-font 10 10 SF
0 setgray
119 223 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 223 M
(char) s
/F-gs-font 10 10 SF
0 setgray
149 223 M
( *devname\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 201 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 201 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 201 M
(lock_sfs_fs) s
/F-gs-font 10 10 SF
0 setgray
101 201 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 201 M
( sfs_fs *sfs\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 190 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 190 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 190 M
(lock_sfs_io) s
/F-gs-font 10 10 SF
0 setgray
101 190 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 190 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 190 M
( sfs_fs *sfs\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 179 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 179 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 179 M
(unlock_sfs_fs) s
/F-gs-font 10 10 SF
0 setgray
113 179 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 179 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 179 M
( sfs_fs *sfs\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 168 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 168 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 168 M
(unlock_sfs_io) s
/F-gs-font 10 10 SF
0 setgray
113 168 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 168 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 168 M
( sfs_fs *sfs\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 146 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 146 M
(sfs_rblock) s
/F-gs-font 10 10 SF
0 setgray
89 146 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 146 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 146 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 146 M
(void) s
/F-gs-font 10 10 SF
0 setgray
239 146 M
( *buf, uint32_t blkno, uint32_t nblks\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 135 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 135 M
(sfs_wblock) s
/F-gs-font 10 10 SF
0 setgray
89 135 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 135 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 135 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 135 M
(void) s
/F-gs-font 10 10 SF
0 setgray
239 135 M
( *buf, uint32_t blkno, uint32_t nblks\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 124 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 124 M
(sfs_rbuf) s
/F-gs-font 10 10 SF
0 setgray
77 124 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 124 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 124 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 124 M
(void) s
/F-gs-font 10 10 SF
0 setgray
227 124 M
( *buf, size_t len, uint32_t blkno, off_t offset\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 113 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 113 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 113 M
(sfs_wbuf) s
/F-gs-font 10 10 SF
0 setgray
77 113 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 113 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 113 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 113 M
(void) s
/F-gs-font 10 10 SF
0 setgray
227 113 M
( *buf, size_t len, uint32_t blkno, off_t offset\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 102 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 102 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 102 M
(sfs_sync_super) s
/F-gs-font 10 10 SF
0 setgray
113 102 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 102 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 102 M
( sfs_fs *sfs\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 91 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 91 M
(sfs_sync_freemap) s
/F-gs-font 10 10 SF
0 setgray
125 91 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 91 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
167 91 M
( sfs_fs *sfs\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 80 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 80 M
(sfs_clear_block) s
/F-gs-font 10 10 SF
0 setgray
119 80 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 80 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
161 80 M
( sfs_fs *sfs, uint32_t blkno, uint32_t nblks\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 58 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 58 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 58 M
(sfs_load_inode) s
/F-gs-font 10 10 SF
0 setgray
113 58 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 58 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 58 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
239 58 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
275 58 M
( inode **node_store, uint32_t ino\);) s
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 36 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 36 M
(/* !__KERN_FS_SFS_SFS_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 14 M
([ucore/lab8_result/kern/fs/sfs/sfs_lock.c] ++++++++++++++++++++++++++++++) s
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 3 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 3 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (139) 139
%%BeginPageSetup
_S
18 36 translate
/pagenum 139 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 707 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 707 M
(<sem.h>) s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 696 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 696 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 696 M
(<sfs.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 663 M
(/*) s
5 652 M
( * lock_sfs_fs - lock the process of  SFS Filesystem Rd/Wr Disk Block) s
5 641 M
( *) s
5 630 M
( * called by: sfs_load_inode, sfs_sync, sfs_reclaim) s
5 619 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 608 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 597 M
(lock_sfs_fs) s
/F-gs-font 10 10 SF
0 setgray
71 597 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 597 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 597 M
( sfs_fs *sfs\) {) s
5 586 M
(    down\(&\(sfs->fs_sem\)\);) s
5 575 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 553 M
(/*) s
5 542 M
( * lock_sfs_io - lock the process of SFS File Rd/Wr Disk Block) s
5 531 M
( *) s
5 520 M
( * called by: sfs_rwblock, sfs_clear_block, sfs_sync_super) s
5 509 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 498 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 487 M
(lock_sfs_io) s
/F-gs-font 10 10 SF
0 setgray
71 487 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 487 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 487 M
( sfs_fs *sfs\) {) s
5 476 M
(    down\(&\(sfs->io_sem\)\);) s
5 465 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 443 M
(/*) s
5 432 M
( * unlock_sfs_fs - unlock the process of  SFS Filesystem Rd/Wr Disk Block) s
5 421 M
( *) s
5 410 M
( * called by: sfs_load_inode, sfs_sync, sfs_reclaim) s
5 399 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 388 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 377 M
(unlock_sfs_fs) s
/F-gs-font 10 10 SF
0 setgray
83 377 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 377 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 377 M
( sfs_fs *sfs\) {) s
5 366 M
(    up\(&\(sfs->fs_sem\)\);) s
5 355 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 333 M
(/*) s
5 322 M
( * unlock_sfs_io - unlock the process of sfs Rd/Wr Disk Block) s
5 311 M
( *) s
5 300 M
( * called by: sfs_rwblock sfs_clear_block sfs_sync_super) s
5 289 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 278 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 267 M
(unlock_sfs_io) s
/F-gs-font 10 10 SF
0 setgray
83 267 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 267 M
( sfs_fs *sfs\) {) s
5 256 M
(    up\(&\(sfs->io_sem\)\);) s
5 245 M
(}) s
5 234 M
([ucore/lab8_result/kern/fs/sfs/bitmap.c] ++++++++++++++++++++++++++++++) s
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 223 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 223 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 212 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 212 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 201 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 201 M
(<bitmap.h>) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 190 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 190 M
(<kmalloc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 179 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 168 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 168 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 146 M
(WORD_TYPE) s
/F-gs-font 10 10 SF
0 setgray
107 146 M
(           uint32_t) s
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 135 M
(WORD_BITS) s
/F-gs-font 10 10 SF
0 setgray
107 135 M
(           \(sizeof\(WORD_TYPE\) * CHAR_BIT\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 113 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( bitmap {) s
5 102 M
(    uint32_t nbits;) s
5 91 M
(    uint32_t nwords;) s
5 80 M
(    WORD_TYPE *map;) s
5 69 M
(};) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 47 M
(// bitmap_create - allocate a new bitmap object.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 36 M
( bitmap *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 25 M
(bitmap_create) s
/F-gs-font 10 10 SF
0 setgray
83 25 M
(\(uint32_t nbits\) {) s
5 14 M
(    static_assert\(WORD_BITS != 0\);) s
5 3 M
(    assert\(nbits != 0 && nbits + WORD_BITS > nbits\);) s
_R
S
%%Page: (140) 140
%%BeginPageSetup
_S
18 36 translate
/pagenum 140 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 696 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 696 M
( bitmap *bitmap;) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 685 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( \(\(bitmap = kmalloc\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
161 685 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
197 685 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 685 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
239 685 M
( bitmap\)\)\) == NULL\) {) s
5 674 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 674 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 674 M
( NULL;) s
5 663 M
(    }) s
5 641 M
(    uint32_t nwords = ROUNDUP_DIV\(nbits, WORD_BITS\);) s
5 630 M
(    WORD_TYPE *map;) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 619 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
( \(\(map = kmalloc\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
143 619 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
179 619 M
(\(WORD_TYPE\) * nwords\)\) == NULL\) {) s
5 608 M
(        kfree\(bitmap\);) s
5 597 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 597 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 597 M
( NULL;) s
5 586 M
(    }) s
5 564 M
(    bitmap->nbits = nbits, bitmap->nwords = nwords;) s
5 553 M
(    bitmap->map = memset\(map, 0xFF, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
221 553 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
257 553 M
(\(WORD_TYPE\) * nwords\);) s
5 531 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 531 M
(/* mark any leftover bits at the end in use\(0\) */) s
/F-gs-font 10 10 SF
0 setgray
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 520 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 520 M
( \(nbits != nwords * WORD_BITS\) {) s
5 509 M
(        uint32_t ix = nwords - 1, overbits = nbits - ix * WORD_BITS;) s
5 487 M
(        assert\(nbits / WORD_BITS == ix\);) s
5 476 M
(        assert\(overbits > 0 && overbits < WORD_BITS\);) s
5 454 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 454 M
(for) s
/F-gs-font 10 10 SF
0 setgray
71 454 M
( \(; overbits < WORD_BITS; overbits ++\) {) s
5 443 M
(            bitmap->map[ix] ^= \(1 << overbits\);) s
5 432 M
(        }) s
5 421 M
(    }) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 410 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 410 M
( bitmap;) s
5 399 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 377 M
(// bitmap_alloc - locate a cleared bit, set it, and return its index.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 366 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 355 M
(bitmap_alloc) s
/F-gs-font 10 10 SF
0 setgray
77 355 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 355 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 355 M
( bitmap *bitmap, uint32_t *index_store\) {) s
5 344 M
(    WORD_TYPE *map = bitmap->map;) s
5 333 M
(    uint32_t ix, offset, nwords = bitmap->nwords;) s
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 322 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 322 M
( \(ix = 0; ix < nwords; ix ++\) {) s
5 311 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 311 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 311 M
( \(map[ix] != 0\) {) s
5 300 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 300 M
(for) s
/F-gs-font 10 10 SF
0 setgray
95 300 M
( \(offset = 0; offset < WORD_BITS; offset ++\) {) s
5 289 M
(                WORD_TYPE mask = \(1 << offset\);) s
5 278 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 278 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 278 M
( \(map[ix] & mask\) {) s
5 267 M
(                    map[ix] ^= mask;) s
5 256 M
(                    *index_store = ix * WORD_BITS + offset;) s
5 245 M
(                    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 245 M
(return) s
/F-gs-font 10 10 SF
0 setgray
161 245 M
( 0;) s
5 234 M
(                }) s
5 223 M
(            }) s
5 212 M
(            assert\(0\);) s
5 201 M
(        }) s
5 190 M
(    }) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 179 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 179 M
( -E_NO_MEM;) s
5 168 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 146 M
(// bitmap_translate - according index, get the related word and mask) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 135 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 135 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 135 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 124 M
(bitmap_translate) s
/F-gs-font 10 10 SF
0 setgray
101 124 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 124 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 124 M
( bitmap *bitmap, uint32_t index, WORD_TYPE **word, WORD_TYPE *mask\) {) s
5 113 M
(    assert\(index < bitmap->nbits\);) s
5 102 M
(    uint32_t ix = index / WORD_BITS, offset = index % WORD_BITS;) s
5 91 M
(    *word = bitmap->map + ix;) s
5 80 M
(    *mask = \(1 << offset\);) s
5 69 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 47 M
(// bitmap_test - according index, get the related value \(0 OR 1\) in the bitmap) s
/F-gs-font 10 10 SF
0 setgray
5 36 M
(bool) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 25 M
(bitmap_test) s
/F-gs-font 10 10 SF
0 setgray
71 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 25 M
( bitmap *bitmap, uint32_t index\) {) s
5 14 M
(    WORD_TYPE *word, mask;) s
5 3 M
(    bitmap_translate\(bitmap, index, &word, &mask\);) s
_R
S
%%Page: (141) 141
%%BeginPageSetup
_S
18 36 translate
/pagenum 141 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 707 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
( \(*word & mask\);) s
5 696 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 674 M
(// bitmap_free - according index, set related bit to 1) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 652 M
(bitmap_free) s
/F-gs-font 10 10 SF
0 setgray
71 652 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 652 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 652 M
( bitmap *bitmap, uint32_t index\) {) s
5 641 M
(    WORD_TYPE *word, mask;) s
5 630 M
(    bitmap_translate\(bitmap, index, &word, &mask\);) s
5 619 M
(    assert\(!\(*word & mask\)\);) s
5 608 M
(    *word |= mask;) s
5 597 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 575 M
(// bitmap_destroy - free memory contains bitmap) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 553 M
(bitmap_destroy) s
/F-gs-font 10 10 SF
0 setgray
89 553 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 553 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 553 M
( bitmap *bitmap\) {) s
5 542 M
(    kfree\(bitmap->map\);) s
5 531 M
(    kfree\(bitmap\);) s
5 520 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 498 M
(// bitmap_getdata - return bitmap->map, return the length of bits to len_store) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 487 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 487 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 476 M
(bitmap_getdata) s
/F-gs-font 10 10 SF
0 setgray
89 476 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 476 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 476 M
( bitmap *bitmap, size_t *len_store\) {) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 465 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 465 M
( \(len_store != NULL\) {) s
5 454 M
(        *len_store = ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
131 454 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
167 454 M
(\(WORD_TYPE\) * bitmap->nwords;) s
5 443 M
(    }) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 432 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 432 M
( bitmap->map;) s
5 421 M
(}) s
5 399 M
([ucore/lab8_result/kern/fs/sfs/sfs_fs.c] ++++++++++++++++++++++++++++++) s
5 388 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 388 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 388 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 388 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 377 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 377 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 366 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 366 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 355 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 355 M
(<kmalloc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 344 M
(<list.h>) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 333 M
(<fs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 322 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 322 M
(<vfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 311 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 311 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 311 M
(<dev.h>) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 300 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 300 M
(<sfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 289 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 289 M
(<inode.h>) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 278 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 278 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 278 M
(<iobuf.h>) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 267 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 267 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 267 M
(<bitmap.h>) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 256 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 256 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 245 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 245 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 223 M
(/*) s
5 212 M
( * sfs_sync - sync sfs's superblock and freemap in memroy into disk) s
5 201 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 190 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 190 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 190 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 179 M
(sfs_sync) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 179 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 179 M
( fs *fs\) {) s
5 168 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 168 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 168 M
( sfs_fs *sfs = fsop_info\(fs, sfs\);) s
5 157 M
(    lock_sfs_fs\(sfs\);) s
5 146 M
(    {) s
5 135 M
(        list_entry_t *list = &\(sfs->inode_list\), *le = list;) s
5 124 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 124 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 124 M
( \(\(le = list_next\(le\)\) != list\) {) s
5 113 M
(            ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 113 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 113 M
( sfs_inode *sin = le2sin\(le, inode_link\);) s
5 102 M
(            vop_fsync\(info2node\(sin, sfs_inode\)\);) s
5 91 M
(        }) s
5 80 M
(    }) s
5 69 M
(    unlock_sfs_fs\(sfs\);) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 47 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( ret;) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 36 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 36 M
( \(sfs->super_dirty\) {) s
5 25 M
(        sfs->super_dirty = 0;) s
5 14 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 14 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
( \(\(ret = sfs_sync_super\(sfs\)\) != 0\) {) s
5 3 M
(            sfs->super_dirty = 1;) s
_R
S
%%Page: (142) 142
%%BeginPageSetup
_S
18 36 translate
/pagenum 142 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 707 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 707 M
( ret;) s
5 696 M
(        }) s
5 685 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 685 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 685 M
( \(\(ret = sfs_sync_freemap\(sfs\)\) != 0\) {) s
5 674 M
(            sfs->super_dirty = 1;) s
5 663 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 663 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 663 M
( ret;) s
5 652 M
(        }) s
5 641 M
(    }) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 630 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 630 M
( 0;) s
5 619 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 597 M
(/*) s
5 586 M
( * sfs_get_root - get the root directory inode  from disk \(SFS_BLKN_ROOT,1\)) s
5 575 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 564 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 564 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 564 M
( inode *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 553 M
(sfs_get_root) s
/F-gs-font 10 10 SF
0 setgray
77 553 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 553 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 553 M
( fs *fs\) {) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 542 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 542 M
( inode *node;) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 531 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( ret;) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 520 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 520 M
( \(\(ret = sfs_load_inode\(fsop_info\(fs, sfs\), &node, SFS_BLKN_ROOT\)\) != 0\) {) s
5 509 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 509 M
("load sfs root failed: %e") s
/F-gs-font 10 10 SF
0 setgray
245 509 M
(, ret\);) s
5 498 M
(    }) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 487 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 487 M
( node;) s
5 476 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 454 M
(/*) s
5 443 M
( * sfs_unmount - unmount sfs, and free the memorys contain sfs->freemap/sfs_buffer/hash_liskt ) s
5 432 M
(and sfs itself.) s
5 421 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 410 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 410 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 410 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 399 M
(sfs_unmount) s
/F-gs-font 10 10 SF
0 setgray
71 399 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 399 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 399 M
( fs *fs\) {) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 388 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 388 M
( sfs_fs *sfs = fsop_info\(fs, sfs\);) s
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 377 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
( \(!list_empty\(&\(sfs->inode_list\)\)\) {) s
5 366 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 366 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 366 M
( -E_BUSY;) s
5 355 M
(    }) s
5 344 M
(    assert\(!sfs->super_dirty\);) s
5 333 M
(    bitmap_destroy\(sfs->freemap\);) s
5 322 M
(    kfree\(sfs->sfs_buffer\);) s
5 311 M
(    kfree\(sfs->hash_list\);) s
5 300 M
(    kfree\(sfs\);) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 289 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 289 M
( 0;) s
5 278 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 256 M
(/*) s
5 245 M
( * sfs_cleanup - when sfs failed, then should call this function to sync sfs by calling sfs_sy) s
5 234 M
(nc) s
5 223 M
( *) s
5 212 M
( * NOTICE: nouse now.) s
5 201 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 190 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 190 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 190 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 179 M
(sfs_cleanup) s
/F-gs-font 10 10 SF
0 setgray
71 179 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 179 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 179 M
( fs *fs\) {) s
5 168 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 168 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 168 M
( sfs_fs *sfs = fsop_info\(fs, sfs\);) s
5 157 M
(    uint32_t blocks = sfs->super.blocks, unused_blocks = sfs->super.unused_blocks;) s
5 146 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 146 M
("sfs: cleanup: '%s' \(%d/%d/%d\)\\n") s
/F-gs-font 10 10 SF
0 setgray
275 146 M
(, sfs->super.info,) s
5 135 M
(            blocks - unused_blocks, unused_blocks, blocks\);) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( i, ret;) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( \(i = 0; i < 32; i ++\) {) s
5 102 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 102 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 102 M
( \(\(ret = fsop_sync\(fs\)\) == 0\) {) s
5 91 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 91 M
(break) s
/F-gs-font 10 10 SF
0 setgray
107 91 M
(;) s
5 80 M
(        }) s
5 69 M
(    }) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 58 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 58 M
( \(ret != 0\) {) s
5 47 M
(        warn\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 47 M
("sfs: sync error: '%s': %e.\\n") s
/F-gs-font 10 10 SF
0 setgray
263 47 M
(, sfs->super.info, ret\);) s
5 36 M
(    }) s
5 25 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 3 M
(/*) s
_R
S
%%Page: (143) 143
%%BeginPageSetup
_S
18 36 translate
/pagenum 143 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
( * sfs_init_read - used in sfs_do_mount to read disk block\(blkno, 1\) directly.) s
5 696 M
( *) s
5 685 M
( * @dev:        the block device) s
5 674 M
( * @blkno:      the NO. of disk block) s
5 663 M
( * @blk_buffer: the buffer used for read) s
5 652 M
( *) s
5 641 M
( *      \(1\) init iobuf) s
5 630 M
( *      \(2\) read dev into iobuf) s
5 619 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 608 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 608 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 608 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 597 M
(sfs_init_read) s
/F-gs-font 10 10 SF
0 setgray
83 597 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 597 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 597 M
( device *dev, uint32_t blkno, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
305 597 M
(void) s
/F-gs-font 10 10 SF
0 setgray
329 597 M
( *blk_buffer\) {) s
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 586 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 586 M
( iobuf __iob, *iob = iobuf_init\(&__iob, blk_buffer, SFS_BLKSIZE, blkno * SFS_BLKSIZE) s
5 575 M
(\);) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 564 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 564 M
( dop_io\(dev, iob, 0\);) s
5 553 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 531 M
(/*) s
5 520 M
( * sfs_init_freemap - used in sfs_do_mount to read freemap data info in disk block\(blkno, nblk) s
5 509 M
(s\) directly.) s
5 498 M
( *) s
5 487 M
( * @dev:        the block device) s
5 476 M
( * @bitmap:     the bitmap in memroy) s
5 465 M
( * @blkno:      the NO. of disk block) s
5 454 M
( * @nblks:      Rd number of disk block) s
5 443 M
( * @blk_buffer: the buffer used for read) s
5 432 M
( *) s
5 421 M
( *      \(1\) get data addr in bitmap) s
5 410 M
( *      \(2\) read dev into iobuf) s
5 399 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 388 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 388 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 388 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 377 M
(sfs_init_freemap) s
/F-gs-font 10 10 SF
0 setgray
101 377 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 377 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 377 M
( device *dev, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 377 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
263 377 M
( bitmap *freemap, uint32_t blkno, uint32_t nblks, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
563 377 M
(v) s
5 366 M
(oid) s
/F-gs-font 10 10 SF
0 setgray
23 366 M
( *blk_buffer\) {) s
5 355 M
(    size_t len;) s
5 344 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 344 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
( *data = bitmap_getdata\(freemap, &len\);) s
5 333 M
(    assert\(data != NULL && len == nblks * SFS_BLKSIZE\);) s
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 322 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 322 M
( \(nblks != 0\) {) s
5 311 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 311 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 311 M
( ret;) s
5 300 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 300 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 300 M
( \(\(ret = sfs_init_read\(dev, blkno, data\)\) != 0\) {) s
5 289 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 289 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 289 M
( ret;) s
5 278 M
(        }) s
5 267 M
(        blkno ++, nblks --, data += SFS_BLKSIZE;) s
5 256 M
(    }) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 245 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 245 M
( 0;) s
5 234 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 212 M
(/*) s
5 201 M
( * sfs_do_mount - mount sfs file system.) s
5 190 M
( *) s
5 179 M
( * @dev:        the block device contains sfs file system) s
5 168 M
( * @fs_store:   the fs struct in memroy) s
5 157 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 146 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 135 M
(sfs_do_mount) s
/F-gs-font 10 10 SF
0 setgray
77 135 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 135 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 135 M
( device *dev, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 135 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
239 135 M
( fs **fs_store\) {) s
5 124 M
(    static_assert\(SFS_BLKSIZE >= ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
203 124 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
239 124 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 124 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
281 124 M
( sfs_super\)\);) s
5 113 M
(    static_assert\(SFS_BLKSIZE >= ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
203 113 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
239 113 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 113 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
281 113 M
( sfs_disk_inode\)\);) s
5 102 M
(    static_assert\(SFS_BLKSIZE >= ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
203 102 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
239 102 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 102 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
281 102 M
( sfs_disk_entry\)\);) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 80 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 80 M
( \(dev->d_blocksize != SFS_BLKSIZE\) {) s
5 69 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 69 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 69 M
( -E_NA_DEV;) s
5 58 M
(    }) s
5 36 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 36 M
(/* allocate fs structure */) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 25 M
( fs *fs;) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 14 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( \(\(fs = alloc_fs\(sfs\)\) == NULL\) {) s
5 3 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 3 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 3 M
( -E_NO_MEM;) s
_R
S
%%Page: (144) 144
%%BeginPageSetup
_S
18 36 translate
/pagenum 144 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    }) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 696 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 696 M
( sfs_fs *sfs = fsop_info\(fs, sfs\);) s
5 685 M
(    sfs->dev = dev;) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 663 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( ret = -E_NO_MEM;) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 641 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 641 M
( *sfs_buffer;) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 630 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 630 M
( \(\(sfs->sfs_buffer = sfs_buffer = kmalloc\(SFS_BLKSIZE\)\) == NULL\) {) s
5 619 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 619 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 619 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 619 M
(failed_cleanup_fs) s
/F-gs-font 10 10 SF
0 setgray
185 619 M
(;) s
5 608 M
(    }) s
5 586 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 586 M
(/* load and check superblock */) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 575 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( \(\(ret = sfs_init_read\(dev, SFS_BLKN_SUPER, sfs_buffer\)\) != 0\) {) s
5 564 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 564 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 564 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 564 M
(failed_cleanup_sfs_buffer) s
/F-gs-font 10 10 SF
0 setgray
233 564 M
(;) s
5 553 M
(    }) s
5 531 M
(    ret = -E_INVAL;) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 509 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
( sfs_super *super = sfs_buffer;) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 498 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 498 M
( \(super->magic != SFS_MAGIC\) {) s
5 487 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 487 M
("sfs: wrong magic in superblock. \(%08x should be %08x\).\\n") s
/F-gs-font 10 10 SF
0 setgray
449 487 M
(,) s
5 476 M
(                super->magic, SFS_MAGIC\);) s
5 465 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 465 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 465 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 465 M
(failed_cleanup_sfs_buffer) s
/F-gs-font 10 10 SF
0 setgray
233 465 M
(;) s
5 454 M
(    }) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 443 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
( \(super->blocks > dev->d_blocks\) {) s
5 432 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 432 M
("sfs: fs has %u blocks, device has %u blocks.\\n") s
/F-gs-font 10 10 SF
0 setgray
389 432 M
(,) s
5 421 M
(                super->blocks, dev->d_blocks\);) s
5 410 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 410 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 410 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 410 M
(failed_cleanup_sfs_buffer) s
/F-gs-font 10 10 SF
0 setgray
233 410 M
(;) s
5 399 M
(    }) s
5 388 M
(    super->info[SFS_MAX_INFO_LEN] = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
221 388 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
245 388 M
(;) s
5 377 M
(    sfs->super = *super;) s
5 355 M
(    ret = -E_NO_MEM;) s
5 333 M
(    uint32_t i;) s
5 311 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 311 M
(/* alloc and initialize hash list */) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(    list_entry_t *hash_list;) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 289 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( \(\(sfs->hash_list = hash_list = kmalloc\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
281 289 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
317 289 M
(\(list_entry_t\) * SFS_HLIST_SIZE\)\) == NULL\)) s
5 278 M
( {) s
5 267 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 267 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 267 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 267 M
(failed_cleanup_sfs_buffer) s
/F-gs-font 10 10 SF
0 setgray
233 267 M
(;) s
5 256 M
(    }) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 245 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( \(i = 0; i < SFS_HLIST_SIZE; i ++\) {) s
5 234 M
(        list_init\(hash_list + i\);) s
5 223 M
(    }) s
5 201 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 201 M
(/* load and check freemap */) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 190 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 190 M
( bitmap *freemap;) s
5 179 M
(    uint32_t freemap_size_nbits = sfs_freemap_bits\(super\);) s
5 168 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 168 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 168 M
( \(\(sfs->freemap = freemap = bitmap_create\(freemap_size_nbits\)\) == NULL\) {) s
5 157 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 157 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 157 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 157 M
(failed_cleanup_hash_list) s
/F-gs-font 10 10 SF
0 setgray
227 157 M
(;) s
5 146 M
(    }) s
5 135 M
(    uint32_t freemap_size_nblks = sfs_freemap_blocks\(super\);) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 124 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 124 M
( \(\(ret = sfs_init_freemap\(dev, freemap, SFS_BLKN_FREEMAP, freemap_size_nblks, sfs_buffer) s
5 113 M
(\)\) != 0\) {) s
5 102 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 102 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 102 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 102 M
(failed_cleanup_freemap) s
/F-gs-font 10 10 SF
0 setgray
215 102 M
(;) s
5 91 M
(    }) s
5 69 M
(    uint32_t blocks = sfs->super.blocks, unused_blocks = 0;) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 58 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( \(i = 0; i < freemap_size_nbits; i ++\) {) s
5 47 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 47 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
( \(bitmap_test\(freemap, i\)\) {) s
5 36 M
(            unused_blocks ++;) s
5 25 M
(        }) s
5 14 M
(    }) s
5 3 M
(    assert\(unused_blocks == sfs->super.unused_blocks\);) s
_R
S
%%Page: (145) 145
%%BeginPageSetup
_S
18 36 translate
/pagenum 145 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 696 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 696 M
(/* and other fields */) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(    sfs->super_dirty = 0;) s
5 674 M
(    sem_init\(&\(sfs->fs_sem\), 1\);) s
5 663 M
(    sem_init\(&\(sfs->io_sem\), 1\);) s
5 652 M
(    sem_init\(&\(sfs->mutex_sem\), 1\);) s
5 641 M
(    list_init\(&\(sfs->inode_list\)\);) s
5 630 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 630 M
("sfs: mount: '%s' \(%d/%d/%d\)\\n") s
/F-gs-font 10 10 SF
0 setgray
263 630 M
(, sfs->super.info,) s
5 619 M
(            blocks - unused_blocks, unused_blocks, blocks\);) s
5 597 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 597 M
(/* link addr of sync/get_root/unmount/cleanup funciton  fs's function pointers*/) s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(    fs->fs_sync = sfs_sync;) s
5 575 M
(    fs->fs_get_root = sfs_get_root;) s
5 564 M
(    fs->fs_unmount = sfs_unmount;) s
5 553 M
(    fs->fs_cleanup = sfs_cleanup;) s
5 542 M
(    *fs_store = fs;) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 531 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 531 M
( 0;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 509 M
(failed_cleanup_freemap) s
/F-gs-font 10 10 SF
0 setgray
137 509 M
(:) s
5 498 M
(    bitmap_destroy\(freemap\);) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 487 M
(failed_cleanup_hash_list) s
/F-gs-font 10 10 SF
0 setgray
149 487 M
(:) s
5 476 M
(    kfree\(hash_list\);) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 465 M
(failed_cleanup_sfs_buffer) s
/F-gs-font 10 10 SF
0 setgray
155 465 M
(:) s
5 454 M
(    kfree\(sfs_buffer\);) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 443 M
(failed_cleanup_fs) s
/F-gs-font 10 10 SF
0 setgray
107 443 M
(:) s
5 432 M
(    kfree\(fs\);) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 421 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 421 M
( ret;) s
5 410 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 388 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 377 M
(sfs_mount) s
/F-gs-font 10 10 SF
0 setgray
59 377 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 377 M
(const) s
/F-gs-font 10 10 SF
0 setgray
95 377 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 377 M
(char) s
/F-gs-font 10 10 SF
0 setgray
125 377 M
( *devname\) {) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 366 M
( vfs_mount\(devname, sfs_do_mount\);) s
5 355 M
(}) s
5 333 M
([ucore/lab8_result/kern/fs/sfs/sfs_io.c] ++++++++++++++++++++++++++++++) s
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 322 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 322 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 311 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 311 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 311 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 300 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 300 M
(<dev.h>) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 289 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 289 M
(<sfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 278 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 278 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 278 M
(<iobuf.h>) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 267 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 267 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 267 M
(<bitmap.h>) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 256 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 256 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 234 M
(//Basic block-level I/O routines) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 212 M
(/* sfs_rwblock_nolock - Basic block-level I/O routine for Rd/Wr one disk block,) s
5 201 M
( *                      without lock protect for mutex process on Rd/Wr disk block) s
5 190 M
( * @sfs:   sfs_fs which will be process) s
5 179 M
( * @buf:   the buffer uesed for Rd/Wr) s
5 168 M
( * @blkno: the NO. of disk block) s
5 157 M
( * @write: BOOL: Read or Write) s
5 146 M
( * @check: BOOL: if check \(blono < sfs super.blocks\)) s
5 135 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 124 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 113 M
(sfs_rwblock_nolock) s
/F-gs-font 10 10 SF
0 setgray
113 113 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 113 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 113 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
239 113 M
(void) s
/F-gs-font 10 10 SF
0 setgray
263 113 M
( *buf, uint32_t blkno, bool write, bool check\) {) s
5 102 M
(    assert\(\(blkno != 0 || !check\) && blkno < sfs->super.blocks\);) s
5 91 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 91 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 91 M
( iobuf __iob, *iob = iobuf_init\(&__iob, buf, SFS_BLKSIZE, blkno * SFS_BLKSIZE\);) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 80 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 80 M
( dop_io\(sfs->dev, iob, write\);) s
5 69 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 47 M
(/* sfs_rwblock - Basic block-level I/O routine for Rd/Wr N disk blocks ,) s
5 36 M
( *               with lock protect for mutex process on Rd/Wr disk block) s
5 25 M
( * @sfs:   sfs_fs which will be process) s
5 14 M
( * @buf:   the buffer uesed for Rd/Wr) s
5 3 M
( * @blkno: the NO. of disk block) s
_R
S
%%Page: (146) 146
%%BeginPageSetup
_S
18 36 translate
/pagenum 146 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
( * @nblks: Rd/Wr number of disk block) s
5 696 M
( * @write: BOOL: Read - 0 or Write - 1) s
5 685 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 674 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 674 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 674 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 663 M
(sfs_rwblock) s
/F-gs-font 10 10 SF
0 setgray
71 663 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 663 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 663 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 663 M
(void) s
/F-gs-font 10 10 SF
0 setgray
221 663 M
( *buf, uint32_t blkno, uint32_t nblks, bool write\) {) s
5 652 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 652 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 652 M
( ret = 0;) s
5 641 M
(    lock_sfs_io\(sfs\);) s
5 630 M
(    {) s
5 619 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 619 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 619 M
( \(nblks != 0\) {) s
5 608 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 608 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 608 M
( \(\(ret = sfs_rwblock_nolock\(sfs, buf, blkno, write, 1\)\) != 0\) {) s
5 597 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 597 M
(break) s
/F-gs-font 10 10 SF
0 setgray
131 597 M
(;) s
5 586 M
(            }) s
5 575 M
(            blkno ++, nblks --;) s
5 564 M
(            buf += SFS_BLKSIZE;) s
5 553 M
(        }) s
5 542 M
(    }) s
5 531 M
(    unlock_sfs_io\(sfs\);) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 520 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
( ret;) s
5 509 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 487 M
(/* sfs_rblock - The Wrap of sfs_rwblock function for Rd N disk blocks ,) s
5 476 M
( *) s
5 465 M
( * @sfs:   sfs_fs which will be process) s
5 454 M
( * @buf:   the buffer uesed for Rd/Wr) s
5 443 M
( * @blkno: the NO. of disk block) s
5 432 M
( * @nblks: Rd/Wr number of disk block) s
5 421 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 410 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 399 M
(sfs_rblock) s
/F-gs-font 10 10 SF
0 setgray
65 399 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 399 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 399 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 399 M
(void) s
/F-gs-font 10 10 SF
0 setgray
215 399 M
( *buf, uint32_t blkno, uint32_t nblks\) {) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 388 M
( sfs_rwblock\(sfs, buf, blkno, nblks, 0\);) s
5 377 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 355 M
(/* sfs_wblock - The Wrap of sfs_rwblock function for Wr N disk blocks ,) s
5 344 M
( *) s
5 333 M
( * @sfs:   sfs_fs which will be process) s
5 322 M
( * @buf:   the buffer uesed for Rd/Wr) s
5 311 M
( * @blkno: the NO. of disk block) s
5 300 M
( * @nblks: Rd/Wr number of disk block) s
5 289 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 267 M
(sfs_wblock) s
/F-gs-font 10 10 SF
0 setgray
65 267 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 267 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 267 M
(void) s
/F-gs-font 10 10 SF
0 setgray
215 267 M
( *buf, uint32_t blkno, uint32_t nblks\) {) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 256 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 256 M
( sfs_rwblock\(sfs, buf, blkno, nblks, 1\);) s
5 245 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 223 M
(/* sfs_rbuf - The Basic block-level I/O routine for  Rd\( non-block & non-aligned io\) one disk ) s
5 212 M
(block\(using sfs->sfs_buffer\)) s
5 201 M
( *            with lock protect for mutex process on Rd/Wr disk block) s
5 190 M
( * @sfs:    sfs_fs which will be process) s
5 179 M
( * @buf:    the buffer uesed for Rd) s
5 168 M
( * @len:    the length need to Rd) s
5 157 M
( * @blkno:  the NO. of disk block) s
5 146 M
( * @offset: the offset in the content of disk block) s
5 135 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 113 M
(sfs_rbuf) s
/F-gs-font 10 10 SF
0 setgray
53 113 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 113 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 113 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 113 M
(void) s
/F-gs-font 10 10 SF
0 setgray
203 113 M
( *buf, size_t len, uint32_t blkno, off_t offset\) {) s
5 102 M
(    assert\(offset >= 0 && offset < SFS_BLKSIZE && offset + len <= SFS_BLKSIZE\);) s
5 91 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( ret;) s
5 80 M
(    lock_sfs_io\(sfs\);) s
5 69 M
(    {) s
5 58 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 58 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 58 M
( \(\(ret = sfs_rwblock_nolock\(sfs, sfs->sfs_buffer, blkno, 0, 1\)\) == 0\) {) s
5 47 M
(            memcpy\(buf, sfs->sfs_buffer + offset, len\);) s
5 36 M
(        }) s
5 25 M
(    }) s
5 14 M
(    unlock_sfs_io\(sfs\);) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 3 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 3 M
( ret;) s
_R
S
%%Page: (147) 147
%%BeginPageSetup
_S
18 36 translate
/pagenum 147 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 685 M
(/* sfs_wbuf - The Basic block-level I/O routine for  Wr\( non-block & non-aligned io\) one disk ) s
5 674 M
(block\(using sfs->sfs_buffer\)) s
5 663 M
( *            with lock protect for mutex process on Rd/Wr disk block) s
5 652 M
( * @sfs:    sfs_fs which will be process) s
5 641 M
( * @buf:    the buffer uesed for Wr) s
5 630 M
( * @len:    the length need to Wr) s
5 619 M
( * @blkno:  the NO. of disk block) s
5 608 M
( * @offset: the offset in the content of disk block) s
5 597 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 586 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 575 M
(sfs_wbuf) s
/F-gs-font 10 10 SF
0 setgray
53 575 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 575 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 575 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 575 M
(void) s
/F-gs-font 10 10 SF
0 setgray
203 575 M
( *buf, size_t len, uint32_t blkno, off_t offset\) {) s
5 564 M
(    assert\(offset >= 0 && offset < SFS_BLKSIZE && offset + len <= SFS_BLKSIZE\);) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 553 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( ret;) s
5 542 M
(    lock_sfs_io\(sfs\);) s
5 531 M
(    {) s
5 520 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 520 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
( \(\(ret = sfs_rwblock_nolock\(sfs, sfs->sfs_buffer, blkno, 0, 1\)\) == 0\) {) s
5 509 M
(            memcpy\(sfs->sfs_buffer + offset, buf, len\);) s
5 498 M
(            ret = sfs_rwblock_nolock\(sfs, sfs->sfs_buffer, blkno, 1, 1\);) s
5 487 M
(        }) s
5 476 M
(    }) s
5 465 M
(    unlock_sfs_io\(sfs\);) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 454 M
( ret;) s
5 443 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 421 M
(/*) s
5 410 M
( * sfs_sync_super - write sfs->super \(in memory\) into disk \(SFS_BLKN_SUPER, 1\) with lock prote) s
5 399 M
(ct.) s
5 388 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 377 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 366 M
(sfs_sync_super) s
/F-gs-font 10 10 SF
0 setgray
89 366 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 366 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 366 M
( sfs_fs *sfs\) {) s
5 355 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 355 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 355 M
( ret;) s
5 344 M
(    lock_sfs_io\(sfs\);) s
5 333 M
(    {) s
5 322 M
(        memset\(sfs->sfs_buffer, 0, SFS_BLKSIZE\);) s
5 311 M
(        memcpy\(sfs->sfs_buffer, &\(sfs->super\), ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
287 311 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
323 311 M
(\(sfs->super\)\);) s
5 300 M
(        ret = sfs_rwblock_nolock\(sfs, sfs->sfs_buffer, SFS_BLKN_SUPER, 1, 0\);) s
5 289 M
(    }) s
5 278 M
(    unlock_sfs_io\(sfs\);) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 267 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 267 M
( ret;) s
5 256 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 234 M
(/*) s
5 223 M
( * sfs_sync_freemap - write sfs bitmap into disk \(SFS_BLKN_FREEMAP, nblks\)  without lock prote) s
5 212 M
(ct.) s
5 201 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 190 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 179 M
(sfs_sync_freemap) s
/F-gs-font 10 10 SF
0 setgray
101 179 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 179 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 179 M
( sfs_fs *sfs\) {) s
5 168 M
(    uint32_t nblks = sfs_freemap_blocks\(&\(sfs->super\)\);) s
5 157 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 157 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 157 M
( sfs_wblock\(sfs, bitmap_getdata\(sfs->freemap, NULL\), SFS_BLKN_FREEMAP, nblks\);) s
5 146 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 124 M
(/*) s
5 113 M
( * sfs_clear_block - write zero info into disk \(blkno, nblks\)  with lock protect.) s
5 102 M
( * @sfs:   sfs_fs which will be process) s
5 91 M
( * @blkno: the NO. of disk block) s
5 80 M
( * @nblks: Rd/Wr number of disk block) s
5 69 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 58 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 47 M
(sfs_clear_block) s
/F-gs-font 10 10 SF
0 setgray
95 47 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 47 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 47 M
( sfs_fs *sfs, uint32_t blkno, uint32_t nblks\) {) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( ret;) s
5 25 M
(    lock_sfs_io\(sfs\);) s
5 14 M
(    {) s
5 3 M
(        memset\(sfs->sfs_buffer, 0, SFS_BLKSIZE\);) s
_R
S
%%Page: (148) 148
%%BeginPageSetup
_S
18 36 translate
/pagenum 148 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 707 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 707 M
( \(nblks != 0\) {) s
5 696 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 696 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 696 M
( \(\(ret = sfs_rwblock_nolock\(sfs, sfs->sfs_buffer, blkno, 1, 1\)\) != 0\) {) s
5 685 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 685 M
(break) s
/F-gs-font 10 10 SF
0 setgray
131 685 M
(;) s
5 674 M
(            }) s
5 663 M
(            blkno ++, nblks --;) s
5 652 M
(        }) s
5 641 M
(    }) s
5 630 M
(    unlock_sfs_io\(sfs\);) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 619 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 619 M
( ret;) s
5 608 M
(}) s
5 586 M
([ucore/lab8_result/kern/fs/sfs/sfs_inode.c] ++++++++++++++++++++++++++++++) s
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 575 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 575 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 564 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 564 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 564 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 564 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 553 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 553 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 553 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 553 M
(<stdlib.h>) s
/F-gs-font 10 10 SF
0 setgray
5 542 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 542 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 542 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 542 M
(<list.h>) s
/F-gs-font 10 10 SF
0 setgray
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 531 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 531 M
(<stat.h>) s
/F-gs-font 10 10 SF
0 setgray
5 520 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 520 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 520 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 520 M
(<kmalloc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 509 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 509 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 509 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 509 M
(<vfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 498 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 498 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 498 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 498 M
(<dev.h>) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 487 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 487 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 487 M
(<sfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 476 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 476 M
(<inode.h>) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 465 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 465 M
(<iobuf.h>) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 454 M
(<bitmap.h>) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 443 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 443 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 432 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 432 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 432 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 410 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 410 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 410 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 410 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 410 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 410 M
( inode_ops sfs_node_dirops;  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 410 M
(// dir operations) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 399 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 399 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 399 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 399 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 399 M
( inode_ops sfs_node_fileops; ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 399 M
(// file operations) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 377 M
(/*) s
5 366 M
( * lock_sin - lock the process of inode Rd/Wr) s
5 355 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 344 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 344 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 344 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 333 M
(lock_sin) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 333 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 333 M
( sfs_inode *sin\) {) s
5 322 M
(    down\(&\(sin->sem\)\);) s
5 311 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 289 M
(/*) s
5 278 M
( * unlock_sin - unlock the process of inode Rd/Wr) s
5 267 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 256 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 256 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 256 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 245 M
(unlock_sin) s
/F-gs-font 10 10 SF
0 setgray
65 245 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 245 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 245 M
( sfs_inode *sin\) {) s
5 234 M
(    up\(&\(sin->sem\)\);) s
5 223 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 201 M
(/*) s
5 190 M
( * sfs_get_ops - return function addr of fs_node_dirops/sfs_node_fileops) s
5 179 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 168 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 168 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 168 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 168 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 168 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 168 M
( inode_ops *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 157 M
(sfs_get_ops) s
/F-gs-font 10 10 SF
0 setgray
71 157 M
(\(uint16_t type\) {) s
5 146 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 146 M
(switch) s
/F-gs-font 10 10 SF
0 setgray
65 146 M
( \(type\) {) s
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 135 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 135 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 135 M
(SFS_TYPE_DIR) s
/F-gs-font 10 10 SF
0 setgray
131 135 M
(:) s
5 124 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 124 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 124 M
( &sfs_node_dirops;) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 113 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 113 M
(SFS_TYPE_FILE) s
/F-gs-font 10 10 SF
0 setgray
137 113 M
(:) s
5 102 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 102 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 102 M
( &sfs_node_fileops;) s
5 91 M
(    }) s
5 80 M
(    panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 80 M
("invalid file type %d.\\n") s
/F-gs-font 10 10 SF
0 setgray
215 80 M
(, type\);) s
5 69 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 47 M
(/*) s
5 36 M
( * sfs_hash_list - return inode entry in sfs->hash_list) s
5 25 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( list_entry_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 3 M
(sfs_hash_list) s
/F-gs-font 10 10 SF
0 setgray
83 3 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 3 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 3 M
( sfs_fs *sfs, uint32_t ino\) {) s
_R
S
%%Page: (149) 149
%%BeginPageSetup
_S
18 36 translate
/pagenum 149 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 707 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
( sfs->hash_list + sin_hashfn\(ino\);) s
5 696 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 674 M
(/*) s
5 663 M
( * sfs_set_links - link inode sin in sfs->linked-list AND sfs->hash_link) s
5 652 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 641 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 641 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 641 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 630 M
(sfs_set_links) s
/F-gs-font 10 10 SF
0 setgray
83 630 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 630 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 630 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
209 630 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
245 630 M
( sfs_inode *sin\) {) s
5 619 M
(    list_add\(&\(sfs->inode_list\), &\(sin->inode_link\)\);) s
5 608 M
(    list_add\(sfs_hash_list\(sfs, sin->ino\), &\(sin->hash_link\)\);) s
5 597 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 575 M
(/*) s
5 564 M
( * sfs_remove_links - unlink inode sin in sfs->linked-list AND sfs->hash_link) s
5 553 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 542 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 542 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 542 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 531 M
(sfs_remove_links) s
/F-gs-font 10 10 SF
0 setgray
101 531 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 531 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 531 M
( sfs_inode *sin\) {) s
5 520 M
(    list_del\(&\(sin->inode_link\)\);) s
5 509 M
(    list_del\(&\(sin->hash_link\)\);) s
5 498 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 476 M
(/*) s
5 465 M
( * sfs_block_inuse - check the inode with NO. ino inuse info in bitmap) s
5 454 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
( bool) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 432 M
(sfs_block_inuse) s
/F-gs-font 10 10 SF
0 setgray
95 432 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 432 M
( sfs_fs *sfs, uint32_t ino\) {) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 421 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
( \(ino != 0 && ino < sfs->super.blocks\) {) s
5 410 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 410 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 410 M
( !bitmap_test\(sfs->freemap, ino\);) s
5 399 M
(    }) s
5 388 M
(    panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 388 M
("sfs_block_inuse: called out of range \(0, %u\) %u.\\n") s
/F-gs-font 10 10 SF
0 setgray
377 388 M
(, sfs->super.blocks, ino\);) s
5 377 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 355 M
(/*) s
5 344 M
( * sfs_block_alloc -  check and get a free disk block) s
5 333 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 322 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 322 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 322 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 311 M
(sfs_block_alloc) s
/F-gs-font 10 10 SF
0 setgray
95 311 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 311 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 311 M
( sfs_fs *sfs, uint32_t *ino_store\) {) s
5 300 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 300 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( ret;) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 289 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( \(\(ret = bitmap_alloc\(sfs->freemap, ino_store\)\) != 0\) {) s
5 278 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 278 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 278 M
( ret;) s
5 267 M
(    }) s
5 256 M
(    assert\(sfs->super.unused_blocks > 0\);) s
5 245 M
(    sfs->super.unused_blocks --, sfs->super_dirty = 1;) s
5 234 M
(    assert\(sfs_block_inuse\(sfs, *ino_store\)\);) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 223 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 223 M
( sfs_clear_block\(sfs, *ino_store, 1\);) s
5 212 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 190 M
(/*) s
5 179 M
( * sfs_block_free - set related bits for ino block to 1\(means free\) in bitmap, add sfs->super.) s
5 168 M
(unused_blocks, set superblock dirty *) s
5 157 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 146 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 135 M
(sfs_block_free) s
/F-gs-font 10 10 SF
0 setgray
89 135 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 135 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 135 M
( sfs_fs *sfs, uint32_t ino\) {) s
5 124 M
(    assert\(sfs_block_inuse\(sfs, ino\)\);) s
5 113 M
(    bitmap_free\(sfs->freemap, ino\);) s
5 102 M
(    sfs->super.unused_blocks ++, sfs->super_dirty = 1;) s
5 91 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 69 M
(/*) s
5 58 M
( * sfs_create_inode - alloc a inode in memroy, and init din/ino/dirty/reclian_count/sem fields) s
5 47 M
( in sfs_inode in inode) s
5 36 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 25 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 14 M
(sfs_create_inode) s
/F-gs-font 10 10 SF
0 setgray
101 14 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 14 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
263 14 M
( sfs_disk_inode *din, uint32_t ino, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
479 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
515 14 M
( inode **) s
5 3 M
(node_store\) {) s
_R
S
%%Page: (150) 150
%%BeginPageSetup
_S
18 36 translate
/pagenum 150 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 707 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
( inode *node;) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 696 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 696 M
( \(\(node = alloc_inode\(sfs_inode\)\) != NULL\) {) s
5 685 M
(        vop_init\(node, sfs_get_ops\(din->type\), info2fs\(sfs, sfs\)\);) s
5 674 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 674 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 674 M
( sfs_inode *sin = vop_info\(node, sfs_inode\);) s
5 663 M
(        sin->din = din, sin->ino = ino, sin->dirty = 0, sin->reclaim_count = 1;) s
5 652 M
(        sem_init\(&\(sin->sem\), 1\);) s
5 641 M
(        *node_store = node;) s
5 630 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 630 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 630 M
( 0;) s
5 619 M
(    }) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 608 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 608 M
( -E_NO_MEM;) s
5 597 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 575 M
(/*) s
5 564 M
( * lookup_sfs_nolock - according ino, find related inode) s
5 553 M
( *) s
5 542 M
( * NOTICE: le2sin, info2node MACRO) s
5 531 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 520 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 520 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 520 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 520 M
( inode *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 509 M
(lookup_sfs_nolock) s
/F-gs-font 10 10 SF
0 setgray
107 509 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 509 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
149 509 M
( sfs_fs *sfs, uint32_t ino\) {) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 498 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 498 M
( inode *node;) s
5 487 M
(    list_entry_t *list = sfs_hash_list\(sfs, ino\), *le = list;) s
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 476 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 476 M
( \(\(le = list_next\(le\)\) != list\) {) s
5 465 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 465 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 465 M
( sfs_inode *sin = le2sin\(le, hash_link\);) s
5 454 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 454 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 454 M
( \(sin->ino == ino\) {) s
5 443 M
(            node = info2node\(sin, sfs_inode\);) s
5 432 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 432 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 432 M
( \(vop_ref_inc\(node\) == 1\) {) s
5 421 M
(                sin->reclaim_count ++;) s
5 410 M
(            }) s
5 399 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 399 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 399 M
( node;) s
5 388 M
(        }) s
5 377 M
(    }) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 366 M
( NULL;) s
5 355 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 333 M
(/*) s
5 322 M
( * sfs_load_inode - If the inode isn't existed, load inode related ino disk block data into a ) s
5 311 M
(new created inode.) s
5 300 M
( *                  If the inode is in memory alreadily, then do nothing) s
5 289 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 267 M
(sfs_load_inode) s
/F-gs-font 10 10 SF
0 setgray
89 267 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 267 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
251 267 M
( inode **node_store, uint32_t ino\) {) s
5 256 M
(    lock_sfs_fs\(sfs\);) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 245 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 245 M
( inode *node;) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 234 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 234 M
( \(\(node = lookup_sfs_nolock\(sfs, ino\)\) != NULL\) {) s
5 223 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 223 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 223 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 223 M
(out_unlock) s
/F-gs-font 10 10 SF
0 setgray
143 223 M
(;) s
5 212 M
(    }) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 190 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( ret = -E_NO_MEM;) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 179 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 179 M
( sfs_disk_inode *din;) s
5 168 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 168 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 168 M
( \(\(din = kmalloc\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
143 168 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
179 168 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 168 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
221 168 M
( sfs_disk_inode\)\)\) == NULL\) {) s
5 157 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 157 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 157 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 157 M
(failed_unlock) s
/F-gs-font 10 10 SF
0 setgray
161 157 M
(;) s
5 146 M
(    }) s
5 124 M
(    assert\(sfs_block_inuse\(sfs, ino\)\);) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( \(\(ret = sfs_rbuf\(sfs, din, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
209 113 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
245 113 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 113 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
287 113 M
( sfs_disk_inode\), ino, 0\)\) != 0\) {) s
5 102 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 102 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 102 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 102 M
(failed_cleanup_din) s
/F-gs-font 10 10 SF
0 setgray
191 102 M
(;) s
5 91 M
(    }) s
5 69 M
(    assert\(din->nlinks != 0\);) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 58 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 58 M
( \(\(ret = sfs_create_inode\(sfs, din, ino, &node\)\) != 0\) {) s
5 47 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 47 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 47 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 47 M
(failed_cleanup_din) s
/F-gs-font 10 10 SF
0 setgray
191 47 M
(;) s
5 36 M
(    }) s
5 25 M
(    sfs_set_links\(sfs, vop_info\(node, sfs_inode\)\);) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 3 M
(out_unlock) s
/F-gs-font 10 10 SF
0 setgray
65 3 M
(:) s
_R
S
%%Page: (151) 151
%%BeginPageSetup
_S
18 36 translate
/pagenum 151 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    unlock_sfs_fs\(sfs\);) s
5 696 M
(    *node_store = node;) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 685 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 685 M
( 0;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 663 M
(failed_cleanup_din) s
/F-gs-font 10 10 SF
0 setgray
113 663 M
(:) s
5 652 M
(    kfree\(din\);) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 641 M
(failed_unlock) s
/F-gs-font 10 10 SF
0 setgray
83 641 M
(:) s
5 630 M
(    unlock_sfs_fs\(sfs\);) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 619 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 619 M
( ret;) s
5 608 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 586 M
(/*) s
5 575 M
( * sfs_bmap_get_sub_nolock - according entry pointer entp and index, find the index of indrect) s
5 564 M
( disk block) s
5 553 M
( *                           return the index of indrect disk block to ino_store. no lock prot) s
5 542 M
(ect) s
5 531 M
( * @sfs:      sfs file system) s
5 520 M
( * @entp:     the pointer of index of entry disk block) s
5 509 M
( * @index:    the index of block in indrect block) s
5 498 M
( * @create:   BOOL, if the block isn't allocated, if create = 1 the alloc a block,  otherwise ) s
5 487 M
(just do nothing) s
5 476 M
( * @ino_store: 0 OR the index of already inused block or new allocated block.) s
5 465 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 454 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 443 M
(sfs_bmap_get_sub_nolock) s
/F-gs-font 10 10 SF
0 setgray
143 443 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 443 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
185 443 M
( sfs_fs *sfs, uint32_t *entp, uint32_t index, bool create, uint3) s
5 432 M
(2_t *ino_store\) {) s
5 421 M
(    assert\(index < SFS_BLK_NENTRY\);) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 410 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( ret;) s
5 399 M
(    uint32_t ent, ino = 0;) s
5 388 M
(    off_t offset = index * ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
167 388 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
203 388 M
(\(uint32_t\);  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
281 388 M
(// the offset of entry in entry block) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 377 M
(// if entry block is existd, read the content of entry block into  sfs->sfs_buffer) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 366 M
( \(\(ent = *entp\) != 0\) {) s
5 355 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 355 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 355 M
( \(\(ret = sfs_rbuf\(sfs, &ino, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
239 355 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
275 355 M
(\(uint32_t\), ent, offset\)\) != 0\) {) s
5 344 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 344 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 344 M
( ret;) s
5 333 M
(        }) s
5 322 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 322 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 322 M
( \(ino != 0 || !create\) {) s
5 311 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 311 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 311 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 311 M
(out) s
/F-gs-font 10 10 SF
0 setgray
125 311 M
(;) s
5 300 M
(        }) s
5 289 M
(    }) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 278 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 278 M
( {) s
5 267 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 267 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 267 M
( \(!create\) {) s
5 256 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 256 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 256 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 256 M
(out) s
/F-gs-font 10 10 SF
0 setgray
125 256 M
(;) s
5 245 M
(        }) s
5 234 M
(                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
101 234 M
(//if entry block isn't existd, allocated a entry block \(for indrect block\)) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 223 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 223 M
( \(\(ret = sfs_block_alloc\(sfs, &ent\)\) != 0\) {) s
5 212 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 212 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 212 M
( ret;) s
5 201 M
(        }) s
5 190 M
(    }) s
5 179 M
(    ) s
5 168 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 168 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 168 M
( \(\(ret = sfs_block_alloc\(sfs, &ino\)\) != 0\) {) s
5 157 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 157 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 157 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 157 M
(failed_cleanup) s
/F-gs-font 10 10 SF
0 setgray
167 157 M
(;) s
5 146 M
(    }) s
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 135 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 135 M
( \(\(ret = sfs_wbuf\(sfs, &ino, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
215 135 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
251 135 M
(\(uint32_t\), ent, offset\)\) != 0\) {) s
5 124 M
(        sfs_block_free\(sfs, ino\);) s
5 113 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 113 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 113 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 113 M
(failed_cleanup) s
/F-gs-font 10 10 SF
0 setgray
167 113 M
(;) s
5 102 M
(    }) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 80 M
(out) s
/F-gs-font 10 10 SF
0 setgray
23 80 M
(:) s
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 69 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( \(ent != *entp\) {) s
5 58 M
(        *entp = ent;) s
5 47 M
(    }) s
5 36 M
(    *ino_store = ino;) s
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 25 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 25 M
( 0;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 3 M
(failed_cleanup) s
/F-gs-font 10 10 SF
0 setgray
89 3 M
(:) s
_R
S
%%Page: (152) 152
%%BeginPageSetup
_S
18 36 translate
/pagenum 152 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 707 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 707 M
( \(ent != *entp\) {) s
5 696 M
(        sfs_block_free\(sfs, ent\);) s
5 685 M
(    }) s
5 674 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 674 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 674 M
( ret;) s
5 663 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 641 M
(/*) s
5 630 M
( * sfs_bmap_get_nolock - according sfs_inode and index of block, find the NO. of disk block) s
5 619 M
( *                       no lock protect) s
5 608 M
( * @sfs:      sfs file system) s
5 597 M
( * @sin:      sfs inode in memory) s
5 586 M
( * @index:    the index of block in inode) s
5 575 M
( * @create:   BOOL, if the block isn't allocated, if create = 1 the alloc a block,  otherwise ) s
5 564 M
(just do nothing) s
5 553 M
( * @ino_store: 0 OR the index of already inused block or new allocated block.) s
5 542 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 531 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 531 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 520 M
(sfs_bmap_get_nolock) s
/F-gs-font 10 10 SF
0 setgray
119 520 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 520 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
161 520 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 520 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
281 520 M
( sfs_inode *sin, uint32_t index, bool create, ui) s
5 509 M
(nt32_t *ino_store\) {) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 498 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 498 M
( sfs_disk_inode *din = sin->din;) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 487 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( ret;) s
5 476 M
(    uint32_t ent, ino;) s
5 465 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 465 M
(// the index of disk block is in the fist SFS_NDIRECT  direct blocks) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( \(index < SFS_NDIRECT\) {) s
5 443 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 443 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 443 M
( \(\(ino = din->direct[index]\) == 0 && create\) {) s
5 432 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 432 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 432 M
( \(\(ret = sfs_block_alloc\(sfs, &ino\)\) != 0\) {) s
5 421 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 421 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 421 M
( ret;) s
5 410 M
(            }) s
5 399 M
(            din->direct[index] = ino;) s
5 388 M
(            sin->dirty = 1;) s
5 377 M
(        }) s
5 366 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 366 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 366 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 366 M
(out) s
/F-gs-font 10 10 SF
0 setgray
101 366 M
(;) s
5 355 M
(    }) s
5 344 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 344 M
(// the index of disk block is in the indirect blocks.) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(    index -= SFS_NDIRECT;) s
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 322 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 322 M
( \(index < SFS_BLK_NENTRY\) {) s
5 311 M
(        ent = din->indirect;) s
5 300 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 300 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 300 M
( \(\(ret = sfs_bmap_get_sub_nolock\(sfs, &ent, index, create, &ino\)\) != 0\) {) s
5 289 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 289 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 289 M
( ret;) s
5 278 M
(        }) s
5 267 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 267 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 267 M
( \(ent != din->indirect\) {) s
5 256 M
(            assert\(din->indirect == 0\);) s
5 245 M
(            din->indirect = ent;) s
5 234 M
(            sin->dirty = 1;) s
5 223 M
(        }) s
5 212 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 212 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 212 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 212 M
(out) s
/F-gs-font 10 10 SF
0 setgray
101 212 M
(;) s
5 201 M
(    } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
41 201 M
(else) s
/F-gs-font 10 10 SF
0 setgray
65 201 M
( {) s
5 190 M
(                panic \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 190 M
("sfs_bmap_get_nolock - index out of range") s
/F-gs-font 10 10 SF
0 setgray
395 190 M
(\);) s
5 179 M
(        }) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 168 M
(out) s
/F-gs-font 10 10 SF
0 setgray
23 168 M
(:) s
5 157 M
(    assert\(ino == 0 || sfs_block_inuse\(sfs, ino\)\);) s
5 146 M
(    *ino_store = ino;) s
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 135 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 135 M
( 0;) s
5 124 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 102 M
(/*) s
5 91 M
( * sfs_bmap_free_sub_nolock - set the entry item to 0 \(free\) in the indirect block) s
5 80 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 69 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 58 M
(sfs_bmap_free_sub_nolock) s
/F-gs-font 10 10 SF
0 setgray
149 58 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 58 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
191 58 M
( sfs_fs *sfs, uint32_t ent, uint32_t index\) {) s
5 47 M
(    assert\(sfs_block_inuse\(sfs, ent\) && index < SFS_BLK_NENTRY\);) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( ret;) s
5 25 M
(    uint32_t ino, zero = 0;) s
5 14 M
(    off_t offset = index * ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
167 14 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
203 14 M
(\(uint32_t\);) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 3 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 3 M
( \(\(ret = sfs_rbuf\(sfs, &ino, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
215 3 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
251 3 M
(\(uint32_t\), ent, offset\)\) != 0\) {) s
_R
S
%%Page: (153) 153
%%BeginPageSetup
_S
18 36 translate
/pagenum 153 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 707 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 707 M
( ret;) s
5 696 M
(    }) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 685 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( \(ino != 0\) {) s
5 674 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 674 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 674 M
( \(\(ret = sfs_wbuf\(sfs, &zero, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
245 674 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
281 674 M
(\(uint32_t\), ent, offset\)\) != 0\) {) s
5 663 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 663 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 663 M
( ret;) s
5 652 M
(        }) s
5 641 M
(        sfs_block_free\(sfs, ino\);) s
5 630 M
(    }) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 619 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 619 M
( 0;) s
5 608 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 586 M
(/*) s
5 575 M
( * sfs_bmap_free_nolock - free a block with logical index in inode and reset the inode's field) s
5 564 M
(s) s
5 553 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 542 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 542 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 542 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 531 M
(sfs_bmap_free_nolock) s
/F-gs-font 10 10 SF
0 setgray
125 531 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 531 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
167 531 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 531 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
287 531 M
( sfs_inode *sin, uint32_t index\) {) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 520 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
( sfs_disk_inode *din = sin->din;) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 509 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( ret;) s
5 498 M
(    uint32_t ent, ino;) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 487 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( \(index < SFS_NDIRECT\) {) s
5 476 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 476 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 476 M
( \(\(ino = din->direct[index]\) != 0\) {) s
5 465 M
(                        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
149 465 M
(// free the block) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(            sfs_block_free\(sfs, ino\);) s
5 443 M
(            din->direct[index] = 0;) s
5 432 M
(            sin->dirty = 1;) s
5 421 M
(        }) s
5 410 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 410 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 410 M
( 0;) s
5 399 M
(    }) s
5 377 M
(    index -= SFS_NDIRECT;) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 366 M
( \(index < SFS_BLK_NENTRY\) {) s
5 355 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 355 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 355 M
( \(\(ent = din->indirect\) != 0\) {) s
5 344 M
(                        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
149 344 M
(// set the entry item to 0 in the indirect block) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 333 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 333 M
( \(\(ret = sfs_bmap_free_sub_nolock\(sfs, ent, index\)\) != 0\) {) s
5 322 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 322 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 322 M
( ret;) s
5 311 M
(            }) s
5 300 M
(        }) s
5 289 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 289 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 289 M
( 0;) s
5 278 M
(    }) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 267 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 267 M
( 0;) s
5 256 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 234 M
(/*) s
5 223 M
( * sfs_bmap_load_nolock - according to the DIR's inode and the logical index of block in inode) s
5 212 M
(, find the NO. of disk block.) s
5 201 M
( * @sfs:      sfs file system) s
5 190 M
( * @sin:      sfs inode in memory) s
5 179 M
( * @index:    the logical index of disk block in inode) s
5 168 M
( * @ino_store:the NO. of disk block) s
5 157 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 146 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 135 M
(sfs_bmap_load_nolock) s
/F-gs-font 10 10 SF
0 setgray
125 135 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 135 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
167 135 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 135 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
287 135 M
( sfs_inode *sin, uint32_t index, uint32_t *ino_) s
5 124 M
(store\) {) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 113 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 113 M
( sfs_disk_inode *din = sin->din;) s
5 102 M
(    assert\(index <= din->blocks\);) s
5 91 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( ret;) s
5 80 M
(    uint32_t ino;) s
5 69 M
(    bool create = \(index == din->blocks\);) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 58 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 58 M
( \(\(ret = sfs_bmap_get_nolock\(sfs, sin, index, create, &ino\)\) != 0\) {) s
5 47 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 47 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 47 M
( ret;) s
5 36 M
(    }) s
5 25 M
(    assert\(sfs_block_inuse\(sfs, ino\)\);) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 14 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( \(create\) {) s
5 3 M
(        din->blocks ++;) s
_R
S
%%Page: (154) 154
%%BeginPageSetup
_S
18 36 translate
/pagenum 154 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    }) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 696 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 696 M
( \(ino_store != NULL\) {) s
5 685 M
(        *ino_store = ino;) s
5 674 M
(    }) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 663 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 663 M
( 0;) s
5 652 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 630 M
(/*) s
5 619 M
( * sfs_bmap_truncate_nolock - free the disk block at the end of file) s
5 608 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 597 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 597 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 586 M
(sfs_bmap_truncate_nolock) s
/F-gs-font 10 10 SF
0 setgray
149 586 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 586 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
191 586 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
275 586 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
311 586 M
( sfs_inode *sin\) {) s
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 575 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 575 M
( sfs_disk_inode *din = sin->din;) s
5 564 M
(    assert\(din->blocks != 0\);) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 553 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( ret;) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 542 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 542 M
( \(\(ret = sfs_bmap_free_nolock\(sfs, sin, din->blocks - 1\)\) != 0\) {) s
5 531 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 531 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 531 M
( ret;) s
5 520 M
(    }) s
5 509 M
(    din->blocks --;) s
5 498 M
(    sin->dirty = 1;) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 487 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 487 M
( 0;) s
5 476 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 454 M
(/*) s
5 443 M
( * sfs_dirent_read_nolock - read the file entry from disk block which contains this entry) s
5 432 M
( * @sfs:      sfs file system) s
5 421 M
( * @sin:      sfs inode in memory) s
5 410 M
( * @slot:     the index of file entry) s
5 399 M
( * @entry:    file entry) s
5 388 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 377 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 377 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 366 M
(sfs_dirent_read_nolock) s
/F-gs-font 10 10 SF
0 setgray
137 366 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 366 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
179 366 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
263 366 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
299 366 M
( sfs_inode *sin, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
401 366 M
(int) s
/F-gs-font 10 10 SF
0 setgray
419 366 M
( slot, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
461 366 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
497 366 M
( sfs_disk_en) s
5 355 M
(try *entry\) {) s
5 344 M
(    assert\(sin->din->type == SFS_TYPE_DIR && \(slot >= 0 && slot < sin->din->blocks\)\);) s
5 333 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 333 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 333 M
( ret;) s
5 322 M
(    uint32_t ino;) s
5 311 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 311 M
(// according to the DIR's inode and the slot of file entry, find the index of disk blo) s
5 300 M
(ck which contains this file entry) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 289 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( \(\(ret = sfs_bmap_load_nolock\(sfs, sin, slot, &ino\)\) != 0\) {) s
5 278 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 278 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 278 M
( ret;) s
5 267 M
(    }) s
5 256 M
(    assert\(sfs_block_inuse\(sfs, ino\)\);) s
5 245 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 245 M
(// read the content of file entry in the disk block ) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 234 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 234 M
( \(\(ret = sfs_rbuf\(sfs, entry, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
221 234 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
257 234 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
263 234 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
299 234 M
( sfs_disk_entry\), ino, 0\)\) != 0\) {) s
5 223 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 223 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 223 M
( ret;) s
5 212 M
(    }) s
5 201 M
(    entry->name[SFS_MAX_FNAME_LEN] = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
227 201 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
251 201 M
(;) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 190 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 190 M
( 0;) s
5 179 M
(}) s
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 157 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 157 M
(sfs_dirent_link_nolock_check) s
/F-gs-font 10 10 SF
0 setgray
221 157 M
(\(sfs, sin, slot, lnksin, name\)                  \\) s
5 146 M
(    do {                                                                            \\) s
5 135 M
(        int err;                                                                    \\) s
5 124 M
(        if \(\(err = sfs_dirent_link_nolock\(sfs, sin, slot, lnksin, name\)\) != 0\) {    \\) s
5 113 M
(            warn\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 113 M
("sfs_dirent_link error: %e.\\n") s
/F-gs-font 10 10 SF
0 setgray
287 113 M
(, err\);                              \\) s
5 102 M
(        }                                                                           \\) s
5 91 M
(    } while \(0\)) s
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 69 M
(sfs_dirent_unlink_nolock_check) s
/F-gs-font 10 10 SF
0 setgray
233 69 M
(\(sfs, sin, slot, lnksin\)                      \\) s
5 58 M
(    do {                                                                            \\) s
5 47 M
(        int err;                                                                    \\) s
5 36 M
(        if \(\(err = sfs_dirent_unlink_nolock\(sfs, sin, slot, lnksin\)\) != 0\) {        \\) s
5 25 M
(            warn\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 25 M
("sfs_dirent_unlink error: %e.\\n") s
/F-gs-font 10 10 SF
0 setgray
299 25 M
(, err\);                            \\) s
5 14 M
(        }                                                                           \\) s
5 3 M
(    } while \(0\)) s
_R
S
%%Page: (155) 155
%%BeginPageSetup
_S
18 36 translate
/pagenum 155 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 696 M
(/*) s
5 685 M
( * sfs_dirent_search_nolock - read every file entry in the DIR, compare file name with each en) s
5 674 M
(try->name) s
5 663 M
( *                            If equal, then return slot and NO. of disk of this file's inode) s
5 652 M
( * @sfs:        sfs file system) s
5 641 M
( * @sin:        sfs inode in memory) s
5 630 M
( * @name:       the filename) s
5 619 M
( * @ino_store:  NO. of disk of this file \(with the filename\)'s inode) s
5 608 M
( * @slot:       logical index of file entry \(NOTICE: each file entry ocupied one  disk block\)) s
5 597 M
( * @empty_slot: the empty logical index of file entry.) s
5 586 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 575 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 564 M
(sfs_dirent_search_nolock) s
/F-gs-font 10 10 SF
0 setgray
149 564 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 564 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
191 564 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
275 564 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
311 564 M
( sfs_inode *sin, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
413 564 M
(const) s
/F-gs-font 10 10 SF
0 setgray
443 564 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
449 564 M
(char) s
/F-gs-font 10 10 SF
0 setgray
473 564 M
( *name, uint32_t) s
5 553 M
( *ino_store, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 553 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 553 M
( *slot, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 553 M
(int) s
/F-gs-font 10 10 SF
0 setgray
167 553 M
( *empty_slot\) {) s
5 542 M
(    assert\(strlen\(name\) <= SFS_MAX_FNAME_LEN\);) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 531 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 531 M
( sfs_disk_entry *entry;) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 520 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 520 M
( \(\(entry = kmalloc\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
155 520 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
191 520 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 520 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
233 520 M
( sfs_disk_entry\)\)\) == NULL\) {) s
5 509 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 509 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 509 M
( -E_NO_MEM;) s
5 498 M
(    }) s
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 476 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 476 M
(set_pvalue) s
/F-gs-font 10 10 SF
0 setgray
113 476 M
(\(x, v\)            do { if \(\(x\) != NULL\) { *\(x\) = \(v\); } } while \(0\)) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 465 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 465 M
( ret, i, nslots = sin->din->blocks;) s
5 454 M
(    set_pvalue\(empty_slot, nslots\);) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 443 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( \(i = 0; i < nslots; i ++\) {) s
5 432 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 432 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 432 M
( \(\(ret = sfs_dirent_read_nolock\(sfs, sin, i, entry\)\) != 0\) {) s
5 421 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 421 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 421 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 421 M
(out) s
/F-gs-font 10 10 SF
0 setgray
125 421 M
(;) s
5 410 M
(        }) s
5 399 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 399 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 399 M
( \(entry->ino == 0\) {) s
5 388 M
(            set_pvalue\(empty_slot, i\);) s
5 377 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 377 M
(continue) s
/F-gs-font 10 10 SF
0 setgray
125 377 M
( ;) s
5 366 M
(        }) s
5 355 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 355 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 355 M
( \(strcmp\(name, entry->name\) == 0\) {) s
5 344 M
(            set_pvalue\(slot, i\);) s
5 333 M
(            set_pvalue\(ino_store, entry->ino\);) s
5 322 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 322 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 322 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 322 M
(out) s
/F-gs-font 10 10 SF
0 setgray
125 322 M
(;) s
5 311 M
(        }) s
5 300 M
(    }) s
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(undef) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
47 289 M
(set_pvalue) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
(    ret = -E_NOENT;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 267 M
(out) s
/F-gs-font 10 10 SF
0 setgray
23 267 M
(:) s
5 256 M
(    kfree\(entry\);) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 245 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 245 M
( ret;) s
5 234 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 212 M
(/*) s
5 201 M
( * sfs_dirent_findino_nolock - read all file entries in DIR's inode and find a entry->ino == i) s
5 190 M
(no) s
5 179 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 157 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 157 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 146 M
(sfs_dirent_findino_nolock) s
/F-gs-font 10 10 SF
0 setgray
155 146 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
161 146 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
197 146 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
281 146 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
317 146 M
( sfs_inode *sin, uint32_t ino, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
503 146 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
539 146 M
( sfs_) s
5 135 M
(disk_entry *entry\) {) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( ret, i, nslots = sin->din->blocks;) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( \(i = 0; i < nslots; i ++\) {) s
5 102 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 102 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 102 M
( \(\(ret = sfs_dirent_read_nolock\(sfs, sin, i, entry\)\) != 0\) {) s
5 91 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 91 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 91 M
( ret;) s
5 80 M
(        }) s
5 69 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 69 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 69 M
( \(entry->ino == ino\) {) s
5 58 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 58 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 58 M
( 0;) s
5 47 M
(        }) s
5 36 M
(    }) s
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 25 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 25 M
( -E_NOENT;) s
5 14 M
(}) s
_R
S
%%Page: (156) 156
%%BeginPageSetup
_S
18 36 translate
/pagenum 156 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
(/*) s
5 696 M
( * sfs_lookup_once - find inode corresponding the file name in DIR's sin inode ) s
5 685 M
( * @sfs:        sfs file system) s
5 674 M
( * @sin:        DIR sfs inode in memory) s
5 663 M
( * @name:       the file name in DIR) s
5 652 M
( * @node_store: the inode corresponding the file name in DIR) s
5 641 M
( * @slot:       the logical index of file entry) s
5 630 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 619 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 619 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 608 M
(sfs_lookup_once) s
/F-gs-font 10 10 SF
0 setgray
95 608 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 608 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 608 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
221 608 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
257 608 M
( sfs_inode *sin, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
359 608 M
(const) s
/F-gs-font 10 10 SF
0 setgray
389 608 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
395 608 M
(char) s
/F-gs-font 10 10 SF
0 setgray
419 608 M
( *name, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
467 608 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
503 608 M
( inode **no) s
5 597 M
(de_store, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 597 M
(int) s
/F-gs-font 10 10 SF
0 setgray
83 597 M
( *slot\) {) s
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 586 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( ret;) s
5 575 M
(    uint32_t ino;) s
5 564 M
(    lock_sin\(sin\);) s
5 553 M
(    {   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 553 M
(// find the NO. of disk block and logical index of file entry) s
/F-gs-font 10 10 SF
0 setgray
5 542 M
(        ret = sfs_dirent_search_nolock\(sfs, sin, name, &ino, slot, NULL\);) s
5 531 M
(    }) s
5 520 M
(    unlock_sin\(sin\);) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 509 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 509 M
( \(ret == 0\) {) s
5 498 M
(                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
101 498 M
(// load the content of inode with the the NO. of disk block) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(        ret = sfs_load_inode\(sfs, node_store, ino\);) s
5 476 M
(    }) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 465 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 465 M
( ret;) s
5 454 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 432 M
(// sfs_opendir - just check the opne_flags, now support readonly) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 421 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 421 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 410 M
(sfs_opendir) s
/F-gs-font 10 10 SF
0 setgray
71 410 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 410 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 410 M
( inode *node, uint32_t open_flags\) {) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 399 M
(switch) s
/F-gs-font 10 10 SF
0 setgray
65 399 M
( \(open_flags & O_ACCMODE\) {) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 388 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 388 M
(O_RDONLY) s
/F-gs-font 10 10 SF
0 setgray
107 388 M
(:) s
5 377 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 377 M
(break) s
/F-gs-font 10 10 SF
0 setgray
83 377 M
(;) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 366 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 366 M
(O_WRONLY) s
/F-gs-font 10 10 SF
0 setgray
107 366 M
(:) s
5 355 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 355 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 355 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 355 M
(O_RDWR) s
/F-gs-font 10 10 SF
0 setgray
95 355 M
(:) s
5 344 M
(    ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
29 344 M
(default) s
/F-gs-font 10 10 SF
0 setgray
71 344 M
(:) s
5 333 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 333 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 333 M
( -E_ISDIR;) s
5 322 M
(    }) s
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 311 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 311 M
( \(open_flags & O_APPEND\) {) s
5 300 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 300 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 300 M
( -E_ISDIR;) s
5 289 M
(    }) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 278 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 278 M
( 0;) s
5 267 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 245 M
(// sfs_openfile - open file \(no use\)) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 234 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 234 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 234 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 223 M
(sfs_openfile) s
/F-gs-font 10 10 SF
0 setgray
77 223 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 223 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 223 M
( inode *node, uint32_t open_flags\) {) s
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 212 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 212 M
( 0;) s
5 201 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 179 M
(// sfs_close - close file) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 168 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 168 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 168 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 157 M
(sfs_close) s
/F-gs-font 10 10 SF
0 setgray
59 157 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 157 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 157 M
( inode *node\) {) s
5 146 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 146 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 146 M
( vop_fsync\(node\);) s
5 135 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 113 M
(/*  ) s
5 102 M
( * sfs_io_nolock - Rd/Wr a file contentfrom offset position to offset+ length  disk blocks<-->) s
5 91 M
(buffer \(in memroy\)) s
5 80 M
( * @sfs:      sfs file system) s
5 69 M
( * @sin:      sfs inode in memory) s
5 58 M
( * @buf:      the buffer Rd/Wr) s
5 47 M
( * @offset:   the offset of file) s
5 36 M
( * @alenp:    the length need to read \(is a pointer\). and will RETURN the really Rd/Wr lenght) s
5 25 M
( * @write:    BOOL, 0 read, 1 write) s
5 14 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 3 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (157) 157
%%BeginPageSetup
_S
18 36 translate
/pagenum 157 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 707 M
(sfs_io_nolock) s
/F-gs-font 10 10 SF
0 setgray
83 707 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 707 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 707 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
209 707 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
245 707 M
( sfs_inode *sin, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
347 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
371 707 M
( *buf, off_t offset, size_t *alen) s
5 696 M
(p, bool write\) {) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 685 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 685 M
( sfs_disk_inode *din = sin->din;) s
5 674 M
(    assert\(din->type != SFS_TYPE_DIR\);) s
5 663 M
(    off_t endpos = offset + *alenp, blkoff;) s
5 652 M
(    *alenp = 0;) s
5 641 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 641 M
(// calculate the Rd/Wr end position) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 630 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 630 M
( \(offset < 0 || offset >= SFS_MAX_FILE_SIZE || offset > endpos\) {) s
5 619 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 619 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 619 M
( -E_INVAL;) s
5 608 M
(    }) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 597 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( \(offset == endpos\) {) s
5 586 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 586 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 586 M
( 0;) s
5 575 M
(    }) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 564 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 564 M
( \(endpos > SFS_MAX_FILE_SIZE\) {) s
5 553 M
(        endpos = SFS_MAX_FILE_SIZE;) s
5 542 M
(    }) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 531 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( \(!write\) {) s
5 520 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 520 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
( \(offset >= din->size\) {) s
5 509 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 509 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 509 M
( 0;) s
5 498 M
(        }) s
5 487 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 487 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 487 M
( \(endpos > din->size\) {) s
5 476 M
(            endpos = din->size;) s
5 465 M
(        }) s
5 454 M
(    }) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 432 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 432 M
( \(*sfs_buf_op\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
173 432 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 432 M
(void) s
/F-gs-font 10 10 SF
0 setgray
281 432 M
( *buf, size_t len, uint32_t blkno, off_t offset\)) s
5 421 M
(;) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 410 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( \(*sfs_block_op\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 410 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
185 410 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
269 410 M
(void) s
/F-gs-font 10 10 SF
0 setgray
293 410 M
( *buf, uint32_t blkno, uint32_t nblks\);) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 399 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
( \(write\) {) s
5 388 M
(        sfs_buf_op = sfs_wbuf, sfs_block_op = sfs_wblock;) s
5 377 M
(    }) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 366 M
( {) s
5 355 M
(        sfs_buf_op = sfs_rbuf, sfs_block_op = sfs_rblock;) s
5 344 M
(    }) s
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 322 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 322 M
( ret = 0;) s
5 311 M
(    size_t size, alen = 0;) s
5 300 M
(    uint32_t ino;) s
5 289 M
(    uint32_t blkno = offset / SFS_BLKSIZE;          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 289 M
(// The NO. of Rd/Wr begin block) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
(    uint32_t nblks = endpos / SFS_BLKSIZE - blkno;  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
317 278 M
(// The size of Rd/Wr blocks) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
17 256 M
(//LAB8:EXERCISE1 YOUR CODE HINT: call sfs_bmap_load_nolock, sfs_rbuf, sfs_rblock,etc. read d) s
5 245 M
(ifferent kind of blocks in file) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 234 M
(/*) s
5 223 M
(         * \(1\) If offset isn't aligned with the first block, Rd/Wr some content from offset to) s
5 212 M
( the end of the first block) s
5 201 M
(         *       NOTICE: useful function: sfs_bmap_load_nolock, sfs_buf_op) s
5 190 M
(         *               Rd/Wr size = \(nblks != 0\) ? \(SFS_BLKSIZE - blkoff\) : \(endpos - offset) s
5 179 M
(\)) s
5 168 M
(         * \(2\) Rd/Wr aligned blocks ) s
5 157 M
(         *       NOTICE: useful function: sfs_bmap_load_nolock, sfs_block_op) s
5 146 M
(     * \(3\) If end position isn't aligned with the last block, Rd/Wr some content from begin to) s
5 135 M
( the \(endpos % SFS_BLKSIZE\) of the last block) s
5 124 M
(         *       NOTICE: useful function: sfs_bmap_load_nolock, sfs_buf_op      ) s
5 113 M
(        */) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 102 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 102 M
( \(\(blkoff = offset % SFS_BLKSIZE\) != 0\) {) s
5 91 M
(        size = \(nblks != 0\) ? \(SFS_BLKSIZE - blkoff\) : \(endpos - offset\);) s
5 80 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 80 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 80 M
( \(\(ret = sfs_bmap_load_nolock\(sfs, sin, blkno, &ino\)\) != 0\) {) s
5 69 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 69 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 69 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 69 M
(out) s
/F-gs-font 10 10 SF
0 setgray
125 69 M
(;) s
5 58 M
(        }) s
5 47 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 47 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
( \(\(ret = sfs_buf_op\(sfs, buf, size, ino, blkoff\)\) != 0\) {) s
5 36 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 36 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 36 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 36 M
(out) s
/F-gs-font 10 10 SF
0 setgray
125 36 M
(;) s
5 25 M
(        }) s
5 14 M
(        alen += size;) s
5 3 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 3 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 3 M
( \(nblks == 0\) {) s
_R
S
%%Page: (158) 158
%%BeginPageSetup
_S
18 36 translate
/pagenum 158 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 707 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 707 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 707 M
(out) s
/F-gs-font 10 10 SF
0 setgray
125 707 M
(;) s
5 696 M
(        }) s
5 685 M
(        buf += size, blkno ++, nblks --;) s
5 674 M
(    }) s
5 652 M
(    size = SFS_BLKSIZE;) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 641 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 641 M
( \(nblks != 0\) {) s
5 630 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 630 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 630 M
( \(\(ret = sfs_bmap_load_nolock\(sfs, sin, blkno, &ino\)\) != 0\) {) s
5 619 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 619 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 619 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 619 M
(out) s
/F-gs-font 10 10 SF
0 setgray
125 619 M
(;) s
5 608 M
(        }) s
5 597 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 597 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 597 M
( \(\(ret = sfs_block_op\(sfs, buf, ino, 1\)\) != 0\) {) s
5 586 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 586 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 586 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 586 M
(out) s
/F-gs-font 10 10 SF
0 setgray
125 586 M
(;) s
5 575 M
(        }) s
5 564 M
(        alen += size, buf += size, blkno ++, nblks --;) s
5 553 M
(    }) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 531 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( \(\(size = endpos % SFS_BLKSIZE\) != 0\) {) s
5 520 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 520 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
( \(\(ret = sfs_bmap_load_nolock\(sfs, sin, blkno, &ino\)\) != 0\) {) s
5 509 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 509 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 509 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 509 M
(out) s
/F-gs-font 10 10 SF
0 setgray
125 509 M
(;) s
5 498 M
(        }) s
5 487 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 487 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 487 M
( \(\(ret = sfs_buf_op\(sfs, buf, size, ino, 0\)\) != 0\) {) s
5 476 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 476 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 476 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 476 M
(out) s
/F-gs-font 10 10 SF
0 setgray
125 476 M
(;) s
5 465 M
(        }) s
5 454 M
(        alen += size;) s
5 443 M
(    }) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 432 M
(out) s
/F-gs-font 10 10 SF
0 setgray
23 432 M
(:) s
5 421 M
(    *alenp = alen;) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 410 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 410 M
( \(offset + alen > sin->din->size\) {) s
5 399 M
(        sin->din->size = offset + alen;) s
5 388 M
(        sin->dirty = 1;) s
5 377 M
(    }) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 366 M
( ret;) s
5 355 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 333 M
(/*) s
5 322 M
( * sfs_io - Rd/Wr file. the wrapper of sfs_io_nolock) s
5 311 M
(            with lock protect) s
5 300 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 289 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 278 M
(sfs_io) s
/F-gs-font 10 10 SF
0 setgray
41 278 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 278 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 278 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 278 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
203 278 M
( iobuf *iob, bool write\) {) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 267 M
( sfs_fs *sfs = fsop_info\(vop_fs\(node\), sfs\);) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 256 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 256 M
( sfs_inode *sin = vop_info\(node, sfs_inode\);) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 245 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( ret;) s
5 234 M
(    lock_sin\(sin\);) s
5 223 M
(    {) s
5 212 M
(        size_t alen = iob->io_resid;) s
5 201 M
(        ret = sfs_io_nolock\(sfs, sin, iob->io_base, iob->io_offset, &alen, write\);) s
5 190 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 190 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 190 M
( \(alen != 0\) {) s
5 179 M
(            iobuf_skip\(iob, alen\);) s
5 168 M
(        }) s
5 157 M
(    }) s
5 146 M
(    unlock_sin\(sin\);) s
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 135 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 135 M
( ret;) s
5 124 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 102 M
(// sfs_read - read file) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 91 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 80 M
(sfs_read) s
/F-gs-font 10 10 SF
0 setgray
53 80 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 80 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 80 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 80 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
215 80 M
( iobuf *iob\) {) s
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 69 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 69 M
( sfs_io\(node, iob, 0\);) s
5 58 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 36 M
(// sfs_write - write file) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 25 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 14 M
(sfs_write) s
/F-gs-font 10 10 SF
0 setgray
59 14 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 14 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
221 14 M
( iobuf *iob\) {) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 3 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 3 M
( sfs_io\(node, iob, 1\);) s
_R
S
%%Page: (159) 159
%%BeginPageSetup
_S
18 36 translate
/pagenum 159 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 685 M
(/*) s
5 674 M
( * sfs_fstat - Return nlinks/block/size, etc. info about a file. The pointer is a pointer to s) s
5 663 M
(truct stat;) s
5 652 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 641 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 641 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 630 M
(sfs_fstat) s
/F-gs-font 10 10 SF
0 setgray
59 630 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 630 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 630 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 630 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
221 630 M
( stat *stat\) {) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 619 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( ret;) s
5 608 M
(    memset\(stat, 0, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 608 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
161 608 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 608 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
203 608 M
( stat\)\);) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 597 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( \(\(ret = vop_gettype\(node, &\(stat->st_mode\)\)\) != 0\) {) s
5 586 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 586 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 586 M
( ret;) s
5 575 M
(    }) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 564 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 564 M
( sfs_disk_inode *din = vop_info\(node, sfs_inode\)->din;) s
5 553 M
(    stat->st_nlinks = din->nlinks;) s
5 542 M
(    stat->st_blocks = din->blocks;) s
5 531 M
(    stat->st_size = din->size;) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 520 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
( 0;) s
5 509 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 487 M
(/*) s
5 476 M
( * sfs_fsync - Force any dirty inode info associated with this file to stable storage.) s
5 465 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 454 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 443 M
(sfs_fsync) s
/F-gs-font 10 10 SF
0 setgray
59 443 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 443 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 443 M
( inode *node\) {) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 432 M
( sfs_fs *sfs = fsop_info\(vop_fs\(node\), sfs\);) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 421 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 421 M
( sfs_inode *sin = vop_info\(node, sfs_inode\);) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 410 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( ret = 0;) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 399 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
( \(sin->dirty\) {) s
5 388 M
(        lock_sin\(sin\);) s
5 377 M
(        {) s
5 366 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 366 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 366 M
( \(sin->dirty\) {) s
5 355 M
(                sin->dirty = 0;) s
5 344 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 344 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 344 M
( \(\(ret = sfs_wbuf\(sfs, sin->din, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
311 344 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
347 344 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
353 344 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
389 344 M
( sfs_disk_inode\), sin->ino, 0\)) s
5 333 M
(\) != 0\) {) s
5 322 M
(                    sin->dirty = 1;) s
5 311 M
(                }) s
5 300 M
(            }) s
5 289 M
(        }) s
5 278 M
(        unlock_sin\(sin\);) s
5 267 M
(    }) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 256 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 256 M
( ret;) s
5 245 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 223 M
(/*) s
5 212 M
( *sfs_namefile -Compute pathname relative to filesystem root of the file and copy to the speci) s
5 201 M
(fied io buffer.) s
5 190 M
( *  ) s
5 179 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 168 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 168 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 168 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 157 M
(sfs_namefile) s
/F-gs-font 10 10 SF
0 setgray
77 157 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 157 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 157 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 157 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
239 157 M
( iobuf *iob\) {) s
5 146 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 146 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 146 M
( sfs_disk_entry *entry;) s
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 135 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 135 M
( \(iob->io_resid <= 2 || \(entry = kmalloc\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
287 135 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
323 135 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
329 135 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
365 135 M
( sfs_disk_entry\)\)\) == NULL\) {) s
5 124 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 124 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 124 M
( -E_NO_MEM;) s
5 113 M
(    }) s
5 91 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 91 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 91 M
( sfs_fs *sfs = fsop_info\(vop_fs\(node\), sfs\);) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 80 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 80 M
( sfs_inode *sin = vop_info\(node, sfs_inode\);) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 58 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( ret;) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 47 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 47 M
( *ptr = iob->io_base + iob->io_resid;) s
5 36 M
(    size_t alen, resid = iob->io_resid - 2;) s
5 25 M
(    vop_ref_inc\(node\);) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 14 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 14 M
( \(1\) {) s
5 3 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 3 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 3 M
( inode *parent;) s
_R
S
%%Page: (160) 160
%%BeginPageSetup
_S
18 36 translate
/pagenum 160 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 707 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
( \(\(ret = sfs_lookup_once\(sfs, sin, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
275 707 M
("..") s
/F-gs-font 10 10 SF
0 setgray
299 707 M
(, &parent, NULL\)\) != 0\) {) s
5 696 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 696 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 696 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 696 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
143 696 M
(;) s
5 685 M
(        }) s
5 663 M
(        uint32_t ino = sin->ino;) s
5 652 M
(        vop_ref_dec\(node\);) s
5 641 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 641 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 641 M
( \(node == parent\) {) s
5 630 M
(            vop_ref_dec\(node\);) s
5 619 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 619 M
(break) s
/F-gs-font 10 10 SF
0 setgray
107 619 M
(;) s
5 608 M
(        }) s
5 586 M
(        node = parent, sin = vop_info\(node, sfs_inode\);) s
5 575 M
(        assert\(ino != sin->ino && sin->din->type == SFS_TYPE_DIR\);) s
5 553 M
(        lock_sin\(sin\);) s
5 542 M
(        {) s
5 531 M
(            ret = sfs_dirent_findino_nolock\(sfs, sin, ino, entry\);) s
5 520 M
(        }) s
5 509 M
(        unlock_sin\(sin\);) s
5 487 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 487 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 487 M
( \(ret != 0\) {) s
5 476 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 476 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 476 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 476 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
143 476 M
(;) s
5 465 M
(        }) s
5 443 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 443 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 443 M
( \(\(alen = strlen\(entry->name\) + 1\) > resid\) {) s
5 432 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 432 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 432 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 432 M
(failed_nomem) s
/F-gs-font 10 10 SF
0 setgray
179 432 M
(;) s
5 421 M
(        }) s
5 410 M
(        resid -= alen, ptr -= alen;) s
5 399 M
(        memcpy\(ptr, entry->name, alen - 1\);) s
5 388 M
(        ptr[alen - 1] = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 388 M
('/') s
/F-gs-font 10 10 SF
0 setgray
167 388 M
(;) s
5 377 M
(    }) s
5 366 M
(    alen = iob->io_resid - resid - 2;) s
5 355 M
(    ptr = memmove\(iob->io_base + 1, ptr, alen\);) s
5 344 M
(    ptr[-1] = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 344 M
('/') s
/F-gs-font 10 10 SF
0 setgray
107 344 M
(, ptr[alen] = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
191 344 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
215 344 M
(;) s
5 333 M
(    iobuf_skip\(iob, alen\);) s
5 322 M
(    kfree\(entry\);) s
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 311 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 311 M
( 0;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 289 M
(failed_nomem) s
/F-gs-font 10 10 SF
0 setgray
77 289 M
(:) s
5 278 M
(    ret = -E_NO_MEM;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 267 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
(:) s
5 256 M
(    vop_ref_dec\(node\);) s
5 245 M
(    kfree\(entry\);) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 234 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 234 M
( ret;) s
5 223 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 201 M
(/*) s
5 190 M
( * sfs_getdirentry_sub_noblock - get the content of file entry in DIR) s
5 179 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 168 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 168 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 168 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 157 M
(sfs_getdirentry_sub_nolock) s
/F-gs-font 10 10 SF
0 setgray
161 157 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 157 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
203 157 M
( sfs_fs *sfs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
287 157 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
323 157 M
( sfs_inode *sin, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
425 157 M
(int) s
/F-gs-font 10 10 SF
0 setgray
443 157 M
( slot, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
485 157 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
521 157 M
( sfs_dis) s
5 146 M
(k_entry *entry\) {) s
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( ret, i, nslots = sin->din->blocks;) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 124 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( \(i = 0; i < nslots; i ++\) {) s
5 113 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 113 M
( \(\(ret = sfs_dirent_read_nolock\(sfs, sin, i, entry\)\) != 0\) {) s
5 102 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 102 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 102 M
( ret;) s
5 91 M
(        }) s
5 80 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 80 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 80 M
( \(entry->ino != 0\) {) s
5 69 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 69 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 69 M
( \(slot == 0\) {) s
5 58 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 58 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 58 M
( 0;) s
5 47 M
(            }) s
5 36 M
(            slot --;) s
5 25 M
(        }) s
5 14 M
(    }) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 3 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 3 M
( -E_NOENT;) s
_R
S
%%Page: (161) 161
%%BeginPageSetup
_S
18 36 translate
/pagenum 161 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 685 M
(/*) s
5 674 M
( * sfs_getdirentry - according to the iob->io_offset, calculate the dir entry's slot in disk b) s
5 663 M
(lock,) s
5 652 M
(                     get dir entry content from the disk ) s
5 641 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 630 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 630 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 630 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 619 M
(sfs_getdirentry) s
/F-gs-font 10 10 SF
0 setgray
95 619 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 619 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 619 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
221 619 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
257 619 M
( iobuf *iob\) {) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 608 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 608 M
( sfs_disk_entry *entry;) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 597 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( \(\(entry = kmalloc\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
155 597 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
191 597 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 597 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
233 597 M
( sfs_disk_entry\)\)\) == NULL\) {) s
5 586 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 586 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 586 M
( -E_NO_MEM;) s
5 575 M
(    }) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 553 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 553 M
( sfs_fs *sfs = fsop_info\(vop_fs\(node\), sfs\);) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 542 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 542 M
( sfs_inode *sin = vop_info\(node, sfs_inode\);) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 520 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
( ret, slot;) s
5 509 M
(    off_t offset = iob->io_offset;) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 498 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 498 M
( \(offset < 0 || offset % sfs_dentry_size != 0\) {) s
5 487 M
(        kfree\(entry\);) s
5 476 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 476 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 476 M
( -E_INVAL;) s
5 465 M
(    }) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( \(\(slot = offset / sfs_dentry_size\) > sin->din->blocks\) {) s
5 443 M
(        kfree\(entry\);) s
5 432 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 432 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 432 M
( -E_NOENT;) s
5 421 M
(    }) s
5 410 M
(    lock_sin\(sin\);) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 399 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
( \(\(ret = sfs_getdirentry_sub_nolock\(sfs, sin, slot, entry\)\) != 0\) {) s
5 388 M
(        unlock_sin\(sin\);) s
5 377 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 377 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 377 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 377 M
(out) s
/F-gs-font 10 10 SF
0 setgray
101 377 M
(;) s
5 366 M
(    }) s
5 355 M
(    unlock_sin\(sin\);) s
5 344 M
(    ret = iobuf_move\(iob, entry->name, sfs_dentry_size, 1, NULL\);) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 333 M
(out) s
/F-gs-font 10 10 SF
0 setgray
23 333 M
(:) s
5 322 M
(    kfree\(entry\);) s
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 311 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 311 M
( ret;) s
5 300 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 278 M
(/*) s
5 267 M
( * sfs_reclaim - Free all resources inode occupied . Called when inode is no longer in use. ) s
5 256 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 245 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 245 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 245 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 234 M
(sfs_reclaim) s
/F-gs-font 10 10 SF
0 setgray
71 234 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 234 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 234 M
( inode *node\) {) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 223 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 223 M
( sfs_fs *sfs = fsop_info\(vop_fs\(node\), sfs\);) s
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 212 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 212 M
( sfs_inode *sin = vop_info\(node, sfs_inode\);) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 190 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
(  ret = -E_BUSY;) s
5 179 M
(    uint32_t ent;) s
5 168 M
(    lock_sfs_fs\(sfs\);) s
5 157 M
(    assert\(sin->reclaim_count > 0\);) s
5 146 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 146 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( \(\(-- sin->reclaim_count\) != 0 || inode_ref_count\(node\) != 0\) {) s
5 135 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 135 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 135 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 135 M
(failed_unlock) s
/F-gs-font 10 10 SF
0 setgray
161 135 M
(;) s
5 124 M
(    }) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( \(sin->din->nlinks == 0\) {) s
5 102 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 102 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 102 M
( \(\(ret = vop_truncate\(node, 0\)\) != 0\) {) s
5 91 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 91 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 91 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 91 M
(failed_unlock) s
/F-gs-font 10 10 SF
0 setgray
185 91 M
(;) s
5 80 M
(        }) s
5 69 M
(    }) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 58 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 58 M
( \(sin->dirty\) {) s
5 47 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 47 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
( \(\(ret = vop_fsync\(node\)\) != 0\) {) s
5 36 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 36 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 36 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 36 M
(failed_unlock) s
/F-gs-font 10 10 SF
0 setgray
185 36 M
(;) s
5 25 M
(        }) s
5 14 M
(    }) s
5 3 M
(    sfs_remove_links\(sin\);) s
_R
S
%%Page: (162) 162
%%BeginPageSetup
_S
18 36 translate
/pagenum 162 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    unlock_sfs_fs\(sfs\);) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 685 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( \(sin->din->nlinks == 0\) {) s
5 674 M
(        sfs_block_free\(sfs, sin->ino\);) s
5 663 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 663 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 663 M
( \(\(ent = sin->din->indirect\) != 0\) {) s
5 652 M
(            sfs_block_free\(sfs, ent\);) s
5 641 M
(        }) s
5 630 M
(    }) s
5 619 M
(    kfree\(sin->din\);) s
5 608 M
(    vop_kill\(node\);) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 597 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 597 M
( 0;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 575 M
(failed_unlock) s
/F-gs-font 10 10 SF
0 setgray
83 575 M
(:) s
5 564 M
(    unlock_sfs_fs\(sfs\);) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 553 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 553 M
( ret;) s
5 542 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 520 M
(/*) s
5 509 M
( * sfs_gettype - Return type of file. The values for file types are in sfs.h.) s
5 498 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 487 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 487 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 476 M
(sfs_gettype) s
/F-gs-font 10 10 SF
0 setgray
71 476 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 476 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 476 M
( inode *node, uint32_t *type_store\) {) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 465 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 465 M
( sfs_disk_inode *din = vop_info\(node, sfs_inode\)->din;) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(switch) s
/F-gs-font 10 10 SF
0 setgray
65 454 M
( \(din->type\) {) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 443 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 443 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 443 M
(SFS_TYPE_DIR) s
/F-gs-font 10 10 SF
0 setgray
131 443 M
(:) s
5 432 M
(        *type_store = S_IFDIR;) s
5 421 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 421 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 421 M
( 0;) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 410 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 410 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 410 M
(SFS_TYPE_FILE) s
/F-gs-font 10 10 SF
0 setgray
137 410 M
(:) s
5 399 M
(        *type_store = S_IFREG;) s
5 388 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 388 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 388 M
( 0;) s
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 377 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 377 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 377 M
(SFS_TYPE_LINK) s
/F-gs-font 10 10 SF
0 setgray
137 377 M
(:) s
5 366 M
(        *type_store = S_IFLNK;) s
5 355 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 355 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 355 M
( 0;) s
5 344 M
(    }) s
5 333 M
(    panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 333 M
("invalid file type %d.\\n") s
/F-gs-font 10 10 SF
0 setgray
215 333 M
(, din->type\);) s
5 322 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 300 M
(/* ) s
5 289 M
( * sfs_tryseek - Check if seeking to the specified position within the file is legal.) s
5 278 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 267 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 256 M
(sfs_tryseek) s
/F-gs-font 10 10 SF
0 setgray
71 256 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 256 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 256 M
( inode *node, off_t pos\) {) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 245 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 245 M
( \(pos < 0 || pos >= SFS_MAX_FILE_SIZE\) {) s
5 234 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 234 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 234 M
( -E_INVAL;) s
5 223 M
(    }) s
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 212 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 212 M
( sfs_inode *sin = vop_info\(node, sfs_inode\);) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 201 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 201 M
( \(pos > sin->din->size\) {) s
5 190 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 190 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 190 M
( vop_truncate\(node, pos\);) s
5 179 M
(    }) s
5 168 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 168 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 168 M
( 0;) s
5 157 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 135 M
(/*) s
5 124 M
( * sfs_truncfile : reszie the file with new length) s
5 113 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 102 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 102 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 102 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 91 M
(sfs_truncfile) s
/F-gs-font 10 10 SF
0 setgray
83 91 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 91 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 91 M
( inode *node, off_t len\) {) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 80 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 80 M
( \(len < 0 || len > SFS_MAX_FILE_SIZE\) {) s
5 69 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 69 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 69 M
( -E_INVAL;) s
5 58 M
(    }) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 47 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
( sfs_fs *sfs = fsop_info\(vop_fs\(node\), sfs\);) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 36 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 36 M
( sfs_inode *sin = vop_info\(node, sfs_inode\);) s
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 25 M
( sfs_disk_inode *din = sin->din;) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( ret = 0;) s
_R
S
%%Page: (163) 163
%%BeginPageSetup
_S
18 36 translate
/pagenum 163 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 707 M
(//new number of disk blocks of file) s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(    uint32_t nblks, tblks = ROUNDUP_DIV\(len, SFS_BLKSIZE\);) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 685 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( \(din->size == len\) {) s
5 674 M
(        assert\(tblks == din->blocks\);) s
5 663 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 663 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 663 M
( 0;) s
5 652 M
(    }) s
5 630 M
(    lock_sin\(sin\);) s
5 619 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 619 M
(// old number of disk blocks of file) s
/F-gs-font 10 10 SF
0 setgray
5 608 M
(    nblks = din->blocks;) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 597 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( \(nblks < tblks\) {) s
5 586 M
(                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
101 586 M
(// try to enlarge the file size by add new disk block at the end of file) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 575 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 575 M
( \(nblks != tblks\) {) s
5 564 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 564 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 564 M
( \(\(ret = sfs_bmap_load_nolock\(sfs, sin, nblks, NULL\)\) != 0\) {) s
5 553 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 553 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
125 553 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
131 553 M
(out_unlock) s
/F-gs-font 10 10 SF
0 setgray
191 553 M
(;) s
5 542 M
(            }) s
5 531 M
(            nblks ++;) s
5 520 M
(        }) s
5 509 M
(    }) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 498 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 498 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
59 498 M
(if) s
/F-gs-font 10 10 SF
0 setgray
71 498 M
( \(tblks < nblks\) {) s
5 487 M
(                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
101 487 M
(// try to reduce the file size ) s
/F-gs-font 10 10 SF
0 setgray
5 476 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 476 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 476 M
( \(tblks != nblks\) {) s
5 465 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 465 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 465 M
( \(\(ret = sfs_bmap_truncate_nolock\(sfs, sin\)\) != 0\) {) s
5 454 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 454 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
125 454 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
131 454 M
(out_unlock) s
/F-gs-font 10 10 SF
0 setgray
191 454 M
(;) s
5 443 M
(            }) s
5 432 M
(            nblks --;) s
5 421 M
(        }) s
5 410 M
(    }) s
5 399 M
(    assert\(din->blocks == tblks\);) s
5 388 M
(    din->size = len;) s
5 377 M
(    sin->dirty = 1;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 355 M
(out_unlock) s
/F-gs-font 10 10 SF
0 setgray
65 355 M
(:) s
5 344 M
(    unlock_sin\(sin\);) s
5 333 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 333 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 333 M
( ret;) s
5 322 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 300 M
(/*) s
5 289 M
( * sfs_lookup - Parse path relative to the passed directory) s
5 278 M
( *              DIR, and hand back the inode for the file it) s
5 267 M
( *              refers to.) s
5 256 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 245 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 245 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 245 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 234 M
(sfs_lookup) s
/F-gs-font 10 10 SF
0 setgray
65 234 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 234 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 234 M
( inode *node, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 234 M
(char) s
/F-gs-font 10 10 SF
0 setgray
215 234 M
( *path, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
263 234 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
299 234 M
( inode **node_store\) {) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 223 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 223 M
( sfs_fs *sfs = fsop_info\(vop_fs\(node\), sfs\);) s
5 212 M
(    assert\(*path != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
125 212 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
149 212 M
( && *path != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
227 212 M
('/') s
/F-gs-font 10 10 SF
0 setgray
245 212 M
(\);) s
5 201 M
(    vop_ref_inc\(node\);) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 190 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 190 M
( sfs_inode *sin = vop_info\(node, sfs_inode\);) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 179 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 179 M
( \(sin->din->type != SFS_TYPE_DIR\) {) s
5 168 M
(        vop_ref_dec\(node\);) s
5 157 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 157 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 157 M
( -E_NOTDIR;) s
5 146 M
(    }) s
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 135 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 135 M
( inode *subnode;) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( ret = sfs_lookup_once\(sfs, sin, path, &subnode, NULL\);) s
5 102 M
(    vop_ref_dec\(node\);) s
5 91 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 91 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 91 M
( \(ret != 0\) {) s
5 80 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 80 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 80 M
( ret;) s
5 69 M
(    }) s
5 58 M
(    *node_store = subnode;) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 47 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
( 0;) s
5 36 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 14 M
(// The sfs specific DIR operations correspond to the abstract operations on a inode.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 3 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 3 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 3 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 3 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 3 M
( inode_ops sfs_node_dirops = {) s
_R
S
%%Page: (164) 164
%%BeginPageSetup
_S
18 36 translate
/pagenum 164 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    .vop_magic                      = VOP_MAGIC,) s
5 696 M
(    .vop_open                       = sfs_opendir,) s
5 685 M
(    .vop_close                      = sfs_close,) s
5 674 M
(    .vop_fstat                      = sfs_fstat,) s
5 663 M
(    .vop_fsync                      = sfs_fsync,) s
5 652 M
(    .vop_namefile                   = sfs_namefile,) s
5 641 M
(    .vop_getdirentry                = sfs_getdirentry,) s
5 630 M
(    .vop_reclaim                    = sfs_reclaim,) s
5 619 M
(    .vop_gettype                    = sfs_gettype,) s
5 608 M
(    .vop_lookup                     = sfs_lookup,) s
5 597 M
(};) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 586 M
(/// The sfs specific FILE operations correspond to the abstract operations on a inode.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 575 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 575 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 575 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 575 M
( inode_ops sfs_node_fileops = {) s
5 564 M
(    .vop_magic                      = VOP_MAGIC,) s
5 553 M
(    .vop_open                       = sfs_openfile,) s
5 542 M
(    .vop_close                      = sfs_close,) s
5 531 M
(    .vop_read                       = sfs_read,) s
5 520 M
(    .vop_write                      = sfs_write,) s
5 509 M
(    .vop_fstat                      = sfs_fstat,) s
5 498 M
(    .vop_fsync                      = sfs_fsync,) s
5 487 M
(    .vop_reclaim                    = sfs_reclaim,) s
5 476 M
(    .vop_gettype                    = sfs_gettype,) s
5 465 M
(    .vop_tryseek                    = sfs_tryseek,) s
5 454 M
(    .vop_truncate                   = sfs_truncfile,) s
5 443 M
(};) s
5 421 M
([ucore/lab8_result/kern/fs/sfs/bitmap.h] ++++++++++++++++++++++++++++++) s
5 410 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 410 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 410 M
(__KERN_FS_SFS_BITMAP_H__) s
/F-gs-font 10 10 SF
0 setgray
5 399 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 399 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 399 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 399 M
(__KERN_FS_SFS_BITMAP_H__) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 377 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 377 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 344 M
(/*) s
5 333 M
( * Fixed-size array of bits. \(Intended for storage management.\)) s
5 322 M
( *) s
5 311 M
( * Functions:) s
5 300 M
( *     bitmap_create  - allocate a new bitmap object.) s
5 289 M
( *                      Returns NULL on error.) s
5 278 M
( *     bitmap_getdata - return pointer to raw bit data \(for I/O\).) s
5 267 M
( *     bitmap_alloc   - locate a cleared bit, set it, and return its index.) s
5 256 M
( *     bitmap_mark    - set a clear bit by its index.) s
5 245 M
( *     bitmap_unmark  - clear a set bit by its index.) s
5 234 M
( *     bitmap_isset   - return whether a particular bit is set or not.) s
5 223 M
( *     bitmap_destroy - destroy bitmap.) s
5 212 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 179 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 179 M
( bitmap;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 157 M
( bitmap *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
95 157 M
(bitmap_create) s
/F-gs-font 10 10 SF
0 setgray
173 157 M
(\(uint32_t nbits\);                     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
401 157 M
(// allocate a new bitmap obj) s
5 146 M
(ect.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 135 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 135 M
(bitmap_alloc) s
/F-gs-font 10 10 SF
0 setgray
101 135 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 135 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 135 M
( bitmap *bitmap, uint32_t *index_store\);   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
401 135 M
(// locate a cleared bit, set) s
5 124 M
( it, and return its index.) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(bool ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 113 M
(bitmap_test) s
/F-gs-font 10 10 SF
0 setgray
101 113 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 113 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 113 M
( bitmap *bitmap, uint32_t index\);          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
401 113 M
(// return whether a particul) s
5 102 M
(ar bit is set or not.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 91 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 91 M
(bitmap_free) s
/F-gs-font 10 10 SF
0 setgray
101 91 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 91 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 91 M
( bitmap *bitmap, uint32_t index\);          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
401 91 M
(// according index, set rela) s
5 80 M
(ted bit to 1) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 69 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 69 M
(bitmap_destroy) s
/F-gs-font 10 10 SF
0 setgray
119 69 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 69 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
161 69 M
( bitmap *bitmap\);                       ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
401 69 M
(// free memory contains bitm) s
5 58 M
(ap) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 47 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 47 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
41 47 M
(bitmap_getdata) s
/F-gs-font 10 10 SF
0 setgray
125 47 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 47 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
167 47 M
( bitmap *bitmap, size_t *len_store\);   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
401 47 M
(// return pointer to raw bit) s
5 36 M
( data \(for I/O\)) s
/F-gs-font 10 10 SF
0 setgray
5 14 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 14 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 14 M
(/* !__KERN_FS_SFS_BITMAP_H__ */) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (165) 165
%%BeginPageSetup
_S
18 36 translate
/pagenum 165 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
([ucore/lab8_result/kern/fs/sfs/sfs.c] ++++++++++++++++++++++++++++++) s
5 696 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 696 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 696 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 696 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 685 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 685 M
(<sfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 674 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 674 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 663 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 663 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 641 M
(/*) s
5 630 M
( * sfs_init - mount sfs on disk0) s
5 619 M
( *) s
5 608 M
( * CALL GRAPH:) s
5 597 M
( *   kern_init-->fs_init-->sfs_init) s
5 586 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 564 M
(sfs_init) s
/F-gs-font 10 10 SF
0 setgray
53 564 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 564 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 564 M
(\) {) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 553 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( ret;) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 542 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 542 M
( \(\(ret = sfs_mount\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
155 542 M
("disk0") s
/F-gs-font 10 10 SF
0 setgray
197 542 M
(\)\) != 0\) {) s
5 531 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 531 M
("failed: sfs: sfs_mount: %e.\\n") s
/F-gs-font 10 10 SF
0 setgray
275 531 M
(, ret\);) s
5 520 M
(    }) s
5 509 M
(}) s
5 487 M
([ucore/lab8_result/kern/fs/sysfile.h] ++++++++++++++++++++++++++++++) s
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 476 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 476 M
(__KERN_FS_SYSFILE_H__) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 465 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 465 M
(__KERN_FS_SYSFILE_H__) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 443 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 443 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 421 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
( stat;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 410 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 410 M
( dirent;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 388 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 388 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 388 M
(sysfile_open) s
/F-gs-font 10 10 SF
0 setgray
101 388 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 388 M
(const) s
/F-gs-font 10 10 SF
0 setgray
137 388 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 388 M
(char) s
/F-gs-font 10 10 SF
0 setgray
167 388 M
( *path, uint32_t open_flags\);        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
389 388 M
(// Open or create a file. FLAG) s
5 377 M
(S/MODE per the syscall.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 366 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 366 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 366 M
(sysfile_close) s
/F-gs-font 10 10 SF
0 setgray
107 366 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 366 M
(int) s
/F-gs-font 10 10 SF
0 setgray
131 366 M
( fd\);                                      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
389 366 M
(// Close a vnode opened  ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 355 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 355 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 355 M
(sysfile_read) s
/F-gs-font 10 10 SF
0 setgray
101 355 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 355 M
(int) s
/F-gs-font 10 10 SF
0 setgray
125 355 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 355 M
(void) s
/F-gs-font 10 10 SF
0 setgray
179 355 M
( *base, size_t len\);               ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
389 355 M
(// Read file) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 344 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 344 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 344 M
(sysfile_write) s
/F-gs-font 10 10 SF
0 setgray
107 344 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 344 M
(int) s
/F-gs-font 10 10 SF
0 setgray
131 344 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
161 344 M
(void) s
/F-gs-font 10 10 SF
0 setgray
185 344 M
( *base, size_t len\);              ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
389 344 M
(// Write file) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 333 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 333 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 333 M
(sysfile_seek) s
/F-gs-font 10 10 SF
0 setgray
101 333 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 333 M
(int) s
/F-gs-font 10 10 SF
0 setgray
125 333 M
( fd, off_t pos, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
221 333 M
(int) s
/F-gs-font 10 10 SF
0 setgray
239 333 M
( whence\);                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
389 333 M
(// Seek file  ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 322 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 322 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 322 M
(sysfile_fstat) s
/F-gs-font 10 10 SF
0 setgray
107 322 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 322 M
(int) s
/F-gs-font 10 10 SF
0 setgray
131 322 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
161 322 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
197 322 M
( stat *stat\);                   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
389 322 M
(// Stat file ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 311 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 311 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 311 M
(sysfile_fsync) s
/F-gs-font 10 10 SF
0 setgray
107 311 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 311 M
(int) s
/F-gs-font 10 10 SF
0 setgray
131 311 M
( fd\);                                      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
389 311 M
(// Sync file) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 300 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 300 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 300 M
(sysfile_chdir) s
/F-gs-font 10 10 SF
0 setgray
107 300 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 300 M
(const) s
/F-gs-font 10 10 SF
0 setgray
143 300 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 300 M
(char) s
/F-gs-font 10 10 SF
0 setgray
173 300 M
( *path\);                            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
389 300 M
(// change DIR  ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 289 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 289 M
(sysfile_mkdir) s
/F-gs-font 10 10 SF
0 setgray
107 289 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 289 M
(const) s
/F-gs-font 10 10 SF
0 setgray
143 289 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 289 M
(char) s
/F-gs-font 10 10 SF
0 setgray
173 289 M
( *path\);                            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
389 289 M
(// create DIR) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 278 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 278 M
(sysfile_link) s
/F-gs-font 10 10 SF
0 setgray
101 278 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 278 M
(const) s
/F-gs-font 10 10 SF
0 setgray
137 278 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 278 M
(char) s
/F-gs-font 10 10 SF
0 setgray
167 278 M
( *path1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
221 278 M
(const) s
/F-gs-font 10 10 SF
0 setgray
251 278 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 278 M
(char) s
/F-gs-font 10 10 SF
0 setgray
281 278 M
( *path2\);         ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
389 278 M
(// set a path1's link as path2) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 267 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 267 M
(sysfile_rename) s
/F-gs-font 10 10 SF
0 setgray
113 267 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 267 M
(const) s
/F-gs-font 10 10 SF
0 setgray
149 267 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 267 M
(char) s
/F-gs-font 10 10 SF
0 setgray
179 267 M
( *path1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
233 267 M
(const) s
/F-gs-font 10 10 SF
0 setgray
263 267 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
269 267 M
(char) s
/F-gs-font 10 10 SF
0 setgray
293 267 M
( *path2\);       ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
389 267 M
(// rename file) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 256 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 256 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 256 M
(sysfile_unlink) s
/F-gs-font 10 10 SF
0 setgray
113 256 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 256 M
(const) s
/F-gs-font 10 10 SF
0 setgray
149 256 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 256 M
(char) s
/F-gs-font 10 10 SF
0 setgray
179 256 M
( *path\);                           ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
389 256 M
(// unlink a path) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 245 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 245 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 245 M
(sysfile_getcwd) s
/F-gs-font 10 10 SF
0 setgray
113 245 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 245 M
(char) s
/F-gs-font 10 10 SF
0 setgray
143 245 M
( *buf, size_t len\);                      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
389 245 M
(// get current working directo) s
5 234 M
(ry) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 223 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 223 M
(sysfile_getdirentry) s
/F-gs-font 10 10 SF
0 setgray
143 223 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
167 223 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 223 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
233 223 M
( dirent *direntp\);        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
389 223 M
(// get the file entry in DIR ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 212 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 212 M
(sysfile_dup) s
/F-gs-font 10 10 SF
0 setgray
95 212 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
119 212 M
( fd1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
173 212 M
( fd2\);                              ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
389 212 M
(// duplicate file) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 201 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 201 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 201 M
(sysfile_pipe) s
/F-gs-font 10 10 SF
0 setgray
101 201 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 201 M
(int) s
/F-gs-font 10 10 SF
0 setgray
125 201 M
( *fd_store\);                                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
389 201 M
(// build PIPE   ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 190 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 190 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 190 M
(sysfile_mkfifo) s
/F-gs-font 10 10 SF
0 setgray
113 190 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 190 M
(const) s
/F-gs-font 10 10 SF
0 setgray
149 190 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 190 M
(char) s
/F-gs-font 10 10 SF
0 setgray
179 190 M
( *name, uint32_t open_flags\);      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
389 190 M
(// build named PIPE) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 168 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 168 M
(/* !__KERN_FS_SYSFILE_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
([ucore/lab8_result/kern/fs/fs.c] ++++++++++++++++++++++++++++++) s
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 135 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 135 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 124 M
(<kmalloc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 113 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 113 M
(<sem.h>) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 102 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 102 M
(<vfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 91 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 91 M
(<dev.h>) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 80 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 80 M
(<file.h>) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 69 M
(<sfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 58 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 58 M
(<inode.h>) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 47 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 47 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 36 M
(//called when init_main proc start) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 14 M
(fs_init) s
/F-gs-font 10 10 SF
0 setgray
47 14 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 14 M
(void) s
/F-gs-font 10 10 SF
0 setgray
77 14 M
(\) {) s
5 3 M
(    vfs_init\(\);) s
_R
S
%%Page: (166) 166
%%BeginPageSetup
_S
18 36 translate
/pagenum 166 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    dev_init\(\);) s
5 696 M
(    sfs_init\(\);) s
5 685 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 652 M
(fs_cleanup) s
/F-gs-font 10 10 SF
0 setgray
65 652 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 652 M
(void) s
/F-gs-font 10 10 SF
0 setgray
95 652 M
(\) {) s
5 641 M
(    vfs_cleanup\(\);) s
5 630 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 608 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 597 M
(lock_files) s
/F-gs-font 10 10 SF
0 setgray
65 597 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 597 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 597 M
( files_struct *filesp\) {) s
5 586 M
(    down\(&\(filesp->files_sem\)\);) s
5 575 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 553 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 542 M
(unlock_files) s
/F-gs-font 10 10 SF
0 setgray
77 542 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 542 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 542 M
( files_struct *filesp\) {) s
5 531 M
(    up\(&\(filesp->files_sem\)\);) s
5 520 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 509 M
(//Called when a new proc init) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 498 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 498 M
( files_struct *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 487 M
(files_create) s
/F-gs-font 10 10 SF
0 setgray
77 487 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 487 M
(void) s
/F-gs-font 10 10 SF
0 setgray
107 487 M
(\) {) s
5 476 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 476 M
(//cprintf\("[files_create]\\n"\);) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(    static_assert\(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 465 M
(int) s
/F-gs-font 10 10 SF
0 setgray
137 465 M
(\)FILES_STRUCT_NENTRY > 128\);) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 454 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 454 M
( files_struct *filesp;) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 443 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
( \(\(filesp = kmalloc\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
161 443 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
197 443 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
203 443 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
239 443 M
( files_struct\) + FILES_STRUCT_BUFSIZE\)\) != NULL\) {) s
5 432 M
(        filesp->pwd = NULL;) s
5 421 M
(        filesp->fd_array = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 421 M
(void) s
/F-gs-font 10 10 SF
0 setgray
197 421 M
( *\)\(filesp + 1\);) s
5 410 M
(        filesp->files_count = 0;) s
5 399 M
(        sem_init\(&\(filesp->files_sem\), 1\);) s
5 388 M
(        fd_array_init\(filesp->fd_array\);) s
5 377 M
(    }) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 366 M
( filesp;) s
5 355 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 344 M
(//Called when a proc exit) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 333 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 322 M
(files_destroy) s
/F-gs-font 10 10 SF
0 setgray
83 322 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 322 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 322 M
( files_struct *filesp\) {) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 311 M
(//    cprintf\("[files_destroy]\\n"\);) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(    assert\(filesp != NULL && files_count\(filesp\) == 0\);) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 289 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( \(filesp->pwd != NULL\) {) s
5 278 M
(        vop_ref_dec\(filesp->pwd\);) s
5 267 M
(    }) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 256 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( i;) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 245 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 245 M
( file *file = filesp->fd_array;) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 234 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 234 M
( \(i = 0; i < FILES_STRUCT_NENTRY; i ++, file ++\) {) s
5 223 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 223 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 223 M
( \(file->status == FD_OPENED\) {) s
5 212 M
(            fd_array_close\(file\);) s
5 201 M
(        }) s
5 190 M
(        assert\(file->status == FD_NONE\);) s
5 179 M
(    }) s
5 168 M
(    kfree\(filesp\);) s
5 157 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 135 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 124 M
(files_closeall) s
/F-gs-font 10 10 SF
0 setgray
89 124 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 124 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 124 M
( files_struct *filesp\) {) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 113 M
(//    cprintf\("[files_closeall]\\n"\);) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(    assert\(filesp != NULL && files_count\(filesp\) > 0\);) s
5 91 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( i;) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 80 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 80 M
( file *file = filesp->fd_array;) s
5 69 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 69 M
(//skip the stdin & stdout) s
/F-gs-font 10 10 SF
0 setgray
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 58 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( \(i = 2, file += 2; i < FILES_STRUCT_NENTRY; i ++, file ++\) {) s
5 47 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 47 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
( \(file->status == FD_OPENED\) {) s
5 36 M
(            fd_array_close\(file\);) s
5 25 M
(        }) s
5 14 M
(    }) s
5 3 M
(}) s
_R
S
%%Page: (167) 167
%%BeginPageSetup
_S
18 36 translate
/pagenum 167 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 696 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 685 M
(dup_files) s
/F-gs-font 10 10 SF
0 setgray
59 685 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 685 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 685 M
( files_struct *to, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 685 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
251 685 M
( files_struct *from\) {) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 674 M
(//    cprintf\("[dup_files]\\n"\);) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(    assert\(to != NULL && from != NULL\);) s
5 652 M
(    assert\(files_count\(to\) == 0 && files_count\(from\) > 0\);) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 641 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 641 M
( \(\(to->pwd = from->pwd\) != NULL\) {) s
5 630 M
(        vop_ref_inc\(to->pwd\);) s
5 619 M
(    }) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 608 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 608 M
( i;) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 597 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 597 M
( file *to_file = to->fd_array, *from_file = from->fd_array;) s
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 586 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( \(i = 0; i < FILES_STRUCT_NENTRY; i ++, to_file ++, from_file ++\) {) s
5 575 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 575 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 575 M
( \(from_file->status == FD_OPENED\) {) s
5 564 M
(            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
77 564 M
(/* alloc_fd first */) s
/F-gs-font 10 10 SF
0 setgray
5 553 M
(            to_file->status = FD_INIT;) s
5 542 M
(            fd_array_dup\(to_file, from_file\);) s
5 531 M
(        }) s
5 520 M
(    }) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 509 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
( 0;) s
5 498 M
(}) s
5 476 M
([ucore/lab8_result/kern/fs/iobuf.h] ++++++++++++++++++++++++++++++) s
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 465 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 465 M
(__KERN_FS_IOBUF_H__) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 454 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 454 M
(__KERN_FS_IOBUF_H__) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 432 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 432 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 432 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 410 M
(/*) s
5 399 M
( * iobuf is a buffer Rd/Wr status record) s
5 388 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 377 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
( iobuf {) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 366 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 366 M
( *io_base;     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
143 366 M
(// the base addr of buffer \(used for Rd/Wr\)) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(    off_t io_offset;   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
143 355 M
(// current Rd/Wr position in buffer, will have been incremented by the ) s
5 344 M
(amount transferred) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(    size_t io_len;     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
143 333 M
(// the length of buffer  \(used for Rd/Wr\)) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(    size_t io_resid;   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
143 322 M
(// current resident length need to Rd/Wr, will have been decremented by) s
5 311 M
( the amount transferred.) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(};) s
5 278 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 278 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 278 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 278 M
(iobuf_used) s
/F-gs-font 10 10 SF
0 setgray
113 278 M
(\(iob\)                         \(\(size_t\)\(\(iob\)->io_len - \(iob\)->io_resid\)\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 256 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 256 M
( iobuf *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
89 256 M
(iobuf_init) s
/F-gs-font 10 10 SF
0 setgray
149 256 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 256 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
191 256 M
( iobuf *iob, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
269 256 M
(void) s
/F-gs-font 10 10 SF
0 setgray
293 256 M
( *base, size_t len, off_t offset\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 245 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 245 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 245 M
(iobuf_move) s
/F-gs-font 10 10 SF
0 setgray
89 245 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 245 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 245 M
( iobuf *iob, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
209 245 M
(void) s
/F-gs-font 10 10 SF
0 setgray
233 245 M
( *data, size_t len, bool m2b, size_t *copiedp\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 234 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 234 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 234 M
(iobuf_move_zeros) s
/F-gs-font 10 10 SF
0 setgray
125 234 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 234 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
167 234 M
( iobuf *iob, size_t len, size_t *copiedp\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 223 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 223 M
(iobuf_skip) s
/F-gs-font 10 10 SF
0 setgray
95 223 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 223 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 223 M
( iobuf *iob, size_t n\);) s
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 201 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 201 M
(/* !__KERN_FS_IOBUF_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
([ucore/lab8_result/kern/fs/iobuf.c] ++++++++++++++++++++++++++++++) s
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 168 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 168 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 157 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 157 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 146 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 146 M
(<iobuf.h>) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 135 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 135 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 124 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 102 M
(/* ) s
5 91 M
( * iobuf_init - init io buffer struct.) s
5 80 M
( *                set up io_base to point to the buffer you want to transfer to, and set io_le) s
5 69 M
(n to the length of buffer;) s
5 58 M
( *                initialize io_offset as desired;) s
5 47 M
( *                initialize io_resid to the total amount of data that can be transferred thro) s
5 36 M
(ugh this io.) s
5 25 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( iobuf *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 3 M
(iobuf_init) s
/F-gs-font 10 10 SF
0 setgray
65 3 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 3 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 3 M
( iobuf *iob, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
209 3 M
( *base, size_t len, off_t offset\) {) s
_R
S
%%Page: (168) 168
%%BeginPageSetup
_S
18 36 translate
/pagenum 168 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    iob->io_base = base;) s
5 696 M
(    iob->io_offset = offset;) s
5 685 M
(    iob->io_len = iob->io_resid = len;) s
5 674 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 674 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 674 M
( iob;) s
5 663 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 641 M
(/* iobuf_move - move data  \(iob->io_base ---> data OR  data --> iob->io.base\) in memory) s
5 630 M
( * @copiedp:  the size of data memcopied) s
5 619 M
( *) s
5 608 M
( * iobuf_move may be called repeatedly on the same io to transfer) s
5 597 M
( * additional data until the available buffer space the io refers to) s
5 586 M
( * is exhausted.) s
5 575 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 553 M
(iobuf_move) s
/F-gs-font 10 10 SF
0 setgray
65 553 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 553 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 553 M
( iobuf *iob, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 553 M
(void) s
/F-gs-font 10 10 SF
0 setgray
209 553 M
( *data, size_t len, bool m2b, size_t *copiedp\) {) s
5 542 M
(    size_t alen;) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 531 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( \(\(alen = iob->io_resid\) > len\) {) s
5 520 M
(        alen = len;) s
5 509 M
(    }) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 498 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 498 M
( \(alen > 0\) {) s
5 487 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 487 M
(void) s
/F-gs-font 10 10 SF
0 setgray
77 487 M
( *src = iob->io_base, *dst = data;) s
5 476 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 476 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 476 M
( \(m2b\) {) s
5 465 M
(            ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 465 M
(void) s
/F-gs-font 10 10 SF
0 setgray
101 465 M
( *tmp = src;) s
5 454 M
(            src = dst, dst = tmp;) s
5 443 M
(        }) s
5 432 M
(        memmove\(dst, src, alen\);) s
5 421 M
(        iobuf_skip\(iob, alen\), len -= alen;) s
5 410 M
(    }) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 399 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
( \(copiedp != NULL\) {) s
5 388 M
(        *copiedp = alen;) s
5 377 M
(    }) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 366 M
( \(len == 0\) ? 0 : -E_NO_MEM;) s
5 355 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 333 M
(/*) s
5 322 M
( * iobuf_move_zeros - set io buffer zero) s
5 311 M
( * @copiedp:  the size of data memcopied) s
5 300 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 278 M
(iobuf_move_zeros) s
/F-gs-font 10 10 SF
0 setgray
101 278 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 278 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 278 M
( iobuf *iob, size_t len, size_t *copiedp\) {) s
5 267 M
(    size_t alen;) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 256 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 256 M
( \(\(alen = iob->io_resid\) > len\) {) s
5 245 M
(        alen = len;) s
5 234 M
(    }) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 223 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 223 M
( \(alen > 0\) {) s
5 212 M
(        memset\(iob->io_base, 0, alen\);) s
5 201 M
(        iobuf_skip\(iob, alen\), len -= alen;) s
5 190 M
(    }) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 179 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 179 M
( \(copiedp != NULL\) {) s
5 168 M
(        *copiedp = alen;) s
5 157 M
(    }) s
5 146 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 146 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 146 M
( \(len == 0\) ? 0 : -E_NO_MEM;) s
5 135 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 113 M
(/*) s
5 102 M
( * iobuf_skip - change the current position of io buffer) s
5 91 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 80 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 69 M
(iobuf_skip) s
/F-gs-font 10 10 SF
0 setgray
65 69 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 69 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 69 M
( iobuf *iob, size_t n\) {) s
5 58 M
(    assert\(iob->io_resid >= n\);) s
5 47 M
(    iob->io_base += n, iob->io_offset += n, iob->io_resid -= n;) s
5 36 M
(}) s
5 14 M
([ucore/lab8_result/kern/fs/file.c] ++++++++++++++++++++++++++++++) s
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 3 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 3 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (169) 169
%%BeginPageSetup
_S
18 36 translate
/pagenum 169 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 707 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 707 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 696 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 696 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 696 M
(<vfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 685 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 685 M
(<proc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 674 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 674 M
(<file.h>) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 663 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 663 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 652 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 652 M
(<iobuf.h>) s
/F-gs-font 10 10 SF
0 setgray
5 641 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 641 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 641 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 641 M
(<inode.h>) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 630 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 630 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 630 M
(<stat.h>) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 619 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 619 M
(<dirent.h>) s
/F-gs-font 10 10 SF
0 setgray
5 608 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 608 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 608 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 608 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 597 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 597 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 575 M
(testfd) s
/F-gs-font 10 10 SF
0 setgray
89 575 M
(\(fd\)                          \(\(fd\) >= 0 && \(fd\) < FILES_STRUCT_NENTRY\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 553 M
(// get_fd_array - get current process's open files table) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 542 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 542 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 542 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 542 M
( file *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 531 M
(get_fd_array) s
/F-gs-font 10 10 SF
0 setgray
77 531 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 531 M
(void) s
/F-gs-font 10 10 SF
0 setgray
107 531 M
(\) {) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 520 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
( files_struct *filesp = current->filesp;) s
5 509 M
(    assert\(filesp != NULL && files_count\(filesp\) > 0\);) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 498 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 498 M
( filesp->fd_array;) s
5 487 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 465 M
(// fd_array_init - initialize the open files table) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 443 M
(fd_array_init) s
/F-gs-font 10 10 SF
0 setgray
83 443 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 443 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 443 M
( file *fd_array\) {) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 432 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 432 M
( fd;) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 421 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 421 M
( file *file = fd_array;) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 410 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( \(fd = 0; fd < FILES_STRUCT_NENTRY; fd ++, file ++\) {) s
5 399 M
(        file->open_count = 0;) s
5 388 M
(        file->status = FD_NONE, file->fd = fd;) s
5 377 M
(    }) s
5 366 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 344 M
(// fs_array_alloc - allocate a free file item \(with FD_NONE status\) in open files table) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 333 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 333 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 333 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 322 M
(fd_array_alloc) s
/F-gs-font 10 10 SF
0 setgray
89 322 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 322 M
(int) s
/F-gs-font 10 10 SF
0 setgray
113 322 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 322 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
179 322 M
( file **file_store\) {) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 311 M
(//    panic\("debug"\);) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 300 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 300 M
( file *file = get_fd_array\(\);) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 289 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( \(fd == NO_FD\) {) s
5 278 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 278 M
(for) s
/F-gs-font 10 10 SF
0 setgray
71 278 M
( \(fd = 0; fd < FILES_STRUCT_NENTRY; fd ++, file ++\) {) s
5 267 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 267 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 267 M
( \(file->status == FD_NONE\) {) s
5 256 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 256 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
125 256 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
131 256 M
(found) s
/F-gs-font 10 10 SF
0 setgray
161 256 M
(;) s
5 245 M
(            }) s
5 234 M
(        }) s
5 223 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 223 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 223 M
( -E_MAX_OPEN;) s
5 212 M
(    }) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 201 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 201 M
( {) s
5 190 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 190 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 190 M
( \(testfd\(fd\)\) {) s
5 179 M
(            file += fd;) s
5 168 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 168 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 168 M
( \(file->status == FD_NONE\) {) s
5 157 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 157 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
125 157 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
131 157 M
(found) s
/F-gs-font 10 10 SF
0 setgray
161 157 M
(;) s
5 146 M
(            }) s
5 135 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 135 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 135 M
( -E_BUSY;) s
5 124 M
(        }) s
5 113 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 113 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 113 M
( -E_INVAL;) s
5 102 M
(    }) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 91 M
(found) s
/F-gs-font 10 10 SF
0 setgray
35 91 M
(:) s
5 80 M
(    assert\(fopen_count\(file\) == 0\);) s
5 69 M
(    file->status = FD_INIT, file->node = NULL;) s
5 58 M
(    *file_store = file;) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 47 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
( 0;) s
5 36 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 14 M
(// fd_array_free - free a file item in open files table) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 3 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (170) 170
%%BeginPageSetup
_S
18 36 translate
/pagenum 170 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 707 M
(fd_array_free) s
/F-gs-font 10 10 SF
0 setgray
83 707 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 707 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 707 M
( file *file\) {) s
5 696 M
(    assert\(file->status == FD_INIT || file->status == FD_CLOSED\);) s
5 685 M
(    assert\(fopen_count\(file\) == 0\);) s
5 674 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 674 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 674 M
( \(file->status == FD_CLOSED\) {) s
5 663 M
(        vfs_close\(file->node\);) s
5 652 M
(    }) s
5 641 M
(    file->status = FD_NONE;) s
5 630 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 608 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 608 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 608 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 597 M
(fd_array_acquire) s
/F-gs-font 10 10 SF
0 setgray
101 597 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 597 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 597 M
( file *file\) {) s
5 586 M
(    assert\(file->status == FD_OPENED\);) s
5 575 M
(    fopen_count_inc\(file\);) s
5 564 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 542 M
(// fd_array_release - file's open_count--; if file's open_count-- == 0 , then call fd_array_fr) s
5 531 M
(ee to free this file item) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 520 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 520 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 520 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 509 M
(fd_array_release) s
/F-gs-font 10 10 SF
0 setgray
101 509 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 509 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 509 M
( file *file\) {) s
5 498 M
(    assert\(file->status == FD_OPENED || file->status == FD_CLOSED\);) s
5 487 M
(    assert\(fopen_count\(file\) > 0\);) s
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 476 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 476 M
( \(fopen_count_dec\(file\) == 0\) {) s
5 465 M
(        fd_array_free\(file\);) s
5 454 M
(    }) s
5 443 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 421 M
(// fd_array_open - file's open_count++, set status to FD_OPENED) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 410 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 399 M
(fd_array_open) s
/F-gs-font 10 10 SF
0 setgray
83 399 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 399 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 399 M
( file *file\) {) s
5 388 M
(    assert\(file->status == FD_INIT && file->node != NULL\);) s
5 377 M
(    file->status = FD_OPENED;) s
5 366 M
(    fopen_count_inc\(file\);) s
5 355 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 333 M
(// fd_array_close - file's open_count--; if file's open_count-- == 0 , then call fd_array_free) s
5 322 M
( to free this file item) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 311 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 300 M
(fd_array_close) s
/F-gs-font 10 10 SF
0 setgray
89 300 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 300 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 300 M
( file *file\) {) s
5 289 M
(    assert\(file->status == FD_OPENED\);) s
5 278 M
(    assert\(fopen_count\(file\) > 0\);) s
5 267 M
(    file->status = FD_CLOSED;) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 256 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 256 M
( \(fopen_count_dec\(file\) == 0\) {) s
5 245 M
(        fd_array_free\(file\);) s
5 234 M
(    }) s
5 223 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 201 M
(//fs_array_dup - duplicate file 'from'  to file 'to') s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 190 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 179 M
(fd_array_dup) s
/F-gs-font 10 10 SF
0 setgray
77 179 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 179 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 179 M
( file *to, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 179 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
221 179 M
( file *from\) {) s
5 168 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 168 M
(//cprintf\("[fd_array_dup]from fd=%d, to fd=%d\\n",from->fd, to->fd\);) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(    assert\(to->status == FD_INIT && from->status == FD_OPENED\);) s
5 146 M
(    to->pos = from->pos;) s
5 135 M
(    to->readable = from->readable;) s
5 124 M
(    to->writable = from->writable;) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 113 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 113 M
( inode *node = from->node;) s
5 102 M
(    vop_ref_inc\(node\), vop_open_inc\(node\);) s
5 91 M
(    to->node = node;) s
5 80 M
(    fd_array_open\(to\);) s
5 69 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 47 M
(// fd2file - use fd as index of fd_array, return the array item \(file\)) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 36 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 25 M
(fd2file) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 25 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 25 M
( file **file_store\) {) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 14 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( \(testfd\(fd\)\) {) s
5 3 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 3 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 3 M
( file *file = get_fd_array\(\) + fd;) s
_R
S
%%Page: (171) 171
%%BeginPageSetup
_S
18 36 translate
/pagenum 171 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 707 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
( \(file->status == FD_OPENED && file->fd == fd\) {) s
5 696 M
(            *file_store = file;) s
5 685 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 685 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 685 M
( 0;) s
5 674 M
(        }) s
5 663 M
(    }) s
5 652 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 652 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 652 M
( -E_INVAL;) s
5 641 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 619 M
(// file_testfd - test file is readble or writable?) s
/F-gs-font 10 10 SF
0 setgray
5 608 M
(bool) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 597 M
(file_testfd) s
/F-gs-font 10 10 SF
0 setgray
71 597 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 597 M
(int) s
/F-gs-font 10 10 SF
0 setgray
95 597 M
( fd, bool readable, bool writable\) {) s
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 586 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( ret;) s
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 575 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 575 M
( file *file;) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 564 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 564 M
( \(\(ret = fd2file\(fd, &file\)\) != 0\) {) s
5 553 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 553 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 553 M
( 0;) s
5 542 M
(    }) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 531 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( \(readable && !file->readable\) {) s
5 520 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 520 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 520 M
( 0;) s
5 509 M
(    }) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 498 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 498 M
( \(writable && !file->writable\) {) s
5 487 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 487 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 487 M
( 0;) s
5 476 M
(    }) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 465 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 465 M
( 1;) s
5 454 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 432 M
(// open file) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 421 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 410 M
(file_open) s
/F-gs-font 10 10 SF
0 setgray
59 410 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 410 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 410 M
( *path, uint32_t open_flags\) {) s
5 399 M
(    bool readable = 0, writable = 0;) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(switch) s
/F-gs-font 10 10 SF
0 setgray
65 388 M
( \(open_flags & O_ACCMODE\) {) s
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 377 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 377 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 377 M
(O_RDONLY) s
/F-gs-font 10 10 SF
0 setgray
107 377 M
(: readable = 1; ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
203 377 M
(break) s
/F-gs-font 10 10 SF
0 setgray
233 377 M
(;) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 366 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 366 M
(O_WRONLY) s
/F-gs-font 10 10 SF
0 setgray
107 366 M
(: writable = 1; ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
203 366 M
(break) s
/F-gs-font 10 10 SF
0 setgray
233 366 M
(;) s
5 355 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 355 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 355 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 355 M
(O_RDWR) s
/F-gs-font 10 10 SF
0 setgray
95 355 M
(:) s
5 344 M
(        readable = writable = 1;) s
5 333 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 333 M
(break) s
/F-gs-font 10 10 SF
0 setgray
83 333 M
(;) s
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
29 322 M
(default) s
/F-gs-font 10 10 SF
0 setgray
71 322 M
(:) s
5 311 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 311 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 311 M
( -E_INVAL;) s
5 300 M
(    }) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 278 M
( ret;) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 267 M
( file *file;) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 256 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 256 M
( \(\(ret = fd_array_alloc\(NO_FD, &file\)\) != 0\) {) s
5 245 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 245 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 245 M
( ret;) s
5 234 M
(    }) s
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 212 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 212 M
( inode *node;) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 201 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 201 M
( \(\(ret = vfs_open\(path, open_flags, &node\)\) != 0\) {) s
5 190 M
(        fd_array_free\(file\);) s
5 179 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 179 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 179 M
( ret;) s
5 168 M
(    }) s
5 146 M
(    file->pos = 0;) s
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 135 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 135 M
( \(open_flags & O_APPEND\) {) s
5 124 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 124 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 124 M
( stat __stat, *stat = &__stat;) s
5 113 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 113 M
( \(\(ret = vop_fstat\(node, stat\)\) != 0\) {) s
5 102 M
(            vfs_close\(node\);) s
5 91 M
(            fd_array_free\(file\);) s
5 80 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 80 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 80 M
( ret;) s
5 69 M
(        }) s
5 58 M
(        file->pos = stat->st_size;) s
5 47 M
(    }) s
5 25 M
(    file->node = node;) s
5 14 M
(    file->readable = readable;) s
5 3 M
(    file->writable = writable;) s
_R
S
%%Page: (172) 172
%%BeginPageSetup
_S
18 36 translate
/pagenum 172 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    fd_array_open\(file\);) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 696 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 696 M
( file->fd;) s
5 685 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 663 M
(// close file) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 652 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 641 M
(file_close) s
/F-gs-font 10 10 SF
0 setgray
65 641 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
89 641 M
( fd\) {) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 630 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( ret;) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 619 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 619 M
( file *file;) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 608 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 608 M
( \(\(ret = fd2file\(fd, &file\)\) != 0\) {) s
5 597 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 597 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 597 M
( ret;) s
5 586 M
(    }) s
5 575 M
(    fd_array_close\(file\);) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 564 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 564 M
( 0;) s
5 553 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 531 M
(// read file) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 520 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 509 M
(file_read) s
/F-gs-font 10 10 SF
0 setgray
59 509 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 509 M
(int) s
/F-gs-font 10 10 SF
0 setgray
83 509 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 509 M
(void) s
/F-gs-font 10 10 SF
0 setgray
137 509 M
( *base, size_t len, size_t *copied_store\) {) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 498 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 498 M
( ret;) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 487 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 487 M
( file *file;) s
5 476 M
(    *copied_store = 0;) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 465 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 465 M
( \(\(ret = fd2file\(fd, &file\)\) != 0\) {) s
5 454 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 454 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 454 M
( ret;) s
5 443 M
(    }) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 432 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 432 M
( \(!file->readable\) {) s
5 421 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 421 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 421 M
( -E_INVAL;) s
5 410 M
(    }) s
5 399 M
(    fd_array_acquire\(file\);) s
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 377 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 377 M
( iobuf __iob, *iob = iobuf_init\(&__iob, base, len, file->pos\);) s
5 366 M
(    ret = vop_read\(file->node, iob\);) s
5 344 M
(    size_t copied = iobuf_used\(iob\);) s
5 333 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 333 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 333 M
( \(file->status == FD_OPENED\) {) s
5 322 M
(        file->pos += copied;) s
5 311 M
(    }) s
5 300 M
(    *copied_store = copied;) s
5 289 M
(    fd_array_release\(file\);) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 278 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 278 M
( ret;) s
5 267 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 245 M
(// write file) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 234 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 223 M
(file_write) s
/F-gs-font 10 10 SF
0 setgray
65 223 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
89 223 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 223 M
(void) s
/F-gs-font 10 10 SF
0 setgray
143 223 M
( *base, size_t len, size_t *copied_store\) {) s
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( ret;) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 201 M
( file *file;) s
5 190 M
(    *copied_store = 0;) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 179 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 179 M
( \(\(ret = fd2file\(fd, &file\)\) != 0\) {) s
5 168 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 168 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 168 M
( ret;) s
5 157 M
(    }) s
5 146 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 146 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( \(!file->writable\) {) s
5 135 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 135 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 135 M
( -E_INVAL;) s
5 124 M
(    }) s
5 113 M
(    fd_array_acquire\(file\);) s
5 91 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 91 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 91 M
( iobuf __iob, *iob = iobuf_init\(&__iob, base, len, file->pos\);) s
5 80 M
(    ret = vop_write\(file->node, iob\);) s
5 58 M
(    size_t copied = iobuf_used\(iob\);) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 47 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 47 M
( \(file->status == FD_OPENED\) {) s
5 36 M
(        file->pos += copied;) s
5 25 M
(    }) s
5 14 M
(    *copied_store = copied;) s
5 3 M
(    fd_array_release\(file\);) s
_R
S
%%Page: (173) 173
%%BeginPageSetup
_S
18 36 translate
/pagenum 173 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 707 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
( ret;) s
5 696 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 674 M
(// seek file) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 652 M
(file_seek) s
/F-gs-font 10 10 SF
0 setgray
59 652 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 652 M
(int) s
/F-gs-font 10 10 SF
0 setgray
83 652 M
( fd, off_t pos, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 652 M
(int) s
/F-gs-font 10 10 SF
0 setgray
197 652 M
( whence\) {) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 641 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 641 M
( stat __stat, *stat = &__stat;) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 630 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( ret;) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 619 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 619 M
( file *file;) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 608 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 608 M
( \(\(ret = fd2file\(fd, &file\)\) != 0\) {) s
5 597 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 597 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 597 M
( ret;) s
5 586 M
(    }) s
5 575 M
(    fd_array_acquire\(file\);) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 553 M
(switch) s
/F-gs-font 10 10 SF
0 setgray
65 553 M
( \(whence\) {) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 542 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 542 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 542 M
(LSEEK_SET) s
/F-gs-font 10 10 SF
0 setgray
113 542 M
(: ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 542 M
(break) s
/F-gs-font 10 10 SF
0 setgray
155 542 M
(;) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 531 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 531 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 531 M
(LSEEK_CUR) s
/F-gs-font 10 10 SF
0 setgray
113 531 M
(: pos += file->pos; ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
233 531 M
(break) s
/F-gs-font 10 10 SF
0 setgray
263 531 M
(;) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 520 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 520 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 520 M
(LSEEK_END) s
/F-gs-font 10 10 SF
0 setgray
113 520 M
(:) s
5 509 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 509 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
( \(\(ret = vop_fstat\(file->node, stat\)\) == 0\) {) s
5 498 M
(            pos += stat->st_size;) s
5 487 M
(        }) s
5 476 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 476 M
(break) s
/F-gs-font 10 10 SF
0 setgray
83 476 M
(;) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
29 465 M
(default) s
/F-gs-font 10 10 SF
0 setgray
71 465 M
(: ret = -E_INVAL;) s
5 454 M
(    }) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 432 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 432 M
( \(ret == 0\) {) s
5 421 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 421 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 421 M
( \(\(ret = vop_tryseek\(file->node, pos\)\) == 0\) {) s
5 410 M
(            file->pos = pos;) s
5 399 M
(        }) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 388 M
(//    cprintf\("file_seek, pos=%d, whence=%d, ret=%d\\n", pos, whence, ret\);) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(    }) s
5 366 M
(    fd_array_release\(file\);) s
5 355 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 355 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 355 M
( ret;) s
5 344 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 322 M
(// stat file) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 311 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 300 M
(file_fstat) s
/F-gs-font 10 10 SF
0 setgray
65 300 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 300 M
(int) s
/F-gs-font 10 10 SF
0 setgray
89 300 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 300 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 300 M
( stat *stat\) {) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 289 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( ret;) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 278 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 278 M
( file *file;) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 267 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( \(\(ret = fd2file\(fd, &file\)\) != 0\) {) s
5 256 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 256 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 256 M
( ret;) s
5 245 M
(    }) s
5 234 M
(    fd_array_acquire\(file\);) s
5 223 M
(    ret = vop_fstat\(file->node, stat\);) s
5 212 M
(    fd_array_release\(file\);) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 201 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 201 M
( ret;) s
5 190 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 168 M
(// sync file) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 146 M
(file_fsync) s
/F-gs-font 10 10 SF
0 setgray
65 146 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 146 M
(int) s
/F-gs-font 10 10 SF
0 setgray
89 146 M
( fd\) {) s
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( ret;) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 124 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 124 M
( file *file;) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( \(\(ret = fd2file\(fd, &file\)\) != 0\) {) s
5 102 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 102 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 102 M
( ret;) s
5 91 M
(    }) s
5 80 M
(    fd_array_acquire\(file\);) s
5 69 M
(    ret = vop_fsync\(file->node\);) s
5 58 M
(    fd_array_release\(file\);) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 47 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
( ret;) s
5 36 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 14 M
(// get file entry in DIR) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (174) 174
%%BeginPageSetup
_S
18 36 translate
/pagenum 174 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 707 M
(file_getdirentry) s
/F-gs-font 10 10 SF
0 setgray
101 707 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 707 M
(int) s
/F-gs-font 10 10 SF
0 setgray
125 707 M
( fd, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 707 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
191 707 M
( dirent *direntp\) {) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 696 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 696 M
( ret;) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 685 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 685 M
( file *file;) s
5 674 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 674 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 674 M
( \(\(ret = fd2file\(fd, &file\)\) != 0\) {) s
5 663 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 663 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 663 M
( ret;) s
5 652 M
(    }) s
5 641 M
(    fd_array_acquire\(file\);) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 619 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 619 M
( iobuf __iob, *iob = iobuf_init\(&__iob, direntp->name, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
395 619 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
431 619 M
(\(direntp->name\), dirent) s
5 608 M
(p->offset\);) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 597 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( \(\(ret = vop_getdirentry\(file->node, iob\)\) == 0\) {) s
5 586 M
(        direntp->offset += iobuf_used\(iob\);) s
5 575 M
(    }) s
5 564 M
(    fd_array_release\(file\);) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 553 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 553 M
( ret;) s
5 542 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 520 M
(// duplicate file) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 509 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 498 M
(file_dup) s
/F-gs-font 10 10 SF
0 setgray
53 498 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 498 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 498 M
( fd1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 498 M
(int) s
/F-gs-font 10 10 SF
0 setgray
131 498 M
( fd2\) {) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 487 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( ret;) s
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 476 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 476 M
( file *file1, *file2;) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 465 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 465 M
( \(\(ret = fd2file\(fd1, &file1\)\) != 0\) {) s
5 454 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 454 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 454 M
( ret;) s
5 443 M
(    }) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 432 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 432 M
( \(\(ret = fd_array_alloc\(fd2, &file2\)\) != 0\) {) s
5 421 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 421 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 421 M
( ret;) s
5 410 M
(    }) s
5 399 M
(    fd_array_dup\(file2, file1\);) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 388 M
( file2->fd;) s
5 377 M
(}) s
5 344 M
([ucore/lab8_result/kern/init/entry.S] ++++++++++++++++++++++++++++++) s
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 333 M
(<mmu.h>) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 322 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 322 M
(<memlayout.h>) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 300 M
(REALLOC) s
/F-gs-font 10 10 SF
0 setgray
95 300 M
(\(x\) \(x - KERNBASE\)) s
5 278 M
(.text) s
5 267 M
(.globl kern_entry) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 256 M
(kern_entry) s
/F-gs-font 10 10 SF
0 setgray
65 256 M
(:) s
5 245 M
(    # load pa of boot pgdir) s
5 234 M
(    movl $REALLOC\(__boot_pgdir\), %eax) s
5 223 M
(    movl %eax, %cr3) s
5 201 M
(    # enable paging) s
5 190 M
(    movl %cr0, %eax) s
5 179 M
(    orl $\(CR0_PE | CR0_PG | CR0_AM | CR0_WP | CR0_NE | CR0_TS | CR0_EM | CR0_MP\), %eax) s
5 168 M
(    andl $~\(CR0_TS | CR0_EM\), %eax) s
5 157 M
(    movl %eax, %cr0) s
5 135 M
(    # update eip) s
5 124 M
(    # now, eip = 0x1.....) s
5 113 M
(    leal next, %eax) s
5 102 M
(    # set eip = KERNBASE + 0x1.....) s
5 91 M
(    jmp *%eax) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 80 M
(next) s
/F-gs-font 10 10 SF
0 setgray
29 80 M
(:) s
5 58 M
(    # unmap va 0 ~ 4M, it's temporary mapping) s
5 47 M
(    xorl %eax, %eax) s
5 36 M
(    movl %eax, __boot_pgdir) s
5 14 M
(    # set ebp, esp) s
5 3 M
(    movl $0x0, %ebp) s
_R
S
%%Page: (175) 175
%%BeginPageSetup
_S
18 36 translate
/pagenum 175 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    # the kernel stack region is from bootstack -- bootstacktop,) s
5 696 M
(    # the kernel stack size is KSTACKSIZE \(8KB\)defined in memlayout.h) s
5 685 M
(    movl $bootstacktop, %esp) s
5 674 M
(    # now kernel stack is ready , call the first C function) s
5 663 M
(    call kern_init) s
5 641 M
(# ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
17 641 M
(should) s
/F-gs-font 10 10 SF
0 setgray
53 641 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
59 641 M
(never) s
/F-gs-font 10 10 SF
0 setgray
89 641 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
95 641 M
(get) s
/F-gs-font 10 10 SF
0 setgray
113 641 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
119 641 M
(here) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 630 M
(spin) s
/F-gs-font 10 10 SF
0 setgray
29 630 M
(:) s
5 619 M
(    jmp spin) s
5 597 M
(.data) s
5 586 M
(.align PGSIZE) s
5 575 M
(    .globl bootstack) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(bootstack) s
/F-gs-font 10 10 SF
0 setgray
59 564 M
(:) s
5 553 M
(    .space KSTACKSIZE) s
5 542 M
(    .globl bootstacktop) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 531 M
(bootstacktop) s
/F-gs-font 10 10 SF
0 setgray
77 531 M
(:) s
5 509 M
(# ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
17 509 M
(kernel) s
/F-gs-font 10 10 SF
0 setgray
53 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
59 509 M
(builtin) s
/F-gs-font 10 10 SF
0 setgray
101 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
107 509 M
(pgdir) s
/F-gs-font 10 10 SF
0 setgray
5 498 M
(# ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
17 498 M
(an) s
/F-gs-font 10 10 SF
0 setgray
29 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
35 498 M
(initial) s
/F-gs-font 10 10 SF
0 setgray
77 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
83 498 M
(page) s
/F-gs-font 10 10 SF
0 setgray
107 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
113 498 M
(directory) s
/F-gs-font 10 10 SF
0 setgray
167 498 M
( \() s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
179 498 M
(Page) s
/F-gs-font 10 10 SF
0 setgray
203 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
209 498 M
(Directory) s
/F-gs-font 10 10 SF
0 setgray
263 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
269 498 M
(Table) s
/F-gs-font 10 10 SF
0 setgray
299 498 M
(, ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
311 498 M
(PDT) s
/F-gs-font 10 10 SF
0 setgray
329 498 M
(\)) s
5 487 M
(# ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
17 487 M
(These) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 487 M
(page) s
/F-gs-font 10 10 SF
0 setgray
77 487 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
83 487 M
(directory) s
/F-gs-font 10 10 SF
0 setgray
137 487 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
143 487 M
(table) s
/F-gs-font 10 10 SF
0 setgray
173 487 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
179 487 M
(and) s
/F-gs-font 10 10 SF
0 setgray
197 487 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
203 487 M
(page) s
/F-gs-font 10 10 SF
0 setgray
227 487 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
233 487 M
(table) s
/F-gs-font 10 10 SF
0 setgray
263 487 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
269 487 M
(can) s
/F-gs-font 10 10 SF
0 setgray
287 487 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
293 487 M
(be) s
/F-gs-font 10 10 SF
0 setgray
305 487 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
311 487 M
(reused) s
/F-gs-font 10 10 SF
0 setgray
347 487 M
(!) s
5 476 M
(.section .data.pgdir) s
5 465 M
(.align PGSIZE) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 454 M
(__boot_pgdir) s
/F-gs-font 10 10 SF
0 setgray
77 454 M
(:) s
5 443 M
(.globl __boot_pgdir) s
5 432 M
(    # map va 0 ~ 4M to pa 0 ~ 4M \(temporary\)) s
5 421 M
(    .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 421 M
(long) s
/F-gs-font 10 10 SF
0 setgray
59 421 M
( REALLOC\(__boot_pt1\) + \(PTE_P | PTE_U | PTE_W\)) s
5 410 M
(    .space \(KERNBASE >> PGSHIFT >> 10 << 2\) - \(. - __boot_pgdir\) # pad to PDE of KERNBASE) s
5 399 M
(    # map va KERNBASE + \(0 ~ 4M\) to pa 0 ~ 4M) s
5 388 M
(    .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 388 M
(long) s
/F-gs-font 10 10 SF
0 setgray
59 388 M
( REALLOC\(__boot_pt1\) + \(PTE_P | PTE_U | PTE_W\)) s
5 377 M
(    .space PGSIZE - \(. - __boot_pgdir\) # pad to PGSIZE) s
5 355 M
(.set i, 0) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 344 M
(__boot_pt1) s
/F-gs-font 10 10 SF
0 setgray
65 344 M
(:) s
5 333 M
(.rept 1024) s
5 322 M
(    .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 322 M
(long) s
/F-gs-font 10 10 SF
0 setgray
59 322 M
( i * PGSIZE + \(PTE_P | PTE_W\)) s
5 311 M
(    .set i, i + 1) s
5 300 M
(.endr) s
5 278 M
([ucore/lab8_result/kern/init/init.c] ++++++++++++++++++++++++++++++) s
5 267 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 267 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 267 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 267 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 256 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 256 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 245 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 245 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 234 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 234 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 234 M
(<console.h>) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 223 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 223 M
(<kdebug.h>) s
/F-gs-font 10 10 SF
0 setgray
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 212 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 212 M
(<picirq.h>) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 201 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 201 M
(<trap.h>) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 190 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 190 M
(<clock.h>) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 179 M
(<intr.h>) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 168 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 168 M
(<pmm.h>) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 157 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 157 M
(<vmm.h>) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 146 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 146 M
(<ide.h>) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 135 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 135 M
(<swap.h>) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 124 M
(<proc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 113 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 113 M
(<fs.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 91 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 91 M
(kern_init) s
/F-gs-font 10 10 SF
0 setgray
83 91 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 91 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 91 M
(\) __attribute__\(\(noreturn\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 69 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 69 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
77 69 M
(lab1_switch_test) s
/F-gs-font 10 10 SF
0 setgray
173 69 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 69 M
(void) s
/F-gs-font 10 10 SF
0 setgray
203 69 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 47 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 47 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 47 M
(t1) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
(\(\)) s
5 36 M
({) s
5 25 M
(        print_stackframe\(\);) s
5 14 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 3 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 3 M
(t2) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
(\(\)) s
_R
S
%%Page: (176) 176
%%BeginPageSetup
_S
18 36 translate
/pagenum 176 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
({) s
5 696 M
(        t1\(\);) s
5 685 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 674 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 674 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 674 M
(t3) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
(\(\)) s
5 663 M
({) s
5 652 M
(        t2\(\);) s
5 641 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 630 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 630 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 630 M
(t4) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
(\(\)) s
5 619 M
({) s
5 608 M
(        t2\(\);) s
5 597 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 564 M
(kern_init) s
/F-gs-font 10 10 SF
0 setgray
59 564 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 564 M
(void) s
/F-gs-font 10 10 SF
0 setgray
89 564 M
(\) {) s
5 553 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 553 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
89 553 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 553 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 553 M
( edata[], end[];) s
5 542 M
(        memset\(edata, 0, end - edata\);) s
5 531 M
(        cons_init\(\);) s
5 520 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 520 M
(const) s
/F-gs-font 10 10 SF
0 setgray
83 520 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 520 M
(char) s
/F-gs-font 10 10 SF
0 setgray
113 520 M
( *message = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
185 520 M
("\(THU.CST\) os is loading ...") s
/F-gs-font 10 10 SF
0 setgray
359 520 M
(;) s
5 509 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 509 M
("%s\\n") s
/F-gs-font 10 10 SF
0 setgray
137 509 M
(, message\);) s
5 498 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 498 M
("bootstack:0x%x, bootstacktop:0x%x\\n") s
/F-gs-font 10 10 SF
0 setgray
323 498 M
(, bootstack, bootstacktop\);) s
5 487 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 487 M
("edata:0x%x, end:0x%x\\n") s
/F-gs-font 10 10 SF
0 setgray
245 487 M
(, edata, end\);) s
5 465 M
(        print_kerninfo\(\);) s
5 454 M
(        print_stackframe\(\);) s
5 432 M
(        grade_backtrace\(\);) s
5 410 M
(        pmm_init\(\);                 ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 410 M
(// init physical memory management) s
/F-gs-font 10 10 SF
0 setgray
5 388 M
(        pic_init\(\);                 ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 388 M
(// init interrupt controller) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(        idt_init\(\);                 ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 377 M
(// init interrupt descriptor table) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(        vmm_init\(\);                 ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 355 M
(// init virtual memory management) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(        sched_init\(\);               ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 344 M
(// init scheduler) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(        proc_init\(\);                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 333 M
(// init process table) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(        ide_init\(\);                 ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 311 M
(// init ide devices) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(        swap_init\(\);                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 300 M
(// init swap) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(        fs_init\(\);                  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 289 M
(// init fs) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(        clock_init\(\);               ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 267 M
(// init clock interrupt) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(        intr_enable\(\);              ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 256 M
(// enable irq interrupt) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 234 M
(//LAB1: CAHLLENGE 1 If you try to do it, uncomment lab1_switch_test\(\)) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 223 M
(// user/kernel mode switch test) s
/F-gs-font 10 10 SF
0 setgray
5 212 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 212 M
(//lab1_switch_test\(\);) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(        cpu_idle\(\);                 ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 190 M
(// run idle process) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 157 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 157 M
(__attribute__) s
/F-gs-font 10 10 SF
0 setgray
113 157 M
(\(\(noinline\)\)) s
5 146 M
(        grade_backtrace2\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 146 M
(int) s
/F-gs-font 10 10 SF
0 setgray
173 146 M
( arg0, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 146 M
(int) s
/F-gs-font 10 10 SF
0 setgray
233 146 M
( arg1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
275 146 M
(int) s
/F-gs-font 10 10 SF
0 setgray
293 146 M
( arg2, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
335 146 M
(int) s
/F-gs-font 10 10 SF
0 setgray
353 146 M
( arg3\) {) s
5 135 M
(                mon_backtrace\(0, NULL, NULL\);) s
5 124 M
(        }) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 102 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 102 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 102 M
(__attribute__) s
/F-gs-font 10 10 SF
0 setgray
113 102 M
(\(\(noinline\)\)) s
5 91 M
(        grade_backtrace1\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
173 91 M
( arg0, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
233 91 M
( arg1\) {) s
5 80 M
(                grade_backtrace2\(arg0, \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
263 80 M
(\)&arg0, arg1, \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
353 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
371 80 M
(\)&arg1\);) s
5 69 M
(        }) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 47 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 47 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 47 M
(__attribute__) s
/F-gs-font 10 10 SF
0 setgray
113 47 M
(\(\(noinline\)\)) s
5 36 M
(        grade_backtrace0\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
173 36 M
( arg0, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
233 36 M
( arg1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
275 36 M
(int) s
/F-gs-font 10 10 SF
0 setgray
293 36 M
( arg2\) {) s
5 25 M
(                grade_backtrace1\(arg0, arg2\);) s
5 14 M
(        }) s
_R
S
%%Page: (177) 177
%%BeginPageSetup
_S
18 36 translate
/pagenum 177 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 696 M
(grade_backtrace) s
/F-gs-font 10 10 SF
0 setgray
95 696 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 696 M
(void) s
/F-gs-font 10 10 SF
0 setgray
125 696 M
(\) {) s
5 685 M
(        grade_backtrace0\(0, \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 685 M
(int) s
/F-gs-font 10 10 SF
0 setgray
197 685 M
(\)kern_init, 0xffff0000\);) s
5 674 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 652 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 652 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 652 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 641 M
(lab1_print_cur_status) s
/F-gs-font 10 10 SF
0 setgray
131 641 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 641 M
(void) s
/F-gs-font 10 10 SF
0 setgray
161 641 M
(\) {) s
5 630 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 630 M
(static) s
/F-gs-font 10 10 SF
0 setgray
89 630 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 630 M
(int) s
/F-gs-font 10 10 SF
0 setgray
113 630 M
( round = 0;) s
5 619 M
(        uint16_t reg1, reg2, reg3, reg4;) s
5 608 M
(        asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 608 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
125 608 M
( \() s
5 597 M
(                        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 597 M
("mov %%cs, %0;") s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(                        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 586 M
("mov %%ds, %1;") s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(                        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 575 M
("mov %%es, %2;") s
/F-gs-font 10 10 SF
0 setgray
5 564 M
(                        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 564 M
("mov %%ss, %3;") s
/F-gs-font 10 10 SF
0 setgray
5 553 M
(                        : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
161 553 M
("=m") s
/F-gs-font 10 10 SF
0 setgray
185 553 M
(\(reg1\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
233 553 M
("=m") s
/F-gs-font 10 10 SF
0 setgray
257 553 M
(\(reg2\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
305 553 M
("=m") s
/F-gs-font 10 10 SF
0 setgray
329 553 M
(\(reg3\), ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
377 553 M
("=m") s
/F-gs-font 10 10 SF
0 setgray
401 553 M
(\(reg4\)\);) s
5 542 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 542 M
("%d: @ring %d\\n") s
/F-gs-font 10 10 SF
0 setgray
197 542 M
(, round, reg1 & 3\);) s
5 531 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 531 M
("%d:  cs = %x\\n") s
/F-gs-font 10 10 SF
0 setgray
197 531 M
(, round, reg1\);) s
5 520 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 520 M
("%d:  ds = %x\\n") s
/F-gs-font 10 10 SF
0 setgray
197 520 M
(, round, reg2\);) s
5 509 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 509 M
("%d:  es = %x\\n") s
/F-gs-font 10 10 SF
0 setgray
197 509 M
(, round, reg3\);) s
5 498 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 498 M
("%d:  ss = %x\\n") s
/F-gs-font 10 10 SF
0 setgray
197 498 M
(, round, reg4\);) s
5 487 M
(        round ++;) s
5 476 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 454 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 443 M
(lab1_switch_to_user) s
/F-gs-font 10 10 SF
0 setgray
119 443 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 443 M
(void) s
/F-gs-font 10 10 SF
0 setgray
149 443 M
(\) {) s
5 432 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 432 M
(//LAB1 CHALLENGE 1 : TODO) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 399 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 399 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 388 M
(lab1_switch_to_kernel) s
/F-gs-font 10 10 SF
0 setgray
131 388 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 388 M
(void) s
/F-gs-font 10 10 SF
0 setgray
161 388 M
(\) {) s
5 377 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 377 M
(//LAB1 CHALLENGE 1 :  TODO) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 344 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 344 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 344 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 333 M
(lab1_switch_test) s
/F-gs-font 10 10 SF
0 setgray
101 333 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 333 M
(void) s
/F-gs-font 10 10 SF
0 setgray
131 333 M
(\) {) s
5 322 M
(        lab1_print_cur_status\(\);) s
5 311 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 311 M
("+++ switch to  user  mode +++\\n") s
/F-gs-font 10 10 SF
0 setgray
299 311 M
(\);) s
5 300 M
(        lab1_switch_to_user\(\);) s
5 289 M
(        lab1_print_cur_status\(\);) s
5 278 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 278 M
("+++ switch to kernel mode +++\\n") s
/F-gs-font 10 10 SF
0 setgray
299 278 M
(\);) s
5 267 M
(        lab1_switch_to_kernel\(\);) s
5 256 M
(        lab1_print_cur_status\(\);) s
5 245 M
(}) s
5 223 M
([ucore/lab8_result/kern/syscall/syscall.c] ++++++++++++++++++++++++++++++) s
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 212 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 212 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 201 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 201 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 190 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 190 M
(<proc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 179 M
(<syscall.h>) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 168 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 168 M
(<trap.h>) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 157 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 157 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 146 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 146 M
(<pmm.h>) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 135 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 135 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 124 M
(<clock.h>) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 113 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 113 M
(<stat.h>) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 102 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 102 M
(<dirent.h>) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 91 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 91 M
(<sysfile.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 69 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 58 M
(sys_exit) s
/F-gs-font 10 10 SF
0 setgray
53 58 M
(\(uint32_t arg[]\) {) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 47 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( error_code = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 47 M
(int) s
/F-gs-font 10 10 SF
0 setgray
155 47 M
(\)arg[0];) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 36 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 36 M
( do_exit\(error_code\);) s
5 25 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 3 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (178) 178
%%BeginPageSetup
_S
18 36 translate
/pagenum 178 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 707 M
(sys_fork) s
/F-gs-font 10 10 SF
0 setgray
53 707 M
(\(uint32_t arg[]\) {) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 696 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 696 M
( trapframe *tf = current->tf;) s
5 685 M
(    uintptr_t stack = tf->tf_esp;) s
5 674 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 674 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 674 M
( do_fork\(0, stack, tf\);) s
5 663 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 641 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 641 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 630 M
(sys_wait) s
/F-gs-font 10 10 SF
0 setgray
53 630 M
(\(uint32_t arg[]\) {) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 619 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( pid = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 619 M
(int) s
/F-gs-font 10 10 SF
0 setgray
113 619 M
(\)arg[0];) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 608 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 608 M
( *store = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 608 M
(int) s
/F-gs-font 10 10 SF
0 setgray
131 608 M
( *\)arg[1];) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 597 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 597 M
( do_wait\(pid, store\);) s
5 586 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 564 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 564 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 553 M
(sys_exec) s
/F-gs-font 10 10 SF
0 setgray
53 553 M
(\(uint32_t arg[]\) {) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 542 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 542 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 542 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 542 M
( *name = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 542 M
(const) s
/F-gs-font 10 10 SF
0 setgray
179 542 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 542 M
(char) s
/F-gs-font 10 10 SF
0 setgray
209 542 M
( *\)arg[0];) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 531 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( argc = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 531 M
(int) s
/F-gs-font 10 10 SF
0 setgray
119 531 M
(\)arg[1];) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 520 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 520 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 520 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 520 M
( **argv = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 520 M
(const) s
/F-gs-font 10 10 SF
0 setgray
185 520 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 520 M
(char) s
/F-gs-font 10 10 SF
0 setgray
215 520 M
( **\)arg[2];) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 509 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
( do_execve\(name, argc, argv\);) s
5 498 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 476 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 476 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 476 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 465 M
(sys_yield) s
/F-gs-font 10 10 SF
0 setgray
59 465 M
(\(uint32_t arg[]\) {) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 454 M
( do_yield\(\);) s
5 443 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 421 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 421 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 410 M
(sys_kill) s
/F-gs-font 10 10 SF
0 setgray
53 410 M
(\(uint32_t arg[]\) {) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 399 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 399 M
( pid = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 399 M
(int) s
/F-gs-font 10 10 SF
0 setgray
113 399 M
(\)arg[0];) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 388 M
( do_kill\(pid\);) s
5 377 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 355 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 355 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 355 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 344 M
(sys_getpid) s
/F-gs-font 10 10 SF
0 setgray
65 344 M
(\(uint32_t arg[]\) {) s
5 333 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 333 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 333 M
( current->pid;) s
5 322 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 300 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 300 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 300 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 289 M
(sys_putc) s
/F-gs-font 10 10 SF
0 setgray
53 289 M
(\(uint32_t arg[]\) {) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 278 M
( c = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 278 M
(\)arg[0];) s
5 267 M
(    cputchar\(c\);) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 256 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 256 M
( 0;) s
5 245 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 223 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 212 M
(sys_pgdir) s
/F-gs-font 10 10 SF
0 setgray
59 212 M
(\(uint32_t arg[]\) {) s
5 201 M
(    print_pgdir\(\);) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 190 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 190 M
( 0;) s
5 179 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 157 M
( uint32_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 146 M
(sys_gettime) s
/F-gs-font 10 10 SF
0 setgray
71 146 M
(\(uint32_t arg[]\) {) s
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 135 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 135 M
( \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
95 135 M
(\)ticks;) s
5 124 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 113 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( uint32_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 102 M
(sys_lab6_set_priority) s
/F-gs-font 10 10 SF
0 setgray
131 102 M
(\(uint32_t arg[]\)) s
5 91 M
({) s
5 80 M
(    uint32_t priority = \(uint32_t\)arg[0];) s
5 69 M
(    lab6_set_priority\(priority\);) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 58 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 58 M
( 0;) s
5 47 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 25 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 14 M
(sys_sleep) s
/F-gs-font 10 10 SF
0 setgray
59 14 M
(\(uint32_t arg[]\) {) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 3 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 3 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 3 M
( time = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 3 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
203 3 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
209 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
227 3 M
(\)arg[0];) s
_R
S
%%Page: (179) 179
%%BeginPageSetup
_S
18 36 translate
/pagenum 179 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 707 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
( do_sleep\(time\);) s
5 696 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 674 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 674 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 674 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 663 M
(sys_open) s
/F-gs-font 10 10 SF
0 setgray
53 663 M
(\(uint32_t arg[]\) {) s
5 652 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 652 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 652 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 652 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 652 M
( *path = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 652 M
(const) s
/F-gs-font 10 10 SF
0 setgray
179 652 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 652 M
(char) s
/F-gs-font 10 10 SF
0 setgray
209 652 M
( *\)arg[0];) s
5 641 M
(    uint32_t open_flags = \(uint32_t\)arg[1];) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 630 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 630 M
( sysfile_open\(path, open_flags\);) s
5 619 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 597 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 597 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 586 M
(sys_close) s
/F-gs-font 10 10 SF
0 setgray
59 586 M
(\(uint32_t arg[]\) {) s
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 575 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( fd = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 575 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 575 M
(\)arg[0];) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 564 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 564 M
( sysfile_close\(fd\);) s
5 553 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 531 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 531 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 520 M
(sys_read) s
/F-gs-font 10 10 SF
0 setgray
53 520 M
(\(uint32_t arg[]\) {) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 509 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( fd = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 509 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 509 M
(\)arg[0];) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 498 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 498 M
( *base = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 498 M
(void) s
/F-gs-font 10 10 SF
0 setgray
137 498 M
( *\)arg[1];) s
5 487 M
(    size_t len = \(size_t\)arg[2];) s
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 476 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 476 M
( sysfile_read\(fd, base, len\);) s
5 465 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 432 M
(sys_write) s
/F-gs-font 10 10 SF
0 setgray
59 432 M
(\(uint32_t arg[]\) {) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 421 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( fd = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 421 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 421 M
(\)arg[0];) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 410 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 410 M
( *base = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 410 M
(void) s
/F-gs-font 10 10 SF
0 setgray
137 410 M
( *\)arg[1];) s
5 399 M
(    size_t len = \(size_t\)arg[2];) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 388 M
( sysfile_write\(fd, base, len\);) s
5 377 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 355 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 355 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 355 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 344 M
(sys_seek) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
(\(uint32_t arg[]\) {) s
5 333 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 333 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 333 M
( fd = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 333 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 333 M
(\)arg[0];) s
5 322 M
(    off_t pos = \(off_t\)arg[1];) s
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 311 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 311 M
( whence = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 311 M
(int) s
/F-gs-font 10 10 SF
0 setgray
131 311 M
(\)arg[2];) s
5 300 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 300 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 300 M
( sysfile_seek\(fd, pos, whence\);) s
5 289 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 267 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 256 M
(sys_fstat) s
/F-gs-font 10 10 SF
0 setgray
59 256 M
(\(uint32_t arg[]\) {) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 245 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( fd = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 245 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 245 M
(\)arg[0];) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 234 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 234 M
( stat *stat = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 234 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
191 234 M
( stat *\)arg[1];) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 223 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 223 M
( sysfile_fstat\(fd, stat\);) s
5 212 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 190 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 190 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 190 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 179 M
(sys_fsync) s
/F-gs-font 10 10 SF
0 setgray
59 179 M
(\(uint32_t arg[]\) {) s
5 168 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 168 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 168 M
( fd = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 168 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 168 M
(\)arg[0];) s
5 157 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 157 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 157 M
( sysfile_fsync\(fd\);) s
5 146 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 124 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 113 M
(sys_getcwd) s
/F-gs-font 10 10 SF
0 setgray
65 113 M
(\(uint32_t arg[]\) {) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 102 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 102 M
( *buf = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 102 M
(char) s
/F-gs-font 10 10 SF
0 setgray
131 102 M
( *\)arg[0];) s
5 91 M
(    size_t len = \(size_t\)arg[1];) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 80 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 80 M
( sysfile_getcwd\(buf, len\);) s
5 69 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 47 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 47 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 47 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 36 M
(sys_getdirentry) s
/F-gs-font 10 10 SF
0 setgray
95 36 M
(\(uint32_t arg[]\) {) s
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( fd = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 25 M
(\)arg[0];) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
( dirent *direntp = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
221 14 M
( dirent *\)arg[1];) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 3 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 3 M
( sysfile_getdirentry\(fd, direntp\);) s
_R
S
%%Page: (180) 180
%%BeginPageSetup
_S
18 36 translate
/pagenum 180 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 685 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 685 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 674 M
(sys_dup) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
(\(uint32_t arg[]\) {) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 663 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( fd1 = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 663 M
(int) s
/F-gs-font 10 10 SF
0 setgray
113 663 M
(\)arg[0];) s
5 652 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 652 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 652 M
( fd2 = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 652 M
(int) s
/F-gs-font 10 10 SF
0 setgray
113 652 M
(\)arg[1];) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 641 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 641 M
( sysfile_dup\(fd1, fd2\);) s
5 630 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 608 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 608 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
47 608 M
(int) s
/F-gs-font 10 10 SF
0 setgray
65 608 M
( \(*syscalls[]\)\(uint32_t arg[]\) = {) s
5 597 M
(    [SYS_exit]              sys_exit,) s
5 586 M
(    [SYS_fork]              sys_fork,) s
5 575 M
(    [SYS_wait]              sys_wait,) s
5 564 M
(    [SYS_exec]              sys_exec,) s
5 553 M
(    [SYS_yield]             sys_yield,) s
5 542 M
(    [SYS_kill]              sys_kill,) s
5 531 M
(    [SYS_getpid]            sys_getpid,) s
5 520 M
(    [SYS_putc]              sys_putc,) s
5 509 M
(    [SYS_pgdir]             sys_pgdir,) s
5 498 M
(    [SYS_gettime]           sys_gettime,) s
5 487 M
(    [SYS_lab6_set_priority] sys_lab6_set_priority,) s
5 476 M
(    [SYS_sleep]             sys_sleep,) s
5 465 M
(    [SYS_open]              sys_open,) s
5 454 M
(    [SYS_close]             sys_close,) s
5 443 M
(    [SYS_read]              sys_read,) s
5 432 M
(    [SYS_write]             sys_write,) s
5 421 M
(    [SYS_seek]              sys_seek,) s
5 410 M
(    [SYS_fstat]             sys_fstat,) s
5 399 M
(    [SYS_fsync]             sys_fsync,) s
5 388 M
(    [SYS_getcwd]            sys_getcwd,) s
5 377 M
(    [SYS_getdirentry]       sys_getdirentry,) s
5 366 M
(    [SYS_dup]               sys_dup,) s
5 355 M
(};) s
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 333 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 333 M
(NUM_SYSCALLS) s
/F-gs-font 10 10 SF
0 setgray
125 333 M
(        \(\(sizeof\(syscalls\)\) / \(sizeof\(syscalls[0]\)\)\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 311 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 300 M
(syscall) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 300 M
(void) s
/F-gs-font 10 10 SF
0 setgray
77 300 M
(\) {) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 289 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 289 M
( trapframe *tf = current->tf;) s
5 278 M
(    uint32_t arg[5];) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 267 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 267 M
( num = tf->tf_regs.reg_eax;) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 256 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 256 M
( \(num >= 0 && num < NUM_SYSCALLS\) {) s
5 245 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 245 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 245 M
( \(syscalls[num] != NULL\) {) s
5 234 M
(            arg[0] = tf->tf_regs.reg_edx;) s
5 223 M
(            arg[1] = tf->tf_regs.reg_ecx;) s
5 212 M
(            arg[2] = tf->tf_regs.reg_ebx;) s
5 201 M
(            arg[3] = tf->tf_regs.reg_edi;) s
5 190 M
(            arg[4] = tf->tf_regs.reg_esi;) s
5 179 M
(            tf->tf_regs.reg_eax = syscalls[num]\(arg\);) s
5 168 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 168 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 168 M
( ;) s
5 157 M
(        }) s
5 146 M
(    }) s
5 135 M
(    print_trapframe\(tf\);) s
5 124 M
(    panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 124 M
("undefined syscall %d, pid = %d, name = %s.\\n") s
/F-gs-font 10 10 SF
0 setgray
341 124 M
(,) s
5 113 M
(            num, current->pid, current->name\);) s
5 102 M
(}) s
5 80 M
([ucore/lab8_result/kern/syscall/syscall.h] ++++++++++++++++++++++++++++++) s
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 69 M
(__KERN_SYSCALL_SYSCALL_H__) s
/F-gs-font 10 10 SF
0 setgray
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 58 M
(__KERN_SYSCALL_SYSCALL_H__) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 36 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 36 M
(syscall) s
/F-gs-font 10 10 SF
0 setgray
77 36 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 36 M
(void) s
/F-gs-font 10 10 SF
0 setgray
107 36 M
(\);) s
5 14 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 14 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 14 M
(/* !__KERN_SYSCALL_SYSCALL_H__ */) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (181) 181
%%BeginPageSetup
_S
18 36 translate
/pagenum 181 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
([ucore/lab8_result/kern/sync/monitor.c] ++++++++++++++++++++++++++++++) s
5 696 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 696 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 696 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 696 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 685 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 685 M
(<monitor.h>) s
/F-gs-font 10 10 SF
0 setgray
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 674 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 674 M
(<kmalloc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 663 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 663 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 630 M
(// Initialize monitor.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 619 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 619 M
(     ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 608 M
(monitor_init) s
/F-gs-font 10 10 SF
0 setgray
77 608 M
( \(monitor_t * mtp, size_t num_cv\) {) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 597 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( i;) s
5 586 M
(    assert\(num_cv>0\);) s
5 575 M
(    mtp->next_count = 0;) s
5 564 M
(    mtp->cv = NULL;) s
5 553 M
(    sem_init\(&\(mtp->mutex\), 1\); ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 553 M
(//unlocked) s
/F-gs-font 10 10 SF
0 setgray
5 542 M
(    sem_init\(&\(mtp->next\), 0\);) s
5 531 M
(    mtp->cv =\(condvar_t *\) kmalloc\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
215 531 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
251 531 M
(\(condvar_t\)*num_cv\);) s
5 520 M
(    assert\(mtp->cv!=NULL\);) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 509 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
(\(i=0; i<num_cv; i++\){) s
5 498 M
(        mtp->cv[i].count=0;) s
5 487 M
(        sem_init\(&\(mtp->cv[i].sem\),0\);) s
5 476 M
(        mtp->cv[i].owner=mtp;) s
5 465 M
(    }) s
5 454 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 432 M
(// Unlock one of threads waiting on the condition variable. ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 421 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 421 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 410 M
(cond_signal) s
/F-gs-font 10 10 SF
0 setgray
71 410 M
( \(condvar_t *cvp\) {) s
5 399 M
(   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
23 399 M
(//LAB7 EXERCISE1: YOUR CODE) s
/F-gs-font 10 10 SF
0 setgray
5 388 M
(   cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 388 M
("cond_signal begin: cvp %x, cvp->count %d, cvp->owner->next_count %d\\n") s
/F-gs-font 10 10 SF
0 setgray
497 388 M
(, cvp, cvp->) s
5 377 M
(count, cvp->owner->next_count\);  ) s
5 366 M
(  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
17 366 M
(/*) s
5 355 M
(   *      cond_signal\(cv\) {) s
5 344 M
(   *          if\(cv.count>0\) {) s
5 333 M
(   *             mt.next_count ++;) s
5 322 M
(   *             signal\(cv.sem\);) s
5 311 M
(   *             wait\(mt.next\);) s
5 300 M
(   *             mt.next_count--;) s
5 289 M
(   *          }) s
5 278 M
(   *       }) s
5 267 M
(   */) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 256 M
(if) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
(\(cvp->count>0\) {) s
5 245 M
(        cvp->owner->next_count ++;) s
5 234 M
(        up\(&\(cvp->sem\)\);) s
5 223 M
(        down\(&\(cvp->owner->next\)\);) s
5 212 M
(        cvp->owner->next_count --;) s
5 201 M
(      }) s
5 190 M
(   cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 190 M
("cond_signal end: cvp %x, cvp->count %d, cvp->owner->next_count %d\\n") s
/F-gs-font 10 10 SF
0 setgray
485 190 M
(, cvp, cvp->co) s
5 179 M
(unt, cvp->owner->next_count\);) s
5 168 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 146 M
(// Suspend calling thread on a condition variable waiting for condition Atomically unlocks ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 135 M
(// mutex and suspends calling thread on conditional variable after waking up locks mutex. Noti) s
5 124 M
(ce: mp is mutex semaphore for monitor's procedures) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 113 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 102 M
(cond_wait) s
/F-gs-font 10 10 SF
0 setgray
59 102 M
( \(condvar_t *cvp\) {) s
5 91 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 91 M
(//LAB7 EXERCISE1: YOUR CODE) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 80 M
("cond_wait begin:  cvp %x, cvp->count %d, cvp->owner->next_count %d\\n") s
/F-gs-font 10 10 SF
0 setgray
497 80 M
(, cvp, cvp->) s
5 69 M
(count, cvp->owner->next_count\);) s
5 58 M
(   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
23 58 M
(/*) s
5 47 M
(    *         cv.count ++;) s
5 36 M
(    *         if\(mt.next_count>0\)) s
5 25 M
(    *            signal\(mt.next\)) s
5 14 M
(    *         else) s
5 3 M
(    *            signal\(mt.mutex\);) s
_R
S
%%Page: (182) 182
%%BeginPageSetup
_S
18 36 translate
/pagenum 182 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
(    *         wait\(cv.sem\);) s
5 696 M
(    *         cv.count --;) s
5 685 M
(    */) s
/F-gs-font 10 10 SF
0 setgray
5 674 M
(      cvp->count++;) s
5 663 M
(      ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
41 663 M
(if) s
/F-gs-font 10 10 SF
0 setgray
53 663 M
(\(cvp->owner->next_count > 0\)) s
5 652 M
(         up\(&\(cvp->owner->next\)\);) s
5 641 M
(      ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
41 641 M
(else) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(         up\(&\(cvp->owner->mutex\)\);) s
5 619 M
(      down\(&\(cvp->sem\)\);) s
5 608 M
(      cvp->count --;) s
5 597 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 597 M
("cond_wait end:  cvp %x, cvp->count %d, cvp->owner->next_count %d\\n") s
/F-gs-font 10 10 SF
0 setgray
485 597 M
(, cvp, cvp->co) s
5 586 M
(unt, cvp->owner->next_count\);) s
5 575 M
(}) s
5 564 M
([ucore/lab8_result/kern/sync/wait.h] ++++++++++++++++++++++++++++++) s
5 553 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 553 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 553 M
(__KERN_SYNC_WAIT_H__) s
/F-gs-font 10 10 SF
0 setgray
5 542 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 542 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 542 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 542 M
(__KERN_SYNC_WAIT_H__) s
/F-gs-font 10 10 SF
0 setgray
5 520 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 520 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 520 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 520 M
(<list.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 498 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 498 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 498 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 498 M
( {) s
5 487 M
(    list_entry_t wait_head;) s
5 476 M
(} wait_queue_t;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( proc_struct;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 432 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 432 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 432 M
( {) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 421 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 421 M
( proc_struct *proc;) s
5 410 M
(    uint32_t wakeup_flags;) s
5 399 M
(    wait_queue_t *wait_queue;) s
5 388 M
(    list_entry_t wait_link;) s
5 377 M
(} wait_t;) s
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 355 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 355 M
(le2wait) s
/F-gs-font 10 10 SF
0 setgray
95 355 M
(\(le, member\)         \\) s
5 344 M
(    to_struct\(\(le\), wait_t, member\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 322 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 322 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 322 M
(wait_init) s
/F-gs-font 10 10 SF
0 setgray
89 322 M
(\(wait_t *wait, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 322 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
215 322 M
( proc_struct *proc\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 311 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 311 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 311 M
(wait_queue_init) s
/F-gs-font 10 10 SF
0 setgray
125 311 M
(\(wait_queue_t *queue\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 300 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 300 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 300 M
(wait_queue_add) s
/F-gs-font 10 10 SF
0 setgray
119 300 M
(\(wait_queue_t *queue, wait_t *wait\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 289 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 289 M
(wait_queue_del) s
/F-gs-font 10 10 SF
0 setgray
119 289 M
(\(wait_queue_t *queue, wait_t *wait\);) s
5 267 M
(wait_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 267 M
(wait_queue_next) s
/F-gs-font 10 10 SF
0 setgray
143 267 M
(\(wait_queue_t *queue, wait_t *wait\);) s
5 256 M
(wait_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 256 M
(wait_queue_prev) s
/F-gs-font 10 10 SF
0 setgray
143 256 M
(\(wait_queue_t *queue, wait_t *wait\);) s
5 245 M
(wait_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 245 M
(wait_queue_first) s
/F-gs-font 10 10 SF
0 setgray
149 245 M
(\(wait_queue_t *queue\);) s
5 234 M
(wait_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 234 M
(wait_queue_last) s
/F-gs-font 10 10 SF
0 setgray
143 234 M
(\(wait_queue_t *queue\);) s
5 212 M
(bool ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 212 M
(wait_queue_empty) s
/F-gs-font 10 10 SF
0 setgray
131 212 M
(\(wait_queue_t *queue\);) s
5 201 M
(bool ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 201 M
(wait_in_queue) s
/F-gs-font 10 10 SF
0 setgray
113 201 M
(\(wait_t *wait\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 190 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 190 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 190 M
(wakeup_wait) s
/F-gs-font 10 10 SF
0 setgray
101 190 M
(\(wait_queue_t *queue, wait_t *wait, uint32_t wakeup_flags, bool del\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 179 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 179 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 179 M
(wakeup_first) s
/F-gs-font 10 10 SF
0 setgray
107 179 M
(\(wait_queue_t *queue, uint32_t wakeup_flags, bool del\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 168 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 168 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 168 M
(wakeup_queue) s
/F-gs-font 10 10 SF
0 setgray
107 168 M
(\(wait_queue_t *queue, uint32_t wakeup_flags, bool del\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 146 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 146 M
(wait_current_set) s
/F-gs-font 10 10 SF
0 setgray
131 146 M
(\(wait_queue_t *queue, wait_t *wait, uint32_t wait_state\);) s
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 124 M
(wait_current_del) s
/F-gs-font 10 10 SF
0 setgray
149 124 M
(\(queue, wait\)                                       \\) s
5 113 M
(    do {                                                                    \\) s
5 102 M
(        if \(wait_in_queue\(wait\)\) {                                          \\) s
5 91 M
(            wait_queue_del\(queue, wait\);                                    \\) s
5 80 M
(        }                                                                   \\) s
5 69 M
(    } while \(0\)) s
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 47 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 47 M
(/* !__KERN_SYNC_WAIT_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
([ucore/lab8_result/kern/sync/wait.c] ++++++++++++++++++++++++++++++) s
5 14 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 14 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 14 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 14 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 3 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 3 M
(<list.h>) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (183) 183
%%BeginPageSetup
_S
18 36 translate
/pagenum 183 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 707 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 707 M
(<sync.h>) s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 696 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 696 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 696 M
(<wait.h>) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 685 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 685 M
(<proc.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 652 M
(wait_init) s
/F-gs-font 10 10 SF
0 setgray
59 652 M
(\(wait_t *wait, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 652 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
185 652 M
( proc_struct *proc\) {) s
5 641 M
(    wait->proc = proc;) s
5 630 M
(    wait->wakeup_flags = WT_INTERRUPTED;) s
5 619 M
(    list_init\(&\(wait->wait_link\)\);) s
5 608 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 586 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 575 M
(wait_queue_init) s
/F-gs-font 10 10 SF
0 setgray
95 575 M
(\(wait_queue_t *queue\) {) s
5 564 M
(    list_init\(&\(queue->wait_head\)\);) s
5 553 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 531 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 520 M
(wait_queue_add) s
/F-gs-font 10 10 SF
0 setgray
89 520 M
(\(wait_queue_t *queue, wait_t *wait\) {) s
5 509 M
(    assert\(list_empty\(&\(wait->wait_link\)\) && wait->proc != NULL\);) s
5 498 M
(    wait->wait_queue = queue;) s
5 487 M
(    list_add_before\(&\(queue->wait_head\), &\(wait->wait_link\)\);) s
5 476 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 443 M
(wait_queue_del) s
/F-gs-font 10 10 SF
0 setgray
89 443 M
(\(wait_queue_t *queue, wait_t *wait\) {) s
5 432 M
(    assert\(!list_empty\(&\(wait->wait_link\)\) && wait->wait_queue == queue\);) s
5 421 M
(    list_del_init\(&\(wait->wait_link\)\);) s
5 410 M
(}) s
5 388 M
(wait_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 377 M
(wait_queue_next) s
/F-gs-font 10 10 SF
0 setgray
95 377 M
(\(wait_queue_t *queue, wait_t *wait\) {) s
5 366 M
(    assert\(!list_empty\(&\(wait->wait_link\)\) && wait->wait_queue == queue\);) s
5 355 M
(    list_entry_t *le = list_next\(&\(wait->wait_link\)\);) s
5 344 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 344 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 344 M
( \(le != &\(queue->wait_head\)\) {) s
5 333 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 333 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 333 M
( le2wait\(le, wait_link\);) s
5 322 M
(    }) s
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 311 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 311 M
( NULL;) s
5 300 M
(}) s
5 278 M
(wait_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 267 M
(wait_queue_prev) s
/F-gs-font 10 10 SF
0 setgray
95 267 M
(\(wait_queue_t *queue, wait_t *wait\) {) s
5 256 M
(    assert\(!list_empty\(&\(wait->wait_link\)\) && wait->wait_queue == queue\);) s
5 245 M
(    list_entry_t *le = list_prev\(&\(wait->wait_link\)\);) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 234 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 234 M
( \(le != &\(queue->wait_head\)\) {) s
5 223 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 223 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 223 M
( le2wait\(le, wait_link\);) s
5 212 M
(    }) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 201 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 201 M
( NULL;) s
5 190 M
(}) s
5 168 M
(wait_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 157 M
(wait_queue_first) s
/F-gs-font 10 10 SF
0 setgray
101 157 M
(\(wait_queue_t *queue\) {) s
5 146 M
(    list_entry_t *le = list_next\(&\(queue->wait_head\)\);) s
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 135 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 135 M
( \(le != &\(queue->wait_head\)\) {) s
5 124 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 124 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 124 M
( le2wait\(le, wait_link\);) s
5 113 M
(    }) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 102 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 102 M
( NULL;) s
5 91 M
(}) s
5 69 M
(wait_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 58 M
(wait_queue_last) s
/F-gs-font 10 10 SF
0 setgray
95 58 M
(\(wait_queue_t *queue\) {) s
5 47 M
(    list_entry_t *le = list_prev\(&\(queue->wait_head\)\);) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 36 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 36 M
( \(le != &\(queue->wait_head\)\) {) s
5 25 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 25 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 25 M
( le2wait\(le, wait_link\);) s
5 14 M
(    }) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 3 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 3 M
( NULL;) s
_R
S
%%Page: (184) 184
%%BeginPageSetup
_S
18 36 translate
/pagenum 184 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(}) s
5 685 M
(bool) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 674 M
(wait_queue_empty) s
/F-gs-font 10 10 SF
0 setgray
101 674 M
(\(wait_queue_t *queue\) {) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 663 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 663 M
( list_empty\(&\(queue->wait_head\)\);) s
5 652 M
(}) s
5 630 M
(bool) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 619 M
(wait_in_queue) s
/F-gs-font 10 10 SF
0 setgray
83 619 M
(\(wait_t *wait\) {) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 608 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 608 M
( !list_empty\(&\(wait->wait_link\)\);) s
5 597 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 564 M
(wakeup_wait) s
/F-gs-font 10 10 SF
0 setgray
71 564 M
(\(wait_queue_t *queue, wait_t *wait, uint32_t wakeup_flags, bool del\) {) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 553 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 553 M
( \(del\) {) s
5 542 M
(        wait_queue_del\(queue, wait\);) s
5 531 M
(    }) s
5 520 M
(    wait->wakeup_flags = wakeup_flags;) s
5 509 M
(    wakeup_proc\(wait->proc\);) s
5 498 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 476 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 465 M
(wakeup_first) s
/F-gs-font 10 10 SF
0 setgray
77 465 M
(\(wait_queue_t *queue, uint32_t wakeup_flags, bool del\) {) s
5 454 M
(    wait_t *wait;) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 443 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
( \(\(wait = wait_queue_first\(queue\)\) != NULL\) {) s
5 432 M
(        wakeup_wait\(queue, wait, wakeup_flags, del\);) s
5 421 M
(    }) s
5 410 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 388 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 377 M
(wakeup_queue) s
/F-gs-font 10 10 SF
0 setgray
77 377 M
(\(wait_queue_t *queue, uint32_t wakeup_flags, bool del\) {) s
5 366 M
(    wait_t *wait;) s
5 355 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 355 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 355 M
( \(\(wait = wait_queue_first\(queue\)\) != NULL\) {) s
5 344 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 344 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 344 M
( \(del\) {) s
5 333 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 333 M
(do) s
/F-gs-font 10 10 SF
0 setgray
89 333 M
( {) s
5 322 M
(                wakeup_wait\(queue, wait, wakeup_flags, 1\);) s
5 311 M
(            } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
89 311 M
(while) s
/F-gs-font 10 10 SF
0 setgray
119 311 M
( \(\(wait = wait_queue_first\(queue\)\) != NULL\);) s
5 300 M
(        }) s
5 289 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 289 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 289 M
( {) s
5 278 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 278 M
(do) s
/F-gs-font 10 10 SF
0 setgray
89 278 M
( {) s
5 267 M
(                wakeup_wait\(queue, wait, wakeup_flags, 0\);) s
5 256 M
(            } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
89 256 M
(while) s
/F-gs-font 10 10 SF
0 setgray
119 256 M
( \(\(wait = wait_queue_next\(queue, wait\)\) != NULL\);) s
5 245 M
(        }) s
5 234 M
(    }) s
5 223 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 201 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 190 M
(wait_current_set) s
/F-gs-font 10 10 SF
0 setgray
101 190 M
(\(wait_queue_t *queue, wait_t *wait, uint32_t wait_state\) {) s
5 179 M
(    assert\(current != NULL\);) s
5 168 M
(    wait_init\(wait, current\);) s
5 157 M
(    current->state = PROC_SLEEPING;) s
5 146 M
(    current->wait_state = wait_state;) s
5 135 M
(    wait_queue_add\(queue, wait\);) s
5 124 M
(}) s
5 102 M
([ucore/lab8_result/kern/sync/sem.c] ++++++++++++++++++++++++++++++) s
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 91 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 91 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 80 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 80 M
(<wait.h>) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 69 M
(<atomic.h>) s
/F-gs-font 10 10 SF
0 setgray
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 58 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 58 M
(<kmalloc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 47 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 47 M
(<sem.h>) s
/F-gs-font 10 10 SF
0 setgray
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 36 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 36 M
(<proc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 25 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 25 M
(<sync.h>) s
/F-gs-font 10 10 SF
0 setgray
5 14 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 14 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 14 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 14 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (185) 185
%%BeginPageSetup
_S
18 36 translate
/pagenum 185 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 696 M
(sem_init) s
/F-gs-font 10 10 SF
0 setgray
53 696 M
(\(semaphore_t *sem, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 696 M
(int) s
/F-gs-font 10 10 SF
0 setgray
185 696 M
( value\) {) s
5 685 M
(    sem->value = value;) s
5 674 M
(    wait_queue_init\(&\(sem->wait_queue\)\);) s
5 663 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 641 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 641 M
( __noinline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 641 M
(void) s
/F-gs-font 10 10 SF
0 setgray
137 641 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
143 641 M
(__up) s
/F-gs-font 10 10 SF
0 setgray
167 641 M
(\(semaphore_t *sem, uint32_t wait_state\) {) s
5 630 M
(    bool intr_flag;) s
5 619 M
(    local_intr_save\(intr_flag\);) s
5 608 M
(    {) s
5 597 M
(        wait_t *wait;) s
5 586 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 586 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 586 M
( \(\(wait = wait_queue_first\(&\(sem->wait_queue\)\)\) == NULL\) {) s
5 575 M
(            sem->value ++;) s
5 564 M
(        }) s
5 553 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 553 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 553 M
( {) s
5 542 M
(            assert\(wait->proc->wait_state == wait_state\);) s
5 531 M
(            wakeup_wait\(&\(sem->wait_queue\), wait, wait_state, 1\);) s
5 520 M
(        }) s
5 509 M
(    }) s
5 498 M
(    local_intr_restore\(intr_flag\);) s
5 487 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 465 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 465 M
( __noinline uint32_t ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
167 465 M
(__down) s
/F-gs-font 10 10 SF
0 setgray
203 465 M
(\(semaphore_t *sem, uint32_t wait_state\) {) s
5 454 M
(    bool intr_flag;) s
5 443 M
(    local_intr_save\(intr_flag\);) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 432 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 432 M
( \(sem->value > 0\) {) s
5 421 M
(        sem->value --;) s
5 410 M
(        local_intr_restore\(intr_flag\);) s
5 399 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 399 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 399 M
( 0;) s
5 388 M
(    }) s
5 377 M
(    wait_t __wait, *wait = &__wait;) s
5 366 M
(    wait_current_set\(&\(sem->wait_queue\), wait, wait_state\);) s
5 355 M
(    local_intr_restore\(intr_flag\);) s
5 333 M
(    schedule\(\);) s
5 311 M
(    local_intr_save\(intr_flag\);) s
5 300 M
(    wait_current_del\(&\(sem->wait_queue\), wait\);) s
5 289 M
(    local_intr_restore\(intr_flag\);) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 267 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( \(wait->wakeup_flags != wait_state\) {) s
5 256 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 256 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 256 M
( wait->wakeup_flags;) s
5 245 M
(    }) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 234 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 234 M
( 0;) s
5 223 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 201 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 190 M
(up) s
/F-gs-font 10 10 SF
0 setgray
17 190 M
(\(semaphore_t *sem\) {) s
5 179 M
(    __up\(sem, WT_KSEM\);) s
5 168 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 135 M
(down) s
/F-gs-font 10 10 SF
0 setgray
29 135 M
(\(semaphore_t *sem\) {) s
5 124 M
(    uint32_t flags = __down\(sem, WT_KSEM\);) s
5 113 M
(    assert\(flags == 0\);) s
5 102 M
(}) s
5 80 M
(bool) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 69 M
(try_down) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
(\(semaphore_t *sem\) {) s
5 58 M
(    bool intr_flag, ret = 0;) s
5 47 M
(    local_intr_save\(intr_flag\);) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 36 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 36 M
( \(sem->value > 0\) {) s
5 25 M
(        sem->value --, ret = 1;) s
5 14 M
(    }) s
5 3 M
(    local_intr_restore\(intr_flag\);) s
_R
S
%%Page: (186) 186
%%BeginPageSetup
_S
18 36 translate
/pagenum 186 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 707 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
( ret;) s
5 696 M
(}) s
5 674 M
([ucore/lab8_result/kern/sync/sync.h] ++++++++++++++++++++++++++++++) s
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 663 M
(__KERN_SYNC_SYNC_H__) s
/F-gs-font 10 10 SF
0 setgray
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 652 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 652 M
(__KERN_SYNC_SYNC_H__) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 630 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 630 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 630 M
(<x86.h>) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 619 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 619 M
(<intr.h>) s
/F-gs-font 10 10 SF
0 setgray
5 608 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 608 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 608 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 608 M
(<mmu.h>) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 597 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 597 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 586 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 586 M
(<atomic.h>) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 575 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 575 M
(<sched.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 553 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 553 M
( inline bool) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 542 M
(__intr_save) s
/F-gs-font 10 10 SF
0 setgray
71 542 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 542 M
(void) s
/F-gs-font 10 10 SF
0 setgray
101 542 M
(\) {) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 531 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( \(read_eflags\(\) & FL_IF\) {) s
5 520 M
(        intr_disable\(\);) s
5 509 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 509 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 509 M
( 1;) s
5 498 M
(    }) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 487 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 487 M
( 0;) s
5 476 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 454 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 443 M
(__intr_restore) s
/F-gs-font 10 10 SF
0 setgray
89 443 M
(\(bool flag\) {) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 432 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 432 M
( \(flag\) {) s
5 421 M
(        intr_enable\(\);) s
5 410 M
(    }) s
5 399 M
(}) s
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 377 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 377 M
(local_intr_save) s
/F-gs-font 10 10 SF
0 setgray
143 377 M
(\(x\)      do { x = __intr_save\(\); } while \(0\)) s
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 366 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 366 M
(local_intr_restore) s
/F-gs-font 10 10 SF
0 setgray
161 366 M
(\(x\)   __intr_restore\(x\);) s
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 344 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 344 M
(/* !__KERN_SYNC_SYNC_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
([ucore/lab8_result/kern/sync/sem.h] ++++++++++++++++++++++++++++++) s
5 311 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 311 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 311 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 311 M
(__KERN_SYNC_SEM_H__) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 300 M
(__KERN_SYNC_SEM_H__) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 278 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 278 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 278 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 267 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 267 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 267 M
(<atomic.h>) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 256 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 256 M
(<wait.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 234 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 234 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 234 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 234 M
( {) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 223 M
( value;) s
5 212 M
(    wait_queue_t wait_queue;) s
5 201 M
(} semaphore_t;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 179 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 179 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 179 M
(sem_init) s
/F-gs-font 10 10 SF
0 setgray
83 179 M
(\(semaphore_t *sem, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 179 M
(int) s
/F-gs-font 10 10 SF
0 setgray
215 179 M
( value\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 168 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 168 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 168 M
(up) s
/F-gs-font 10 10 SF
0 setgray
47 168 M
(\(semaphore_t *sem\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 157 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 157 M
(down) s
/F-gs-font 10 10 SF
0 setgray
59 157 M
(\(semaphore_t *sem\);) s
5 146 M
(bool ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 146 M
(try_down) s
/F-gs-font 10 10 SF
0 setgray
83 146 M
(\(semaphore_t *sem\);) s
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 124 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 124 M
(/* !__KERN_SYNC_SEM_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
([ucore/lab8_result/kern/sync/check_sync.c] ++++++++++++++++++++++++++++++) s
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 91 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 91 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 80 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 80 M
(<proc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 69 M
(<sem.h>) s
/F-gs-font 10 10 SF
0 setgray
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 58 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 58 M
(<monitor.h>) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 47 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 47 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 25 M
(N) s
/F-gs-font 10 10 SF
0 setgray
59 25 M
( 5 ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
77 25 M
(/* \345\\223\262\345\255\246\345\256\266\346\\225\260\347\\233\256 */) s
/F-gs-font 10 10 SF
0 setgray
5 14 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 14 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 14 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 14 M
(LEFT) s
/F-gs-font 10 10 SF
0 setgray
77 14 M
( \(i-1+N\)%N ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
143 14 M
(/* i\347\\232\\204\345\267\246\351\\202\273\345\\217\267\347\240\\201 */) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 3 M
(RIGHT) s
/F-gs-font 10 10 SF
0 setgray
83 3 M
( \(i+1\)%N ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
137 3 M
(/* i\347\\232\\204\345\\217\263\351\\202\273\345\\217\267\347\240\\201 */) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (187) 187
%%BeginPageSetup
_S
18 36 translate
/pagenum 187 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 707 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 707 M
(THINKING) s
/F-gs-font 10 10 SF
0 setgray
101 707 M
( 0 ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
119 707 M
(/* \345\\223\262\345\255\246\345\256\266\346\255\243\345\\234\250\346\\200\\235\350\\200\\203 */) s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 696 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 696 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 696 M
(HUNGRY) s
/F-gs-font 10 10 SF
0 setgray
89 696 M
( 1 ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
107 696 M
(/* \345\\223\262\345\255\246\345\256\266\346\\203\263\345\\217\\226\345\276\\227\345\\217\\211\345\255\\220 */) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 685 M
(EATING) s
/F-gs-font 10 10 SF
0 setgray
89 685 M
( 2 ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
107 685 M
(/* \345\\223\262\345\255\246\345\256\266\346\255\243\345\\234\250\345\\220\\203\351\\235\242 */) s
/F-gs-font 10 10 SF
0 setgray
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 674 M
(TIMES) s
/F-gs-font 10 10 SF
0 setgray
83 674 M
(  4 ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
107 674 M
(/* \345\\220\\2034\346\254\241\351\245\255 */) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 663 M
(SLEEP_TIME) s
/F-gs-font 10 10 SF
0 setgray
113 663 M
( 10) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 641 M
(//-----------------philosopher problem using monitor ------------) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 630 M
(/*PSEUDO CODE :philosopher problem using semaphore) s
5 619 M
(system DINING_PHILOSOPHERS) s
5 597 M
(VAR) s
5 586 M
(me:    semaphore, initially 1;                    # for mutual exclusion ) s
5 575 M
(s[5]:  semaphore s[5], initially 0;               # for synchronization ) s
5 564 M
(pflag[5]: {THINK, HUNGRY, EAT}, initially THINK;  # philosopher flag ) s
5 542 M
(# As before, each philosopher is an endless cycle of thinking and eating.) s
5 520 M
(procedure philosopher\(i\)) s
5 509 M
(  {) s
5 498 M
(    while TRUE do) s
5 487 M
(     {) s
5 476 M
(       THINKING;) s
5 465 M
(       take_chopsticks\(i\);) s
5 454 M
(       EATING;) s
5 443 M
(       drop_chopsticks\(i\);) s
5 432 M
(     }) s
5 421 M
(  }) s
5 399 M
(# The take_chopsticks procedure involves checking the status of neighboring ) s
5 388 M
(# philosophers and then declaring one's own intention to eat. This is a two-phase ) s
5 377 M
(# protocol; first declaring the status HUNGRY, then going on to EAT.) s
5 355 M
(procedure take_chopsticks\(i\)) s
5 344 M
(  {) s
5 333 M
(    DOWN\(me\);               # critical section ) s
5 322 M
(    pflag[i] := HUNGRY;) s
5 311 M
(    test[i];) s
5 300 M
(    UP\(me\);                 # end critical section ) s
5 289 M
(    DOWN\(s[i]\)              # Eat if enabled ) s
5 278 M
(   }) s
5 256 M
(void test\(i\)                # Let phil[i] eat, if waiting ) s
5 245 M
(  {) s
5 234 M
(    if \( pflag[i] == HUNGRY) s
5 223 M
(      && pflag[i-1] != EAT) s
5 212 M
(      && pflag[i+1] != EAT\)) s
5 201 M
(       then) s
5 190 M
(        {) s
5 179 M
(          pflag[i] := EAT;) s
5 168 M
(          UP\(s[i]\)) s
5 157 M
(         }) s
5 146 M
(    }) s
5 113 M
(# Once a philosopher finishes eating, all that remains is to relinquish the ) s
5 102 M
(# resources---its two chopsticks---and thereby release waiting neighbors.) s
5 80 M
(void drop_chopsticks\(int i\)) s
5 69 M
(  {) s
5 58 M
(    DOWN\(me\);                # critical section ) s
5 47 M
(    test\(i-1\);               # Let phil. on left eat if possible ) s
5 36 M
(    test\(i+1\);               # Let phil. on rght eat if possible ) s
5 25 M
(    UP\(me\);                  # up critical section ) s
5 14 M
(   }) s
_R
S
%%Page: (188) 188
%%BeginPageSetup
_S
18 36 translate
/pagenum 188 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
(*/) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 674 M
(//---------- philosophers problem using semaphore ----------------------) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 663 M
( state_sema[N]; ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
119 663 M
(/* \350\256\260\345\275\\225\346\257\\217\344\270\252\344\272\272\347\\212\266\346\\200\\201\347\\232\\204\346\\225\260\347\273\\204 */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 652 M
(/* \344\277\241\345\\217\267\351\\207\\217\346\\230\257\344\270\\200\344\270\252\347\\211\271\346\256\\212\347\\232\\204\346\\225\264\345\\236\\213\345\\217\\230\351\\207\\217 */) s
/F-gs-font 10 10 SF
0 setgray
5 641 M
(semaphore_t mutex; ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
119 641 M
(/* \344\270\264\347\\225\\214\345\\214\272\344\272\\222\346\\226\245 */) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(semaphore_t s[N]; ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
113 630 M
(/* \346\257\\217\344\270\252\345\\223\262\345\255\246\345\256\266\344\270\\200\344\270\252\344\277\241\345\\217\267\351\\207\\217 */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 608 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 608 M
( proc_struct *philosopher_proc_sema[N];) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 586 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 586 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 586 M
(phi_test_sema) s
/F-gs-font 10 10 SF
0 setgray
113 586 M
(\(i\) ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
137 586 M
(/* i\357\274\\232\345\\223\262\345\255\246\345\256\266\345\\217\267\347\240\\201\344\273\\2160\345\\210\260N-1 */) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
({ ) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 564 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 564 M
(\(state_sema[i]==HUNGRY&&state_sema[LEFT]!=EATING) s
5 553 M
(            &&state_sema[RIGHT]!=EATING\)) s
5 542 M
(    {) s
5 531 M
(        state_sema[i]=EATING;) s
5 520 M
(        up\(&s[i]\);) s
5 509 M
(    }) s
5 498 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 476 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 476 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 476 M
(phi_take_forks_sema) s
/F-gs-font 10 10 SF
0 setgray
149 476 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 476 M
(int) s
/F-gs-font 10 10 SF
0 setgray
173 476 M
( i\) ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 476 M
(/* i\357\274\\232\345\\223\262\345\255\246\345\256\266\345\\217\267\347\240\\201\344\273\\2160\345\\210\260N-1 */) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
({ ) s
5 454 M
(        down\(&mutex\); ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
137 454 M
(/* \350\277\\233\345\\205\245\344\270\264\347\\225\\214\345\\214\272 */) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(        state_sema[i]=HUNGRY; ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
185 443 M
(/* \350\256\260\345\275\\225\344\270\\213\345\\223\262\345\255\246\345\256\266i\351\245\245\351\245\277\347\\232\\204\344\272\\213\345\256\\236 */) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(        phi_test_sema\(i\); ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 432 M
(/* \350\257\\225\345\\233\276\345\276\\227\345\\210\260\344\270\244\345\\217\252\345\\217\\211\345\255\\220 */) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(        up\(&mutex\); ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
125 421 M
(/* \347\246\273\345\274\\200\344\270\264\347\\225\\214\345\\214\272 */) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(        down\(&s[i]\); ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
131 410 M
(/* \345\246\\202\346\\236\\234\345\276\\227\344\270\\215\345\\210\260\345\\217\\211\345\255\\220\345\260\261\351\\230\273\345\241\\236 */) s
/F-gs-font 10 10 SF
0 setgray
5 399 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 377 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 377 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 377 M
(phi_put_forks_sema) s
/F-gs-font 10 10 SF
0 setgray
143 377 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 377 M
(int) s
/F-gs-font 10 10 SF
0 setgray
167 377 M
( i\) ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
191 377 M
(/* i\357\274\\232\345\\223\262\345\255\246\345\256\266\345\\217\267\347\240\\201\344\273\\2160\345\\210\260N-1 */) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
({ ) s
5 355 M
(        down\(&mutex\); ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
137 355 M
(/* \350\277\\233\345\\205\245\344\270\264\347\\225\\214\345\\214\272 */) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(        state_sema[i]=THINKING; ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 344 M
(/* \345\\223\262\345\255\246\345\256\266\350\277\\233\351\244\\220\347\273\\223\346\\235\\237 */) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(        phi_test_sema\(LEFT\); ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
179 333 M
(/* \347\\234\\213\344\270\\200\344\270\\213\345\267\246\351\\202\273\345\261\\205\347\\216\260\345\\234\250\346\\230\257\345\\220\246\350) s
5 322 M
(\\203\275\350\277\\233\351\244\\220 */) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(        phi_test_sema\(RIGHT\); ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
185 311 M
(/* \347\\234\\213\344\270\\200\344\270\\213\345\\217\263\351\\202\273\345\261\\205\347\\216\260\345\\234\250\346\\230\257\345) s
5 300 M
(\\220\246\350\\203\275\350\277\\233\351\244\\220 */) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(        up\(&mutex\); ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
125 289 M
(/* \347\246\273\345\274\\200\344\270\264\347\\225\\214\345\\214\272 */) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 256 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 256 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 256 M
(philosopher_using_semaphore) s
/F-gs-font 10 10 SF
0 setgray
191 256 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 256 M
(void) s
/F-gs-font 10 10 SF
0 setgray
221 256 M
( * arg\) ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
269 256 M
(/* i\357\274\\232\345\\223\262\345\255\246\345\256\266\345\\217\267\347\240\\201\357\274\\214\344\273\\2160\345) s
5 245 M
(\\210\260N-1 */) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
({) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 223 M
( i, iter=0;) s
5 212 M
(    i=\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
65 212 M
(\)arg;) s
5 201 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 201 M
("I am No.%d philosopher_sema\\n") s
/F-gs-font 10 10 SF
0 setgray
263 201 M
(,i\);) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 190 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 190 M
(\(iter++<TIMES\)) s
5 179 M
(    { ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
41 179 M
(/* \346\\227\240\351\\231\\220\345\276\252\347\\216\257 */) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 168 M
("Iter %d, No.%d philosopher_sema is thinking\\n") s
/F-gs-font 10 10 SF
0 setgray
383 168 M
(,iter,i\); ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
443 168 M
(/* \345\\223\262\345\255\246\345\256\266\346\255\243\345) s
5 157 M
(\\234\250\346\\200\\235\350\\200\\203 */) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(        do_sleep\(SLEEP_TIME\);) s
5 135 M
(        phi_take_forks_sema\(i\); ) s
5 124 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 124 M
(/* \351\\234\\200\350\246\\201\344\270\244\345\\217\252\345\\217\\211\345\255\\220\357\274\\214\346\\210\\226\350\\200\\205\351\\230\273\345\241\\236 */) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 113 M
("Iter %d, No.%d philosopher_sema is eating\\n") s
/F-gs-font 10 10 SF
0 setgray
371 113 M
(,iter,i\); ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
431 113 M
(/* \350\277\\233\351\244\\220 */) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(        do_sleep\(SLEEP_TIME\);) s
5 91 M
(        phi_put_forks_sema\(i\); ) s
5 80 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 80 M
(/* \346\\212\\212\344\270\244\346\\212\\212\345\\217\\211\345\255\\220\345\\220\\214\346\\227\266\346\\224\276\345\\233\\236\346\241\\214\345\255\\220 */) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(    }) s
5 58 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 58 M
("No.%d philosopher_sema quit\\n") s
/F-gs-font 10 10 SF
0 setgray
263 58 M
(,i\);) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 47 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
( 0;    ) s
5 36 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 14 M
(//-----------------philosopher problem using monitor ------------) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 3 M
(/*PSEUDO CODE :philosopher problem using monitor) s
_R
S
%%Page: (189) 189
%%BeginPageSetup
_S
18 36 translate
/pagenum 189 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
( * monitor dp) s
5 696 M
( * {) s
5 685 M
( *  enum {thinking, hungry, eating} state[5];) s
5 674 M
( *  condition self[5];) s
5 663 M
( *) s
5 652 M
( *  void pickup\(int i\) {) s
5 641 M
( *      state[i] = hungry;) s
5 630 M
( *      if \(\(state[\(i+4\)%5] != eating\) && \(state[\(i+1\)%5] != eating\)\) {) s
5 619 M
( *        state[i] = eating;) s
5 608 M
( *      else) s
5 597 M
( *         self[i].wait\(\);) s
5 586 M
( *   }) s
5 575 M
( *) s
5 564 M
( *   void putdown\(int i\) {) s
5 553 M
( *      state[i] = thinking;) s
5 542 M
( *      if \(\(state[\(i+4\)%5] == hungry\) && \(state[\(i+3\)%5] != eating\)\) {) s
5 531 M
( *          state[\(i+4\)%5] = eating;) s
5 520 M
( *          self[\(i+4\)%5].signal\(\);) s
5 509 M
( *      }) s
5 498 M
( *      if \(\(state[\(i+1\)%5] == hungry\) && \(state[\(i+2\)%5] != eating\)\) {) s
5 487 M
( *          state[\(i+1\)%5] = eating;) s
5 476 M
( *          self[\(i+1\)%5].signal\(\);) s
5 465 M
( *      }) s
5 454 M
( *   }) s
5 443 M
( *) s
5 432 M
( *   void init\(\) {) s
5 421 M
( *      for \(int i = 0; i < 5; i++\)) s
5 410 M
( *         state[i] = thinking;) s
5 399 M
( *   }) s
5 388 M
( * }) s
5 377 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 355 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 355 M
( proc_struct *philosopher_proc_condvar[N]; ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
299 355 M
(// N philosopher) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 344 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 344 M
( state_condvar[N];                            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
299 344 M
(// the philosopher's state: EATING, HUNGARY, ) s
5 333 M
(THINKING  ) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(monitor_t mt, *mtp=&mt;                          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
299 322 M
(// monitor) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 300 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 300 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 300 M
(phi_test_condvar) s
/F-gs-font 10 10 SF
0 setgray
131 300 M
( \(i\) { ) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 289 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
(\(state_condvar[i]==HUNGRY&&state_condvar[LEFT]!=EATING) s
5 278 M
(            &&state_condvar[RIGHT]!=EATING\) {) s
5 267 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 267 M
("phi_test_condvar: state_condvar[%d] will eating\\n") s
/F-gs-font 10 10 SF
0 setgray
407 267 M
(,i\);) s
5 256 M
(        state_condvar[i] = EATING ;) s
5 245 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 245 M
("phi_test_condvar: signal self_cv[%d] \\n") s
/F-gs-font 10 10 SF
0 setgray
347 245 M
(,i\);) s
5 234 M
(        cond_signal\(&mtp->cv[i]\) ;) s
5 223 M
(    }) s
5 212 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 179 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 179 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 179 M
(phi_take_forks_condvar) s
/F-gs-font 10 10 SF
0 setgray
167 179 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 179 M
(int) s
/F-gs-font 10 10 SF
0 setgray
191 179 M
( i\) {) s
5 168 M
(     down\(&\(mtp->mutex\)\);) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 157 M
(//--------into routine in monitor--------------) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 146 M
(// LAB7 EXERCISE1: YOUR CODE) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 135 M
(// I am hungry) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 124 M
(// try to get fork) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
41 113 M
(// I am hungry) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(      state_condvar[i]=HUNGRY; ) s
5 91 M
(      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
41 91 M
(// try to get fork) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(      phi_test_condvar\(i\); ) s
5 69 M
(      ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
41 69 M
(if) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
( \(state_condvar[i] != EATING\) {) s
5 58 M
(          cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 58 M
("phi_take_forks_condvar: %d didn't get fork and will wait\\n") s
/F-gs-font 10 10 SF
0 setgray
473 58 M
(,i\);) s
5 47 M
(          cond_wait\(&mtp->cv[i]\);) s
5 36 M
(      }) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 25 M
(//--------leave routine in monitor--------------) s
/F-gs-font 10 10 SF
0 setgray
5 14 M
(      ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
41 14 M
(if) s
/F-gs-font 10 10 SF
0 setgray
53 14 M
(\(mtp->next_count>0\)) s
5 3 M
(         up\(&\(mtp->next\)\);) s
_R
S
%%Page: (190) 190
%%BeginPageSetup
_S
18 36 translate
/pagenum 190 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(      ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
41 707 M
(else) s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(         up\(&\(mtp->mutex\)\);) s
5 685 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 663 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 663 M
(phi_put_forks_condvar) s
/F-gs-font 10 10 SF
0 setgray
161 663 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 663 M
(int) s
/F-gs-font 10 10 SF
0 setgray
185 663 M
( i\) {) s
5 652 M
(     down\(&\(mtp->mutex\)\);) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 630 M
(//--------into routine in monitor--------------) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 619 M
(// LAB7 EXERCISE1: YOUR CODE) s
/F-gs-font 10 10 SF
0 setgray
5 608 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 608 M
(// I ate over) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 597 M
(// test left and right neighbors) s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
41 586 M
(// I ate over ) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(      state_condvar[i]=THINKING;) s
5 564 M
(      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
41 564 M
(// test left and right neighbors) s
/F-gs-font 10 10 SF
0 setgray
5 553 M
(      phi_test_condvar\(LEFT\);) s
5 542 M
(      phi_test_condvar\(RIGHT\);) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 531 M
(//--------leave routine in monitor--------------) s
/F-gs-font 10 10 SF
0 setgray
5 520 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 520 M
(if) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
(\(mtp->next_count>0\)) s
5 509 M
(        up\(&\(mtp->next\)\);) s
5 498 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 498 M
(else) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(        up\(&\(mtp->mutex\)\);) s
5 476 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 454 M
(//---------- philosophers using monitor \(condition variable\) ----------------------) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 443 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 443 M
(philosopher_using_condvar) s
/F-gs-font 10 10 SF
0 setgray
179 443 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 443 M
(void) s
/F-gs-font 10 10 SF
0 setgray
209 443 M
( * arg\) { ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
269 443 M
(/* arg is the No. of philosopher 0~N-1*/) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(  ) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 421 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( i, iter=0;) s
5 410 M
(    i=\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 410 M
(int) s
/F-gs-font 10 10 SF
0 setgray
65 410 M
(\)arg;) s
5 399 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 399 M
("I am No.%d philosopher_condvar\\n") s
/F-gs-font 10 10 SF
0 setgray
281 399 M
(,i\);) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 388 M
(\(iter++<TIMES\)) s
5 377 M
(    { ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
41 377 M
(/* iterate*/) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 366 M
("Iter %d, No.%d philosopher_condvar is thinking\\n") s
/F-gs-font 10 10 SF
0 setgray
401 366 M
(,iter,i\); ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
461 366 M
(/* thinking*/) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(        do_sleep\(SLEEP_TIME\);) s
5 344 M
(        phi_take_forks_condvar\(i\); ) s
5 333 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 333 M
(/* need two forks, maybe blocked */) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 322 M
("Iter %d, No.%d philosopher_condvar is eating\\n") s
/F-gs-font 10 10 SF
0 setgray
389 322 M
(,iter,i\); ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
449 322 M
(/* eating*/) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(        do_sleep\(SLEEP_TIME\);) s
5 300 M
(        phi_put_forks_condvar\(i\); ) s
5 289 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 289 M
(/* return two forks back*/) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
(    }) s
5 267 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 267 M
("No.%d philosopher_condvar quit\\n") s
/F-gs-font 10 10 SF
0 setgray
281 267 M
(,i\);) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 256 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 256 M
( 0;    ) s
5 245 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 223 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 223 M
(check_sync) s
/F-gs-font 10 10 SF
0 setgray
95 223 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 223 M
(void) s
/F-gs-font 10 10 SF
0 setgray
125 223 M
(\){) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 201 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( i;) s
5 179 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 179 M
(//check semaphore) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(    sem_init\(&mutex, 1\);) s
5 157 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 157 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 157 M
(\(i=0;i<N;i++\){) s
5 146 M
(        sem_init\(&s[i], 0\);) s
5 135 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 135 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 135 M
( pid = kernel_thread\(philosopher_using_semaphore, \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
377 135 M
(void) s
/F-gs-font 10 10 SF
0 setgray
401 135 M
( *\)i, 0\);) s
5 124 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 124 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 124 M
( \(pid <= 0\) {) s
5 113 M
(            panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 113 M
("create No.%d philosopher_using_semaphore failed.\\n") s
/F-gs-font 10 10 SF
0 setgray
425 113 M
(\);) s
5 102 M
(        }) s
5 91 M
(        philosopher_proc_sema[i] = find_proc\(pid\);) s
5 80 M
(        set_proc_name\(philosopher_proc_sema[i], ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
293 80 M
("philosopher_sema_proc") s
/F-gs-font 10 10 SF
0 setgray
431 80 M
(\);) s
5 69 M
(    }) s
5 47 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 47 M
(//check condition variable) s
/F-gs-font 10 10 SF
0 setgray
5 36 M
(    monitor_init\(&mt, N\);) s
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 25 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
(\(i=0;i<N;i++\){) s
5 14 M
(        state_condvar[i]=THINKING;) s
5 3 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 3 M
( pid = kernel_thread\(philosopher_using_condvar, \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
365 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
389 3 M
( *\)i, 0\);) s
_R
S
%%Page: (191) 191
%%BeginPageSetup
_S
18 36 translate
/pagenum 191 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 707 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
( \(pid <= 0\) {) s
5 696 M
(            panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 696 M
("create No.%d philosopher_using_condvar failed.\\n") s
/F-gs-font 10 10 SF
0 setgray
413 696 M
(\);) s
5 685 M
(        }) s
5 674 M
(        philosopher_proc_condvar[i] = find_proc\(pid\);) s
5 663 M
(        set_proc_name\(philosopher_proc_condvar[i], ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
311 663 M
("philosopher_condvar_proc") s
/F-gs-font 10 10 SF
0 setgray
467 663 M
(\);) s
5 652 M
(    }) s
5 641 M
(}) s
5 630 M
([ucore/lab8_result/kern/sync/monitor.h] ++++++++++++++++++++++++++++++) s
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 619 M
(__KERN_SYNC_MONITOR_CONDVAR_H__) s
/F-gs-font 10 10 SF
0 setgray
5 608 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 608 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 608 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 608 M
(__KERN_SYNC_MOINTOR_CONDVAR_H__) s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 586 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 586 M
(<sem.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 575 M
(/* In [OS CONCEPT] 7.7 section, the accurate define and approximate implementation of MONITOR ) s
5 564 M
(was introduced.) s
5 553 M
( * INTRODUCTION:) s
5 542 M
( *  Monitors were invented by C. A. R. Hoare and Per Brinch Hansen, and were first implemented) s
5 531 M
( in Brinch Hansen's) s
5 520 M
( *  Concurrent Pascal language. Generally, a monitor is a language construct and the compiler ) s
5 509 M
(usually enforces mutual exclusion. Compare this with semaphores, which are usually an OS const) s
5 498 M
(ruct.) s
5 487 M
( * DEFNIE & CHARACTERISTIC:) s
5 476 M
( *  A monitor is a collection of procedures, variables, and data structures grouped together.) s
5 465 M
( *  Processes can call the monitor procedures but cannot access the internal data structures.) s
5 454 M
( *  Only one process at a time may be be active in a monitor.) s
5 443 M
( *  Condition variables allow for blocking and unblocking.) s
5 432 M
( *     cv.wait\(\) blocks a process.) s
5 421 M
( *        The process is said to be waiting for \(or waiting on\) the condition variable cv.) s
5 410 M
( *     cv.signal\(\) \(also called cv.notify\) unblocks a process waiting for the condition variab) s
5 399 M
(le cv.) s
5 388 M
( *        When this occurs, we need to still require that only one process is active in the mo) s
5 377 M
(nitor. This can be done in several ways:) s
5 366 M
( *            on some systems the old process \(the one executing the signal\) leaves the monito) s
5 355 M
(r and the new one enters) s
5 344 M
( *            on some systems the signal must be the last statement executed inside the monito) s
5 333 M
(r.) s
5 322 M
( *            on some systems the old process will block until the monitor is available again.) s
5 311 M
( *            on some systems the new process \(the one unblocked by the signal\) will remain bl) s
5 300 M
(ocked until the monitor is available again.) s
5 289 M
( *   If a condition variable is signaled with nobody waiting, the signal is lost. Compare this) s
5 278 M
( with semaphores, in which a signal will allow a process that executes a wait in the future to) s
5 267 M
( no block.) s
5 256 M
( *   You should not think of a condition variable as a variable in the traditional sense.) s
5 245 M
( *     It does not have a value.) s
5 234 M
( *     Think of it as an object in the OOP sense.) s
5 223 M
( *     It has two methods, wait and signal that manipulate the calling process.) s
5 212 M
( * IMPLEMENTATION:) s
5 201 M
( *   monitor mt {) s
5 190 M
( *     ----------------variable------------------) s
5 179 M
( *     semaphore mutex;) s
5 168 M
( *     semaphore next;) s
5 157 M
( *     int next_count;) s
5 146 M
( *     condvar {int count, sempahore sem}  cv[N];) s
5 135 M
( *     other variables in mt;) s
5 124 M
( *     --------condvar wait/signal---------------) s
5 113 M
( *     cond_wait \(cv\) {) s
5 102 M
( *         cv.count ++;) s
5 91 M
( *         if\(mt.next_count>0\)) s
5 80 M
( *            signal\(mt.next\)) s
5 69 M
( *         else) s
5 58 M
( *            signal\(mt.mutex\);) s
5 47 M
( *         wait\(cv.sem\);) s
5 36 M
( *         cv.count --;) s
5 25 M
( *      }) s
5 14 M
( *) s
5 3 M
( *      cond_signal\(cv\) {) s
_R
S
%%Page: (192) 192
%%BeginPageSetup
_S
18 36 translate
/pagenum 192 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
( *          if\(cv.count>0\) {) s
5 696 M
( *             mt.next_count ++;) s
5 685 M
( *             signal\(cv.sem\);) s
5 674 M
( *             wait\(mt.next\);) s
5 663 M
( *             mt.next_count--;) s
5 652 M
( *          }) s
5 641 M
( *       }) s
5 630 M
( *     --------routines in monitor---------------) s
5 619 M
( *     routineA_in_mt \(\) {) s
5 608 M
( *        wait\(mt.mutex\);) s
5 597 M
( *        ...) s
5 586 M
( *        real body of routineA) s
5 575 M
( *        ...) s
5 564 M
( *        if\(next_count>0\)) s
5 553 M
( *            signal\(mt.next\);) s
5 542 M
( *        else) s
5 531 M
( *            signal\(mt.mutex\);) s
5 520 M
( *     }) s
5 509 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 487 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 487 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 487 M
( monitor monitor_t;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 465 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 465 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 465 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 465 M
( condvar{) s
5 454 M
(    semaphore_t sem;        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 454 M
(// the sem semaphore  is used to down the waiting proc, and the si) s
5 443 M
(gnaling proc should up the waiting proc) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 432 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 432 M
( count;              ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 432 M
(// the number of waiters on condvar) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(    monitor_t * owner;      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 421 M
(// the owner\(monitor\) of this condvar) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(} condvar_t;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 388 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 388 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 388 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 388 M
( monitor{) s
5 377 M
(    semaphore_t mutex;      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 377 M
(// the mutex lock for going into the routines in monitor, should b) s
5 366 M
(e initialized to 1) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(    semaphore_t next;       ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 355 M
(// the next semaphore is used to down the signaling proc itself, a) s
5 344 M
(nd the other OR wakeuped waiting proc should wake up the sleeped signaling proc.) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 333 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 333 M
( next_count;         ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 333 M
(// the number of of sleeped signaling proc) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(    condvar_t *cv;          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 322 M
(// the condvars in monitor) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(} monitor_t;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 289 M
(// Initialize variables in monitor.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 278 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 278 M
(     ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
59 278 M
(monitor_init) s
/F-gs-font 10 10 SF
0 setgray
131 278 M
( \(monitor_t *cvp, size_t num_cv\);) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 267 M
(// Unlock one of threads waiting on the condition variable. ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 256 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 256 M
(     ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
59 256 M
(cond_signal) s
/F-gs-font 10 10 SF
0 setgray
125 256 M
( \(condvar_t *cvp\);) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 245 M
(// Suspend calling thread on a condition variable waiting for condition atomically unlock mute) s
5 234 M
(x in monitor,) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 223 M
(// and suspends calling thread on conditional variable after waking up locks mutex.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 212 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 212 M
(     ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
59 212 M
(cond_wait) s
/F-gs-font 10 10 SF
0 setgray
113 212 M
( \(condvar_t *cvp\);) s
5 201 M
(     ) s
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 190 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 190 M
(/* !__KERN_SYNC_MONITOR_CONDVAR_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
([ucore/lab8_result/kern/libs/readline.c] ++++++++++++++++++++++++++++++) s
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 168 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 168 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 146 M
(BUFSIZE) s
/F-gs-font 10 10 SF
0 setgray
95 146 M
( 1024) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 135 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 135 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 135 M
(char) s
/F-gs-font 10 10 SF
0 setgray
71 135 M
( buf[BUFSIZE];) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 113 M
(/* *) s
5 102 M
( * readline - get a line from stdin) s
5 91 M
( * @prompt:     the string to be written to stdout) s
5 80 M
( *) s
5 69 M
( * The readline\(\) function will write the input string @prompt to) s
5 58 M
( * stdout first. If the @prompt is NULL or the empty string,) s
5 47 M
( * no prompt is issued.) s
5 36 M
( *) s
5 25 M
( * This function will keep on reading characters and saving them to buffer) s
5 14 M
( * 'buf' until '\\n' or '\\r' is encountered.) s
5 3 M
( *) s
_R
S
%%Page: (193) 193
%%BeginPageSetup
_S
18 36 translate
/pagenum 193 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
( * Note that, if the length of string that will be read is longer than) s
5 696 M
( * buffer size, the end of string will be discarded.) s
5 685 M
( *) s
5 674 M
( * The readline\(\) function returns the text of the line read. If some errors) s
5 663 M
( * are happened, NULL is returned. The return value is a global variable,) s
5 652 M
( * thus it should be copied before it is used.) s
5 641 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 630 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 630 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 619 M
(readline) s
/F-gs-font 10 10 SF
0 setgray
53 619 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 619 M
(const) s
/F-gs-font 10 10 SF
0 setgray
89 619 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 619 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 619 M
( *prompt\) {) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 608 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 608 M
( \(prompt != NULL\) {) s
5 597 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 597 M
("%s") s
/F-gs-font 10 10 SF
0 setgray
125 597 M
(, prompt\);) s
5 586 M
(    }) s
5 575 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 575 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( i = 0, c;) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 564 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 564 M
( \(1\) {) s
5 553 M
(        c = getchar\(\);) s
5 542 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 542 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 542 M
( \(c < 0\) {) s
5 531 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 531 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 531 M
( NULL;) s
5 520 M
(        }) s
5 509 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 509 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 509 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
83 509 M
(if) s
/F-gs-font 10 10 SF
0 setgray
95 509 M
( \(c >= ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 509 M
(' ') s
/F-gs-font 10 10 SF
0 setgray
155 509 M
( && i < BUFSIZE - 1\) {) s
5 498 M
(            cputchar\(c\);) s
5 487 M
(            buf[i ++] = c;) s
5 476 M
(        }) s
5 465 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 465 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 465 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
83 465 M
(if) s
/F-gs-font 10 10 SF
0 setgray
95 465 M
( \(c == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 465 M
('\\b') s
/F-gs-font 10 10 SF
0 setgray
161 465 M
( && i > 0\) {) s
5 454 M
(            cputchar\(c\);) s
5 443 M
(            i --;) s
5 432 M
(        }) s
5 421 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 421 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 421 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
83 421 M
(if) s
/F-gs-font 10 10 SF
0 setgray
95 421 M
( \(c == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 421 M
('\\n') s
/F-gs-font 10 10 SF
0 setgray
161 421 M
( || c == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
215 421 M
('\\r') s
/F-gs-font 10 10 SF
0 setgray
239 421 M
(\) {) s
5 410 M
(            cputchar\(c\);) s
5 399 M
(            buf[i] = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
131 399 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
155 399 M
(;) s
5 388 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 388 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 388 M
( buf;) s
5 377 M
(        }) s
5 366 M
(    }) s
5 355 M
(}) s
5 333 M
([ucore/lab8_result/kern/libs/string.c] ++++++++++++++++++++++++++++++) s
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 322 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 322 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 311 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 311 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 311 M
(<kmalloc.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 289 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 278 M
(strdup) s
/F-gs-font 10 10 SF
0 setgray
41 278 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 278 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 278 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 278 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 278 M
( *src\) {) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 267 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 267 M
( *dst;) s
5 256 M
(    size_t len = strlen\(src\);) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 245 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 245 M
( \(\(dst = kmalloc\(len + 1\)\) != NULL\) {) s
5 234 M
(        memcpy\(dst, src, len\);) s
5 223 M
(        dst[len] = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
119 223 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
143 223 M
(;) s
5 212 M
(    }) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 201 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 201 M
( dst;) s
5 190 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 168 M
(char) s
/F-gs-font 10 10 SF
0 setgray
29 168 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 157 M
(stradd) s
/F-gs-font 10 10 SF
0 setgray
41 157 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 157 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 157 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 157 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 157 M
( *src1, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 157 M
(const) s
/F-gs-font 10 10 SF
0 setgray
185 157 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 157 M
(char) s
/F-gs-font 10 10 SF
0 setgray
215 157 M
( *src2\) {) s
5 146 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 146 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 146 M
( *ret, *dst;) s
5 135 M
(    size_t len1 = strlen\(src1\), len2 = strlen\(src2\);) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 124 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 124 M
( \(\(ret = dst = kmalloc\(len1 + len2 + 1\)\) != NULL\) {) s
5 113 M
(        memcpy\(dst, src1, len1\), dst += len1;) s
5 102 M
(        memcpy\(dst, src2, len2\), dst += len2;) s
5 91 M
(        *dst = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
95 91 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
119 91 M
(;) s
5 80 M
(    }) s
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 69 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 69 M
( ret;) s
5 58 M
(}) s
5 36 M
([ucore/lab8_result/kern/libs/stdio.c] ++++++++++++++++++++++++++++++) s
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 25 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 25 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 14 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 14 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 14 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 14 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 3 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 3 M
(<console.h>) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (194) 194
%%BeginPageSetup
_S
18 36 translate
/pagenum 194 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 707 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 707 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 696 M
(/* HIGH level console I/O */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 674 M
(/* *) s
5 663 M
( * cputch - writes a single character @c to stdout, and it will) s
5 652 M
( * increace the value of counter pointed by @cnt.) s
5 641 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 630 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 630 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 630 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 619 M
(cputch) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 619 M
(int) s
/F-gs-font 10 10 SF
0 setgray
65 619 M
( c, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 619 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 619 M
( *cnt\) {) s
5 608 M
(    cons_putc\(c\);) s
5 597 M
(    \(*cnt\) ++;) s
5 586 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 564 M
(/* *) s
5 553 M
( * vcprintf - format a string and writes it to stdout) s
5 542 M
( *) s
5 531 M
( * The return value is the number of characters which would be) s
5 520 M
( * written to stdout.) s
5 509 M
( *) s
5 498 M
( * Call this function if you are already dealing with a va_list.) s
5 487 M
( * Or you probably want cprintf\(\) instead.) s
5 476 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 465 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 454 M
(vcprintf) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 454 M
(const) s
/F-gs-font 10 10 SF
0 setgray
89 454 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 454 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 454 M
( *fmt, va_list ap\) {) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( cnt = 0;) s
5 432 M
(    vprintfmt\(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 432 M
(void) s
/F-gs-font 10 10 SF
0 setgray
119 432 M
(*\)cputch, NO_FD, &cnt, fmt, ap\);) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 421 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 421 M
( cnt;) s
5 410 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 388 M
(/* *) s
5 377 M
( * cprintf - formats a string and writes it to stdout) s
5 366 M
( *) s
5 355 M
( * The return value is the number of characters which would be) s
5 344 M
( * written to stdout.) s
5 333 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 322 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 311 M
(cprintf) s
/F-gs-font 10 10 SF
0 setgray
47 311 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 311 M
(const) s
/F-gs-font 10 10 SF
0 setgray
83 311 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 311 M
(char) s
/F-gs-font 10 10 SF
0 setgray
113 311 M
( *fmt, ...\) {) s
5 300 M
(    va_list ap;) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 289 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( cnt;) s
5 278 M
(    va_start\(ap, fmt\);) s
5 267 M
(    cnt = vcprintf\(fmt, ap\);) s
5 256 M
(    va_end\(ap\);) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 245 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 245 M
( cnt;) s
5 234 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 212 M
(/* cputchar - writes a single character to stdout */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 201 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 190 M
(cputchar) s
/F-gs-font 10 10 SF
0 setgray
53 190 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 190 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 190 M
( c\) {) s
5 179 M
(    cons_putc\(c\);) s
5 168 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 146 M
(/* *) s
5 135 M
( * cputs- writes the string pointed by @str to stdout and) s
5 124 M
( * appends a newline character.) s
5 113 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 102 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 91 M
(cputs) s
/F-gs-font 10 10 SF
0 setgray
35 91 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 91 M
(const) s
/F-gs-font 10 10 SF
0 setgray
71 91 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 91 M
(char) s
/F-gs-font 10 10 SF
0 setgray
101 91 M
( *str\) {) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( cnt = 0;) s
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 69 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
( c;) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 58 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 58 M
( \(\(c = *str ++\) != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 58 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
197 58 M
(\) {) s
5 47 M
(        cputch\(c, &cnt\);) s
5 36 M
(    }) s
5 25 M
(    cputch\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 25 M
('\\n') s
/F-gs-font 10 10 SF
0 setgray
95 25 M
(, &cnt\);) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 14 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
( cnt;) s
5 3 M
(}) s
_R
S
%%Page: (195) 195
%%BeginPageSetup
_S
18 36 translate
/pagenum 195 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 696 M
(/* getchar - reads a single non-zero character from stdin */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 685 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 674 M
(getchar) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 674 M
(void) s
/F-gs-font 10 10 SF
0 setgray
77 674 M
(\) {) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 663 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( c;) s
5 652 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 652 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 652 M
( \(\(c = cons_getc\(\)\) == 0\)) s
5 641 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 641 M
(/* do nothing */) s
/F-gs-font 10 10 SF
0 setgray
149 641 M
(;) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 630 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 630 M
( c;) s
5 619 M
(}) s
5 597 M
([ucore/lab8_result/kern/trap/trapentry.S] ++++++++++++++++++++++++++++++) s
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 586 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 586 M
(<memlayout.h>) s
/F-gs-font 10 10 SF
0 setgray
5 564 M
(# ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
17 564 M
(vectors.S) s
/F-gs-font 10 10 SF
0 setgray
71 564 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
77 564 M
(sends) s
/F-gs-font 10 10 SF
0 setgray
107 564 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
113 564 M
(all) s
/F-gs-font 10 10 SF
0 setgray
131 564 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
137 564 M
(traps) s
/F-gs-font 10 10 SF
0 setgray
167 564 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
173 564 M
(here) s
/F-gs-font 10 10 SF
0 setgray
197 564 M
(.) s
5 553 M
(.text) s
5 542 M
(.globl __alltraps) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 531 M
(__alltraps) s
/F-gs-font 10 10 SF
0 setgray
65 531 M
(:) s
5 520 M
(    # push registers to build a trap frame) s
5 509 M
(    # therefore make the stack look like a ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
263 509 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
299 509 M
( trapframe) s
5 498 M
(    pushl %ds) s
5 487 M
(    pushl %es) s
5 476 M
(    pushl %fs) s
5 465 M
(    pushl %gs) s
5 454 M
(    pushal) s
5 432 M
(    # load GD_KDATA into %ds and %es to set up data segments ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
371 432 M
(for) s
/F-gs-font 10 10 SF
0 setgray
389 432 M
( kernel) s
5 421 M
(    movl $GD_KDATA, %eax) s
5 410 M
(    movw %ax, %ds) s
5 399 M
(    movw %ax, %es) s
5 377 M
(    # push %esp to pass a pointer to the trapframe as an argument to trap\(\)) s
5 366 M
(    pushl %esp) s
5 344 M
(    # call trap\(tf\), where tf=%esp) s
5 333 M
(    call trap) s
5 311 M
(    # pop the pushed stack pointer) s
5 300 M
(    popl %esp) s
5 278 M
(    # ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
41 278 M
(return) s
/F-gs-font 10 10 SF
0 setgray
77 278 M
( falls through to trapret...) s
5 267 M
(.globl __trapret) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 256 M
(__trapret) s
/F-gs-font 10 10 SF
0 setgray
59 256 M
(:) s
5 245 M
(    # restore registers from stack) s
5 234 M
(    popal) s
5 212 M
(    # restore %ds, %es, %fs and %gs) s
5 201 M
(    popl %gs) s
5 190 M
(    popl %fs) s
5 179 M
(    popl %es) s
5 168 M
(    popl %ds) s
5 146 M
(    # get rid of the trap number and error code) s
5 135 M
(    addl $0x8, %esp) s
5 124 M
(    iret) s
5 102 M
(.globl forkrets) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 91 M
(forkrets) s
/F-gs-font 10 10 SF
0 setgray
53 91 M
(:) s
5 80 M
(    # set stack to this new process's trapframe) s
5 69 M
(    movl 4\(%esp\), %esp) s
5 58 M
(    jmp __trapret) s
5 47 M
([ucore/lab8_result/kern/trap/trap.h] ++++++++++++++++++++++++++++++) s
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 36 M
(__KERN_TRAP_TRAP_H__) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 25 M
(__KERN_TRAP_TRAP_H__) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 3 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 3 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (196) 196
%%BeginPageSetup
_S
18 36 translate
/pagenum 196 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 696 M
(/* Trap Numbers */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 674 M
(/* Processor-defined: */) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 663 M
(T_DIVIDE) s
/F-gs-font 10 10 SF
0 setgray
101 663 M
(                0   // divide error) s
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 652 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 652 M
(T_DEBUG) s
/F-gs-font 10 10 SF
0 setgray
95 652 M
(                 1   // debug exception) s
5 641 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 641 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 641 M
(T_NMI) s
/F-gs-font 10 10 SF
0 setgray
83 641 M
(                   2   // non-maskable interrupt) s
5 630 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 630 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 630 M
(T_BRKPT) s
/F-gs-font 10 10 SF
0 setgray
95 630 M
(                 3   // breakpoint) s
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 619 M
(T_OFLOW) s
/F-gs-font 10 10 SF
0 setgray
95 619 M
(                 4   // overflow) s
5 608 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 608 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 608 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 608 M
(T_BOUND) s
/F-gs-font 10 10 SF
0 setgray
95 608 M
(                 5   // bounds check) s
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 597 M
(T_ILLOP) s
/F-gs-font 10 10 SF
0 setgray
95 597 M
(                 6   // illegal opcode) s
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 586 M
(T_DEVICE) s
/F-gs-font 10 10 SF
0 setgray
101 586 M
(                7   // device not available) s
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 575 M
(T_DBLFLT) s
/F-gs-font 10 10 SF
0 setgray
101 575 M
(                8   // double fault) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 564 M
(// #define T_COPROC             9   // reserved \(not used since 486\)) s
/F-gs-font 10 10 SF
0 setgray
5 553 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 553 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 553 M
(T_TSS) s
/F-gs-font 10 10 SF
0 setgray
83 553 M
(                   10  // invalid task switch segment) s
5 542 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 542 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 542 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 542 M
(T_SEGNP) s
/F-gs-font 10 10 SF
0 setgray
95 542 M
(                 11  // segment not present) s
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 531 M
(T_STACK) s
/F-gs-font 10 10 SF
0 setgray
95 531 M
(                 12  // stack exception) s
5 520 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 520 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 520 M
(T_GPFLT) s
/F-gs-font 10 10 SF
0 setgray
95 520 M
(                 13  // general protection fault) s
5 509 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 509 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 509 M
(T_PGFLT) s
/F-gs-font 10 10 SF
0 setgray
95 509 M
(                 14  // page fault) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 498 M
(// #define T_RES                15  // reserved) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 487 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 487 M
(T_FPERR) s
/F-gs-font 10 10 SF
0 setgray
95 487 M
(                 16  // floating point error) s
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 476 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 476 M
(T_ALIGN) s
/F-gs-font 10 10 SF
0 setgray
95 476 M
(                 17  // aligment check) s
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 465 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 465 M
(T_MCHK) s
/F-gs-font 10 10 SF
0 setgray
89 465 M
(                  18  // machine check) s
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 454 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 454 M
(T_SIMDERR) s
/F-gs-font 10 10 SF
0 setgray
107 454 M
(               19  // SIMD floating point error) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 432 M
(/* Hardware IRQ numbers. We receive these as \(IRQ_OFFSET + IRQ_xx\) */) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 421 M
(IRQ_OFFSET) s
/F-gs-font 10 10 SF
0 setgray
113 421 M
(              32  // IRQ 0 corresponds to int IRQ_OFFSET) s
5 399 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 399 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 399 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 399 M
(IRQ_TIMER) s
/F-gs-font 10 10 SF
0 setgray
107 399 M
(               0) s
5 388 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 388 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 388 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 388 M
(IRQ_KBD) s
/F-gs-font 10 10 SF
0 setgray
95 388 M
(                 1) s
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 377 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 377 M
(IRQ_COM1) s
/F-gs-font 10 10 SF
0 setgray
101 377 M
(                4) s
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 366 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 366 M
(IRQ_IDE1) s
/F-gs-font 10 10 SF
0 setgray
101 366 M
(                14) s
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 355 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 355 M
(IRQ_IDE2) s
/F-gs-font 10 10 SF
0 setgray
101 355 M
(                15) s
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 344 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 344 M
(IRQ_ERROR) s
/F-gs-font 10 10 SF
0 setgray
107 344 M
(               19) s
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 333 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 333 M
(IRQ_SPURIOUS) s
/F-gs-font 10 10 SF
0 setgray
125 333 M
(            31) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 311 M
(/* *) s
5 300 M
( * These are arbitrarily chosen, but with care not to overlap) s
5 289 M
( * processor defined exceptions or interrupt vectors.) s
5 278 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 267 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 267 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 267 M
(T_SWITCH_TOU) s
/F-gs-font 10 10 SF
0 setgray
125 267 M
(                120    // user/kernel switch) s
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 256 M
(T_SWITCH_TOK) s
/F-gs-font 10 10 SF
0 setgray
125 256 M
(                121    // user/kernel switch) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 234 M
(/* registers as pushed by pushal */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 223 M
( pushregs {) s
5 212 M
(    uint32_t reg_edi;) s
5 201 M
(    uint32_t reg_esi;) s
5 190 M
(    uint32_t reg_ebp;) s
5 179 M
(    uint32_t reg_oesp;          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
197 179 M
(/* Useless */) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(    uint32_t reg_ebx;) s
5 157 M
(    uint32_t reg_edx;) s
5 146 M
(    uint32_t reg_ecx;) s
5 135 M
(    uint32_t reg_eax;) s
5 124 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 102 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 102 M
( trapframe {) s
5 91 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 91 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 91 M
( pushregs tf_regs;) s
5 80 M
(    uint16_t tf_gs;) s
5 69 M
(    uint16_t tf_padding0;) s
5 58 M
(    uint16_t tf_fs;) s
5 47 M
(    uint16_t tf_padding1;) s
5 36 M
(    uint16_t tf_es;) s
5 25 M
(    uint16_t tf_padding2;) s
5 14 M
(    uint16_t tf_ds;) s
5 3 M
(    uint16_t tf_padding3;) s
_R
S
%%Page: (197) 197
%%BeginPageSetup
_S
18 36 translate
/pagenum 197 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    uint32_t tf_trapno;) s
5 696 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 696 M
(/* below here defined by x86 hardware */) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(    uint32_t tf_err;) s
5 674 M
(    uintptr_t tf_eip;) s
5 663 M
(    uint16_t tf_cs;) s
5 652 M
(    uint16_t tf_padding4;) s
5 641 M
(    uint32_t tf_eflags;) s
5 630 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 630 M
(/* below here only when crossing rings, such as from user to kernel */) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
(    uintptr_t tf_esp;) s
5 608 M
(    uint16_t tf_ss;) s
5 597 M
(    uint16_t tf_padding5;) s
5 586 M
(} __attribute__\(\(packed\)\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 564 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 564 M
(idt_init) s
/F-gs-font 10 10 SF
0 setgray
83 564 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 564 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 564 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 553 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 553 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 553 M
(print_trapframe) s
/F-gs-font 10 10 SF
0 setgray
125 553 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 553 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
167 553 M
( trapframe *tf\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 542 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 542 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 542 M
(print_regs) s
/F-gs-font 10 10 SF
0 setgray
95 542 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 542 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 542 M
( pushregs *regs\);) s
5 531 M
(bool ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 531 M
(trap_in_kernel) s
/F-gs-font 10 10 SF
0 setgray
119 531 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 531 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
161 531 M
( trapframe *tf\);) s
5 509 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 509 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 509 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 509 M
(/* !__KERN_TRAP_TRAP_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
([ucore/lab8_result/kern/trap/trap.c] ++++++++++++++++++++++++++++++) s
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 476 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 476 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 465 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 465 M
(<mmu.h>) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 454 M
(<memlayout.h>) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 443 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 443 M
(<clock.h>) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 432 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 432 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 432 M
(<trap.h>) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 421 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 421 M
(<x86.h>) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 410 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 410 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 410 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 399 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 399 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 399 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 399 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
5 388 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 388 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 388 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 388 M
(<console.h>) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 377 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 377 M
(<vmm.h>) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 366 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 366 M
(<swap.h>) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 355 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 355 M
(<kdebug.h>) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 344 M
(<unistd.h>) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 333 M
(<syscall.h>) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 322 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 322 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 311 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 311 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 311 M
(<sched.h>) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 300 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 300 M
(<sync.h>) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 289 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 289 M
(<proc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 267 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 267 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 267 M
(TICK_NUM) s
/F-gs-font 10 10 SF
0 setgray
101 267 M
( 100) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 245 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 245 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 245 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 245 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
77 245 M
(print_ticks) s
/F-gs-font 10 10 SF
0 setgray
143 245 M
(\(\) {) s
5 234 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 234 M
("%d ticks\\n") s
/F-gs-font 10 10 SF
0 setgray
149 234 M
(,TICK_NUM\);) s
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(ifdef) s
/F-gs-font 10 10 SF
0 setgray
41 223 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
47 223 M
(DEBUG_GRADE) s
/F-gs-font 10 10 SF
0 setgray
5 212 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 212 M
("End of Test.\\n") s
/F-gs-font 10 10 SF
0 setgray
173 212 M
(\);) s
5 201 M
(    panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 201 M
("EOT: kernel seems ok.") s
/F-gs-font 10 10 SF
0 setgray
203 201 M
(\);) s
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 157 M
(/* *) s
5 146 M
( * Interrupt descriptor table:) s
5 135 M
( *) s
5 124 M
( * Must be built at run time because shifted function addresses can't) s
5 113 M
( * be represented in relocation records.) s
5 102 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 91 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 91 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 91 M
( gatedesc idt[256] = {{0}};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 69 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 69 M
( pseudodesc idt_pd = {) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 58 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
65 58 M
(\(idt\) - 1, \(uintptr_t\)idt) s
5 47 M
(};) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 25 M
(/* idt_init - initialize IDT to each of the entry points in kern/trap/vectors.S */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 3 M
(idt_init) s
/F-gs-font 10 10 SF
0 setgray
53 3 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 3 M
(\) {) s
_R
S
%%Page: (198) 198
%%BeginPageSetup
_S
18 36 translate
/pagenum 198 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 707 M
(/* LAB1 YOUR CODE : STEP 2 */) s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 696 M
(/* \(1\) Where are the entry addrs of each Interrupt Service Routine \(ISR\)?) s
5 685 M
(      *     All ISR's entry addrs are stored in __vectors. where is uintptr_t __vectors[] ?) s
5 674 M
(      *     __vectors[] is in kern/trap/vector.S which is produced by tools/vector.c) s
5 663 M
(      *     \(try "make" command in lab1, then you will find vector.S in kern/trap DIR\)) s
5 652 M
(      *     You can use  "extern uintptr_t __vectors[];" to define this extern variable which ) s
5 641 M
(will be used later.) s
5 630 M
(      * \(2\) Now you should setup the entries of ISR in Interrupt Description Table \(IDT\).) s
5 619 M
(      *     Can you see idt[256] in this file? Yes, it's IDT! you can use SETGATE macro to set) s
5 608 M
(up each item of IDT) s
5 597 M
(      * \(3\) After setup the contents of IDT, you will let CPU know where is the IDT by using ') s
5 586 M
(lidt' instruction.) s
5 575 M
(      *     You don't know the meaning of this instruction? just google it! and check the libs) s
5 564 M
(/x86.h to know more.) s
5 553 M
(      *     Notice: the argument of lidt is idt_pd. try to find it!) s
5 542 M
(      */) s
/F-gs-font 10 10 SF
0 setgray
5 531 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 531 M
(/* LAB5 YOUR CODE */) s
/F-gs-font 10 10 SF
0 setgray
155 531 M
( ) s
5 520 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 520 M
(//you should update your lab1 code \(just add ONE or TWO lines of code\), let user app to u) s
5 509 M
(se syscall to get the service of ucore) s
/F-gs-font 10 10 SF
0 setgray
5 498 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 498 M
(//so you should setup the syscall interrupt gate in here) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 487 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
65 487 M
( uintptr_t __vectors[];) s
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 476 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 476 M
( i;) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 465 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 465 M
( \(i = 0; i < ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 465 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
161 465 M
(\(idt\) / ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
209 465 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
245 465 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 465 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
287 465 M
( gatedesc\); i ++\) {) s
5 454 M
(        SETGATE\(idt[i], 0, GD_KTEXT, __vectors[i], DPL_KERNEL\);) s
5 443 M
(    }) s
5 432 M
(    SETGATE\(idt[T_SYSCALL], 1, GD_KTEXT, __vectors[T_SYSCALL], DPL_USER\);) s
5 421 M
(    lidt\(&idt_pd\);) s
5 410 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 388 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 388 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 388 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 388 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 388 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 388 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 377 M
(trapname) s
/F-gs-font 10 10 SF
0 setgray
53 377 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 377 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 377 M
( trapno\) {) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 366 M
(static) s
/F-gs-font 10 10 SF
0 setgray
65 366 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 366 M
(const) s
/F-gs-font 10 10 SF
0 setgray
101 366 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 366 M
(char) s
/F-gs-font 10 10 SF
0 setgray
131 366 M
( * ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 366 M
(const) s
/F-gs-font 10 10 SF
0 setgray
179 366 M
( excnames[] = {) s
5 355 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 355 M
("Divide error") s
/F-gs-font 10 10 SF
0 setgray
137 355 M
(,) s
5 344 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 344 M
("Debug") s
/F-gs-font 10 10 SF
0 setgray
95 344 M
(,) s
5 333 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 333 M
("Non-Maskable Interrupt") s
/F-gs-font 10 10 SF
0 setgray
197 333 M
(,) s
5 322 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 322 M
("Breakpoint") s
/F-gs-font 10 10 SF
0 setgray
125 322 M
(,) s
5 311 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 311 M
("Overflow") s
/F-gs-font 10 10 SF
0 setgray
113 311 M
(,) s
5 300 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 300 M
("BOUND Range Exceeded") s
/F-gs-font 10 10 SF
0 setgray
185 300 M
(,) s
5 289 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 289 M
("Invalid Opcode") s
/F-gs-font 10 10 SF
0 setgray
149 289 M
(,) s
5 278 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 278 M
("Device Not Available") s
/F-gs-font 10 10 SF
0 setgray
185 278 M
(,) s
5 267 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 267 M
("Double Fault") s
/F-gs-font 10 10 SF
0 setgray
137 267 M
(,) s
5 256 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 256 M
("Coprocessor Segment Overrun") s
/F-gs-font 10 10 SF
0 setgray
227 256 M
(,) s
5 245 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 245 M
("Invalid TSS") s
/F-gs-font 10 10 SF
0 setgray
131 245 M
(,) s
5 234 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 234 M
("Segment Not Present") s
/F-gs-font 10 10 SF
0 setgray
179 234 M
(,) s
5 223 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 223 M
("Stack Fault") s
/F-gs-font 10 10 SF
0 setgray
131 223 M
(,) s
5 212 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 212 M
("General Protection") s
/F-gs-font 10 10 SF
0 setgray
173 212 M
(,) s
5 201 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 201 M
("Page Fault") s
/F-gs-font 10 10 SF
0 setgray
125 201 M
(,) s
5 190 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 190 M
("\(unknown trap\)") s
/F-gs-font 10 10 SF
0 setgray
149 190 M
(,) s
5 179 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 179 M
("x87 FPU Floating-Point Error") s
/F-gs-font 10 10 SF
0 setgray
233 179 M
(,) s
5 168 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 168 M
("Alignment Check") s
/F-gs-font 10 10 SF
0 setgray
155 168 M
(,) s
5 157 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 157 M
("Machine-Check") s
/F-gs-font 10 10 SF
0 setgray
143 157 M
(,) s
5 146 M
(        ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
53 146 M
("SIMD Floating-Point Exception") s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(    };) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( \(trapno < ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
107 113 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
143 113 M
(\(excnames\)/) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
209 113 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
245 113 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 113 M
(const) s
/F-gs-font 10 10 SF
0 setgray
281 113 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
287 113 M
(char) s
/F-gs-font 10 10 SF
0 setgray
311 113 M
( * ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
329 113 M
(const) s
/F-gs-font 10 10 SF
0 setgray
359 113 M
(\)\) {) s
5 102 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 102 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 102 M
( excnames[trapno];) s
5 91 M
(    }) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 80 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 80 M
( \(trapno >= IRQ_OFFSET && trapno < IRQ_OFFSET + 16\) {) s
5 69 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 69 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 69 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
95 69 M
("Hardware Interrupt") s
/F-gs-font 10 10 SF
0 setgray
215 69 M
(;) s
5 58 M
(    }) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 47 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
71 47 M
("\(unknown trap\)") s
/F-gs-font 10 10 SF
0 setgray
167 47 M
(;) s
5 36 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 14 M
(/* trap_in_kernel - test if trap happened in kernel */) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(bool) s
_R
S
%%Page: (199) 199
%%BeginPageSetup
_S
18 36 translate
/pagenum 199 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 707 M
(trap_in_kernel) s
/F-gs-font 10 10 SF
0 setgray
89 707 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 707 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 707 M
( trapframe *tf\) {) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 696 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 696 M
( \(tf->tf_cs == \(uint16_t\)KERNEL_CS\);) s
5 685 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 663 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 663 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 663 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 663 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 663 M
( *IA32flags[] = {) s
5 652 M
(    ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
29 652 M
("CF") s
/F-gs-font 10 10 SF
0 setgray
53 652 M
(, NULL, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 652 M
("PF") s
/F-gs-font 10 10 SF
0 setgray
125 652 M
(, NULL, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 652 M
("AF") s
/F-gs-font 10 10 SF
0 setgray
197 652 M
(, NULL, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 652 M
("ZF") s
/F-gs-font 10 10 SF
0 setgray
269 652 M
(, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
281 652 M
("SF") s
/F-gs-font 10 10 SF
0 setgray
305 652 M
(,) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
29 641 M
("TF") s
/F-gs-font 10 10 SF
0 setgray
53 641 M
(, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 641 M
("IF") s
/F-gs-font 10 10 SF
0 setgray
89 641 M
(, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 641 M
("DF") s
/F-gs-font 10 10 SF
0 setgray
125 641 M
(, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 641 M
("OF") s
/F-gs-font 10 10 SF
0 setgray
161 641 M
(, NULL, NULL, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 641 M
("NT") s
/F-gs-font 10 10 SF
0 setgray
269 641 M
(, NULL,) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
29 630 M
("RF") s
/F-gs-font 10 10 SF
0 setgray
53 630 M
(, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 630 M
("VM") s
/F-gs-font 10 10 SF
0 setgray
89 630 M
(, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 630 M
("AC") s
/F-gs-font 10 10 SF
0 setgray
125 630 M
(, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 630 M
("VIF") s
/F-gs-font 10 10 SF
0 setgray
167 630 M
(, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
179 630 M
("VIP") s
/F-gs-font 10 10 SF
0 setgray
209 630 M
(, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
221 630 M
("ID") s
/F-gs-font 10 10 SF
0 setgray
245 630 M
(, NULL, NULL,) s
5 619 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 597 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 586 M
(print_trapframe) s
/F-gs-font 10 10 SF
0 setgray
95 586 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 586 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 586 M
( trapframe *tf\) {) s
5 575 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 575 M
("trapframe at %p\\n") s
/F-gs-font 10 10 SF
0 setgray
191 575 M
(, tf\);) s
5 564 M
(    print_regs\(&tf->tf_regs\);) s
5 553 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 553 M
("  ds   0x----%04x\\n") s
/F-gs-font 10 10 SF
0 setgray
203 553 M
(, tf->tf_ds\);) s
5 542 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 542 M
("  es   0x----%04x\\n") s
/F-gs-font 10 10 SF
0 setgray
203 542 M
(, tf->tf_es\);) s
5 531 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 531 M
("  fs   0x----%04x\\n") s
/F-gs-font 10 10 SF
0 setgray
203 531 M
(, tf->tf_fs\);) s
5 520 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 520 M
("  gs   0x----%04x\\n") s
/F-gs-font 10 10 SF
0 setgray
203 520 M
(, tf->tf_gs\);) s
5 509 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 509 M
("  trap 0x%08x %s\\n") s
/F-gs-font 10 10 SF
0 setgray
197 509 M
(, tf->tf_trapno, trapname\(tf->tf_trapno\)\);) s
5 498 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 498 M
("  err  0x%08x\\n") s
/F-gs-font 10 10 SF
0 setgray
179 498 M
(, tf->tf_err\);) s
5 487 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 487 M
("  eip  0x%08x\\n") s
/F-gs-font 10 10 SF
0 setgray
179 487 M
(, tf->tf_eip\);) s
5 476 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 476 M
("  cs   0x----%04x\\n") s
/F-gs-font 10 10 SF
0 setgray
203 476 M
(, tf->tf_cs\);) s
5 465 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 465 M
("  flag 0x%08x ") s
/F-gs-font 10 10 SF
0 setgray
173 465 M
(, tf->tf_eflags\);) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( i, j;) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 432 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 432 M
( \(i = 0, j = 1; i < ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
167 432 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
203 432 M
(\(IA32flags\) / ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
287 432 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
323 432 M
(\(IA32flags[0]\); i ++, j <<= 1\) {) s
5 421 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 421 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 421 M
( \(\(tf->tf_eflags & j\) && IA32flags[i] != NULL\) {) s
5 410 M
(            cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
125 410 M
("%s,") s
/F-gs-font 10 10 SF
0 setgray
155 410 M
(, IA32flags[i]\);) s
5 399 M
(        }) s
5 388 M
(    }) s
5 377 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 377 M
("IOPL=%d\\n") s
/F-gs-font 10 10 SF
0 setgray
143 377 M
(, \(tf->tf_eflags & FL_IOPL_MASK\) >> 12\);) s
5 355 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 355 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 355 M
( \(!trap_in_kernel\(tf\)\) {) s
5 344 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 344 M
("  esp  0x%08x\\n") s
/F-gs-font 10 10 SF
0 setgray
203 344 M
(, tf->tf_esp\);) s
5 333 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 333 M
("  ss   0x----%04x\\n") s
/F-gs-font 10 10 SF
0 setgray
227 333 M
(, tf->tf_ss\);) s
5 322 M
(    }) s
5 311 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 278 M
(print_regs) s
/F-gs-font 10 10 SF
0 setgray
65 278 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 278 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 278 M
( pushregs *regs\) {) s
5 267 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 267 M
("  edi  0x%08x\\n") s
/F-gs-font 10 10 SF
0 setgray
179 267 M
(, regs->reg_edi\);) s
5 256 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 256 M
("  esi  0x%08x\\n") s
/F-gs-font 10 10 SF
0 setgray
179 256 M
(, regs->reg_esi\);) s
5 245 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 245 M
("  ebp  0x%08x\\n") s
/F-gs-font 10 10 SF
0 setgray
179 245 M
(, regs->reg_ebp\);) s
5 234 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 234 M
("  oesp 0x%08x\\n") s
/F-gs-font 10 10 SF
0 setgray
179 234 M
(, regs->reg_oesp\);) s
5 223 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 223 M
("  ebx  0x%08x\\n") s
/F-gs-font 10 10 SF
0 setgray
179 223 M
(, regs->reg_ebx\);) s
5 212 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 212 M
("  edx  0x%08x\\n") s
/F-gs-font 10 10 SF
0 setgray
179 212 M
(, regs->reg_edx\);) s
5 201 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 201 M
("  ecx  0x%08x\\n") s
/F-gs-font 10 10 SF
0 setgray
179 201 M
(, regs->reg_ecx\);) s
5 190 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 190 M
("  eax  0x%08x\\n") s
/F-gs-font 10 10 SF
0 setgray
179 190 M
(, regs->reg_eax\);) s
5 179 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 157 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 157 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 146 M
(print_pgfault) s
/F-gs-font 10 10 SF
0 setgray
83 146 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 146 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 146 M
( trapframe *tf\) {) s
5 135 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 135 M
(/* error_code:) s
5 124 M
(     * bit 0 == 0 means no page found, 1 means protection fault) s
5 113 M
(     * bit 1 == 0 means read, 1 means write) s
5 102 M
(     * bit 2 == 0 means kernel, 1 means user) s
5 91 M
(     * */) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 80 M
("page fault at 0x%08x: %c/%c [%s].\\n") s
/F-gs-font 10 10 SF
0 setgray
299 80 M
(, rcr2\(\),) s
5 69 M
(            \(tf->tf_err & 4\) ? ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
191 69 M
('U') s
/F-gs-font 10 10 SF
0 setgray
209 69 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
227 69 M
('K') s
/F-gs-font 10 10 SF
0 setgray
245 69 M
(,) s
5 58 M
(            \(tf->tf_err & 2\) ? ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
191 58 M
('W') s
/F-gs-font 10 10 SF
0 setgray
209 58 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
227 58 M
('R') s
/F-gs-font 10 10 SF
0 setgray
245 58 M
(,) s
5 47 M
(            \(tf->tf_err & 1\) ? ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
191 47 M
("protection fault") s
/F-gs-font 10 10 SF
0 setgray
299 47 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
317 47 M
("no page found") s
/F-gs-font 10 10 SF
0 setgray
407 47 M
(\);) s
5 36 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 14 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 3 M
(pgfault_handler) s
/F-gs-font 10 10 SF
0 setgray
95 3 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 3 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 3 M
( trapframe *tf\) {) s
_R
S
%%Page: (200) 200
%%BeginPageSetup
_S
18 36 translate
/pagenum 200 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 707 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 707 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 707 M
( mm_struct *check_mm_struct;) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 696 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 696 M
(\(check_mm_struct !=NULL\) { ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
203 696 M
(//used for test check_swap) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(            print_pgfault\(tf\);) s
5 674 M
(        }) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 663 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 663 M
( mm_struct *mm;) s
5 652 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 652 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 652 M
( \(check_mm_struct != NULL\) {) s
5 641 M
(        assert\(current == idleproc\);) s
5 630 M
(        mm = check_mm_struct;) s
5 619 M
(    }) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 608 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 608 M
( {) s
5 597 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 597 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 597 M
( \(current == NULL\) {) s
5 586 M
(            print_trapframe\(tf\);) s
5 575 M
(            print_pgfault\(tf\);) s
5 564 M
(            panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 564 M
("unhandled page fault.\\n") s
/F-gs-font 10 10 SF
0 setgray
263 564 M
(\);) s
5 553 M
(        }) s
5 542 M
(        mm = current->mm;) s
5 531 M
(    }) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 520 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
( do_pgfault\(mm, tf->tf_err, rcr2\(\)\);) s
5 509 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 487 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 487 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
95 487 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 487 M
(int) s
/F-gs-font 10 10 SF
0 setgray
119 487 M
( in_swap_tick_event = 0;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 476 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 476 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 476 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 476 M
( mm_struct *check_mm_struct;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 454 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 443 M
(trap_dispatch) s
/F-gs-font 10 10 SF
0 setgray
83 443 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 443 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 443 M
( trapframe *tf\) {) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 432 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 432 M
( c;) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 410 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( ret=0;) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(switch) s
/F-gs-font 10 10 SF
0 setgray
65 388 M
( \(tf->tf_trapno\) {) s
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 377 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 377 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 377 M
(T_PGFLT) s
/F-gs-font 10 10 SF
0 setgray
101 377 M
(:  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
119 377 M
(//page fault) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 366 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 366 M
( \(\(ret = pgfault_handler\(tf\)\) != 0\) {) s
5 355 M
(            print_trapframe\(tf\);) s
5 344 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 344 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 344 M
( \(current == NULL\) {) s
5 333 M
(                panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 333 M
("handle pgfault failed. ret=%d\\n") s
/F-gs-font 10 10 SF
0 setgray
335 333 M
(, ret\);) s
5 322 M
(            }) s
5 311 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 311 M
(else) s
/F-gs-font 10 10 SF
0 setgray
101 311 M
( {) s
5 300 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 300 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 300 M
( \(trap_in_kernel\(tf\)\) {) s
5 289 M
(                    panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
161 289 M
("handle pgfault failed in kernel mode. ret=%d\\n") s
/F-gs-font 10 10 SF
0 setgray
449 289 M
(, ret\);) s
5 278 M
(                }) s
5 267 M
(                cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 267 M
("killed by kernel.\\n") s
/F-gs-font 10 10 SF
0 setgray
275 267 M
(\);) s
5 256 M
(                panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 256 M
("handle user mode pgfault failed. ret=%d\\n") s
/F-gs-font 10 10 SF
0 setgray
395 256 M
(, ret\); ) s
5 245 M
(                do_exit\(-E_KILLED\);) s
5 234 M
(            }) s
5 223 M
(        }) s
5 212 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 212 M
(break) s
/F-gs-font 10 10 SF
0 setgray
83 212 M
(;) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 201 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 201 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 201 M
(T_SYSCALL) s
/F-gs-font 10 10 SF
0 setgray
113 201 M
(:) s
5 190 M
(        syscall\(\);) s
5 179 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 179 M
(break) s
/F-gs-font 10 10 SF
0 setgray
83 179 M
(;) s
5 168 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 168 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 168 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 168 M
(IRQ_OFFSET) s
/F-gs-font 10 10 SF
0 setgray
119 168 M
( + IRQ_TIMER:) s
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(if) s
/F-gs-font 10 10 SF
0 setgray
23 157 M
( 0) s
5 146 M
(    LAB3 : If some page replacement algorithm\(such as CLOCK PRA\) need tick to change the prior) s
5 135 M
(ity of pages, ) s
5 124 M
(    then you can add code here. ) s
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 102 M
(/* LAB1 YOUR CODE : STEP 3 */) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 91 M
(/* handle the timer interrupt */) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 80 M
(/* \(1\) After a timer interrupt, you should record this event using a global variable \() s
5 69 M
(increase it\), such as ticks in kern/driver/clock.c) s
5 58 M
(         * \(2\) Every TICK_NUM cycle, you can print some info using a funciton, such as print_t) s
5 47 M
(icks\(\).) s
5 36 M
(         * \(3\) Too Simple? Yes, I think so!) s
5 25 M
(         */) s
/F-gs-font 10 10 SF
0 setgray
5 14 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 14 M
(/* LAB5 YOUR CODE */) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 3 M
(/* you should upate you lab1 code \(just add ONE or TWO lines of code\):) s
_R
S
%%Page: (201) 201
%%BeginPageSetup
_S
18 36 translate
/pagenum 201 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
(         *    Every TICK_NUM cycle, you should set current process's current->need_resched = 1) s
5 696 M
(         */) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 685 M
(/* LAB6 YOUR CODE */) s
/F-gs-font 10 10 SF
0 setgray
5 674 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 674 M
(/* IMPORTANT FUNCTIONS:) s
5 663 M
(             * run_timer_list) s
5 652 M
(             *----------------------) s
5 641 M
(             * you should update your lab5 code \(just add ONE or TWO lines of code\):) s
5 630 M
(         *    Every tick, you should update the system time, iterate the timers, and trigger t) s
5 619 M
(he timers which are end to call scheduler.) s
5 608 M
(         *    You can use one funcitons to finish all these things.) s
5 597 M
(         */) s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(        ticks ++;) s
5 575 M
(        assert\(current != NULL\);) s
5 564 M
(        run_timer_list\(\);) s
5 553 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 553 M
(break) s
/F-gs-font 10 10 SF
0 setgray
83 553 M
(;) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 542 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 542 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 542 M
(IRQ_OFFSET) s
/F-gs-font 10 10 SF
0 setgray
119 542 M
( + IRQ_COM1:) s
5 531 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 531 M
(//c = cons_getc\(\);) s
/F-gs-font 10 10 SF
0 setgray
5 520 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 520 M
(//cprintf\("serial [%03d] %c\\n", c, c\);) s
/F-gs-font 10 10 SF
0 setgray
5 509 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 509 M
(//break;) s
/F-gs-font 10 10 SF
0 setgray
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 498 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 498 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 498 M
(IRQ_OFFSET) s
/F-gs-font 10 10 SF
0 setgray
119 498 M
( + IRQ_KBD:) s
5 487 M
(        c = cons_getc\(\);) s
5 476 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 476 M
(//cprintf\("kbd [%03d] %c\\n", c, c\);) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(        {) s
5 454 M
(          ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 454 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
101 454 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 454 M
(void) s
/F-gs-font 10 10 SF
0 setgray
131 454 M
( dev_stdin_write\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
233 454 M
(char) s
/F-gs-font 10 10 SF
0 setgray
257 454 M
( c\);) s
5 443 M
(          dev_stdin_write\(c\);) s
5 432 M
(        }) s
5 421 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 421 M
(break) s
/F-gs-font 10 10 SF
0 setgray
83 421 M
(;) s
5 410 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 410 M
(//LAB1 CHALLENGE 1 : YOUR CODE you should modify below codes.) s
/F-gs-font 10 10 SF
0 setgray
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 399 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 399 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 399 M
(T_SWITCH_TOU) s
/F-gs-font 10 10 SF
0 setgray
131 399 M
(:) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 388 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 388 M
(T_SWITCH_TOK) s
/F-gs-font 10 10 SF
0 setgray
131 388 M
(:) s
5 377 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 377 M
("T_SWITCH_** ??\\n") s
/F-gs-font 10 10 SF
0 setgray
197 377 M
(\);) s
5 366 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 366 M
(break) s
/F-gs-font 10 10 SF
0 setgray
83 366 M
(;) s
5 355 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 355 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 355 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 355 M
(IRQ_OFFSET) s
/F-gs-font 10 10 SF
0 setgray
119 355 M
( + IRQ_IDE1:) s
5 344 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 344 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 344 M
(IRQ_OFFSET) s
/F-gs-font 10 10 SF
0 setgray
119 344 M
( + IRQ_IDE2:) s
5 333 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 333 M
(/* do nothing */) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 322 M
(break) s
/F-gs-font 10 10 SF
0 setgray
83 322 M
(;) s
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
29 311 M
(default) s
/F-gs-font 10 10 SF
0 setgray
71 311 M
(:) s
5 300 M
(        print_trapframe\(tf\);) s
5 289 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 289 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 289 M
( \(current != NULL\) {) s
5 278 M
(            cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
125 278 M
("unhandled trap.\\n") s
/F-gs-font 10 10 SF
0 setgray
239 278 M
(\);) s
5 267 M
(            do_exit\(-E_KILLED\);) s
5 256 M
(        }) s
5 245 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 245 M
(// in kernel, it must be a mistake) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 234 M
("unexpected trap in kernel.\\n") s
/F-gs-font 10 10 SF
0 setgray
269 234 M
(\);) s
5 212 M
(    }) s
5 201 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 179 M
(/* *) s
5 168 M
( * trap - handles or dispatches an exception/interrupt. if and when trap\(\) returns,) s
5 157 M
( * the code in kern/trap/trapentry.S restores the old CPU state saved in the) s
5 146 M
( * trapframe and then uses the iret instruction to return from the exception.) s
5 135 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 113 M
(trap) s
/F-gs-font 10 10 SF
0 setgray
29 113 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 113 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
71 113 M
( trapframe *tf\) {) s
5 102 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 102 M
(// dispatch based on what type of trap occurred) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 91 M
(// used for previous projects) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 80 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 80 M
( \(current == NULL\) {) s
5 69 M
(        trap_dispatch\(tf\);) s
5 58 M
(    }) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 47 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 47 M
( {) s
5 36 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 36 M
(// keep a trapframe chain in stack) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 25 M
( trapframe *otf = current->tf;) s
5 14 M
(        current->tf = tf;) s
5 3 M
(    ) s
_R
S
%%Page: (202) 202
%%BeginPageSetup
_S
18 36 translate
/pagenum 202 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        bool in_kernel = trap_in_kernel\(tf\);) s
5 696 M
(    ) s
5 685 M
(        trap_dispatch\(tf\);) s
5 674 M
(    ) s
5 663 M
(        current->tf = otf;) s
5 652 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 652 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 652 M
( \(!in_kernel\) {) s
5 641 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 641 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 641 M
( \(current->flags & PF_EXITING\) {) s
5 630 M
(                do_exit\(-E_KILLED\);) s
5 619 M
(            }) s
5 608 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 608 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 608 M
( \(current->need_resched\) {) s
5 597 M
(                schedule\(\);) s
5 586 M
(            }) s
5 575 M
(        }) s
5 564 M
(    }) s
5 553 M
(}) s
5 531 M
([ucore/lab8_result/kern/trap/vectors.S] ++++++++++++++++++++++++++++++) s
5 520 M
(# ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
17 520 M
(handler) s
/F-gs-font 10 10 SF
0 setgray
5 509 M
(.text) s
5 498 M
(.globl __alltraps) s
5 487 M
(.globl vector0) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 476 M
(vector0) s
/F-gs-font 10 10 SF
0 setgray
47 476 M
(:) s
5 465 M
(  pushl $0) s
5 454 M
(  pushl $0) s
5 443 M
(  jmp __alltraps) s
5 432 M
(.globl vector1) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 421 M
(vector1) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
(:) s
5 410 M
(  pushl $0) s
5 399 M
(  pushl $1) s
5 388 M
(  jmp __alltraps) s
5 377 M
(.globl vector2) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 366 M
(vector2) s
/F-gs-font 10 10 SF
0 setgray
47 366 M
(:) s
5 355 M
(  pushl $0) s
5 344 M
(  pushl $2) s
5 333 M
(  jmp __alltraps) s
5 322 M
(.globl vector3) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 311 M
(vector3) s
/F-gs-font 10 10 SF
0 setgray
47 311 M
(:) s
5 300 M
(  pushl $0) s
5 289 M
(  pushl $3) s
5 278 M
(  jmp __alltraps) s
5 267 M
(.globl vector4) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 256 M
(vector4) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
(:) s
5 245 M
(  pushl $0) s
5 234 M
(  pushl $4) s
5 223 M
(  jmp __alltraps) s
5 212 M
(.globl vector5) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 201 M
(vector5) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
(:) s
5 190 M
(  pushl $0) s
5 179 M
(  pushl $5) s
5 168 M
(  jmp __alltraps) s
5 157 M
(.globl vector6) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 146 M
(vector6) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
(:) s
5 135 M
(  pushl $0) s
5 124 M
(  pushl $6) s
5 113 M
(  jmp __alltraps) s
5 102 M
(.globl vector7) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 91 M
(vector7) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
(:) s
5 80 M
(  pushl $0) s
5 69 M
(  pushl $7) s
5 58 M
(  jmp __alltraps) s
5 47 M
(.globl vector8) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 36 M
(vector8) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
(:) s
5 25 M
(  pushl $8) s
5 14 M
(  jmp __alltraps) s
5 3 M
(.globl vector9) s
_R
S
%%Page: (203) 203
%%BeginPageSetup
_S
18 36 translate
/pagenum 203 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 707 M
(vector9) s
/F-gs-font 10 10 SF
0 setgray
47 707 M
(:) s
5 696 M
(  pushl $9) s
5 685 M
(  jmp __alltraps) s
5 674 M
(.globl vector10) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 663 M
(vector10) s
/F-gs-font 10 10 SF
0 setgray
53 663 M
(:) s
5 652 M
(  pushl $10) s
5 641 M
(  jmp __alltraps) s
5 630 M
(.globl vector11) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 619 M
(vector11) s
/F-gs-font 10 10 SF
0 setgray
53 619 M
(:) s
5 608 M
(  pushl $11) s
5 597 M
(  jmp __alltraps) s
5 586 M
(.globl vector12) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 575 M
(vector12) s
/F-gs-font 10 10 SF
0 setgray
53 575 M
(:) s
5 564 M
(  pushl $12) s
5 553 M
(  jmp __alltraps) s
5 542 M
(.globl vector13) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 531 M
(vector13) s
/F-gs-font 10 10 SF
0 setgray
53 531 M
(:) s
5 520 M
(  pushl $13) s
5 509 M
(  jmp __alltraps) s
5 498 M
(.globl vector14) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 487 M
(vector14) s
/F-gs-font 10 10 SF
0 setgray
53 487 M
(:) s
5 476 M
(  pushl $14) s
5 465 M
(  jmp __alltraps) s
5 454 M
(.globl vector15) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 443 M
(vector15) s
/F-gs-font 10 10 SF
0 setgray
53 443 M
(:) s
5 432 M
(  pushl $0) s
5 421 M
(  pushl $15) s
5 410 M
(  jmp __alltraps) s
5 399 M
(.globl vector16) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 388 M
(vector16) s
/F-gs-font 10 10 SF
0 setgray
53 388 M
(:) s
5 377 M
(  pushl $0) s
5 366 M
(  pushl $16) s
5 355 M
(  jmp __alltraps) s
5 344 M
(.globl vector17) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 333 M
(vector17) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
(:) s
5 322 M
(  pushl $17) s
5 311 M
(  jmp __alltraps) s
5 300 M
(.globl vector18) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 289 M
(vector18) s
/F-gs-font 10 10 SF
0 setgray
53 289 M
(:) s
5 278 M
(  pushl $0) s
5 267 M
(  pushl $18) s
5 256 M
(  jmp __alltraps) s
5 245 M
(.globl vector19) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 234 M
(vector19) s
/F-gs-font 10 10 SF
0 setgray
53 234 M
(:) s
5 223 M
(  pushl $0) s
5 212 M
(  pushl $19) s
5 201 M
(  jmp __alltraps) s
5 190 M
(.globl vector20) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 179 M
(vector20) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
(:) s
5 168 M
(  pushl $0) s
5 157 M
(  pushl $20) s
5 146 M
(  jmp __alltraps) s
5 135 M
(.globl vector21) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 124 M
(vector21) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
(:) s
5 113 M
(  pushl $0) s
5 102 M
(  pushl $21) s
5 91 M
(  jmp __alltraps) s
5 80 M
(.globl vector22) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 69 M
(vector22) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
(:) s
5 58 M
(  pushl $0) s
5 47 M
(  pushl $22) s
5 36 M
(  jmp __alltraps) s
5 25 M
(.globl vector23) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 14 M
(vector23) s
/F-gs-font 10 10 SF
0 setgray
53 14 M
(:) s
5 3 M
(  pushl $0) s
_R
S
%%Page: (204) 204
%%BeginPageSetup
_S
18 36 translate
/pagenum 204 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  pushl $23) s
5 696 M
(  jmp __alltraps) s
5 685 M
(.globl vector24) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 674 M
(vector24) s
/F-gs-font 10 10 SF
0 setgray
53 674 M
(:) s
5 663 M
(  pushl $0) s
5 652 M
(  pushl $24) s
5 641 M
(  jmp __alltraps) s
5 630 M
(.globl vector25) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 619 M
(vector25) s
/F-gs-font 10 10 SF
0 setgray
53 619 M
(:) s
5 608 M
(  pushl $0) s
5 597 M
(  pushl $25) s
5 586 M
(  jmp __alltraps) s
5 575 M
(.globl vector26) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(vector26) s
/F-gs-font 10 10 SF
0 setgray
53 564 M
(:) s
5 553 M
(  pushl $0) s
5 542 M
(  pushl $26) s
5 531 M
(  jmp __alltraps) s
5 520 M
(.globl vector27) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 509 M
(vector27) s
/F-gs-font 10 10 SF
0 setgray
53 509 M
(:) s
5 498 M
(  pushl $0) s
5 487 M
(  pushl $27) s
5 476 M
(  jmp __alltraps) s
5 465 M
(.globl vector28) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 454 M
(vector28) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
(:) s
5 443 M
(  pushl $0) s
5 432 M
(  pushl $28) s
5 421 M
(  jmp __alltraps) s
5 410 M
(.globl vector29) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 399 M
(vector29) s
/F-gs-font 10 10 SF
0 setgray
53 399 M
(:) s
5 388 M
(  pushl $0) s
5 377 M
(  pushl $29) s
5 366 M
(  jmp __alltraps) s
5 355 M
(.globl vector30) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 344 M
(vector30) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
(:) s
5 333 M
(  pushl $0) s
5 322 M
(  pushl $30) s
5 311 M
(  jmp __alltraps) s
5 300 M
(.globl vector31) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 289 M
(vector31) s
/F-gs-font 10 10 SF
0 setgray
53 289 M
(:) s
5 278 M
(  pushl $0) s
5 267 M
(  pushl $31) s
5 256 M
(  jmp __alltraps) s
5 245 M
(.globl vector32) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 234 M
(vector32) s
/F-gs-font 10 10 SF
0 setgray
53 234 M
(:) s
5 223 M
(  pushl $0) s
5 212 M
(  pushl $32) s
5 201 M
(  jmp __alltraps) s
5 190 M
(.globl vector33) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 179 M
(vector33) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
(:) s
5 168 M
(  pushl $0) s
5 157 M
(  pushl $33) s
5 146 M
(  jmp __alltraps) s
5 135 M
(.globl vector34) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 124 M
(vector34) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
(:) s
5 113 M
(  pushl $0) s
5 102 M
(  pushl $34) s
5 91 M
(  jmp __alltraps) s
5 80 M
(.globl vector35) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 69 M
(vector35) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
(:) s
5 58 M
(  pushl $0) s
5 47 M
(  pushl $35) s
5 36 M
(  jmp __alltraps) s
5 25 M
(.globl vector36) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 14 M
(vector36) s
/F-gs-font 10 10 SF
0 setgray
53 14 M
(:) s
5 3 M
(  pushl $0) s
_R
S
%%Page: (205) 205
%%BeginPageSetup
_S
18 36 translate
/pagenum 205 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  pushl $36) s
5 696 M
(  jmp __alltraps) s
5 685 M
(.globl vector37) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 674 M
(vector37) s
/F-gs-font 10 10 SF
0 setgray
53 674 M
(:) s
5 663 M
(  pushl $0) s
5 652 M
(  pushl $37) s
5 641 M
(  jmp __alltraps) s
5 630 M
(.globl vector38) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 619 M
(vector38) s
/F-gs-font 10 10 SF
0 setgray
53 619 M
(:) s
5 608 M
(  pushl $0) s
5 597 M
(  pushl $38) s
5 586 M
(  jmp __alltraps) s
5 575 M
(.globl vector39) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(vector39) s
/F-gs-font 10 10 SF
0 setgray
53 564 M
(:) s
5 553 M
(  pushl $0) s
5 542 M
(  pushl $39) s
5 531 M
(  jmp __alltraps) s
5 520 M
(.globl vector40) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 509 M
(vector40) s
/F-gs-font 10 10 SF
0 setgray
53 509 M
(:) s
5 498 M
(  pushl $0) s
5 487 M
(  pushl $40) s
5 476 M
(  jmp __alltraps) s
5 465 M
(.globl vector41) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 454 M
(vector41) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
(:) s
5 443 M
(  pushl $0) s
5 432 M
(  pushl $41) s
5 421 M
(  jmp __alltraps) s
5 410 M
(.globl vector42) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 399 M
(vector42) s
/F-gs-font 10 10 SF
0 setgray
53 399 M
(:) s
5 388 M
(  pushl $0) s
5 377 M
(  pushl $42) s
5 366 M
(  jmp __alltraps) s
5 355 M
(.globl vector43) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 344 M
(vector43) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
(:) s
5 333 M
(  pushl $0) s
5 322 M
(  pushl $43) s
5 311 M
(  jmp __alltraps) s
5 300 M
(.globl vector44) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 289 M
(vector44) s
/F-gs-font 10 10 SF
0 setgray
53 289 M
(:) s
5 278 M
(  pushl $0) s
5 267 M
(  pushl $44) s
5 256 M
(  jmp __alltraps) s
5 245 M
(.globl vector45) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 234 M
(vector45) s
/F-gs-font 10 10 SF
0 setgray
53 234 M
(:) s
5 223 M
(  pushl $0) s
5 212 M
(  pushl $45) s
5 201 M
(  jmp __alltraps) s
5 190 M
(.globl vector46) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 179 M
(vector46) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
(:) s
5 168 M
(  pushl $0) s
5 157 M
(  pushl $46) s
5 146 M
(  jmp __alltraps) s
5 135 M
(.globl vector47) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 124 M
(vector47) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
(:) s
5 113 M
(  pushl $0) s
5 102 M
(  pushl $47) s
5 91 M
(  jmp __alltraps) s
5 80 M
(.globl vector48) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 69 M
(vector48) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
(:) s
5 58 M
(  pushl $0) s
5 47 M
(  pushl $48) s
5 36 M
(  jmp __alltraps) s
5 25 M
(.globl vector49) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 14 M
(vector49) s
/F-gs-font 10 10 SF
0 setgray
53 14 M
(:) s
5 3 M
(  pushl $0) s
_R
S
%%Page: (206) 206
%%BeginPageSetup
_S
18 36 translate
/pagenum 206 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  pushl $49) s
5 696 M
(  jmp __alltraps) s
5 685 M
(.globl vector50) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 674 M
(vector50) s
/F-gs-font 10 10 SF
0 setgray
53 674 M
(:) s
5 663 M
(  pushl $0) s
5 652 M
(  pushl $50) s
5 641 M
(  jmp __alltraps) s
5 630 M
(.globl vector51) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 619 M
(vector51) s
/F-gs-font 10 10 SF
0 setgray
53 619 M
(:) s
5 608 M
(  pushl $0) s
5 597 M
(  pushl $51) s
5 586 M
(  jmp __alltraps) s
5 575 M
(.globl vector52) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(vector52) s
/F-gs-font 10 10 SF
0 setgray
53 564 M
(:) s
5 553 M
(  pushl $0) s
5 542 M
(  pushl $52) s
5 531 M
(  jmp __alltraps) s
5 520 M
(.globl vector53) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 509 M
(vector53) s
/F-gs-font 10 10 SF
0 setgray
53 509 M
(:) s
5 498 M
(  pushl $0) s
5 487 M
(  pushl $53) s
5 476 M
(  jmp __alltraps) s
5 465 M
(.globl vector54) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 454 M
(vector54) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
(:) s
5 443 M
(  pushl $0) s
5 432 M
(  pushl $54) s
5 421 M
(  jmp __alltraps) s
5 410 M
(.globl vector55) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 399 M
(vector55) s
/F-gs-font 10 10 SF
0 setgray
53 399 M
(:) s
5 388 M
(  pushl $0) s
5 377 M
(  pushl $55) s
5 366 M
(  jmp __alltraps) s
5 355 M
(.globl vector56) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 344 M
(vector56) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
(:) s
5 333 M
(  pushl $0) s
5 322 M
(  pushl $56) s
5 311 M
(  jmp __alltraps) s
5 300 M
(.globl vector57) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 289 M
(vector57) s
/F-gs-font 10 10 SF
0 setgray
53 289 M
(:) s
5 278 M
(  pushl $0) s
5 267 M
(  pushl $57) s
5 256 M
(  jmp __alltraps) s
5 245 M
(.globl vector58) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 234 M
(vector58) s
/F-gs-font 10 10 SF
0 setgray
53 234 M
(:) s
5 223 M
(  pushl $0) s
5 212 M
(  pushl $58) s
5 201 M
(  jmp __alltraps) s
5 190 M
(.globl vector59) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 179 M
(vector59) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
(:) s
5 168 M
(  pushl $0) s
5 157 M
(  pushl $59) s
5 146 M
(  jmp __alltraps) s
5 135 M
(.globl vector60) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 124 M
(vector60) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
(:) s
5 113 M
(  pushl $0) s
5 102 M
(  pushl $60) s
5 91 M
(  jmp __alltraps) s
5 80 M
(.globl vector61) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 69 M
(vector61) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
(:) s
5 58 M
(  pushl $0) s
5 47 M
(  pushl $61) s
5 36 M
(  jmp __alltraps) s
5 25 M
(.globl vector62) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 14 M
(vector62) s
/F-gs-font 10 10 SF
0 setgray
53 14 M
(:) s
5 3 M
(  pushl $0) s
_R
S
%%Page: (207) 207
%%BeginPageSetup
_S
18 36 translate
/pagenum 207 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  pushl $62) s
5 696 M
(  jmp __alltraps) s
5 685 M
(.globl vector63) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 674 M
(vector63) s
/F-gs-font 10 10 SF
0 setgray
53 674 M
(:) s
5 663 M
(  pushl $0) s
5 652 M
(  pushl $63) s
5 641 M
(  jmp __alltraps) s
5 630 M
(.globl vector64) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 619 M
(vector64) s
/F-gs-font 10 10 SF
0 setgray
53 619 M
(:) s
5 608 M
(  pushl $0) s
5 597 M
(  pushl $64) s
5 586 M
(  jmp __alltraps) s
5 575 M
(.globl vector65) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(vector65) s
/F-gs-font 10 10 SF
0 setgray
53 564 M
(:) s
5 553 M
(  pushl $0) s
5 542 M
(  pushl $65) s
5 531 M
(  jmp __alltraps) s
5 520 M
(.globl vector66) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 509 M
(vector66) s
/F-gs-font 10 10 SF
0 setgray
53 509 M
(:) s
5 498 M
(  pushl $0) s
5 487 M
(  pushl $66) s
5 476 M
(  jmp __alltraps) s
5 465 M
(.globl vector67) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 454 M
(vector67) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
(:) s
5 443 M
(  pushl $0) s
5 432 M
(  pushl $67) s
5 421 M
(  jmp __alltraps) s
5 410 M
(.globl vector68) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 399 M
(vector68) s
/F-gs-font 10 10 SF
0 setgray
53 399 M
(:) s
5 388 M
(  pushl $0) s
5 377 M
(  pushl $68) s
5 366 M
(  jmp __alltraps) s
5 355 M
(.globl vector69) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 344 M
(vector69) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
(:) s
5 333 M
(  pushl $0) s
5 322 M
(  pushl $69) s
5 311 M
(  jmp __alltraps) s
5 300 M
(.globl vector70) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 289 M
(vector70) s
/F-gs-font 10 10 SF
0 setgray
53 289 M
(:) s
5 278 M
(  pushl $0) s
5 267 M
(  pushl $70) s
5 256 M
(  jmp __alltraps) s
5 245 M
(.globl vector71) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 234 M
(vector71) s
/F-gs-font 10 10 SF
0 setgray
53 234 M
(:) s
5 223 M
(  pushl $0) s
5 212 M
(  pushl $71) s
5 201 M
(  jmp __alltraps) s
5 190 M
(.globl vector72) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 179 M
(vector72) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
(:) s
5 168 M
(  pushl $0) s
5 157 M
(  pushl $72) s
5 146 M
(  jmp __alltraps) s
5 135 M
(.globl vector73) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 124 M
(vector73) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
(:) s
5 113 M
(  pushl $0) s
5 102 M
(  pushl $73) s
5 91 M
(  jmp __alltraps) s
5 80 M
(.globl vector74) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 69 M
(vector74) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
(:) s
5 58 M
(  pushl $0) s
5 47 M
(  pushl $74) s
5 36 M
(  jmp __alltraps) s
5 25 M
(.globl vector75) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 14 M
(vector75) s
/F-gs-font 10 10 SF
0 setgray
53 14 M
(:) s
5 3 M
(  pushl $0) s
_R
S
%%Page: (208) 208
%%BeginPageSetup
_S
18 36 translate
/pagenum 208 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  pushl $75) s
5 696 M
(  jmp __alltraps) s
5 685 M
(.globl vector76) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 674 M
(vector76) s
/F-gs-font 10 10 SF
0 setgray
53 674 M
(:) s
5 663 M
(  pushl $0) s
5 652 M
(  pushl $76) s
5 641 M
(  jmp __alltraps) s
5 630 M
(.globl vector77) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 619 M
(vector77) s
/F-gs-font 10 10 SF
0 setgray
53 619 M
(:) s
5 608 M
(  pushl $0) s
5 597 M
(  pushl $77) s
5 586 M
(  jmp __alltraps) s
5 575 M
(.globl vector78) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(vector78) s
/F-gs-font 10 10 SF
0 setgray
53 564 M
(:) s
5 553 M
(  pushl $0) s
5 542 M
(  pushl $78) s
5 531 M
(  jmp __alltraps) s
5 520 M
(.globl vector79) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 509 M
(vector79) s
/F-gs-font 10 10 SF
0 setgray
53 509 M
(:) s
5 498 M
(  pushl $0) s
5 487 M
(  pushl $79) s
5 476 M
(  jmp __alltraps) s
5 465 M
(.globl vector80) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 454 M
(vector80) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
(:) s
5 443 M
(  pushl $0) s
5 432 M
(  pushl $80) s
5 421 M
(  jmp __alltraps) s
5 410 M
(.globl vector81) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 399 M
(vector81) s
/F-gs-font 10 10 SF
0 setgray
53 399 M
(:) s
5 388 M
(  pushl $0) s
5 377 M
(  pushl $81) s
5 366 M
(  jmp __alltraps) s
5 355 M
(.globl vector82) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 344 M
(vector82) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
(:) s
5 333 M
(  pushl $0) s
5 322 M
(  pushl $82) s
5 311 M
(  jmp __alltraps) s
5 300 M
(.globl vector83) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 289 M
(vector83) s
/F-gs-font 10 10 SF
0 setgray
53 289 M
(:) s
5 278 M
(  pushl $0) s
5 267 M
(  pushl $83) s
5 256 M
(  jmp __alltraps) s
5 245 M
(.globl vector84) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 234 M
(vector84) s
/F-gs-font 10 10 SF
0 setgray
53 234 M
(:) s
5 223 M
(  pushl $0) s
5 212 M
(  pushl $84) s
5 201 M
(  jmp __alltraps) s
5 190 M
(.globl vector85) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 179 M
(vector85) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
(:) s
5 168 M
(  pushl $0) s
5 157 M
(  pushl $85) s
5 146 M
(  jmp __alltraps) s
5 135 M
(.globl vector86) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 124 M
(vector86) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
(:) s
5 113 M
(  pushl $0) s
5 102 M
(  pushl $86) s
5 91 M
(  jmp __alltraps) s
5 80 M
(.globl vector87) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 69 M
(vector87) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
(:) s
5 58 M
(  pushl $0) s
5 47 M
(  pushl $87) s
5 36 M
(  jmp __alltraps) s
5 25 M
(.globl vector88) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 14 M
(vector88) s
/F-gs-font 10 10 SF
0 setgray
53 14 M
(:) s
5 3 M
(  pushl $0) s
_R
S
%%Page: (209) 209
%%BeginPageSetup
_S
18 36 translate
/pagenum 209 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  pushl $88) s
5 696 M
(  jmp __alltraps) s
5 685 M
(.globl vector89) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 674 M
(vector89) s
/F-gs-font 10 10 SF
0 setgray
53 674 M
(:) s
5 663 M
(  pushl $0) s
5 652 M
(  pushl $89) s
5 641 M
(  jmp __alltraps) s
5 630 M
(.globl vector90) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 619 M
(vector90) s
/F-gs-font 10 10 SF
0 setgray
53 619 M
(:) s
5 608 M
(  pushl $0) s
5 597 M
(  pushl $90) s
5 586 M
(  jmp __alltraps) s
5 575 M
(.globl vector91) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(vector91) s
/F-gs-font 10 10 SF
0 setgray
53 564 M
(:) s
5 553 M
(  pushl $0) s
5 542 M
(  pushl $91) s
5 531 M
(  jmp __alltraps) s
5 520 M
(.globl vector92) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 509 M
(vector92) s
/F-gs-font 10 10 SF
0 setgray
53 509 M
(:) s
5 498 M
(  pushl $0) s
5 487 M
(  pushl $92) s
5 476 M
(  jmp __alltraps) s
5 465 M
(.globl vector93) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 454 M
(vector93) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
(:) s
5 443 M
(  pushl $0) s
5 432 M
(  pushl $93) s
5 421 M
(  jmp __alltraps) s
5 410 M
(.globl vector94) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 399 M
(vector94) s
/F-gs-font 10 10 SF
0 setgray
53 399 M
(:) s
5 388 M
(  pushl $0) s
5 377 M
(  pushl $94) s
5 366 M
(  jmp __alltraps) s
5 355 M
(.globl vector95) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 344 M
(vector95) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
(:) s
5 333 M
(  pushl $0) s
5 322 M
(  pushl $95) s
5 311 M
(  jmp __alltraps) s
5 300 M
(.globl vector96) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 289 M
(vector96) s
/F-gs-font 10 10 SF
0 setgray
53 289 M
(:) s
5 278 M
(  pushl $0) s
5 267 M
(  pushl $96) s
5 256 M
(  jmp __alltraps) s
5 245 M
(.globl vector97) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 234 M
(vector97) s
/F-gs-font 10 10 SF
0 setgray
53 234 M
(:) s
5 223 M
(  pushl $0) s
5 212 M
(  pushl $97) s
5 201 M
(  jmp __alltraps) s
5 190 M
(.globl vector98) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 179 M
(vector98) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
(:) s
5 168 M
(  pushl $0) s
5 157 M
(  pushl $98) s
5 146 M
(  jmp __alltraps) s
5 135 M
(.globl vector99) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 124 M
(vector99) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
(:) s
5 113 M
(  pushl $0) s
5 102 M
(  pushl $99) s
5 91 M
(  jmp __alltraps) s
5 80 M
(.globl vector100) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 69 M
(vector100) s
/F-gs-font 10 10 SF
0 setgray
59 69 M
(:) s
5 58 M
(  pushl $0) s
5 47 M
(  pushl $100) s
5 36 M
(  jmp __alltraps) s
5 25 M
(.globl vector101) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 14 M
(vector101) s
/F-gs-font 10 10 SF
0 setgray
59 14 M
(:) s
5 3 M
(  pushl $0) s
_R
S
%%Page: (210) 210
%%BeginPageSetup
_S
18 36 translate
/pagenum 210 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  pushl $101) s
5 696 M
(  jmp __alltraps) s
5 685 M
(.globl vector102) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 674 M
(vector102) s
/F-gs-font 10 10 SF
0 setgray
59 674 M
(:) s
5 663 M
(  pushl $0) s
5 652 M
(  pushl $102) s
5 641 M
(  jmp __alltraps) s
5 630 M
(.globl vector103) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 619 M
(vector103) s
/F-gs-font 10 10 SF
0 setgray
59 619 M
(:) s
5 608 M
(  pushl $0) s
5 597 M
(  pushl $103) s
5 586 M
(  jmp __alltraps) s
5 575 M
(.globl vector104) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(vector104) s
/F-gs-font 10 10 SF
0 setgray
59 564 M
(:) s
5 553 M
(  pushl $0) s
5 542 M
(  pushl $104) s
5 531 M
(  jmp __alltraps) s
5 520 M
(.globl vector105) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 509 M
(vector105) s
/F-gs-font 10 10 SF
0 setgray
59 509 M
(:) s
5 498 M
(  pushl $0) s
5 487 M
(  pushl $105) s
5 476 M
(  jmp __alltraps) s
5 465 M
(.globl vector106) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 454 M
(vector106) s
/F-gs-font 10 10 SF
0 setgray
59 454 M
(:) s
5 443 M
(  pushl $0) s
5 432 M
(  pushl $106) s
5 421 M
(  jmp __alltraps) s
5 410 M
(.globl vector107) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 399 M
(vector107) s
/F-gs-font 10 10 SF
0 setgray
59 399 M
(:) s
5 388 M
(  pushl $0) s
5 377 M
(  pushl $107) s
5 366 M
(  jmp __alltraps) s
5 355 M
(.globl vector108) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 344 M
(vector108) s
/F-gs-font 10 10 SF
0 setgray
59 344 M
(:) s
5 333 M
(  pushl $0) s
5 322 M
(  pushl $108) s
5 311 M
(  jmp __alltraps) s
5 300 M
(.globl vector109) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 289 M
(vector109) s
/F-gs-font 10 10 SF
0 setgray
59 289 M
(:) s
5 278 M
(  pushl $0) s
5 267 M
(  pushl $109) s
5 256 M
(  jmp __alltraps) s
5 245 M
(.globl vector110) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 234 M
(vector110) s
/F-gs-font 10 10 SF
0 setgray
59 234 M
(:) s
5 223 M
(  pushl $0) s
5 212 M
(  pushl $110) s
5 201 M
(  jmp __alltraps) s
5 190 M
(.globl vector111) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 179 M
(vector111) s
/F-gs-font 10 10 SF
0 setgray
59 179 M
(:) s
5 168 M
(  pushl $0) s
5 157 M
(  pushl $111) s
5 146 M
(  jmp __alltraps) s
5 135 M
(.globl vector112) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 124 M
(vector112) s
/F-gs-font 10 10 SF
0 setgray
59 124 M
(:) s
5 113 M
(  pushl $0) s
5 102 M
(  pushl $112) s
5 91 M
(  jmp __alltraps) s
5 80 M
(.globl vector113) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 69 M
(vector113) s
/F-gs-font 10 10 SF
0 setgray
59 69 M
(:) s
5 58 M
(  pushl $0) s
5 47 M
(  pushl $113) s
5 36 M
(  jmp __alltraps) s
5 25 M
(.globl vector114) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 14 M
(vector114) s
/F-gs-font 10 10 SF
0 setgray
59 14 M
(:) s
5 3 M
(  pushl $0) s
_R
S
%%Page: (211) 211
%%BeginPageSetup
_S
18 36 translate
/pagenum 211 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  pushl $114) s
5 696 M
(  jmp __alltraps) s
5 685 M
(.globl vector115) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 674 M
(vector115) s
/F-gs-font 10 10 SF
0 setgray
59 674 M
(:) s
5 663 M
(  pushl $0) s
5 652 M
(  pushl $115) s
5 641 M
(  jmp __alltraps) s
5 630 M
(.globl vector116) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 619 M
(vector116) s
/F-gs-font 10 10 SF
0 setgray
59 619 M
(:) s
5 608 M
(  pushl $0) s
5 597 M
(  pushl $116) s
5 586 M
(  jmp __alltraps) s
5 575 M
(.globl vector117) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(vector117) s
/F-gs-font 10 10 SF
0 setgray
59 564 M
(:) s
5 553 M
(  pushl $0) s
5 542 M
(  pushl $117) s
5 531 M
(  jmp __alltraps) s
5 520 M
(.globl vector118) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 509 M
(vector118) s
/F-gs-font 10 10 SF
0 setgray
59 509 M
(:) s
5 498 M
(  pushl $0) s
5 487 M
(  pushl $118) s
5 476 M
(  jmp __alltraps) s
5 465 M
(.globl vector119) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 454 M
(vector119) s
/F-gs-font 10 10 SF
0 setgray
59 454 M
(:) s
5 443 M
(  pushl $0) s
5 432 M
(  pushl $119) s
5 421 M
(  jmp __alltraps) s
5 410 M
(.globl vector120) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 399 M
(vector120) s
/F-gs-font 10 10 SF
0 setgray
59 399 M
(:) s
5 388 M
(  pushl $0) s
5 377 M
(  pushl $120) s
5 366 M
(  jmp __alltraps) s
5 355 M
(.globl vector121) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 344 M
(vector121) s
/F-gs-font 10 10 SF
0 setgray
59 344 M
(:) s
5 333 M
(  pushl $0) s
5 322 M
(  pushl $121) s
5 311 M
(  jmp __alltraps) s
5 300 M
(.globl vector122) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 289 M
(vector122) s
/F-gs-font 10 10 SF
0 setgray
59 289 M
(:) s
5 278 M
(  pushl $0) s
5 267 M
(  pushl $122) s
5 256 M
(  jmp __alltraps) s
5 245 M
(.globl vector123) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 234 M
(vector123) s
/F-gs-font 10 10 SF
0 setgray
59 234 M
(:) s
5 223 M
(  pushl $0) s
5 212 M
(  pushl $123) s
5 201 M
(  jmp __alltraps) s
5 190 M
(.globl vector124) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 179 M
(vector124) s
/F-gs-font 10 10 SF
0 setgray
59 179 M
(:) s
5 168 M
(  pushl $0) s
5 157 M
(  pushl $124) s
5 146 M
(  jmp __alltraps) s
5 135 M
(.globl vector125) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 124 M
(vector125) s
/F-gs-font 10 10 SF
0 setgray
59 124 M
(:) s
5 113 M
(  pushl $0) s
5 102 M
(  pushl $125) s
5 91 M
(  jmp __alltraps) s
5 80 M
(.globl vector126) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 69 M
(vector126) s
/F-gs-font 10 10 SF
0 setgray
59 69 M
(:) s
5 58 M
(  pushl $0) s
5 47 M
(  pushl $126) s
5 36 M
(  jmp __alltraps) s
5 25 M
(.globl vector127) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 14 M
(vector127) s
/F-gs-font 10 10 SF
0 setgray
59 14 M
(:) s
5 3 M
(  pushl $0) s
_R
S
%%Page: (212) 212
%%BeginPageSetup
_S
18 36 translate
/pagenum 212 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  pushl $127) s
5 696 M
(  jmp __alltraps) s
5 685 M
(.globl vector128) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 674 M
(vector128) s
/F-gs-font 10 10 SF
0 setgray
59 674 M
(:) s
5 663 M
(  pushl $0) s
5 652 M
(  pushl $128) s
5 641 M
(  jmp __alltraps) s
5 630 M
(.globl vector129) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 619 M
(vector129) s
/F-gs-font 10 10 SF
0 setgray
59 619 M
(:) s
5 608 M
(  pushl $0) s
5 597 M
(  pushl $129) s
5 586 M
(  jmp __alltraps) s
5 575 M
(.globl vector130) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(vector130) s
/F-gs-font 10 10 SF
0 setgray
59 564 M
(:) s
5 553 M
(  pushl $0) s
5 542 M
(  pushl $130) s
5 531 M
(  jmp __alltraps) s
5 520 M
(.globl vector131) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 509 M
(vector131) s
/F-gs-font 10 10 SF
0 setgray
59 509 M
(:) s
5 498 M
(  pushl $0) s
5 487 M
(  pushl $131) s
5 476 M
(  jmp __alltraps) s
5 465 M
(.globl vector132) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 454 M
(vector132) s
/F-gs-font 10 10 SF
0 setgray
59 454 M
(:) s
5 443 M
(  pushl $0) s
5 432 M
(  pushl $132) s
5 421 M
(  jmp __alltraps) s
5 410 M
(.globl vector133) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 399 M
(vector133) s
/F-gs-font 10 10 SF
0 setgray
59 399 M
(:) s
5 388 M
(  pushl $0) s
5 377 M
(  pushl $133) s
5 366 M
(  jmp __alltraps) s
5 355 M
(.globl vector134) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 344 M
(vector134) s
/F-gs-font 10 10 SF
0 setgray
59 344 M
(:) s
5 333 M
(  pushl $0) s
5 322 M
(  pushl $134) s
5 311 M
(  jmp __alltraps) s
5 300 M
(.globl vector135) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 289 M
(vector135) s
/F-gs-font 10 10 SF
0 setgray
59 289 M
(:) s
5 278 M
(  pushl $0) s
5 267 M
(  pushl $135) s
5 256 M
(  jmp __alltraps) s
5 245 M
(.globl vector136) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 234 M
(vector136) s
/F-gs-font 10 10 SF
0 setgray
59 234 M
(:) s
5 223 M
(  pushl $0) s
5 212 M
(  pushl $136) s
5 201 M
(  jmp __alltraps) s
5 190 M
(.globl vector137) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 179 M
(vector137) s
/F-gs-font 10 10 SF
0 setgray
59 179 M
(:) s
5 168 M
(  pushl $0) s
5 157 M
(  pushl $137) s
5 146 M
(  jmp __alltraps) s
5 135 M
(.globl vector138) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 124 M
(vector138) s
/F-gs-font 10 10 SF
0 setgray
59 124 M
(:) s
5 113 M
(  pushl $0) s
5 102 M
(  pushl $138) s
5 91 M
(  jmp __alltraps) s
5 80 M
(.globl vector139) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 69 M
(vector139) s
/F-gs-font 10 10 SF
0 setgray
59 69 M
(:) s
5 58 M
(  pushl $0) s
5 47 M
(  pushl $139) s
5 36 M
(  jmp __alltraps) s
5 25 M
(.globl vector140) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 14 M
(vector140) s
/F-gs-font 10 10 SF
0 setgray
59 14 M
(:) s
5 3 M
(  pushl $0) s
_R
S
%%Page: (213) 213
%%BeginPageSetup
_S
18 36 translate
/pagenum 213 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  pushl $140) s
5 696 M
(  jmp __alltraps) s
5 685 M
(.globl vector141) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 674 M
(vector141) s
/F-gs-font 10 10 SF
0 setgray
59 674 M
(:) s
5 663 M
(  pushl $0) s
5 652 M
(  pushl $141) s
5 641 M
(  jmp __alltraps) s
5 630 M
(.globl vector142) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 619 M
(vector142) s
/F-gs-font 10 10 SF
0 setgray
59 619 M
(:) s
5 608 M
(  pushl $0) s
5 597 M
(  pushl $142) s
5 586 M
(  jmp __alltraps) s
5 575 M
(.globl vector143) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(vector143) s
/F-gs-font 10 10 SF
0 setgray
59 564 M
(:) s
5 553 M
(  pushl $0) s
5 542 M
(  pushl $143) s
5 531 M
(  jmp __alltraps) s
5 520 M
(.globl vector144) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 509 M
(vector144) s
/F-gs-font 10 10 SF
0 setgray
59 509 M
(:) s
5 498 M
(  pushl $0) s
5 487 M
(  pushl $144) s
5 476 M
(  jmp __alltraps) s
5 465 M
(.globl vector145) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 454 M
(vector145) s
/F-gs-font 10 10 SF
0 setgray
59 454 M
(:) s
5 443 M
(  pushl $0) s
5 432 M
(  pushl $145) s
5 421 M
(  jmp __alltraps) s
5 410 M
(.globl vector146) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 399 M
(vector146) s
/F-gs-font 10 10 SF
0 setgray
59 399 M
(:) s
5 388 M
(  pushl $0) s
5 377 M
(  pushl $146) s
5 366 M
(  jmp __alltraps) s
5 355 M
(.globl vector147) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 344 M
(vector147) s
/F-gs-font 10 10 SF
0 setgray
59 344 M
(:) s
5 333 M
(  pushl $0) s
5 322 M
(  pushl $147) s
5 311 M
(  jmp __alltraps) s
5 300 M
(.globl vector148) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 289 M
(vector148) s
/F-gs-font 10 10 SF
0 setgray
59 289 M
(:) s
5 278 M
(  pushl $0) s
5 267 M
(  pushl $148) s
5 256 M
(  jmp __alltraps) s
5 245 M
(.globl vector149) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 234 M
(vector149) s
/F-gs-font 10 10 SF
0 setgray
59 234 M
(:) s
5 223 M
(  pushl $0) s
5 212 M
(  pushl $149) s
5 201 M
(  jmp __alltraps) s
5 190 M
(.globl vector150) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 179 M
(vector150) s
/F-gs-font 10 10 SF
0 setgray
59 179 M
(:) s
5 168 M
(  pushl $0) s
5 157 M
(  pushl $150) s
5 146 M
(  jmp __alltraps) s
5 135 M
(.globl vector151) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 124 M
(vector151) s
/F-gs-font 10 10 SF
0 setgray
59 124 M
(:) s
5 113 M
(  pushl $0) s
5 102 M
(  pushl $151) s
5 91 M
(  jmp __alltraps) s
5 80 M
(.globl vector152) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 69 M
(vector152) s
/F-gs-font 10 10 SF
0 setgray
59 69 M
(:) s
5 58 M
(  pushl $0) s
5 47 M
(  pushl $152) s
5 36 M
(  jmp __alltraps) s
5 25 M
(.globl vector153) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 14 M
(vector153) s
/F-gs-font 10 10 SF
0 setgray
59 14 M
(:) s
5 3 M
(  pushl $0) s
_R
S
%%Page: (214) 214
%%BeginPageSetup
_S
18 36 translate
/pagenum 214 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  pushl $153) s
5 696 M
(  jmp __alltraps) s
5 685 M
(.globl vector154) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 674 M
(vector154) s
/F-gs-font 10 10 SF
0 setgray
59 674 M
(:) s
5 663 M
(  pushl $0) s
5 652 M
(  pushl $154) s
5 641 M
(  jmp __alltraps) s
5 630 M
(.globl vector155) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 619 M
(vector155) s
/F-gs-font 10 10 SF
0 setgray
59 619 M
(:) s
5 608 M
(  pushl $0) s
5 597 M
(  pushl $155) s
5 586 M
(  jmp __alltraps) s
5 575 M
(.globl vector156) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(vector156) s
/F-gs-font 10 10 SF
0 setgray
59 564 M
(:) s
5 553 M
(  pushl $0) s
5 542 M
(  pushl $156) s
5 531 M
(  jmp __alltraps) s
5 520 M
(.globl vector157) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 509 M
(vector157) s
/F-gs-font 10 10 SF
0 setgray
59 509 M
(:) s
5 498 M
(  pushl $0) s
5 487 M
(  pushl $157) s
5 476 M
(  jmp __alltraps) s
5 465 M
(.globl vector158) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 454 M
(vector158) s
/F-gs-font 10 10 SF
0 setgray
59 454 M
(:) s
5 443 M
(  pushl $0) s
5 432 M
(  pushl $158) s
5 421 M
(  jmp __alltraps) s
5 410 M
(.globl vector159) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 399 M
(vector159) s
/F-gs-font 10 10 SF
0 setgray
59 399 M
(:) s
5 388 M
(  pushl $0) s
5 377 M
(  pushl $159) s
5 366 M
(  jmp __alltraps) s
5 355 M
(.globl vector160) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 344 M
(vector160) s
/F-gs-font 10 10 SF
0 setgray
59 344 M
(:) s
5 333 M
(  pushl $0) s
5 322 M
(  pushl $160) s
5 311 M
(  jmp __alltraps) s
5 300 M
(.globl vector161) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 289 M
(vector161) s
/F-gs-font 10 10 SF
0 setgray
59 289 M
(:) s
5 278 M
(  pushl $0) s
5 267 M
(  pushl $161) s
5 256 M
(  jmp __alltraps) s
5 245 M
(.globl vector162) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 234 M
(vector162) s
/F-gs-font 10 10 SF
0 setgray
59 234 M
(:) s
5 223 M
(  pushl $0) s
5 212 M
(  pushl $162) s
5 201 M
(  jmp __alltraps) s
5 190 M
(.globl vector163) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 179 M
(vector163) s
/F-gs-font 10 10 SF
0 setgray
59 179 M
(:) s
5 168 M
(  pushl $0) s
5 157 M
(  pushl $163) s
5 146 M
(  jmp __alltraps) s
5 135 M
(.globl vector164) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 124 M
(vector164) s
/F-gs-font 10 10 SF
0 setgray
59 124 M
(:) s
5 113 M
(  pushl $0) s
5 102 M
(  pushl $164) s
5 91 M
(  jmp __alltraps) s
5 80 M
(.globl vector165) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 69 M
(vector165) s
/F-gs-font 10 10 SF
0 setgray
59 69 M
(:) s
5 58 M
(  pushl $0) s
5 47 M
(  pushl $165) s
5 36 M
(  jmp __alltraps) s
5 25 M
(.globl vector166) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 14 M
(vector166) s
/F-gs-font 10 10 SF
0 setgray
59 14 M
(:) s
5 3 M
(  pushl $0) s
_R
S
%%Page: (215) 215
%%BeginPageSetup
_S
18 36 translate
/pagenum 215 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  pushl $166) s
5 696 M
(  jmp __alltraps) s
5 685 M
(.globl vector167) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 674 M
(vector167) s
/F-gs-font 10 10 SF
0 setgray
59 674 M
(:) s
5 663 M
(  pushl $0) s
5 652 M
(  pushl $167) s
5 641 M
(  jmp __alltraps) s
5 630 M
(.globl vector168) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 619 M
(vector168) s
/F-gs-font 10 10 SF
0 setgray
59 619 M
(:) s
5 608 M
(  pushl $0) s
5 597 M
(  pushl $168) s
5 586 M
(  jmp __alltraps) s
5 575 M
(.globl vector169) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(vector169) s
/F-gs-font 10 10 SF
0 setgray
59 564 M
(:) s
5 553 M
(  pushl $0) s
5 542 M
(  pushl $169) s
5 531 M
(  jmp __alltraps) s
5 520 M
(.globl vector170) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 509 M
(vector170) s
/F-gs-font 10 10 SF
0 setgray
59 509 M
(:) s
5 498 M
(  pushl $0) s
5 487 M
(  pushl $170) s
5 476 M
(  jmp __alltraps) s
5 465 M
(.globl vector171) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 454 M
(vector171) s
/F-gs-font 10 10 SF
0 setgray
59 454 M
(:) s
5 443 M
(  pushl $0) s
5 432 M
(  pushl $171) s
5 421 M
(  jmp __alltraps) s
5 410 M
(.globl vector172) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 399 M
(vector172) s
/F-gs-font 10 10 SF
0 setgray
59 399 M
(:) s
5 388 M
(  pushl $0) s
5 377 M
(  pushl $172) s
5 366 M
(  jmp __alltraps) s
5 355 M
(.globl vector173) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 344 M
(vector173) s
/F-gs-font 10 10 SF
0 setgray
59 344 M
(:) s
5 333 M
(  pushl $0) s
5 322 M
(  pushl $173) s
5 311 M
(  jmp __alltraps) s
5 300 M
(.globl vector174) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 289 M
(vector174) s
/F-gs-font 10 10 SF
0 setgray
59 289 M
(:) s
5 278 M
(  pushl $0) s
5 267 M
(  pushl $174) s
5 256 M
(  jmp __alltraps) s
5 245 M
(.globl vector175) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 234 M
(vector175) s
/F-gs-font 10 10 SF
0 setgray
59 234 M
(:) s
5 223 M
(  pushl $0) s
5 212 M
(  pushl $175) s
5 201 M
(  jmp __alltraps) s
5 190 M
(.globl vector176) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 179 M
(vector176) s
/F-gs-font 10 10 SF
0 setgray
59 179 M
(:) s
5 168 M
(  pushl $0) s
5 157 M
(  pushl $176) s
5 146 M
(  jmp __alltraps) s
5 135 M
(.globl vector177) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 124 M
(vector177) s
/F-gs-font 10 10 SF
0 setgray
59 124 M
(:) s
5 113 M
(  pushl $0) s
5 102 M
(  pushl $177) s
5 91 M
(  jmp __alltraps) s
5 80 M
(.globl vector178) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 69 M
(vector178) s
/F-gs-font 10 10 SF
0 setgray
59 69 M
(:) s
5 58 M
(  pushl $0) s
5 47 M
(  pushl $178) s
5 36 M
(  jmp __alltraps) s
5 25 M
(.globl vector179) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 14 M
(vector179) s
/F-gs-font 10 10 SF
0 setgray
59 14 M
(:) s
5 3 M
(  pushl $0) s
_R
S
%%Page: (216) 216
%%BeginPageSetup
_S
18 36 translate
/pagenum 216 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  pushl $179) s
5 696 M
(  jmp __alltraps) s
5 685 M
(.globl vector180) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 674 M
(vector180) s
/F-gs-font 10 10 SF
0 setgray
59 674 M
(:) s
5 663 M
(  pushl $0) s
5 652 M
(  pushl $180) s
5 641 M
(  jmp __alltraps) s
5 630 M
(.globl vector181) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 619 M
(vector181) s
/F-gs-font 10 10 SF
0 setgray
59 619 M
(:) s
5 608 M
(  pushl $0) s
5 597 M
(  pushl $181) s
5 586 M
(  jmp __alltraps) s
5 575 M
(.globl vector182) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(vector182) s
/F-gs-font 10 10 SF
0 setgray
59 564 M
(:) s
5 553 M
(  pushl $0) s
5 542 M
(  pushl $182) s
5 531 M
(  jmp __alltraps) s
5 520 M
(.globl vector183) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 509 M
(vector183) s
/F-gs-font 10 10 SF
0 setgray
59 509 M
(:) s
5 498 M
(  pushl $0) s
5 487 M
(  pushl $183) s
5 476 M
(  jmp __alltraps) s
5 465 M
(.globl vector184) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 454 M
(vector184) s
/F-gs-font 10 10 SF
0 setgray
59 454 M
(:) s
5 443 M
(  pushl $0) s
5 432 M
(  pushl $184) s
5 421 M
(  jmp __alltraps) s
5 410 M
(.globl vector185) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 399 M
(vector185) s
/F-gs-font 10 10 SF
0 setgray
59 399 M
(:) s
5 388 M
(  pushl $0) s
5 377 M
(  pushl $185) s
5 366 M
(  jmp __alltraps) s
5 355 M
(.globl vector186) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 344 M
(vector186) s
/F-gs-font 10 10 SF
0 setgray
59 344 M
(:) s
5 333 M
(  pushl $0) s
5 322 M
(  pushl $186) s
5 311 M
(  jmp __alltraps) s
5 300 M
(.globl vector187) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 289 M
(vector187) s
/F-gs-font 10 10 SF
0 setgray
59 289 M
(:) s
5 278 M
(  pushl $0) s
5 267 M
(  pushl $187) s
5 256 M
(  jmp __alltraps) s
5 245 M
(.globl vector188) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 234 M
(vector188) s
/F-gs-font 10 10 SF
0 setgray
59 234 M
(:) s
5 223 M
(  pushl $0) s
5 212 M
(  pushl $188) s
5 201 M
(  jmp __alltraps) s
5 190 M
(.globl vector189) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 179 M
(vector189) s
/F-gs-font 10 10 SF
0 setgray
59 179 M
(:) s
5 168 M
(  pushl $0) s
5 157 M
(  pushl $189) s
5 146 M
(  jmp __alltraps) s
5 135 M
(.globl vector190) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 124 M
(vector190) s
/F-gs-font 10 10 SF
0 setgray
59 124 M
(:) s
5 113 M
(  pushl $0) s
5 102 M
(  pushl $190) s
5 91 M
(  jmp __alltraps) s
5 80 M
(.globl vector191) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 69 M
(vector191) s
/F-gs-font 10 10 SF
0 setgray
59 69 M
(:) s
5 58 M
(  pushl $0) s
5 47 M
(  pushl $191) s
5 36 M
(  jmp __alltraps) s
5 25 M
(.globl vector192) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 14 M
(vector192) s
/F-gs-font 10 10 SF
0 setgray
59 14 M
(:) s
5 3 M
(  pushl $0) s
_R
S
%%Page: (217) 217
%%BeginPageSetup
_S
18 36 translate
/pagenum 217 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  pushl $192) s
5 696 M
(  jmp __alltraps) s
5 685 M
(.globl vector193) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 674 M
(vector193) s
/F-gs-font 10 10 SF
0 setgray
59 674 M
(:) s
5 663 M
(  pushl $0) s
5 652 M
(  pushl $193) s
5 641 M
(  jmp __alltraps) s
5 630 M
(.globl vector194) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 619 M
(vector194) s
/F-gs-font 10 10 SF
0 setgray
59 619 M
(:) s
5 608 M
(  pushl $0) s
5 597 M
(  pushl $194) s
5 586 M
(  jmp __alltraps) s
5 575 M
(.globl vector195) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(vector195) s
/F-gs-font 10 10 SF
0 setgray
59 564 M
(:) s
5 553 M
(  pushl $0) s
5 542 M
(  pushl $195) s
5 531 M
(  jmp __alltraps) s
5 520 M
(.globl vector196) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 509 M
(vector196) s
/F-gs-font 10 10 SF
0 setgray
59 509 M
(:) s
5 498 M
(  pushl $0) s
5 487 M
(  pushl $196) s
5 476 M
(  jmp __alltraps) s
5 465 M
(.globl vector197) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 454 M
(vector197) s
/F-gs-font 10 10 SF
0 setgray
59 454 M
(:) s
5 443 M
(  pushl $0) s
5 432 M
(  pushl $197) s
5 421 M
(  jmp __alltraps) s
5 410 M
(.globl vector198) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 399 M
(vector198) s
/F-gs-font 10 10 SF
0 setgray
59 399 M
(:) s
5 388 M
(  pushl $0) s
5 377 M
(  pushl $198) s
5 366 M
(  jmp __alltraps) s
5 355 M
(.globl vector199) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 344 M
(vector199) s
/F-gs-font 10 10 SF
0 setgray
59 344 M
(:) s
5 333 M
(  pushl $0) s
5 322 M
(  pushl $199) s
5 311 M
(  jmp __alltraps) s
5 300 M
(.globl vector200) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 289 M
(vector200) s
/F-gs-font 10 10 SF
0 setgray
59 289 M
(:) s
5 278 M
(  pushl $0) s
5 267 M
(  pushl $200) s
5 256 M
(  jmp __alltraps) s
5 245 M
(.globl vector201) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 234 M
(vector201) s
/F-gs-font 10 10 SF
0 setgray
59 234 M
(:) s
5 223 M
(  pushl $0) s
5 212 M
(  pushl $201) s
5 201 M
(  jmp __alltraps) s
5 190 M
(.globl vector202) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 179 M
(vector202) s
/F-gs-font 10 10 SF
0 setgray
59 179 M
(:) s
5 168 M
(  pushl $0) s
5 157 M
(  pushl $202) s
5 146 M
(  jmp __alltraps) s
5 135 M
(.globl vector203) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 124 M
(vector203) s
/F-gs-font 10 10 SF
0 setgray
59 124 M
(:) s
5 113 M
(  pushl $0) s
5 102 M
(  pushl $203) s
5 91 M
(  jmp __alltraps) s
5 80 M
(.globl vector204) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 69 M
(vector204) s
/F-gs-font 10 10 SF
0 setgray
59 69 M
(:) s
5 58 M
(  pushl $0) s
5 47 M
(  pushl $204) s
5 36 M
(  jmp __alltraps) s
5 25 M
(.globl vector205) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 14 M
(vector205) s
/F-gs-font 10 10 SF
0 setgray
59 14 M
(:) s
5 3 M
(  pushl $0) s
_R
S
%%Page: (218) 218
%%BeginPageSetup
_S
18 36 translate
/pagenum 218 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  pushl $205) s
5 696 M
(  jmp __alltraps) s
5 685 M
(.globl vector206) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 674 M
(vector206) s
/F-gs-font 10 10 SF
0 setgray
59 674 M
(:) s
5 663 M
(  pushl $0) s
5 652 M
(  pushl $206) s
5 641 M
(  jmp __alltraps) s
5 630 M
(.globl vector207) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 619 M
(vector207) s
/F-gs-font 10 10 SF
0 setgray
59 619 M
(:) s
5 608 M
(  pushl $0) s
5 597 M
(  pushl $207) s
5 586 M
(  jmp __alltraps) s
5 575 M
(.globl vector208) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(vector208) s
/F-gs-font 10 10 SF
0 setgray
59 564 M
(:) s
5 553 M
(  pushl $0) s
5 542 M
(  pushl $208) s
5 531 M
(  jmp __alltraps) s
5 520 M
(.globl vector209) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 509 M
(vector209) s
/F-gs-font 10 10 SF
0 setgray
59 509 M
(:) s
5 498 M
(  pushl $0) s
5 487 M
(  pushl $209) s
5 476 M
(  jmp __alltraps) s
5 465 M
(.globl vector210) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 454 M
(vector210) s
/F-gs-font 10 10 SF
0 setgray
59 454 M
(:) s
5 443 M
(  pushl $0) s
5 432 M
(  pushl $210) s
5 421 M
(  jmp __alltraps) s
5 410 M
(.globl vector211) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 399 M
(vector211) s
/F-gs-font 10 10 SF
0 setgray
59 399 M
(:) s
5 388 M
(  pushl $0) s
5 377 M
(  pushl $211) s
5 366 M
(  jmp __alltraps) s
5 355 M
(.globl vector212) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 344 M
(vector212) s
/F-gs-font 10 10 SF
0 setgray
59 344 M
(:) s
5 333 M
(  pushl $0) s
5 322 M
(  pushl $212) s
5 311 M
(  jmp __alltraps) s
5 300 M
(.globl vector213) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 289 M
(vector213) s
/F-gs-font 10 10 SF
0 setgray
59 289 M
(:) s
5 278 M
(  pushl $0) s
5 267 M
(  pushl $213) s
5 256 M
(  jmp __alltraps) s
5 245 M
(.globl vector214) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 234 M
(vector214) s
/F-gs-font 10 10 SF
0 setgray
59 234 M
(:) s
5 223 M
(  pushl $0) s
5 212 M
(  pushl $214) s
5 201 M
(  jmp __alltraps) s
5 190 M
(.globl vector215) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 179 M
(vector215) s
/F-gs-font 10 10 SF
0 setgray
59 179 M
(:) s
5 168 M
(  pushl $0) s
5 157 M
(  pushl $215) s
5 146 M
(  jmp __alltraps) s
5 135 M
(.globl vector216) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 124 M
(vector216) s
/F-gs-font 10 10 SF
0 setgray
59 124 M
(:) s
5 113 M
(  pushl $0) s
5 102 M
(  pushl $216) s
5 91 M
(  jmp __alltraps) s
5 80 M
(.globl vector217) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 69 M
(vector217) s
/F-gs-font 10 10 SF
0 setgray
59 69 M
(:) s
5 58 M
(  pushl $0) s
5 47 M
(  pushl $217) s
5 36 M
(  jmp __alltraps) s
5 25 M
(.globl vector218) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 14 M
(vector218) s
/F-gs-font 10 10 SF
0 setgray
59 14 M
(:) s
5 3 M
(  pushl $0) s
_R
S
%%Page: (219) 219
%%BeginPageSetup
_S
18 36 translate
/pagenum 219 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  pushl $218) s
5 696 M
(  jmp __alltraps) s
5 685 M
(.globl vector219) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 674 M
(vector219) s
/F-gs-font 10 10 SF
0 setgray
59 674 M
(:) s
5 663 M
(  pushl $0) s
5 652 M
(  pushl $219) s
5 641 M
(  jmp __alltraps) s
5 630 M
(.globl vector220) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 619 M
(vector220) s
/F-gs-font 10 10 SF
0 setgray
59 619 M
(:) s
5 608 M
(  pushl $0) s
5 597 M
(  pushl $220) s
5 586 M
(  jmp __alltraps) s
5 575 M
(.globl vector221) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(vector221) s
/F-gs-font 10 10 SF
0 setgray
59 564 M
(:) s
5 553 M
(  pushl $0) s
5 542 M
(  pushl $221) s
5 531 M
(  jmp __alltraps) s
5 520 M
(.globl vector222) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 509 M
(vector222) s
/F-gs-font 10 10 SF
0 setgray
59 509 M
(:) s
5 498 M
(  pushl $0) s
5 487 M
(  pushl $222) s
5 476 M
(  jmp __alltraps) s
5 465 M
(.globl vector223) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 454 M
(vector223) s
/F-gs-font 10 10 SF
0 setgray
59 454 M
(:) s
5 443 M
(  pushl $0) s
5 432 M
(  pushl $223) s
5 421 M
(  jmp __alltraps) s
5 410 M
(.globl vector224) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 399 M
(vector224) s
/F-gs-font 10 10 SF
0 setgray
59 399 M
(:) s
5 388 M
(  pushl $0) s
5 377 M
(  pushl $224) s
5 366 M
(  jmp __alltraps) s
5 355 M
(.globl vector225) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 344 M
(vector225) s
/F-gs-font 10 10 SF
0 setgray
59 344 M
(:) s
5 333 M
(  pushl $0) s
5 322 M
(  pushl $225) s
5 311 M
(  jmp __alltraps) s
5 300 M
(.globl vector226) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 289 M
(vector226) s
/F-gs-font 10 10 SF
0 setgray
59 289 M
(:) s
5 278 M
(  pushl $0) s
5 267 M
(  pushl $226) s
5 256 M
(  jmp __alltraps) s
5 245 M
(.globl vector227) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 234 M
(vector227) s
/F-gs-font 10 10 SF
0 setgray
59 234 M
(:) s
5 223 M
(  pushl $0) s
5 212 M
(  pushl $227) s
5 201 M
(  jmp __alltraps) s
5 190 M
(.globl vector228) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 179 M
(vector228) s
/F-gs-font 10 10 SF
0 setgray
59 179 M
(:) s
5 168 M
(  pushl $0) s
5 157 M
(  pushl $228) s
5 146 M
(  jmp __alltraps) s
5 135 M
(.globl vector229) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 124 M
(vector229) s
/F-gs-font 10 10 SF
0 setgray
59 124 M
(:) s
5 113 M
(  pushl $0) s
5 102 M
(  pushl $229) s
5 91 M
(  jmp __alltraps) s
5 80 M
(.globl vector230) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 69 M
(vector230) s
/F-gs-font 10 10 SF
0 setgray
59 69 M
(:) s
5 58 M
(  pushl $0) s
5 47 M
(  pushl $230) s
5 36 M
(  jmp __alltraps) s
5 25 M
(.globl vector231) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 14 M
(vector231) s
/F-gs-font 10 10 SF
0 setgray
59 14 M
(:) s
5 3 M
(  pushl $0) s
_R
S
%%Page: (220) 220
%%BeginPageSetup
_S
18 36 translate
/pagenum 220 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  pushl $231) s
5 696 M
(  jmp __alltraps) s
5 685 M
(.globl vector232) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 674 M
(vector232) s
/F-gs-font 10 10 SF
0 setgray
59 674 M
(:) s
5 663 M
(  pushl $0) s
5 652 M
(  pushl $232) s
5 641 M
(  jmp __alltraps) s
5 630 M
(.globl vector233) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 619 M
(vector233) s
/F-gs-font 10 10 SF
0 setgray
59 619 M
(:) s
5 608 M
(  pushl $0) s
5 597 M
(  pushl $233) s
5 586 M
(  jmp __alltraps) s
5 575 M
(.globl vector234) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(vector234) s
/F-gs-font 10 10 SF
0 setgray
59 564 M
(:) s
5 553 M
(  pushl $0) s
5 542 M
(  pushl $234) s
5 531 M
(  jmp __alltraps) s
5 520 M
(.globl vector235) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 509 M
(vector235) s
/F-gs-font 10 10 SF
0 setgray
59 509 M
(:) s
5 498 M
(  pushl $0) s
5 487 M
(  pushl $235) s
5 476 M
(  jmp __alltraps) s
5 465 M
(.globl vector236) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 454 M
(vector236) s
/F-gs-font 10 10 SF
0 setgray
59 454 M
(:) s
5 443 M
(  pushl $0) s
5 432 M
(  pushl $236) s
5 421 M
(  jmp __alltraps) s
5 410 M
(.globl vector237) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 399 M
(vector237) s
/F-gs-font 10 10 SF
0 setgray
59 399 M
(:) s
5 388 M
(  pushl $0) s
5 377 M
(  pushl $237) s
5 366 M
(  jmp __alltraps) s
5 355 M
(.globl vector238) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 344 M
(vector238) s
/F-gs-font 10 10 SF
0 setgray
59 344 M
(:) s
5 333 M
(  pushl $0) s
5 322 M
(  pushl $238) s
5 311 M
(  jmp __alltraps) s
5 300 M
(.globl vector239) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 289 M
(vector239) s
/F-gs-font 10 10 SF
0 setgray
59 289 M
(:) s
5 278 M
(  pushl $0) s
5 267 M
(  pushl $239) s
5 256 M
(  jmp __alltraps) s
5 245 M
(.globl vector240) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 234 M
(vector240) s
/F-gs-font 10 10 SF
0 setgray
59 234 M
(:) s
5 223 M
(  pushl $0) s
5 212 M
(  pushl $240) s
5 201 M
(  jmp __alltraps) s
5 190 M
(.globl vector241) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 179 M
(vector241) s
/F-gs-font 10 10 SF
0 setgray
59 179 M
(:) s
5 168 M
(  pushl $0) s
5 157 M
(  pushl $241) s
5 146 M
(  jmp __alltraps) s
5 135 M
(.globl vector242) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 124 M
(vector242) s
/F-gs-font 10 10 SF
0 setgray
59 124 M
(:) s
5 113 M
(  pushl $0) s
5 102 M
(  pushl $242) s
5 91 M
(  jmp __alltraps) s
5 80 M
(.globl vector243) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 69 M
(vector243) s
/F-gs-font 10 10 SF
0 setgray
59 69 M
(:) s
5 58 M
(  pushl $0) s
5 47 M
(  pushl $243) s
5 36 M
(  jmp __alltraps) s
5 25 M
(.globl vector244) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 14 M
(vector244) s
/F-gs-font 10 10 SF
0 setgray
59 14 M
(:) s
5 3 M
(  pushl $0) s
_R
S
%%Page: (221) 221
%%BeginPageSetup
_S
18 36 translate
/pagenum 221 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  pushl $244) s
5 696 M
(  jmp __alltraps) s
5 685 M
(.globl vector245) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 674 M
(vector245) s
/F-gs-font 10 10 SF
0 setgray
59 674 M
(:) s
5 663 M
(  pushl $0) s
5 652 M
(  pushl $245) s
5 641 M
(  jmp __alltraps) s
5 630 M
(.globl vector246) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 619 M
(vector246) s
/F-gs-font 10 10 SF
0 setgray
59 619 M
(:) s
5 608 M
(  pushl $0) s
5 597 M
(  pushl $246) s
5 586 M
(  jmp __alltraps) s
5 575 M
(.globl vector247) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(vector247) s
/F-gs-font 10 10 SF
0 setgray
59 564 M
(:) s
5 553 M
(  pushl $0) s
5 542 M
(  pushl $247) s
5 531 M
(  jmp __alltraps) s
5 520 M
(.globl vector248) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 509 M
(vector248) s
/F-gs-font 10 10 SF
0 setgray
59 509 M
(:) s
5 498 M
(  pushl $0) s
5 487 M
(  pushl $248) s
5 476 M
(  jmp __alltraps) s
5 465 M
(.globl vector249) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 454 M
(vector249) s
/F-gs-font 10 10 SF
0 setgray
59 454 M
(:) s
5 443 M
(  pushl $0) s
5 432 M
(  pushl $249) s
5 421 M
(  jmp __alltraps) s
5 410 M
(.globl vector250) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 399 M
(vector250) s
/F-gs-font 10 10 SF
0 setgray
59 399 M
(:) s
5 388 M
(  pushl $0) s
5 377 M
(  pushl $250) s
5 366 M
(  jmp __alltraps) s
5 355 M
(.globl vector251) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 344 M
(vector251) s
/F-gs-font 10 10 SF
0 setgray
59 344 M
(:) s
5 333 M
(  pushl $0) s
5 322 M
(  pushl $251) s
5 311 M
(  jmp __alltraps) s
5 300 M
(.globl vector252) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 289 M
(vector252) s
/F-gs-font 10 10 SF
0 setgray
59 289 M
(:) s
5 278 M
(  pushl $0) s
5 267 M
(  pushl $252) s
5 256 M
(  jmp __alltraps) s
5 245 M
(.globl vector253) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 234 M
(vector253) s
/F-gs-font 10 10 SF
0 setgray
59 234 M
(:) s
5 223 M
(  pushl $0) s
5 212 M
(  pushl $253) s
5 201 M
(  jmp __alltraps) s
5 190 M
(.globl vector254) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 179 M
(vector254) s
/F-gs-font 10 10 SF
0 setgray
59 179 M
(:) s
5 168 M
(  pushl $0) s
5 157 M
(  pushl $254) s
5 146 M
(  jmp __alltraps) s
5 135 M
(.globl vector255) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 124 M
(vector255) s
/F-gs-font 10 10 SF
0 setgray
59 124 M
(:) s
5 113 M
(  pushl $0) s
5 102 M
(  pushl $255) s
5 91 M
(  jmp __alltraps) s
5 69 M
(# ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
17 69 M
(vector) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
59 69 M
(table) s
/F-gs-font 10 10 SF
0 setgray
5 58 M
(.data) s
5 47 M
(.globl __vectors) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 36 M
(__vectors) s
/F-gs-font 10 10 SF
0 setgray
59 36 M
(:) s
5 25 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 25 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( vector0) s
5 14 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 14 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 14 M
( vector1) s
5 3 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 3 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( vector2) s
_R
S
%%Page: (222) 222
%%BeginPageSetup
_S
18 36 translate
/pagenum 222 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 707 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 707 M
( vector3) s
5 696 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 696 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 696 M
( vector4) s
5 685 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 685 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
( vector5) s
5 674 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 674 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
( vector6) s
5 663 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 663 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( vector7) s
5 652 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 652 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 652 M
( vector8) s
5 641 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 641 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( vector9) s
5 630 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 630 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( vector10) s
5 619 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 619 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( vector11) s
5 608 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 608 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 608 M
( vector12) s
5 597 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 597 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( vector13) s
5 586 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 586 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( vector14) s
5 575 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 575 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( vector15) s
5 564 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 564 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 564 M
( vector16) s
5 553 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 553 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( vector17) s
5 542 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 542 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 542 M
( vector18) s
5 531 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 531 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( vector19) s
5 520 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 520 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
( vector20) s
5 509 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 509 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( vector21) s
5 498 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 498 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 498 M
( vector22) s
5 487 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 487 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( vector23) s
5 476 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 476 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 476 M
( vector24) s
5 465 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 465 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 465 M
( vector25) s
5 454 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 454 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 454 M
( vector26) s
5 443 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 443 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( vector27) s
5 432 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 432 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 432 M
( vector28) s
5 421 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 421 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( vector29) s
5 410 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 410 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( vector30) s
5 399 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 399 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 399 M
( vector31) s
5 388 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 388 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 388 M
( vector32) s
5 377 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 377 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 377 M
( vector33) s
5 366 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 366 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 366 M
( vector34) s
5 355 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 355 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 355 M
( vector35) s
5 344 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 344 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 344 M
( vector36) s
5 333 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 333 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 333 M
( vector37) s
5 322 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 322 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 322 M
( vector38) s
5 311 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 311 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 311 M
( vector39) s
5 300 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 300 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( vector40) s
5 289 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 289 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( vector41) s
5 278 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 278 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 278 M
( vector42) s
5 267 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 267 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 267 M
( vector43) s
5 256 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 256 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( vector44) s
5 245 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 245 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( vector45) s
5 234 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 234 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 234 M
( vector46) s
5 223 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 223 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 223 M
( vector47) s
5 212 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 212 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( vector48) s
5 201 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 201 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( vector49) s
5 190 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 190 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( vector50) s
5 179 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 179 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 179 M
( vector51) s
5 168 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 168 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 168 M
( vector52) s
5 157 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 157 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 157 M
( vector53) s
5 146 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 146 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( vector54) s
5 135 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 135 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( vector55) s
5 124 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 124 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( vector56) s
5 113 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 113 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( vector57) s
5 102 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 102 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 102 M
( vector58) s
5 91 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 91 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( vector59) s
5 80 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 80 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( vector60) s
5 69 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 69 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( vector61) s
5 58 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 58 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( vector62) s
5 47 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 47 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( vector63) s
5 36 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 36 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( vector64) s
5 25 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 25 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( vector65) s
5 14 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 14 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 14 M
( vector66) s
5 3 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 3 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( vector67) s
_R
S
%%Page: (223) 223
%%BeginPageSetup
_S
18 36 translate
/pagenum 223 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 707 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 707 M
( vector68) s
5 696 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 696 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 696 M
( vector69) s
5 685 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 685 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
( vector70) s
5 674 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 674 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
( vector71) s
5 663 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 663 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( vector72) s
5 652 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 652 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 652 M
( vector73) s
5 641 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 641 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( vector74) s
5 630 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 630 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( vector75) s
5 619 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 619 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( vector76) s
5 608 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 608 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 608 M
( vector77) s
5 597 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 597 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( vector78) s
5 586 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 586 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( vector79) s
5 575 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 575 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( vector80) s
5 564 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 564 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 564 M
( vector81) s
5 553 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 553 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( vector82) s
5 542 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 542 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 542 M
( vector83) s
5 531 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 531 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( vector84) s
5 520 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 520 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
( vector85) s
5 509 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 509 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( vector86) s
5 498 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 498 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 498 M
( vector87) s
5 487 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 487 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( vector88) s
5 476 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 476 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 476 M
( vector89) s
5 465 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 465 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 465 M
( vector90) s
5 454 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 454 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 454 M
( vector91) s
5 443 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 443 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( vector92) s
5 432 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 432 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 432 M
( vector93) s
5 421 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 421 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( vector94) s
5 410 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 410 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( vector95) s
5 399 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 399 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 399 M
( vector96) s
5 388 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 388 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 388 M
( vector97) s
5 377 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 377 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 377 M
( vector98) s
5 366 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 366 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 366 M
( vector99) s
5 355 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 355 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 355 M
( vector100) s
5 344 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 344 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 344 M
( vector101) s
5 333 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 333 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 333 M
( vector102) s
5 322 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 322 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 322 M
( vector103) s
5 311 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 311 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 311 M
( vector104) s
5 300 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 300 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( vector105) s
5 289 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 289 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( vector106) s
5 278 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 278 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 278 M
( vector107) s
5 267 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 267 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 267 M
( vector108) s
5 256 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 256 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( vector109) s
5 245 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 245 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( vector110) s
5 234 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 234 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 234 M
( vector111) s
5 223 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 223 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 223 M
( vector112) s
5 212 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 212 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( vector113) s
5 201 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 201 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( vector114) s
5 190 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 190 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( vector115) s
5 179 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 179 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 179 M
( vector116) s
5 168 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 168 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 168 M
( vector117) s
5 157 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 157 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 157 M
( vector118) s
5 146 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 146 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( vector119) s
5 135 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 135 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( vector120) s
5 124 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 124 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( vector121) s
5 113 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 113 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( vector122) s
5 102 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 102 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 102 M
( vector123) s
5 91 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 91 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( vector124) s
5 80 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 80 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( vector125) s
5 69 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 69 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( vector126) s
5 58 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 58 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( vector127) s
5 47 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 47 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( vector128) s
5 36 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 36 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( vector129) s
5 25 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 25 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( vector130) s
5 14 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 14 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 14 M
( vector131) s
5 3 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 3 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( vector132) s
_R
S
%%Page: (224) 224
%%BeginPageSetup
_S
18 36 translate
/pagenum 224 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 707 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 707 M
( vector133) s
5 696 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 696 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 696 M
( vector134) s
5 685 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 685 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
( vector135) s
5 674 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 674 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
( vector136) s
5 663 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 663 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( vector137) s
5 652 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 652 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 652 M
( vector138) s
5 641 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 641 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( vector139) s
5 630 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 630 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( vector140) s
5 619 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 619 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( vector141) s
5 608 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 608 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 608 M
( vector142) s
5 597 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 597 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( vector143) s
5 586 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 586 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( vector144) s
5 575 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 575 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( vector145) s
5 564 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 564 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 564 M
( vector146) s
5 553 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 553 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( vector147) s
5 542 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 542 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 542 M
( vector148) s
5 531 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 531 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( vector149) s
5 520 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 520 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
( vector150) s
5 509 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 509 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( vector151) s
5 498 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 498 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 498 M
( vector152) s
5 487 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 487 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( vector153) s
5 476 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 476 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 476 M
( vector154) s
5 465 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 465 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 465 M
( vector155) s
5 454 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 454 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 454 M
( vector156) s
5 443 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 443 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( vector157) s
5 432 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 432 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 432 M
( vector158) s
5 421 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 421 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( vector159) s
5 410 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 410 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( vector160) s
5 399 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 399 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 399 M
( vector161) s
5 388 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 388 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 388 M
( vector162) s
5 377 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 377 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 377 M
( vector163) s
5 366 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 366 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 366 M
( vector164) s
5 355 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 355 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 355 M
( vector165) s
5 344 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 344 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 344 M
( vector166) s
5 333 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 333 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 333 M
( vector167) s
5 322 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 322 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 322 M
( vector168) s
5 311 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 311 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 311 M
( vector169) s
5 300 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 300 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( vector170) s
5 289 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 289 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( vector171) s
5 278 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 278 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 278 M
( vector172) s
5 267 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 267 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 267 M
( vector173) s
5 256 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 256 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( vector174) s
5 245 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 245 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( vector175) s
5 234 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 234 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 234 M
( vector176) s
5 223 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 223 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 223 M
( vector177) s
5 212 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 212 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( vector178) s
5 201 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 201 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( vector179) s
5 190 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 190 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( vector180) s
5 179 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 179 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 179 M
( vector181) s
5 168 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 168 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 168 M
( vector182) s
5 157 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 157 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 157 M
( vector183) s
5 146 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 146 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( vector184) s
5 135 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 135 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( vector185) s
5 124 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 124 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( vector186) s
5 113 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 113 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( vector187) s
5 102 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 102 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 102 M
( vector188) s
5 91 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 91 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( vector189) s
5 80 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 80 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( vector190) s
5 69 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 69 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( vector191) s
5 58 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 58 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( vector192) s
5 47 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 47 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( vector193) s
5 36 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 36 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( vector194) s
5 25 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 25 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( vector195) s
5 14 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 14 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 14 M
( vector196) s
5 3 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 3 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( vector197) s
_R
S
%%Page: (225) 225
%%BeginPageSetup
_S
18 36 translate
/pagenum 225 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 707 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 707 M
( vector198) s
5 696 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 696 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 696 M
( vector199) s
5 685 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 685 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
( vector200) s
5 674 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 674 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
( vector201) s
5 663 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 663 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( vector202) s
5 652 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 652 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 652 M
( vector203) s
5 641 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 641 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( vector204) s
5 630 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 630 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( vector205) s
5 619 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 619 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( vector206) s
5 608 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 608 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 608 M
( vector207) s
5 597 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 597 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( vector208) s
5 586 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 586 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( vector209) s
5 575 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 575 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( vector210) s
5 564 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 564 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 564 M
( vector211) s
5 553 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 553 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( vector212) s
5 542 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 542 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 542 M
( vector213) s
5 531 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 531 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( vector214) s
5 520 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 520 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
( vector215) s
5 509 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 509 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( vector216) s
5 498 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 498 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 498 M
( vector217) s
5 487 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 487 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( vector218) s
5 476 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 476 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 476 M
( vector219) s
5 465 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 465 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 465 M
( vector220) s
5 454 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 454 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 454 M
( vector221) s
5 443 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 443 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( vector222) s
5 432 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 432 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 432 M
( vector223) s
5 421 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 421 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( vector224) s
5 410 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 410 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( vector225) s
5 399 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 399 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 399 M
( vector226) s
5 388 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 388 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 388 M
( vector227) s
5 377 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 377 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 377 M
( vector228) s
5 366 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 366 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 366 M
( vector229) s
5 355 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 355 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 355 M
( vector230) s
5 344 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 344 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 344 M
( vector231) s
5 333 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 333 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 333 M
( vector232) s
5 322 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 322 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 322 M
( vector233) s
5 311 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 311 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 311 M
( vector234) s
5 300 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 300 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( vector235) s
5 289 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 289 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( vector236) s
5 278 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 278 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 278 M
( vector237) s
5 267 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 267 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 267 M
( vector238) s
5 256 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 256 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( vector239) s
5 245 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 245 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( vector240) s
5 234 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 234 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 234 M
( vector241) s
5 223 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 223 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 223 M
( vector242) s
5 212 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 212 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( vector243) s
5 201 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 201 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( vector244) s
5 190 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 190 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( vector245) s
5 179 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 179 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 179 M
( vector246) s
5 168 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 168 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 168 M
( vector247) s
5 157 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 157 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 157 M
( vector248) s
5 146 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 146 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( vector249) s
5 135 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 135 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( vector250) s
5 124 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 124 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( vector251) s
5 113 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 113 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( vector252) s
5 102 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 102 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 102 M
( vector253) s
5 91 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 91 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( vector254) s
5 80 M
(  .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
23 80 M
(long) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( vector255) s
5 69 M
([ucore/lab8_result/kern/debug/panic.c] ++++++++++++++++++++++++++++++) s
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 58 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 58 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 47 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 47 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 36 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 36 M
(<intr.h>) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 25 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 25 M
(<kmonitor.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 3 M
( bool is_panic = 0;) s
_R
S
%%Page: (226) 226
%%BeginPageSetup
_S
18 36 translate
/pagenum 226 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 696 M
(/* *) s
5 685 M
( * __panic - __panic is called on unresolvable fatal errors. it prints) s
5 674 M
( * "panic: 'message'", and then enters the kernel monitor.) s
5 663 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 652 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 641 M
(__panic) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 641 M
(const) s
/F-gs-font 10 10 SF
0 setgray
83 641 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 641 M
(char) s
/F-gs-font 10 10 SF
0 setgray
113 641 M
( *file, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
161 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
179 641 M
( line, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
221 641 M
(const) s
/F-gs-font 10 10 SF
0 setgray
251 641 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 641 M
(char) s
/F-gs-font 10 10 SF
0 setgray
281 641 M
( *fmt, ...\) {) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 630 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 630 M
( \(is_panic\) {) s
5 619 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 619 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 619 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 619 M
(panic_dead) s
/F-gs-font 10 10 SF
0 setgray
143 619 M
(;) s
5 608 M
(    }) s
5 597 M
(    is_panic = 1;) s
5 575 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 575 M
(// print the 'message') s
/F-gs-font 10 10 SF
0 setgray
5 564 M
(    va_list ap;) s
5 553 M
(    va_start\(ap, fmt\);) s
5 542 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 542 M
("kernel panic at %s:%d:\\n    ") s
/F-gs-font 10 10 SF
0 setgray
257 542 M
(, file, line\);) s
5 531 M
(    vcprintf\(fmt, ap\);) s
5 520 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 520 M
("\\n") s
/F-gs-font 10 10 SF
0 setgray
101 520 M
(\);) s
5 509 M
(    ) s
5 498 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 498 M
("stack trackback:\\n") s
/F-gs-font 10 10 SF
0 setgray
197 498 M
(\);) s
5 487 M
(    print_stackframe\(\);) s
5 476 M
(    ) s
5 465 M
(    va_end\(ap\);) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 443 M
(panic_dead) s
/F-gs-font 10 10 SF
0 setgray
65 443 M
(:) s
5 432 M
(    intr_disable\(\);) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 421 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 421 M
( \(1\) {) s
5 410 M
(        kmonitor\(NULL\);) s
5 399 M
(    }) s
5 388 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 366 M
(/* __warn - like panic, but don't */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 355 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 344 M
(__warn) s
/F-gs-font 10 10 SF
0 setgray
41 344 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 344 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 344 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 344 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 344 M
( *file, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 344 M
(int) s
/F-gs-font 10 10 SF
0 setgray
173 344 M
( line, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 344 M
(const) s
/F-gs-font 10 10 SF
0 setgray
245 344 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 344 M
(char) s
/F-gs-font 10 10 SF
0 setgray
275 344 M
( *fmt, ...\) {) s
5 333 M
(    va_list ap;) s
5 322 M
(    va_start\(ap, fmt\);) s
5 311 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 311 M
("kernel warning at %s:%d:\\n    ") s
/F-gs-font 10 10 SF
0 setgray
269 311 M
(, file, line\);) s
5 300 M
(    vcprintf\(fmt, ap\);) s
5 289 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 289 M
("\\n") s
/F-gs-font 10 10 SF
0 setgray
101 289 M
(\);) s
5 278 M
(    va_end\(ap\);) s
5 267 M
(}) s
5 245 M
(bool) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 234 M
(is_kernel_panic) s
/F-gs-font 10 10 SF
0 setgray
95 234 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 234 M
(void) s
/F-gs-font 10 10 SF
0 setgray
125 234 M
(\) {) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 223 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 223 M
( is_panic;) s
5 212 M
(}) s
5 190 M
([ucore/lab8_result/kern/debug/kdebug.h] ++++++++++++++++++++++++++++++) s
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 179 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 179 M
(__KERN_DEBUG_KDEBUG_H__) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 168 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 168 M
(__KERN_DEBUG_KDEBUG_H__) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 146 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 146 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 135 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 135 M
(<trap.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 113 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 113 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 113 M
(print_kerninfo) s
/F-gs-font 10 10 SF
0 setgray
119 113 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 113 M
(void) s
/F-gs-font 10 10 SF
0 setgray
149 113 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 102 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 102 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 102 M
(print_stackframe) s
/F-gs-font 10 10 SF
0 setgray
131 102 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 102 M
(void) s
/F-gs-font 10 10 SF
0 setgray
161 102 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 91 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 91 M
(print_debuginfo) s
/F-gs-font 10 10 SF
0 setgray
125 91 M
(\(uintptr_t eip\);) s
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 69 M
(/* !__KERN_DEBUG_KDEBUG_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
([ucore/lab8_result/kern/debug/assert.h] ++++++++++++++++++++++++++++++) s
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 36 M
(__KERN_DEBUG_ASSERT_H__) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 25 M
(__KERN_DEBUG_ASSERT_H__) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 3 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 3 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (227) 227
%%BeginPageSetup
_S
18 36 translate
/pagenum 227 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 696 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 696 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 696 M
(__warn) s
/F-gs-font 10 10 SF
0 setgray
71 696 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 696 M
(const) s
/F-gs-font 10 10 SF
0 setgray
107 696 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 696 M
(char) s
/F-gs-font 10 10 SF
0 setgray
137 696 M
( *file, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 696 M
(int) s
/F-gs-font 10 10 SF
0 setgray
203 696 M
( line, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 696 M
(const) s
/F-gs-font 10 10 SF
0 setgray
275 696 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
281 696 M
(char) s
/F-gs-font 10 10 SF
0 setgray
305 696 M
( *fmt, ...\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 685 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 685 M
( __noreturn ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
101 685 M
(__panic) s
/F-gs-font 10 10 SF
0 setgray
143 685 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 685 M
(const) s
/F-gs-font 10 10 SF
0 setgray
179 685 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 685 M
(char) s
/F-gs-font 10 10 SF
0 setgray
209 685 M
( *file, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 685 M
(int) s
/F-gs-font 10 10 SF
0 setgray
275 685 M
( line, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
317 685 M
(const) s
/F-gs-font 10 10 SF
0 setgray
347 685 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
353 685 M
(char) s
/F-gs-font 10 10 SF
0 setgray
377 685 M
( *fmt, ...\);) s
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 663 M
(warn) s
/F-gs-font 10 10 SF
0 setgray
77 663 M
(\(...\)                                       \\) s
5 652 M
(    __warn\(__FILE__, __LINE__, __VA_ARGS__\)) s
5 630 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 630 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 630 M
(panic) s
/F-gs-font 10 10 SF
0 setgray
83 630 M
(\(...\)                                      \\) s
5 619 M
(    __panic\(__FILE__, __LINE__, __VA_ARGS__\)) s
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 597 M
(assert) s
/F-gs-font 10 10 SF
0 setgray
89 597 M
(\(x\)                                       \\) s
5 586 M
(    do {                                                \\) s
5 575 M
(        if \(!\(x\)\) {                                     \\) s
5 564 M
(            panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 564 M
("assertion failed: %s") s
/F-gs-font 10 10 SF
0 setgray
245 564 M
(, #x\);          \\) s
5 553 M
(        }                                               \\) s
5 542 M
(    } while \(0\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 520 M
(// static_assert\(x\) will generate a compile-time error if 'x' is false.) s
/F-gs-font 10 10 SF
0 setgray
5 509 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 509 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 509 M
(static_assert) s
/F-gs-font 10 10 SF
0 setgray
131 509 M
(\(x\)                                \\) s
5 498 M
(    switch \(x\) { case 0: case \(x\): ; }) s
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 476 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 476 M
(/* !__KERN_DEBUG_ASSERT_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
([ucore/lab8_result/kern/debug/kdebug.c] ++++++++++++++++++++++++++++++) s
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 443 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 443 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 432 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 432 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 432 M
(<x86.h>) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 421 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 421 M
(<stab.h>) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 410 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 410 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 410 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 399 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 399 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 399 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 399 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 388 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 388 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 388 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 388 M
(<memlayout.h>) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 377 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 377 M
(<sync.h>) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 366 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 366 M
(<vmm.h>) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 355 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 355 M
(<proc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 344 M
(<kdebug.h>) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 333 M
(<kmonitor.h>) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 322 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 322 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 300 M
(STACKFRAME_DEPTH) s
/F-gs-font 10 10 SF
0 setgray
149 300 M
( 20) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 278 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 278 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 278 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 278 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 278 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 278 M
( stab __STAB_BEGIN__[];  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
269 278 M
(// beginning of stabs table) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 267 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 267 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 267 M
( stab __STAB_END__[];    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
269 267 M
(// end of stabs table) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 256 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 256 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 256 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 256 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 256 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 256 M
( __STABSTR_BEGIN__[];      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
269 256 M
(// beginning of string table) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 245 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 245 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 245 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 245 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 245 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 245 M
( __STABSTR_END__[];        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
269 245 M
(// end of string table) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 223 M
(/* debug information about a particular instruction pointer */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 212 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 212 M
( eipdebuginfo {) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 201 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 201 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 201 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 201 M
( *eip_file;                   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
269 201 M
(// source code filename for eip) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 190 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( eip_line;                           ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
269 190 M
(// source code line number for eip) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 179 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 179 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 179 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 179 M
( *eip_fn_name;                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
269 179 M
(// name of function containing eip) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 168 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 168 M
( eip_fn_namelen;                     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
269 168 M
(// length of function's name) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(    uintptr_t eip_fn_addr;                  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
269 157 M
(// start address of function) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 146 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( eip_fn_narg;                        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
269 146 M
(// number of function arguments) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(};) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 113 M
(/* user STABS data structure  */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 102 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 102 M
( userstabdata {) s
5 91 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 91 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 91 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 91 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 91 M
( stab *stabs;) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 80 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 80 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 80 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 80 M
( stab *stab_end;) s
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 69 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 69 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 69 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 69 M
( *stabstr;) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 58 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 58 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 58 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 58 M
( *stabstr_end;) s
5 47 M
(};) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 25 M
(/* *) s
5 14 M
( * stab_binsearch - according to the input, the initial value of) s
5 3 M
( * range [*@region_left, *@region_right], find a single stab entry) s
_R
S
%%Page: (228) 228
%%BeginPageSetup
_S
18 36 translate
/pagenum 228 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
( * that includes the address @addr and matches the type @type,) s
5 696 M
( * and then save its boundary to the locations that pointed) s
5 685 M
( * by @region_left and @region_right.) s
5 674 M
( *) s
5 663 M
( * Some stab types are arranged in increasing order by instruction address.) s
5 652 M
( * For example, N_FUN stabs \(stab entries with n_type == N_FUN\), which) s
5 641 M
( * mark functions, and N_SO stabs, which mark source files.) s
5 630 M
( *) s
5 619 M
( * Given an instruction address, this function finds the single stab entry) s
5 608 M
( * of type @type that contains that address.) s
5 597 M
( *) s
5 586 M
( * The search takes place within the range [*@region_left, *@region_right].) s
5 575 M
( * Thus, to search an entire set of N stabs, you might do:) s
5 564 M
( *) s
5 553 M
( *      left = 0;) s
5 542 M
( *      right = N - 1;    \(rightmost stab\)) s
5 531 M
( *      stab_binsearch\(stabs, &left, &right, type, addr\);) s
5 520 M
( *) s
5 509 M
( * The search modifies *region_left and *region_right to bracket the @addr.) s
5 498 M
( * *@region_left points to the matching stab that contains @addr,) s
5 487 M
( * and *@region_right points just before the next stab.) s
5 476 M
( * If *@region_left > *region_right, then @addr is not contained in any) s
5 465 M
( * matching stab.) s
5 454 M
( *) s
5 443 M
( * For example, given these N_SO stabs:) s
5 432 M
( *      Index  Type   Address) s
5 421 M
( *      0      SO     f0100000) s
5 410 M
( *      13     SO     f0100040) s
5 399 M
( *      117    SO     f0100176) s
5 388 M
( *      118    SO     f0100178) s
5 377 M
( *      555    SO     f0100652) s
5 366 M
( *      556    SO     f0100654) s
5 355 M
( *      657    SO     f0100849) s
5 344 M
( * this code:) s
5 333 M
( *      left = 0, right = 657;) s
5 322 M
( *      stab_binsearch\(stabs, &left, &right, N_SO, 0xf0100184\);) s
5 311 M
( * will exit setting left = 118, right = 554.) s
5 300 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 289 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 278 M
(stab_binsearch) s
/F-gs-font 10 10 SF
0 setgray
89 278 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 278 M
(const) s
/F-gs-font 10 10 SF
0 setgray
125 278 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 278 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
167 278 M
( stab *stabs, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
269 278 M
( *region_left, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
359 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
377 278 M
( *region_right,) s
5 267 M
(           ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 267 M
(int) s
/F-gs-font 10 10 SF
0 setgray
89 267 M
( type, uintptr_t addr\) {) s
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 256 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( l = *region_left, r = *region_right, any_matches = 0;) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 234 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 234 M
( \(l <= r\) {) s
5 223 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 223 M
( true_m = \(l + r\) / 2, m = true_m;) s
5 201 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 201 M
(// search for earliest stab with right type) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 190 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 190 M
( \(m >= l && stabs[m].n_type != type\) {) s
5 179 M
(            m --;) s
5 168 M
(        }) s
5 157 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 157 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 157 M
( \(m < l\) {    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
149 157 M
(// no match in [l, m]) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(            l = true_m + 1;) s
5 135 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 135 M
(continue) s
/F-gs-font 10 10 SF
0 setgray
125 135 M
(;) s
5 124 M
(        }) s
5 102 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 102 M
(// actual binary search) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(        any_matches = 1;) s
5 80 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 80 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 80 M
( \(stabs[m].n_value < addr\) {) s
5 69 M
(            *region_left = m;) s
5 58 M
(            l = true_m + 1;) s
5 47 M
(        } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 47 M
(else) s
/F-gs-font 10 10 SF
0 setgray
89 47 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
95 47 M
(if) s
/F-gs-font 10 10 SF
0 setgray
107 47 M
( \(stabs[m].n_value > addr\) {) s
5 36 M
(            *region_right = m - 1;) s
5 25 M
(            r = m - 1;) s
5 14 M
(        } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 14 M
(else) s
/F-gs-font 10 10 SF
0 setgray
89 14 M
( {) s
5 3 M
(            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
77 3 M
(// exact match for 'addr', but continue loop to find) s
_R
S
%%Page: (229) 229
%%BeginPageSetup
_S
18 36 translate
/pagenum 229 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
/F-gs-font 10 10 SF
0 setgray
5 707 M
(            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
77 707 M
(// *region_right) s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(            *region_left = m;) s
5 685 M
(            l = m;) s
5 674 M
(            addr ++;) s
5 663 M
(        }) s
5 652 M
(    }) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 630 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 630 M
( \(!any_matches\) {) s
5 619 M
(        *region_right = *region_left - 1;) s
5 608 M
(    }) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 597 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 597 M
( {) s
5 586 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 586 M
(// find rightmost region containing 'addr') s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(        l = *region_right;) s
5 564 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 564 M
(for) s
/F-gs-font 10 10 SF
0 setgray
71 564 M
( \(; l > *region_left && stabs[l].n_type != type; l --\)) s
5 553 M
(            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
77 553 M
(/* do nothing */) s
/F-gs-font 10 10 SF
0 setgray
173 553 M
(;) s
5 542 M
(        *region_left = l;) s
5 531 M
(    }) s
5 520 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 498 M
(/* *) s
5 487 M
( * debuginfo_eip - Fill in the @info structure with information about) s
5 476 M
( * the specified instruction address, @addr.  Returns 0 if information) s
5 465 M
( * was found, and negative if not.  But even if it returns negative it) s
5 454 M
( * has stored some information into '*info'.) s
5 443 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 432 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 421 M
(debuginfo_eip) s
/F-gs-font 10 10 SF
0 setgray
83 421 M
(\(uintptr_t addr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 421 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
221 421 M
( eipdebuginfo *info\) {) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 410 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 410 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 410 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 410 M
( stab *stabs, *stab_end;) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 399 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 399 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 399 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 399 M
( *stabstr, *stabstr_end;) s
5 377 M
(    info->eip_file = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
131 377 M
("<unknown>") s
/F-gs-font 10 10 SF
0 setgray
197 377 M
(;) s
5 366 M
(    info->eip_line = 0;) s
5 355 M
(    info->eip_fn_name = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 355 M
("<unknown>") s
/F-gs-font 10 10 SF
0 setgray
215 355 M
(;) s
5 344 M
(    info->eip_fn_namelen = 9;) s
5 333 M
(    info->eip_fn_addr = addr;) s
5 322 M
(    info->eip_fn_narg = 0;) s
5 300 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 300 M
(// find the relevant set of stabs) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 289 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( \(addr >= KERNBASE\) {) s
5 278 M
(        stabs = __STAB_BEGIN__;) s
5 267 M
(        stab_end = __STAB_END__;) s
5 256 M
(        stabstr = __STABSTR_BEGIN__;) s
5 245 M
(        stabstr_end = __STABSTR_END__;) s
5 234 M
(    }) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 223 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 223 M
( {) s
5 212 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 212 M
(// user-program linker script, tools/user.ld puts the information about the) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 201 M
(// program's stabs \(included __STAB_BEGIN__, __STAB_END__, __STABSTR_BEGIN__,) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 190 M
(// and __STABSTR_END__\) in a structure located at virtual address USTAB.) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 179 M
(const) s
/F-gs-font 10 10 SF
0 setgray
83 179 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 179 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 179 M
( userstabdata *usd = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 179 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
293 179 M
( userstabdata *\)USTAB;) s
5 157 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 157 M
(// make sure that debugger \(current process\) can access this memory) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 146 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 146 M
( mm_struct *mm;) s
5 135 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 135 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 135 M
( \(current == NULL || \(mm = current->mm\) == NULL\) {) s
5 124 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 124 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 124 M
( -1;) s
5 113 M
(        }) s
5 102 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 102 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 102 M
( \(!user_mem_check\(mm, \(uintptr_t\)usd, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
293 102 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
329 102 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
335 102 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
371 102 M
( userstabdata\), 0\)\) {) s
5 91 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 91 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 91 M
( -1;) s
5 80 M
(        }) s
5 58 M
(        stabs = usd->stabs;) s
5 47 M
(        stab_end = usd->stab_end;) s
5 36 M
(        stabstr = usd->stabstr;) s
5 25 M
(        stabstr_end = usd->stabstr_end;) s
5 3 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 3 M
(// make sure the STABS and string table memory is valid) s
_R
S
%%Page: (230) 230
%%BeginPageSetup
_S
18 36 translate
/pagenum 230 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
/F-gs-font 10 10 SF
0 setgray
5 707 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 707 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
( \(!user_mem_check\(mm, \(uintptr_t\)stabs, \(uintptr_t\)stab_end - \(uintptr_t\)stabs, 0\)\) ) s
5 696 M
({) s
5 685 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 685 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 685 M
( -1;) s
5 674 M
(        }) s
5 663 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 663 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 663 M
( \(!user_mem_check\(mm, \(uintptr_t\)stabstr, stabstr_end - stabstr, 0\)\) {) s
5 652 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 652 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 652 M
( -1;) s
5 641 M
(        }) s
5 630 M
(    }) s
5 608 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 608 M
(// String table validity checks) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 597 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( \(stabstr_end <= stabstr || stabstr_end[-1] != 0\) {) s
5 586 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 586 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 586 M
( -1;) s
5 575 M
(    }) s
5 553 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 553 M
(// Now we find the right stabs that define the function containing) s
/F-gs-font 10 10 SF
0 setgray
5 542 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 542 M
(// 'eip'.  First, we find the basic source file containing 'eip'.) s
/F-gs-font 10 10 SF
0 setgray
5 531 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 531 M
(// Then, we look in that source file for the function.  Then we look) s
/F-gs-font 10 10 SF
0 setgray
5 520 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 520 M
(// for the line number.) s
/F-gs-font 10 10 SF
0 setgray
5 498 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 498 M
(// Search the entire set of stabs for the source file \(type N_SO\).) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 487 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( lfile = 0, rfile = \(stab_end - stabs\) - 1;) s
5 476 M
(    stab_binsearch\(stabs, &lfile, &rfile, N_SO, addr\);) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 465 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 465 M
( \(lfile == 0\)) s
5 454 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 454 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 454 M
( -1;) s
5 432 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 432 M
(// Search within that file's stabs for the function definition) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 421 M
(// \(N_FUN\).) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 410 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( lfun = lfile, rfun = rfile;) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 399 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 399 M
( lline, rline;) s
5 388 M
(    stab_binsearch\(stabs, &lfun, &rfun, N_FUN, addr\);) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 366 M
( \(lfun <= rfun\) {) s
5 355 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 355 M
(// stabs[lfun] points to the function name) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 344 M
(// in the string table, but check bounds just in case.) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 333 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 333 M
( \(stabs[lfun].n_strx < stabstr_end - stabstr\) {) s
5 322 M
(            info->eip_fn_name = stabstr + stabs[lfun].n_strx;) s
5 311 M
(        }) s
5 300 M
(        info->eip_fn_addr = stabs[lfun].n_value;) s
5 289 M
(        addr -= info->eip_fn_addr;) s
5 278 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 278 M
(// Search within the function definition for the line number.) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(        lline = lfun;) s
5 256 M
(        rline = rfun;) s
5 245 M
(    } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
41 245 M
(else) s
/F-gs-font 10 10 SF
0 setgray
65 245 M
( {) s
5 234 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 234 M
(// Couldn't find function stab!  Maybe we're in an assembly) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 223 M
(// file.  Search the whole file for the line number.) s
/F-gs-font 10 10 SF
0 setgray
5 212 M
(        info->eip_fn_addr = addr;) s
5 201 M
(        lline = lfile;) s
5 190 M
(        rline = rfile;) s
5 179 M
(    }) s
5 168 M
(    info->eip_fn_namelen = strfind\(info->eip_fn_name, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
329 168 M
(':') s
/F-gs-font 10 10 SF
0 setgray
347 168 M
(\) - info->eip_fn_name;) s
5 146 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 146 M
(// Search within [lline, rline] for the line number stab.) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 135 M
(// If found, set info->eip_line to the right line number.) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 124 M
(// If not found, return -1.) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(    stab_binsearch\(stabs, &lline, &rline, N_SLINE, addr\);) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 102 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 102 M
( \(lline <= rline\) {) s
5 91 M
(        info->eip_line = stabs[rline].n_desc;) s
5 80 M
(    } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
41 80 M
(else) s
/F-gs-font 10 10 SF
0 setgray
65 80 M
( {) s
5 69 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 69 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 69 M
( -1;) s
5 58 M
(    }) s
5 36 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 36 M
(// Search backwards from the line number for the relevant filename stab.) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 25 M
(// We can't just use the "lfile" stab because inlined functions) s
/F-gs-font 10 10 SF
0 setgray
5 14 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 14 M
(// can interpolate code from a different file!) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 3 M
(// Such included source files use the N_SOL stab type.) s
_R
S
%%Page: (231) 231
%%BeginPageSetup
_S
18 36 translate
/pagenum 231 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
/F-gs-font 10 10 SF
0 setgray
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 707 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 707 M
( \(lline >= lfile) s
5 696 M
(           && stabs[lline].n_type != N_SOL) s
5 685 M
(           && \(stabs[lline].n_type != N_SO || !stabs[lline].n_value\)\) {) s
5 674 M
(        lline --;) s
5 663 M
(    }) s
5 652 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 652 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 652 M
( \(lline >= lfile && stabs[lline].n_strx < stabstr_end - stabstr\) {) s
5 641 M
(        info->eip_file = stabstr + stabs[lline].n_strx;) s
5 630 M
(    }) s
5 608 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 608 M
(// Set eip_fn_narg to the number of arguments taken by the function,) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 597 M
(// or 0 if there was no containing function.) s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 586 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 586 M
( \(lfun < rfun\) {) s
5 575 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 575 M
(for) s
/F-gs-font 10 10 SF
0 setgray
71 575 M
( \(lline = lfun + 1;) s
5 564 M
(             lline < rfun && stabs[lline].n_type == N_PSYM;) s
5 553 M
(             lline ++\) {) s
5 542 M
(            info->eip_fn_narg ++;) s
5 531 M
(        }) s
5 520 M
(    }) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 509 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
( 0;) s
5 498 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 476 M
(/* *) s
5 465 M
( * print_kerninfo - print the information about kernel, including the location) s
5 454 M
( * of kernel entry, the start addresses of data and text segements, the start) s
5 443 M
( * address of free memory and how many memory that kernel has used.) s
5 432 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 421 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 410 M
(print_kerninfo) s
/F-gs-font 10 10 SF
0 setgray
89 410 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 410 M
(void) s
/F-gs-font 10 10 SF
0 setgray
119 410 M
(\) {) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 399 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
65 399 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 399 M
(char) s
/F-gs-font 10 10 SF
0 setgray
95 399 M
( etext[], edata[], end[], kern_init[];) s
5 388 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 388 M
("Special kernel symbols:\\n") s
/F-gs-font 10 10 SF
0 setgray
239 388 M
(\);) s
5 377 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 377 M
("  entry  0x%08x \(phys\)\\n") s
/F-gs-font 10 10 SF
0 setgray
233 377 M
(, kern_init\);) s
5 366 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 366 M
("  etext  0x%08x \(phys\)\\n") s
/F-gs-font 10 10 SF
0 setgray
233 366 M
(, etext\);) s
5 355 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 355 M
("  edata  0x%08x \(phys\)\\n") s
/F-gs-font 10 10 SF
0 setgray
233 355 M
(, edata\);) s
5 344 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 344 M
("  end    0x%08x \(phys\)\\n") s
/F-gs-font 10 10 SF
0 setgray
233 344 M
(, end\);) s
5 333 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 333 M
("Kernel executable memory footprint: %dKB\\n") s
/F-gs-font 10 10 SF
0 setgray
341 333 M
(, \(end - kern_init + 1023\)/1024\);) s
5 322 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 300 M
(/* *) s
5 289 M
( * print_debuginfo - read and print the stat information for the address @eip,) s
5 278 M
( * and info.eip_fn_addr should be the first address of the related function.) s
5 267 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 256 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 245 M
(print_debuginfo) s
/F-gs-font 10 10 SF
0 setgray
95 245 M
(\(uintptr_t eip\) {) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 234 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 234 M
( eipdebuginfo info;) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 223 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 223 M
( \(debuginfo_eip\(eip, &info\) != 0\) {) s
5 212 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 212 M
("    <unknow>: -- 0x%08x --\\n") s
/F-gs-font 10 10 SF
0 setgray
281 212 M
(, eip\);) s
5 201 M
(    }) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 190 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 190 M
( {) s
5 179 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 179 M
(char) s
/F-gs-font 10 10 SF
0 setgray
77 179 M
( fnname[256];) s
5 168 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 168 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 168 M
( j;) s
5 157 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 157 M
(for) s
/F-gs-font 10 10 SF
0 setgray
71 157 M
( \(j = 0; j < info.eip_fn_namelen; j ++\) {) s
5 146 M
(            fnname[j] = info.eip_fn_name[j];) s
5 135 M
(        }) s
5 124 M
(        fnname[j] = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
125 124 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
149 124 M
(;) s
5 113 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 113 M
("    %s:%d: %s+%d\\n") s
/F-gs-font 10 10 SF
0 setgray
221 113 M
(, info.eip_file, info.eip_line,) s
5 102 M
(                fnname, eip - info.eip_fn_addr\);) s
5 91 M
(    }) s
5 80 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 58 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 58 M
( __noinline uint32_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 47 M
(read_eip) s
/F-gs-font 10 10 SF
0 setgray
53 47 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 47 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 47 M
(\) {) s
5 36 M
(    uint32_t eip;) s
5 25 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 25 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 25 M
(\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 25 M
("movl 4\(%%ebp\), %0") s
/F-gs-font 10 10 SF
0 setgray
221 25 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
239 25 M
("=r") s
/F-gs-font 10 10 SF
0 setgray
263 25 M
( \(eip\)\);) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 14 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
( eip;) s
5 3 M
(}) s
_R
S
%%Page: (232) 232
%%BeginPageSetup
_S
18 36 translate
/pagenum 232 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 707 M
( inline uint32_t ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
143 707 M
(read_esp) s
/F-gs-font 10 10 SF
0 setgray
191 707 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
221 707 M
(\)) s
5 696 M
({) s
5 685 M
(        uint32_t esp;) s
5 674 M
(        asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 674 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
125 674 M
(\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
131 674 M
("movl %%esp, %0") s
/F-gs-font 10 10 SF
0 setgray
227 674 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
245 674 M
("=r") s
/F-gs-font 10 10 SF
0 setgray
269 674 M
( \(esp\)\);) s
5 663 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 663 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 663 M
( esp;) s
5 652 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 619 M
(/* *) s
5 608 M
( * print_stackframe - print a list of the saved eip values from the nested 'call') s
5 597 M
( * instructions that led to the current point of execution) s
5 586 M
( *) s
5 575 M
( * The x86 stack pointer, namely esp, points to the lowest location on the stack) s
5 564 M
( * that is currently in use. Everything below that location in stack is free. Pushing) s
5 553 M
( * a value onto the stack will invole decreasing the stack pointer and then writing) s
5 542 M
( * the value to the place that stack pointer pointes to. And popping a value do the) s
5 531 M
( * opposite.) s
5 520 M
( *) s
5 509 M
( * The ebp \(base pointer\) register, in contrast, is associated with the stack) s
5 498 M
( * primarily by software convention. On entry to a C function, the function's) s
5 487 M
( * prologue code normally saves the previous function's base pointer by pushing) s
5 476 M
( * it onto the stack, and then copies the current esp value into ebp for the duration) s
5 465 M
( * of the function. If all the functions in a program obey this convention,) s
5 454 M
( * then at any given point during the program's execution, it is possible to trace) s
5 443 M
( * back through the stack by following the chain of saved ebp pointers and determining) s
5 432 M
( * exactly what nested sequence of function calls caused this particular point in the) s
5 421 M
( * program to be reached. This capability can be particularly useful, for example,) s
5 410 M
( * when a particular function causes an assert failure or panic because bad arguments) s
5 399 M
( * were passed to it, but you aren't sure who passed the bad arguments. A stack) s
5 388 M
( * backtrace lets you find the offending function.) s
5 377 M
( *) s
5 366 M
( * The inline function read_ebp\(\) can tell us the value of current ebp. And the) s
5 355 M
( * non-inline function read_eip\(\) is useful, it can read the value of current eip,) s
5 344 M
( * since while calling this function, read_eip\(\) can read the caller's eip from) s
5 333 M
( * stack easily.) s
5 322 M
( *) s
5 311 M
( * In print_debuginfo\(\), the function debuginfo_eip\(\) can get enough information about) s
5 300 M
( * calling-chain. Finally print_stackframe\(\) will trace and print them for debugging.) s
5 289 M
( *) s
5 278 M
( * Note that, the length of ebp-chain is limited. In boot/bootasm.S, before jumping) s
5 267 M
( * to the kernel entry, the value of ebp has been set to zero, that's the boundary.) s
5 256 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 245 M
(//void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 234 M
(//print_stackframe\(void\) {) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 223 M
(//     /* LAB1 YOUR CODE : STEP 1 */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 212 M
(//     /* \(1\) call read_ebp\(\) to get the value of ebp. the type is \(uint32_t\);) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 201 M
(//      * \(2\) call read_eip\(\) to get the value of eip. the type is \(uint32_t\);) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 190 M
(//      * \(3\) from 0 .. STACKFRAME_DEPTH) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 179 M
(//      *    \(3.1\) printf value of ebp, eip) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 168 M
(//      *    \(3.2\) \(uint32_t\)calling arguments [0..4] = the contents in address \(uint32_t\)ebp ) s
5 157 M
(+2 [0..4]) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 146 M
(//      *    \(3.3\) cprintf\("\\n"\);) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 135 M
(//      *    \(3.4\) call print_debuginfo\(eip-1\) to print the C calling function name and line n) s
5 124 M
(umber, etc.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 113 M
(//      *    \(3.5\) popup a calling stackframe) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 102 M
(//      *           NOTICE: the calling funciton's return addr eip  = ss:[ebp+4]) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 91 M
(//      *                   the calling funciton's ebp = ss:[ebp]) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 80 M
(//      */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 69 M
(//    uint32_t t_ebp = read_ebp\(\), t_eip = read_eip\(\);) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 58 M
(//    t_ebp = read_ebp\(\);) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 47 M
(//    t_eip = read_eip\(\);) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 36 M
(//) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 25 M
(//    int i, j;) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 14 M
(//    for \(i = 0; t_ebp != 0 && i < STACKFRAME_DEPTH; i ++\) {) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 3 M
(//        cprintf\("t_ebp:0x%08x t_eip:0x%08x args:", t_ebp, t_eip\);) s
_R
S
%%Page: (233) 233
%%BeginPageSetup
_S
18 36 translate
/pagenum 233 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
(//        uint32_t *args = \(uint32_t *\)t_ebp + 2;) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 696 M
(//        for \(j = 0; j < 4; j ++\) {) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 685 M
(//            cprintf\("0x%08x ", args[j]\);) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 674 M
(//        }) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 663 M
(//        cprintf\("\\n"\);) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 652 M
(//        print_debuginfo\(t_eip - 1\);) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 641 M
(//        t_eip = \(\(uint32_t *\)t_ebp\)[1];) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 630 M
(//        t_ebp = \(\(uint32_t *\)t_ebp\)[0];) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 619 M
(//    }) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 608 M
(//}) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 586 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 586 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 586 M
(print_stack) s
/F-gs-font 10 10 SF
0 setgray
101 586 M
(\(uint32_t addr, uint32_t len\)) s
5 575 M
({) s
5 564 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 564 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 564 M
(\(len--\)) s
5 553 M
(        {) s
5 542 M
(                cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 542 M
("addr:0x%08x ") s
/F-gs-font 10 10 SF
0 setgray
233 542 M
(, addr\);) s
5 531 M
(                cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 531 M
("val:0x%08x \\n") s
/F-gs-font 10 10 SF
0 setgray
239 531 M
(, *\(\(uint32_t*\)addr\)\);) s
5 520 M
(                addr += ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 520 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
185 520 M
(\(addr\);) s
5 509 M
(        }) s
5 498 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 476 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 476 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 476 M
(print_stackframe) s
/F-gs-font 10 10 SF
0 setgray
131 476 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 476 M
(void) s
/F-gs-font 10 10 SF
0 setgray
161 476 M
(\)) s
5 465 M
({) s
5 454 M
(        uint32_t t_ebp = read_ebp\(\);) s
5 443 M
(        uint32_t t_eip = read_eip\(\);) s
5 432 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 432 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 432 M
( i = 0, j = 0;) s
5 421 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 421 M
(for) s
/F-gs-font 10 10 SF
0 setgray
71 421 M
( \(i = 0; t_ebp != 0 && i < STACKFRAME_DEPTH; i++\) {) s
5 410 M
(                cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 410 M
("t_ebp:0x%x t_eip:0x%x args:") s
/F-gs-font 10 10 SF
0 setgray
323 410 M
(, t_ebp, t_eip\);) s
5 399 M
(                uint32_t* args = \(uint32_t*\)t_ebp + 2;) s
5 388 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 388 M
(for) s
/F-gs-font 10 10 SF
0 setgray
119 388 M
( \(j = 0; j < 4; j++\) {) s
5 377 M
(                        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
197 377 M
("0x%08x ") s
/F-gs-font 10 10 SF
0 setgray
251 377 M
(, args[j]\);) s
5 366 M
(                }) s
5 355 M
(                cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 355 M
("\\n") s
/F-gs-font 10 10 SF
0 setgray
173 355 M
(\);) s
5 344 M
(                print_debuginfo\(t_eip - 1\);) s
5 333 M
(                t_eip = \(\(uint32_t *\)t_ebp\)[1];) s
5 322 M
(                t_ebp = \(\(uint32_t *\)t_ebp\)[0];) s
5 311 M
(        }) s
5 300 M
(}) s
5 267 M
([ucore/lab8_result/kern/debug/stab.h] ++++++++++++++++++++++++++++++) s
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 256 M
(__KERN_DEBUG_STAB_H__) s
/F-gs-font 10 10 SF
0 setgray
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 245 M
(__KERN_DEBUG_STAB_H__) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 223 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 223 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 201 M
(/* *) s
5 190 M
( * STABS debugging info) s
5 179 M
( *) s
5 168 M
( * The kernel debugger can understand some debugging information in) s
5 157 M
( * the STABS format.  For more information on this format, see) s
5 146 M
( * http://sources.redhat.com/gdb/onlinedocs/stabs_toc.html) s
5 135 M
( *) s
5 124 M
( * The constants below define some symbol types used by various debuggers) s
5 113 M
( * and compilers.  Kernel uses the N_SO, N_SOL, N_FUN, and N_SLINE types.) s
5 102 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 80 M
(N_GSYM) s
/F-gs-font 10 10 SF
0 setgray
89 80 M
(      0x20    // global symbol) s
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 69 M
(N_FNAME) s
/F-gs-font 10 10 SF
0 setgray
95 69 M
(     0x22    // F77 function name) s
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 58 M
(N_FUN) s
/F-gs-font 10 10 SF
0 setgray
83 58 M
(       0x24    // procedure name) s
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 47 M
(N_STSYM) s
/F-gs-font 10 10 SF
0 setgray
95 47 M
(     0x26    // data segment variable) s
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 36 M
(N_LCSYM) s
/F-gs-font 10 10 SF
0 setgray
95 36 M
(     0x28    // bss segment variable) s
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 25 M
(N_MAIN) s
/F-gs-font 10 10 SF
0 setgray
89 25 M
(      0x2a    // main function name) s
5 14 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 14 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 14 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 14 M
(N_PC) s
/F-gs-font 10 10 SF
0 setgray
77 14 M
(        0x30    // global Pascal symbol) s
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 3 M
(N_RSYM) s
/F-gs-font 10 10 SF
0 setgray
89 3 M
(      0x40    // register variable) s
_R
S
%%Page: (234) 234
%%BeginPageSetup
_S
18 36 translate
/pagenum 234 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 707 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 707 M
(N_SLINE) s
/F-gs-font 10 10 SF
0 setgray
95 707 M
(     0x44    // text segment line number) s
5 696 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 696 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 696 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 696 M
(N_DSLINE) s
/F-gs-font 10 10 SF
0 setgray
101 696 M
(    0x46    // data segment line number) s
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 685 M
(N_BSLINE) s
/F-gs-font 10 10 SF
0 setgray
101 685 M
(    0x48    // bss segment line number) s
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 674 M
(N_SSYM) s
/F-gs-font 10 10 SF
0 setgray
89 674 M
(      0x60    // structure/union element) s
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 663 M
(N_SO) s
/F-gs-font 10 10 SF
0 setgray
77 663 M
(        0x64    // main source file name) s
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 652 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 652 M
(N_LSYM) s
/F-gs-font 10 10 SF
0 setgray
89 652 M
(      0x80    // stack variable) s
5 641 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 641 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 641 M
(N_BINCL) s
/F-gs-font 10 10 SF
0 setgray
95 641 M
(     0x82    // include file beginning) s
5 630 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 630 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 630 M
(N_SOL) s
/F-gs-font 10 10 SF
0 setgray
83 630 M
(       0x84    // included source file name) s
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 619 M
(N_PSYM) s
/F-gs-font 10 10 SF
0 setgray
89 619 M
(      0xa0    // parameter variable) s
5 608 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 608 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 608 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 608 M
(N_EINCL) s
/F-gs-font 10 10 SF
0 setgray
95 608 M
(     0xa2    // include file end) s
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 597 M
(N_ENTRY) s
/F-gs-font 10 10 SF
0 setgray
95 597 M
(     0xa4    // alternate entry point) s
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 586 M
(N_LBRAC) s
/F-gs-font 10 10 SF
0 setgray
95 586 M
(     0xc0    // left bracket) s
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 575 M
(N_EXCL) s
/F-gs-font 10 10 SF
0 setgray
89 575 M
(      0xc2    // deleted include file) s
5 564 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 564 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 564 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 564 M
(N_RBRAC) s
/F-gs-font 10 10 SF
0 setgray
95 564 M
(     0xe0    // right bracket) s
5 553 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 553 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 553 M
(N_BCOMM) s
/F-gs-font 10 10 SF
0 setgray
95 553 M
(     0xe2    // begin common) s
5 542 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 542 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 542 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 542 M
(N_ECOMM) s
/F-gs-font 10 10 SF
0 setgray
95 542 M
(     0xe4    // end common) s
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 531 M
(N_ECOML) s
/F-gs-font 10 10 SF
0 setgray
95 531 M
(     0xe8    // end common \(local name\)) s
5 520 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 520 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 520 M
(N_LENG) s
/F-gs-font 10 10 SF
0 setgray
89 520 M
(      0xfe    // length of preceding entry) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 498 M
(/* Entries in the STABS table are formatted as follows. */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 487 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( stab {) s
5 476 M
(    uint32_t n_strx;        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 476 M
(// index into string table of name) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(    uint8_t n_type;         ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 465 M
(// type of symbol) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(    uint8_t n_other;        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 454 M
(// misc info \(usually empty\)) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(    uint16_t n_desc;        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 443 M
(// description field) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(    uintptr_t n_value;      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 432 M
(// value of symbol) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(};) s
5 399 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 399 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 399 M
(/* !__KERN_DEBUG_STAB_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
([ucore/lab8_result/kern/debug/kmonitor.h] ++++++++++++++++++++++++++++++) s
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 366 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 366 M
(__KERN_DEBUG_MONITOR_H__) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 355 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 355 M
(__KERN_DEBUG_MONITOR_H__) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 333 M
(<trap.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 311 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 311 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 311 M
(kmonitor) s
/F-gs-font 10 10 SF
0 setgray
83 311 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 311 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 311 M
( trapframe *tf\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 289 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 289 M
(mon_help) s
/F-gs-font 10 10 SF
0 setgray
77 289 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 289 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 289 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 289 M
(char) s
/F-gs-font 10 10 SF
0 setgray
167 289 M
( **argv, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
221 289 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
257 289 M
( trapframe *tf\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 278 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 278 M
(mon_kerninfo) s
/F-gs-font 10 10 SF
0 setgray
101 278 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
125 278 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 278 M
(char) s
/F-gs-font 10 10 SF
0 setgray
191 278 M
( **argv, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 278 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
281 278 M
( trapframe *tf\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 267 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 267 M
(mon_backtrace) s
/F-gs-font 10 10 SF
0 setgray
107 267 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 267 M
(int) s
/F-gs-font 10 10 SF
0 setgray
131 267 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 267 M
(char) s
/F-gs-font 10 10 SF
0 setgray
197 267 M
( **argv, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
287 267 M
( trapframe *tf\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 256 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 256 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 256 M
(mon_continue) s
/F-gs-font 10 10 SF
0 setgray
101 256 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 256 M
(int) s
/F-gs-font 10 10 SF
0 setgray
125 256 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 256 M
(char) s
/F-gs-font 10 10 SF
0 setgray
191 256 M
( **argv, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 256 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
281 256 M
( trapframe *tf\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 245 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 245 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 245 M
(mon_step) s
/F-gs-font 10 10 SF
0 setgray
77 245 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 245 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 245 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 245 M
(char) s
/F-gs-font 10 10 SF
0 setgray
167 245 M
( **argv, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
221 245 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
257 245 M
( trapframe *tf\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 234 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 234 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 234 M
(mon_breakpoint) s
/F-gs-font 10 10 SF
0 setgray
113 234 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 234 M
(int) s
/F-gs-font 10 10 SF
0 setgray
137 234 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 234 M
(char) s
/F-gs-font 10 10 SF
0 setgray
203 234 M
( **argv, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 234 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
293 234 M
( trapframe *tf\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 223 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 223 M
(mon_watchpoint) s
/F-gs-font 10 10 SF
0 setgray
113 223 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
137 223 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 223 M
(char) s
/F-gs-font 10 10 SF
0 setgray
203 223 M
( **argv, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 223 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
293 223 M
( trapframe *tf\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 212 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 212 M
(mon_delete_dr) s
/F-gs-font 10 10 SF
0 setgray
107 212 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
131 212 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 212 M
(char) s
/F-gs-font 10 10 SF
0 setgray
197 212 M
( **argv, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
251 212 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
287 212 M
( trapframe *tf\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 201 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 201 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 201 M
(mon_list_dr) s
/F-gs-font 10 10 SF
0 setgray
95 201 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 201 M
(int) s
/F-gs-font 10 10 SF
0 setgray
119 201 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
161 201 M
(char) s
/F-gs-font 10 10 SF
0 setgray
185 201 M
( **argv, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
239 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
275 201 M
( trapframe *tf\);) s
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 179 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 179 M
(/* !__KERN_DEBUG_MONITOR_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
([ucore/lab8_result/kern/debug/kmonitor.c] ++++++++++++++++++++++++++++++) s
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 146 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 146 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 135 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 135 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 124 M
(<mmu.h>) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 113 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 113 M
(<trap.h>) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 102 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 102 M
(<kmonitor.h>) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 91 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 91 M
(<kdebug.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 69 M
(/* *) s
5 58 M
( * Simple command-line kernel monitor useful for controlling the) s
5 47 M
( * kernel and exploring the system interactively.) s
5 36 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( command {) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 3 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 3 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 3 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 3 M
( *name;) s
_R
S
%%Page: (235) 235
%%BeginPageSetup
_S
18 36 translate
/pagenum 235 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 707 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 707 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 707 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 707 M
( *desc;) s
5 696 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 696 M
(// return -1 to force monitor to exit) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 685 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
(\(*func\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 685 M
(int) s
/F-gs-font 10 10 SF
0 setgray
113 685 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 685 M
(char) s
/F-gs-font 10 10 SF
0 setgray
179 685 M
( **argv, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
233 685 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
269 685 M
( trapframe *tf\);) s
5 674 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 652 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 652 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 652 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 652 M
( command commands[] = {) s
5 641 M
(    {) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
35 641 M
("help") s
/F-gs-font 10 10 SF
0 setgray
71 641 M
(, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 641 M
("Display this list of commands.") s
/F-gs-font 10 10 SF
0 setgray
275 641 M
(, mon_help},) s
5 630 M
(    {) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
35 630 M
("kerninfo") s
/F-gs-font 10 10 SF
0 setgray
95 630 M
(, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 630 M
("Display information about the kernel.") s
/F-gs-font 10 10 SF
0 setgray
341 630 M
(, mon_kerninfo},) s
5 619 M
(    {) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
35 619 M
("backtrace") s
/F-gs-font 10 10 SF
0 setgray
101 619 M
(, ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 619 M
("Print backtrace of stack frame.") s
/F-gs-font 10 10 SF
0 setgray
311 619 M
(, mon_backtrace},) s
5 608 M
(};) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 586 M
(/* return if kernel is panic, in kern/debug/panic.c */) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(bool ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 575 M
(is_kernel_panic) s
/F-gs-font 10 10 SF
0 setgray
125 575 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 575 M
(void) s
/F-gs-font 10 10 SF
0 setgray
155 575 M
(\);) s
5 553 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 553 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 553 M
(NCOMMANDS) s
/F-gs-font 10 10 SF
0 setgray
107 553 M
( \(sizeof\(commands\)/sizeof\(struct command\)\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 531 M
(/***** Kernel monitor command interpreter *****/) s
/F-gs-font 10 10 SF
0 setgray
5 509 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 509 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 509 M
(MAXARGS) s
/F-gs-font 10 10 SF
0 setgray
95 509 M
(         16) s
5 498 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 498 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 498 M
(WHITESPACE) s
/F-gs-font 10 10 SF
0 setgray
113 498 M
(      ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 498 M
(" \\t\\n\\r") s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 476 M
(/* parse - parse the command buffer into whitespace-separated arguments */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 465 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 465 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 465 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 454 M
(parse) s
/F-gs-font 10 10 SF
0 setgray
35 454 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 454 M
(char) s
/F-gs-font 10 10 SF
0 setgray
65 454 M
( *buf, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 454 M
(char) s
/F-gs-font 10 10 SF
0 setgray
131 454 M
( **argv\) {) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( argc = 0;) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 432 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 432 M
( \(1\) {) s
5 421 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 421 M
(// find global whitespace) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 410 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 410 M
( \(*buf != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 410 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
167 410 M
( && strchr\(WHITESPACE, *buf\) != NULL\) {) s
5 399 M
(            *buf ++ = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 399 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
161 399 M
(;) s
5 388 M
(        }) s
5 377 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 377 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 377 M
( \(*buf == ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
125 377 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
149 377 M
(\) {) s
5 366 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 366 M
(break) s
/F-gs-font 10 10 SF
0 setgray
107 366 M
(;) s
5 355 M
(        }) s
5 333 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 333 M
(// save and scan past next arg) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 322 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 322 M
( \(argc == MAXARGS - 1\) {) s
5 311 M
(            cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
125 311 M
("Too many arguments \(max %d\).\\n") s
/F-gs-font 10 10 SF
0 setgray
317 311 M
(, MAXARGS\);) s
5 300 M
(        }) s
5 289 M
(        argv[argc ++] = buf;) s
5 278 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 278 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 278 M
( \(*buf != ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
143 278 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
167 278 M
( && strchr\(WHITESPACE, *buf\) == NULL\) {) s
5 267 M
(            buf ++;) s
5 256 M
(        }) s
5 245 M
(    }) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 234 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 234 M
( argc;) s
5 223 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 201 M
(/* *) s
5 190 M
( * runcmd - parse the input string, split it into separated arguments) s
5 179 M
( * and then lookup and invoke some related commands/) s
5 168 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 157 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 157 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 146 M
(runcmd) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 146 M
(char) s
/F-gs-font 10 10 SF
0 setgray
71 146 M
( *buf, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 146 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
149 146 M
( trapframe *tf\) {) s
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 135 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 135 M
( *argv[MAXARGS];) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 124 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( argc = parse\(buf, argv\);) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( \(argc == 0\) {) s
5 102 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 102 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 102 M
( 0;) s
5 91 M
(    }) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( i;) s
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 69 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( \(i = 0; i < NCOMMANDS; i ++\) {) s
5 58 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 58 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 58 M
( \(strcmp\(commands[i].name, argv[0]\) == 0\) {) s
5 47 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 47 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 47 M
( commands[i].func\(argc - 1, argv + 1, tf\);) s
5 36 M
(        }) s
5 25 M
(    }) s
5 14 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 14 M
("Unknown command '%s'\\n") s
/F-gs-font 10 10 SF
0 setgray
221 14 M
(, argv[0]\);) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 3 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 3 M
( 0;) s
_R
S
%%Page: (236) 236
%%BeginPageSetup
_S
18 36 translate
/pagenum 236 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 685 M
(/***** Implementations of basic kernel monitor commands *****/) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 652 M
(kmonitor) s
/F-gs-font 10 10 SF
0 setgray
53 652 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 652 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 652 M
( trapframe *tf\) {) s
5 641 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 641 M
("Welcome to the kernel debug monitor!!\\n") s
/F-gs-font 10 10 SF
0 setgray
323 641 M
(\);) s
5 630 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 630 M
("Type 'help' for a list of commands.\\n") s
/F-gs-font 10 10 SF
0 setgray
311 630 M
(\);) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 608 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 608 M
( \(tf != NULL\) {) s
5 597 M
(        print_trapframe\(tf\);) s
5 586 M
(    }) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 564 M
(char) s
/F-gs-font 10 10 SF
0 setgray
53 564 M
( *buf;) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 553 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 553 M
( \(1\) {) s
5 542 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 542 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 542 M
( \(\(buf = readline\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 542 M
("K> ") s
/F-gs-font 10 10 SF
0 setgray
203 542 M
(\)\) != NULL\) {) s
5 531 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 531 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 531 M
( \(runcmd\(buf, tf\) < 0\) {) s
5 520 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 520 M
(break) s
/F-gs-font 10 10 SF
0 setgray
131 520 M
(;) s
5 509 M
(            }) s
5 498 M
(        }) s
5 487 M
(    }) s
5 476 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 454 M
(/* mon_help - print the information about mon_* functions */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 432 M
(mon_help) s
/F-gs-font 10 10 SF
0 setgray
53 432 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 432 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 432 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 432 M
(char) s
/F-gs-font 10 10 SF
0 setgray
143 432 M
( **argv, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
233 432 M
( trapframe *tf\) {) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 421 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( i;) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 410 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( \(i = 0; i < NCOMMANDS; i ++\) {) s
5 399 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 399 M
("%s - %s\\n") s
/F-gs-font 10 10 SF
0 setgray
167 399 M
(, commands[i].name, commands[i].desc\);) s
5 388 M
(    }) s
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 377 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 377 M
( 0;) s
5 366 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 344 M
(/* *) s
5 333 M
( * mon_kerninfo - call print_kerninfo in kern/debug/kdebug.c to) s
5 322 M
( * print the memory occupancy in kernel.) s
5 311 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 300 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 289 M
(mon_kerninfo) s
/F-gs-font 10 10 SF
0 setgray
77 289 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 289 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 289 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 289 M
(char) s
/F-gs-font 10 10 SF
0 setgray
167 289 M
( **argv, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
221 289 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
257 289 M
( trapframe *tf\) {) s
5 278 M
(    print_kerninfo\(\);) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 267 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 267 M
( 0;) s
5 256 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 234 M
(/* *) s
5 223 M
( * mon_backtrace - call print_stackframe in kern/debug/kdebug.c to) s
5 212 M
( * print a backtrace of the stack.) s
5 201 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 190 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 179 M
(mon_backtrace) s
/F-gs-font 10 10 SF
0 setgray
83 179 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 179 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 179 M
( argc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 179 M
(char) s
/F-gs-font 10 10 SF
0 setgray
173 179 M
( **argv, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 179 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
263 179 M
( trapframe *tf\) {) s
5 168 M
(    print_stackframe\(\);) s
5 157 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 157 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 157 M
( 0;) s
5 146 M
(}) s
5 124 M
([ucore/lab8_result/kern/mm/swap.c] ++++++++++++++++++++++++++++++) s
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 113 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 113 M
(<swap.h>) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 102 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 102 M
(<swapfs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 91 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 91 M
(<swap_fifo.h>) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 80 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 80 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 69 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 58 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 58 M
(<memlayout.h>) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 47 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 47 M
(<pmm.h>) s
/F-gs-font 10 10 SF
0 setgray
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 36 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 36 M
(<mmu.h>) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 25 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 25 M
(<default_pmm.h>) s
/F-gs-font 10 10 SF
0 setgray
5 14 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 14 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 14 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 14 M
(<kdebug.h>) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (237) 237
%%BeginPageSetup
_S
18 36 translate
/pagenum 237 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
(// the valid vaddr for check is between 0~CHECK_VALID_VADDR-1) s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 696 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 696 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 696 M
(CHECK_VALID_VIR_PAGE_NUM) s
/F-gs-font 10 10 SF
0 setgray
197 696 M
( 5) s
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 685 M
(BEING_CHECK_VALID_VADDR) s
/F-gs-font 10 10 SF
0 setgray
191 685 M
( 0X1000) s
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 674 M
(CHECK_VALID_VADDR) s
/F-gs-font 10 10 SF
0 setgray
155 674 M
( \(CHECK_VALID_VIR_PAGE_NUM+1\)*0x1000) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 663 M
(// the max number of valid physical page for check) s
/F-gs-font 10 10 SF
0 setgray
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 652 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 652 M
(CHECK_VALID_PHY_PAGE_NUM) s
/F-gs-font 10 10 SF
0 setgray
197 652 M
( 4) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 641 M
(// the max access seq number) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 630 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 630 M
(MAX_SEQ_NO) s
/F-gs-font 10 10 SF
0 setgray
113 630 M
( 10) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 608 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 608 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 608 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 608 M
( swap_manager *sm;) s
5 597 M
(size_t max_swap_offset;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
53 575 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 575 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 575 M
( swap_init_ok = 0;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 553 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
53 553 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 553 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 553 M
( swap_page[CHECK_VALID_VIR_PAGE_NUM];) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 531 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
53 531 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 531 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 531 M
( swap_in_seq_no[MAX_SEQ_NO],swap_out_seq_no[MAX_SEQ_NO];) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 509 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 509 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 509 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 509 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
77 509 M
(check_swap) s
/F-gs-font 10 10 SF
0 setgray
137 509 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 509 M
(void) s
/F-gs-font 10 10 SF
0 setgray
167 509 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 487 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 476 M
(swap_init) s
/F-gs-font 10 10 SF
0 setgray
59 476 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 476 M
(void) s
/F-gs-font 10 10 SF
0 setgray
89 476 M
(\)) s
5 465 M
({) s
5 454 M
(     swapfs_init\(\);) s
5 432 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 432 M
(if) s
/F-gs-font 10 10 SF
0 setgray
47 432 M
( \(!\(1024 <= max_swap_offset && max_swap_offset < MAX_SWAP_OFFSET_LIMIT\)\)) s
5 421 M
(     {) s
5 410 M
(          panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 410 M
("bad max_swap_offset %08x.\\n") s
/F-gs-font 10 10 SF
0 setgray
275 410 M
(, max_swap_offset\);) s
5 399 M
(     }) s
5 388 M
(     ) s
5 366 M
(     sm = &swap_manager_fifo;) s
5 355 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 355 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 355 M
( r = sm->init\(\);) s
5 344 M
(     ) s
5 333 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 333 M
(if) s
/F-gs-font 10 10 SF
0 setgray
47 333 M
( \(r == 0\)) s
5 322 M
(     {) s
5 311 M
(          swap_init_ok = 1;) s
5 300 M
(          cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 300 M
("SWAP: manager = %s\\n") s
/F-gs-font 10 10 SF
0 setgray
245 300 M
(, sm->name\);) s
5 289 M
(          check_swap\(\);) s
5 278 M
(     }) s
5 256 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 256 M
(return) s
/F-gs-font 10 10 SF
0 setgray
71 256 M
( r;) s
5 245 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 212 M
(swap_init_mm) s
/F-gs-font 10 10 SF
0 setgray
77 212 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 212 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 212 M
( mm_struct *mm\)) s
5 201 M
({) s
5 190 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 190 M
(return) s
/F-gs-font 10 10 SF
0 setgray
71 190 M
( sm->init_mm\(mm\);) s
5 179 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 146 M
(swap_tick_event) s
/F-gs-font 10 10 SF
0 setgray
95 146 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 146 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 146 M
( mm_struct *mm\)) s
5 135 M
({) s
5 124 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 124 M
(return) s
/F-gs-font 10 10 SF
0 setgray
71 124 M
( sm->tick_event\(mm\);) s
5 113 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 80 M
(swap_map_swappable) s
/F-gs-font 10 10 SF
0 setgray
113 80 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 80 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 80 M
( mm_struct *mm, uintptr_t addr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
347 80 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
383 80 M
( Page *page, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
461 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
479 80 M
( swap_in\)) s
5 69 M
({) s
5 58 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 58 M
(return) s
/F-gs-font 10 10 SF
0 setgray
71 58 M
( sm->map_swappable\(mm, addr, page, swap_in\);) s
5 47 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 14 M
(swap_set_unswappable) s
/F-gs-font 10 10 SF
0 setgray
125 14 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
167 14 M
( mm_struct *mm, uintptr_t addr\)) s
5 3 M
({) s
_R
S
%%Page: (238) 238
%%BeginPageSetup
_S
18 36 translate
/pagenum 238 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 707 M
(return) s
/F-gs-font 10 10 SF
0 setgray
71 707 M
( sm->set_unswappable\(mm, addr\);) s
5 696 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 674 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
53 674 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 674 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
107 674 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 674 M
(int) s
/F-gs-font 10 10 SF
0 setgray
131 674 M
( swap_out_num=0;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 652 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 641 M
(swap_out) s
/F-gs-font 10 10 SF
0 setgray
53 641 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 641 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 641 M
( mm_struct *mm, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
209 641 M
( n, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
233 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
251 641 M
( in_tick\)) s
5 630 M
({) s
5 619 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 619 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 619 M
( i;) s
5 608 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 608 M
(for) s
/F-gs-font 10 10 SF
0 setgray
53 608 M
( \(i = 0; i != n; ++ i\)) s
5 597 M
(     {) s
5 586 M
(          uintptr_t v;) s
5 575 M
(          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
65 575 M
(//struct Page **ptr_page=NULL;) s
/F-gs-font 10 10 SF
0 setgray
5 564 M
(          ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 564 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 564 M
( Page *page;) s
5 553 M
(          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
65 553 M
(// cprintf\("i %d, SWAP: call swap_out_victim\\n",i\);) s
/F-gs-font 10 10 SF
0 setgray
5 542 M
(          ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 542 M
(int) s
/F-gs-font 10 10 SF
0 setgray
83 542 M
( r = sm->swap_out_victim\(mm, &page, in_tick\);) s
5 531 M
(          ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 531 M
(if) s
/F-gs-font 10 10 SF
0 setgray
77 531 M
( \(r != 0\) {) s
5 520 M
(                    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 520 M
("i %d, swap_out: call swap_out_victim failed\\n") s
/F-gs-font 10 10 SF
0 setgray
455 520 M
(,i\);) s
5 509 M
(                  ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
113 509 M
(break) s
/F-gs-font 10 10 SF
0 setgray
143 509 M
(;) s
5 498 M
(          }          ) s
5 487 M
(          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
65 487 M
(//assert\(!PageReserved\(page\)\);) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
65 465 M
(//cprintf\("SWAP: choose victim page 0x%08x\\n", page\);) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(          ) s
5 443 M
(          v=page->pra_vaddr; ) s
5 432 M
(          pte_t *ptep = get_pte\(mm->pgdir, v, 0\);) s
5 421 M
(          assert\(\(*ptep & PTE_P\) != 0\);) s
5 399 M
(          ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 399 M
(if) s
/F-gs-font 10 10 SF
0 setgray
77 399 M
( \(swapfs_write\( \(page->pra_vaddr/PGSIZE+1\)<<8, page\) != 0\) {) s
5 388 M
(                    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 388 M
("SWAP: failed to save\\n") s
/F-gs-font 10 10 SF
0 setgray
317 388 M
(\);) s
5 377 M
(                    sm->map_swappable\(mm, v, page, 0\);) s
5 366 M
(                    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 366 M
(continue) s
/F-gs-font 10 10 SF
0 setgray
173 366 M
(;) s
5 355 M
(          }) s
5 344 M
(          ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 344 M
(else) s
/F-gs-font 10 10 SF
0 setgray
89 344 M
( {) s
5 333 M
(                    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
173 333 M
("swap_out: i %d, store page in vaddr 0x%x to disk swap entry %d\\n") s
/F-gs-font 10 10 SF
0 setgray
569 333 M
() s
5 322 M
(, i, v, page->pra_vaddr/PGSIZE+1\);) s
5 311 M
(                    *ptep = \(page->pra_vaddr/PGSIZE+1\)<<8;) s
5 300 M
(                    free_page\(page\);) s
5 289 M
(          }) s
5 278 M
(          ) s
5 267 M
(          tlb_invalidate\(mm->pgdir, v\);) s
5 256 M
(     }) s
5 245 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 245 M
(return) s
/F-gs-font 10 10 SF
0 setgray
71 245 M
( i;) s
5 234 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 201 M
(swap_in) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 201 M
( mm_struct *mm, uintptr_t addr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
281 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
317 201 M
( Page **ptr_result\)) s
5 190 M
({) s
5 179 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 179 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
71 179 M
( Page *result = alloc_page\(\);) s
5 168 M
(     assert\(result!=NULL\);) s
5 146 M
(     pte_t *ptep = get_pte\(mm->pgdir, addr, 0\);) s
5 135 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 135 M
(// cprintf\("SWAP: load ptep %x swap entry %d to vaddr 0x%08x, page %x, No %d\\n", ptep, \(*) s
5 124 M
(ptep\)>>8, addr, result, \(result-pages\)\);) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(    ) s
5 102 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 102 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 102 M
( r;) s
5 91 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 91 M
(if) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( \(\(r = swapfs_read\(\(*ptep\), result\)\) != 0\)) s
5 80 M
(     {) s
5 69 M
(        assert\(r!=0\);) s
5 58 M
(     }) s
5 47 M
(     cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 47 M
("swap_in: load disk swap entry %d with swap_page in vadr 0x%x\\n") s
/F-gs-font 10 10 SF
0 setgray
467 47 M
(, \(*ptep\)>>8, add) s
5 36 M
(r\);) s
5 25 M
(     *ptr_result=result;) s
5 14 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 14 M
(return) s
/F-gs-font 10 10 SF
0 setgray
71 14 M
( 0;) s
5 3 M
(}) s
_R
S
%%Page: (239) 239
%%BeginPageSetup
_S
18 36 translate
/pagenum 239 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 674 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 674 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 674 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 663 M
(check_content_set) s
/F-gs-font 10 10 SF
0 setgray
107 663 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 663 M
(void) s
/F-gs-font 10 10 SF
0 setgray
137 663 M
(\)) s
5 652 M
({) s
5 641 M
(     *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 641 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
95 641 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 641 M
(char) s
/F-gs-font 10 10 SF
0 setgray
125 641 M
( *\)0x1000 = 0x0a;) s
5 630 M
(     assert\(pgfault_num==1\);) s
5 619 M
(     *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 619 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
95 619 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 619 M
(char) s
/F-gs-font 10 10 SF
0 setgray
125 619 M
( *\)0x1010 = 0x0a;) s
5 608 M
(     assert\(pgfault_num==1\);) s
5 597 M
(     *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 597 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
95 597 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 597 M
(char) s
/F-gs-font 10 10 SF
0 setgray
125 597 M
( *\)0x2000 = 0x0b;) s
5 586 M
(     assert\(pgfault_num==2\);) s
5 575 M
(     *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 575 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
95 575 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 575 M
(char) s
/F-gs-font 10 10 SF
0 setgray
125 575 M
( *\)0x2010 = 0x0b;) s
5 564 M
(     assert\(pgfault_num==2\);) s
5 553 M
(     *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 553 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
95 553 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 553 M
(char) s
/F-gs-font 10 10 SF
0 setgray
125 553 M
( *\)0x3000 = 0x0c;) s
5 542 M
(     assert\(pgfault_num==3\);) s
5 531 M
(     *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 531 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
95 531 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 531 M
(char) s
/F-gs-font 10 10 SF
0 setgray
125 531 M
( *\)0x3010 = 0x0c;) s
5 520 M
(     assert\(pgfault_num==3\);) s
5 509 M
(     *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 509 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
95 509 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 509 M
(char) s
/F-gs-font 10 10 SF
0 setgray
125 509 M
( *\)0x4000 = 0x0d;) s
5 498 M
(     assert\(pgfault_num==4\);) s
5 487 M
(     *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 487 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
95 487 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 487 M
(char) s
/F-gs-font 10 10 SF
0 setgray
125 487 M
( *\)0x4010 = 0x0d;) s
5 476 M
(     assert\(pgfault_num==4\);) s
5 465 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 432 M
(check_content_access) s
/F-gs-font 10 10 SF
0 setgray
125 432 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 432 M
(void) s
/F-gs-font 10 10 SF
0 setgray
155 432 M
(\)) s
5 421 M
({) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 410 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( ret = sm->check_swap\(\);) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 399 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 399 M
( ret;) s
5 388 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 366 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 366 M
( Page * check_rp[CHECK_VALID_PHY_PAGE_NUM];) s
5 355 M
(pte_t * check_ptep[CHECK_VALID_PHY_PAGE_NUM];) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 344 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 344 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 344 M
( check_swap_addr[CHECK_VALID_VIR_PAGE_NUM];) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 322 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 322 M
( free_area_t free_area;) s
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 300 M
(free_list) s
/F-gs-font 10 10 SF
0 setgray
107 300 M
( \(free_area.free_list\)) s
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 289 M
(nr_free) s
/F-gs-font 10 10 SF
0 setgray
95 289 M
( \(free_area.nr_free\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 267 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 256 M
(check_swap) s
/F-gs-font 10 10 SF
0 setgray
65 256 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 256 M
(void) s
/F-gs-font 10 10 SF
0 setgray
95 256 M
(\)) s
5 245 M
({) s
5 234 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 234 M
(//backup mem env) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 223 M
( ret, count = 0, total = 0, i;) s
5 212 M
(     list_entry_t *le = &free_list;) s
5 201 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 201 M
(while) s
/F-gs-font 10 10 SF
0 setgray
65 201 M
( \(\(le = list_next\(le\)\) != &free_list\) {) s
5 190 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 190 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 190 M
( Page *p = le2page\(le, page_link\);) s
5 179 M
(        assert\(PageProperty\(p\)\);) s
5 168 M
(        count ++, total += p->property;) s
5 157 M
(     }) s
5 146 M
(     assert\(total == nr_free_pages\(\)\);) s
5 135 M
(     cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 135 M
("BEGIN check_swap: count %d, total %d\\n") s
/F-gs-font 10 10 SF
0 setgray
323 135 M
(,count,total\);) s
5 124 M
(     ) s
5 113 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 113 M
(//now we set the phy pages env     ) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 102 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
71 102 M
( mm_struct *mm = mm_create\(\);) s
5 91 M
(     assert\(mm != NULL\);) s
5 69 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 69 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
71 69 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 69 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 69 M
( mm_struct *check_mm_struct;) s
5 58 M
(     assert\(check_mm_struct == NULL\);) s
5 36 M
(     check_mm_struct = mm;) s
5 14 M
(     pde_t *pgdir = mm->pgdir = boot_pgdir;) s
5 3 M
(     assert\(pgdir[0] == 0\);) s
_R
S
%%Page: (240) 240
%%BeginPageSetup
_S
18 36 translate
/pagenum 240 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 696 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 696 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
71 696 M
( vma_struct *vma = vma_create\(BEING_CHECK_VALID_VADDR, CHECK_VALID_VADDR, VM_WRITE ) s
5 685 M
(| VM_READ\);) s
5 674 M
(     assert\(vma != NULL\);) s
5 652 M
(     insert_vma_struct\(mm, vma\);) s
5 630 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 630 M
(//setup the temp Page Table vaddr 0~4MB) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
(     cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 619 M
("setup Page Table for vaddr 0X1000, so alloc a page\\n") s
/F-gs-font 10 10 SF
0 setgray
407 619 M
(\);) s
5 608 M
(     pte_t *temp_ptep=NULL;) s
5 597 M
(     temp_ptep = get_pte\(mm->pgdir, BEING_CHECK_VALID_VADDR, 1\);) s
5 586 M
(     assert\(temp_ptep!= NULL\);) s
5 575 M
(     cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 575 M
("setup Page Table vaddr 0~4MB OVER!\\n") s
/F-gs-font 10 10 SF
0 setgray
311 575 M
(\);) s
5 564 M
(     ) s
5 553 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 553 M
(for) s
/F-gs-font 10 10 SF
0 setgray
53 553 M
( \(i=0;i<CHECK_VALID_PHY_PAGE_NUM;i++\) {) s
5 542 M
(          check_rp[i] = alloc_page\(\);) s
5 531 M
(          assert\(check_rp[i] != NULL \);) s
5 520 M
(          assert\(!PageProperty\(check_rp[i]\)\);) s
5 509 M
(     }) s
5 498 M
(     list_entry_t free_list_store = free_list;) s
5 487 M
(     list_init\(&free_list\);) s
5 476 M
(     assert\(list_empty\(&free_list\)\);) s
5 465 M
(     ) s
5 454 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 454 M
(//assert\(alloc_page\(\) == NULL\);) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(     ) s
5 432 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 432 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
83 432 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 432 M
(int) s
/F-gs-font 10 10 SF
0 setgray
107 432 M
( nr_free_store = nr_free;) s
5 421 M
(     nr_free = 0;) s
5 410 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 410 M
(for) s
/F-gs-font 10 10 SF
0 setgray
53 410 M
( \(i=0;i<CHECK_VALID_PHY_PAGE_NUM;i++\) {) s
5 399 M
(        free_pages\(check_rp[i],1\);) s
5 388 M
(     }) s
5 377 M
(     assert\(nr_free==CHECK_VALID_PHY_PAGE_NUM\);) s
5 366 M
(     ) s
5 355 M
(     cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 355 M
("set up init env for check_swap begin!\\n") s
/F-gs-font 10 10 SF
0 setgray
329 355 M
(\);) s
5 344 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 344 M
(//setup initial vir_page<->phy_page environment for page relpacement algorithm ) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(     ) s
5 311 M
(     pgfault_num=0;) s
5 300 M
(     ) s
5 289 M
(     check_content_set\(\);) s
5 278 M
(     assert\( nr_free == 0\);         ) s
5 267 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 267 M
(for) s
/F-gs-font 10 10 SF
0 setgray
53 267 M
(\(i = 0; i<MAX_SEQ_NO ; i++\) ) s
5 256 M
(         swap_out_seq_no[i]=swap_in_seq_no[i]=-1;) s
5 245 M
(     ) s
5 234 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 234 M
(for) s
/F-gs-font 10 10 SF
0 setgray
53 234 M
( \(i= 0;i<CHECK_VALID_PHY_PAGE_NUM;i++\) {) s
5 223 M
(         check_ptep[i]=0;) s
5 212 M
(         check_ptep[i] = get_pte\(pgdir, \(i+1\)*0x1000, 0\);) s
5 201 M
(         ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
59 201 M
(//cprintf\("i %d, check_ptep addr %x, value %x\\n", i, check_ptep[i], *check_ptep[i]\);) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(         assert\(check_ptep[i] != NULL\);) s
5 179 M
(         assert\(pte2page\(*check_ptep[i]\) == check_rp[i]\);) s
5 168 M
(         assert\(\(*check_ptep[i] & PTE_P\)\);          ) s
5 157 M
(     }) s
5 146 M
(     cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 146 M
("set up init env for check_swap over!\\n") s
/F-gs-font 10 10 SF
0 setgray
323 146 M
(\);) s
5 135 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 135 M
(// now access the virt pages to test  page relpacement algorithm ) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(     ret=check_content_access\(\);) s
5 113 M
(     assert\(ret==0\);) s
5 102 M
(     ) s
5 91 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 91 M
(//restore kernel mem env) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 80 M
(for) s
/F-gs-font 10 10 SF
0 setgray
53 80 M
( \(i=0;i<CHECK_VALID_PHY_PAGE_NUM;i++\) {) s
5 69 M
(         free_pages\(check_rp[i],1\);) s
5 58 M
(     } ) s
5 36 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 36 M
(//free_page\(pte2page\(*temp_ptep\)\);) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(    free_page\(pde2page\(pgdir[0]\)\);) s
5 14 M
(     pgdir[0] = 0;) s
5 3 M
(     mm->pgdir = NULL;) s
_R
S
%%Page: (241) 241
%%BeginPageSetup
_S
18 36 translate
/pagenum 241 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(     mm_destroy\(mm\);) s
5 696 M
(     check_mm_struct = NULL;) s
5 685 M
(     ) s
5 674 M
(     nr_free = nr_free_store;) s
5 663 M
(     free_list = free_list_store;) s
5 641 M
(     ) s
5 630 M
(     le = &free_list;) s
5 619 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 619 M
(while) s
/F-gs-font 10 10 SF
0 setgray
65 619 M
( \(\(le = list_next\(le\)\) != &free_list\) {) s
5 608 M
(         ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 608 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 608 M
( Page *p = le2page\(le, page_link\);) s
5 597 M
(         count --, total -= p->property;) s
5 586 M
(     }) s
5 575 M
(     cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 575 M
("count is %d, total is %d\\n") s
/F-gs-font 10 10 SF
0 setgray
251 575 M
(,count,total\);) s
5 564 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 564 M
(//assert\(count == 0\);) s
/F-gs-font 10 10 SF
0 setgray
5 553 M
(     ) s
5 542 M
(     cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 542 M
("check_swap\(\) succeeded!\\n") s
/F-gs-font 10 10 SF
0 setgray
245 542 M
(\);) s
5 531 M
(}) s
5 520 M
([ucore/lab8_result/kern/mm/kmalloc.h] ++++++++++++++++++++++++++++++) s
5 509 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 509 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 509 M
(__KERN_MM_SLAB_H__) s
/F-gs-font 10 10 SF
0 setgray
5 498 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 498 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 498 M
(__KERN_MM_SLAB_H__) s
/F-gs-font 10 10 SF
0 setgray
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 476 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 476 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 454 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 454 M
(KMALLOC_MAX_ORDER) s
/F-gs-font 10 10 SF
0 setgray
155 454 M
(       10) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 432 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 432 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 432 M
(kmalloc_init) s
/F-gs-font 10 10 SF
0 setgray
107 432 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 432 M
(void) s
/F-gs-font 10 10 SF
0 setgray
137 432 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 410 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 410 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
41 410 M
(kmalloc) s
/F-gs-font 10 10 SF
0 setgray
83 410 M
(\(size_t n\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 399 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 399 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 399 M
(kfree) s
/F-gs-font 10 10 SF
0 setgray
65 399 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 399 M
(void) s
/F-gs-font 10 10 SF
0 setgray
95 399 M
( *objp\);) s
5 377 M
(size_t ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
47 377 M
(kallocated) s
/F-gs-font 10 10 SF
0 setgray
107 377 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 377 M
(void) s
/F-gs-font 10 10 SF
0 setgray
137 377 M
(\);) s
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 355 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 355 M
(/* !__KERN_MM_SLAB_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
([ucore/lab8_result/kern/mm/default_pmm.h] ++++++++++++++++++++++++++++++) s
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 322 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 322 M
(__KERN_MM_DEFAULT_PMM_H__) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 311 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 311 M
(  ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
59 311 M
(__KERN_MM_DEFAULT_PMM_H__) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 289 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 289 M
(<pmm.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 267 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 267 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 267 M
( pmm_manager default_pmm_manager;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 256 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 256 M
( free_area_t free_area;) s
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 245 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 245 M
(/* ! __KERN_MM_DEFAULT_PMM_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
([ucore/lab8_result/kern/mm/swap.h] ++++++++++++++++++++++++++++++) s
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 212 M
(__KERN_MM_SWAP_H__) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 201 M
(__KERN_MM_SWAP_H__) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 179 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 168 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 168 M
(<memlayout.h>) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 157 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 157 M
(<pmm.h>) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 146 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 146 M
(<vmm.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 124 M
(/* *) s
5 113 M
( * swap_entry_t) s
5 102 M
( * --------------------------------------------) s
5 91 M
( * |         offset        |   reserved   | 0 |) s
5 80 M
( * --------------------------------------------) s
5 69 M
( *           24 bits            7 bits    1 bit) s
5 58 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 36 M
(MAX_SWAP_OFFSET_LIMIT) s
/F-gs-font 10 10 SF
0 setgray
179 36 M
(                   \(1 << 24\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( size_t max_swap_offset;) s
_R
S
%%Page: (242) 242
%%BeginPageSetup
_S
18 36 translate
/pagenum 242 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
(/* *) s
5 696 M
( * swap_offset - takes a swap_entry \(saved in pte\), and returns) s
5 685 M
( * the corresponding offset in swap mem_map.) s
5 674 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 663 M
(swap_offset) s
/F-gs-font 10 10 SF
0 setgray
119 663 M
(\(entry\) \({                                       \\) s
5 652 M
(               size_t __offset = \(entry >> 8\);                        \\) s
5 641 M
(               if \(!\(__offset > 0 && __offset < max_swap_offset\)\) {    \\) s
5 630 M
(                    panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
161 630 M
("invalid swap_entry_t = %08x.\\n") s
/F-gs-font 10 10 SF
0 setgray
353 630 M
(, entry\);    \\) s
5 619 M
(               }                                                    \\) s
5 608 M
(               __offset;                                            \\) s
5 597 M
(          }\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( swap_manager) s
5 564 M
({) s
5 553 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 553 M
(const) s
/F-gs-font 10 10 SF
0 setgray
65 553 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 553 M
(char) s
/F-gs-font 10 10 SF
0 setgray
95 553 M
( *name;) s
5 542 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 542 M
(/* Global initialization for the swap manager */) s
/F-gs-font 10 10 SF
0 setgray
5 531 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 531 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 531 M
( \(*init\)            \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 531 M
(void) s
/F-gs-font 10 10 SF
0 setgray
203 531 M
(\);) s
5 520 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 520 M
(/* Initialize the priv data inside mm_struct */) s
/F-gs-font 10 10 SF
0 setgray
5 509 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 509 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 509 M
( \(*init_mm\)         \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 509 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
215 509 M
( mm_struct *mm\);) s
5 498 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 498 M
(/* Called when tick interrupt occured */) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 487 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 487 M
( \(*tick_event\)      \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 487 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
215 487 M
( mm_struct *mm\);) s
5 476 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 476 M
(/* Called when map a swappable page into the mm_struct */) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 465 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 465 M
( \(*map_swappable\)   \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 465 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
215 465 M
( mm_struct *mm, uintptr_t addr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
407 465 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
443 465 M
( Page *page, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
521 465 M
(int) s
/F-gs-font 10 10 SF
0 setgray
539 465 M
( swap) s
5 454 M
(_in\);) s
5 443 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 443 M
(/* When a page is marked as shared, this routine is called to) s
5 432 M
(      * delete the addr entry from the swap manager */) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 421 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 421 M
( \(*set_unswappable\) \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 421 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
215 421 M
( mm_struct *mm, uintptr_t addr\);) s
5 410 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 410 M
(/* Try to swap out a page, return then victim */) s
/F-gs-font 10 10 SF
0 setgray
5 399 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 399 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 399 M
( \(*swap_out_victim\) \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 399 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
215 399 M
( mm_struct *mm, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
311 399 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
347 399 M
( Page **ptr_page, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
455 399 M
(int) s
/F-gs-font 10 10 SF
0 setgray
473 399 M
( in_tick\);) s
5 388 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 388 M
(/* check the page relpacement algorithm */) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 377 M
(int) s
/F-gs-font 10 10 SF
0 setgray
53 377 M
( \(*check_swap\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 377 M
(void) s
/F-gs-font 10 10 SF
0 setgray
167 377 M
(\);     ) s
5 366 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 344 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 344 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 344 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
95 344 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 344 M
(int) s
/F-gs-font 10 10 SF
0 setgray
119 344 M
( swap_init_ok;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 333 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 333 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 333 M
(swap_init) s
/F-gs-font 10 10 SF
0 setgray
83 333 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 333 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 333 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 322 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 322 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 322 M
(swap_init_mm) s
/F-gs-font 10 10 SF
0 setgray
101 322 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 322 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 322 M
( mm_struct *mm\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 311 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 311 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 311 M
(swap_tick_event) s
/F-gs-font 10 10 SF
0 setgray
119 311 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 311 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
161 311 M
( mm_struct *mm\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 300 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 300 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 300 M
(swap_map_swappable) s
/F-gs-font 10 10 SF
0 setgray
137 300 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 300 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
179 300 M
( mm_struct *mm, uintptr_t addr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
371 300 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
407 300 M
( Page *page, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
485 300 M
(int) s
/F-gs-font 10 10 SF
0 setgray
503 300 M
( swap_in\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 289 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 289 M
(swap_set_unswappable) s
/F-gs-font 10 10 SF
0 setgray
149 289 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 289 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
191 289 M
( mm_struct *mm, uintptr_t addr\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 278 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 278 M
(swap_out) s
/F-gs-font 10 10 SF
0 setgray
77 278 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 278 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 278 M
( mm_struct *mm, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
233 278 M
( n, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 278 M
(int) s
/F-gs-font 10 10 SF
0 setgray
275 278 M
( in_tick\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 267 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 267 M
(swap_in) s
/F-gs-font 10 10 SF
0 setgray
71 267 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 267 M
( mm_struct *mm, uintptr_t addr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
305 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
341 267 M
( Page **ptr_result\);) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 245 M
(//#define MEMBER_OFFSET\(m,t\) \(\(int\)\(&\(\(t *\)0\)->m\)\)) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 234 M
(//#define FROM_MEMBER\(m,t,a\) \(\(t *\)\(\(char *\)\(a\) - MEMBER_OFFSET\(m,t\)\)\)) s
/F-gs-font 10 10 SF
0 setgray
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
([ucore/lab8_result/kern/mm/vmm.c] ++++++++++++++++++++++++++++++) s
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 190 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 190 M
(<vmm.h>) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 179 M
(<sync.h>) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 168 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 168 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 157 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 157 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 146 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 146 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 135 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 135 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 124 M
(<pmm.h>) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 113 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 113 M
(<x86.h>) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 102 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 102 M
(<swap.h>) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 91 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 91 M
(<kmalloc.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 69 M
(/* ) s
5 58 M
(  vmm design include two parts: mm_struct \(mm\) & vma_struct \(vma\)) s
5 47 M
(  mm is the memory manager for the set of continuous virtual memory  ) s
5 36 M
(  area which have the same PDT. vma is a continuous virtual memory area.) s
5 25 M
(  There a linear link list for vma & a redblack link list for vma in mm.) s
5 14 M
(---------------) s
5 3 M
(  mm related functions:) s
_R
S
%%Page: (243) 243
%%BeginPageSetup
_S
18 36 translate
/pagenum 243 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
(   golbal functions) s
5 696 M
(     struct mm_struct * mm_create\(void\)) s
5 685 M
(     void mm_destroy\(struct mm_struct *mm\)) s
5 674 M
(     int do_pgfault\(struct mm_struct *mm, uint32_t error_code, uintptr_t addr\)) s
5 663 M
(--------------) s
5 652 M
(  vma related functions:) s
5 641 M
(   global functions) s
5 630 M
(     struct vma_struct * vma_create \(uintptr_t vm_start, uintptr_t vm_end,...\)) s
5 619 M
(     void insert_vma_struct\(struct mm_struct *mm, struct vma_struct *vma\)) s
5 608 M
(     struct vma_struct * find_vma\(struct mm_struct *mm, uintptr_t addr\)) s
5 597 M
(   local functions) s
5 586 M
(     inline void check_vma_overlap\(struct vma_struct *prev, struct vma_struct *next\)) s
5 575 M
(---------------) s
5 564 M
(   check correctness functions) s
5 553 M
(     void check_vmm\(void\);) s
5 542 M
(     void check_vma_struct\(void\);) s
5 531 M
(     void check_pgfault\(void\);) s
5 520 M
(*/) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 498 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 498 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 498 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 498 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
77 498 M
(check_vmm) s
/F-gs-font 10 10 SF
0 setgray
131 498 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 498 M
(void) s
/F-gs-font 10 10 SF
0 setgray
161 498 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 487 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 487 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 487 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
77 487 M
(check_vma_struct) s
/F-gs-font 10 10 SF
0 setgray
173 487 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 487 M
(void) s
/F-gs-font 10 10 SF
0 setgray
203 487 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 476 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 476 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 476 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 476 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
77 476 M
(check_pgfault) s
/F-gs-font 10 10 SF
0 setgray
155 476 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
161 476 M
(void) s
/F-gs-font 10 10 SF
0 setgray
185 476 M
(\);) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 454 M
(// mm_create -  alloc a mm_struct & initialize it.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
( mm_struct *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 432 M
(mm_create) s
/F-gs-font 10 10 SF
0 setgray
59 432 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 432 M
(void) s
/F-gs-font 10 10 SF
0 setgray
89 432 M
(\) {) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 421 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 421 M
( mm_struct *mm = kmalloc\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
215 421 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
251 421 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 421 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
293 421 M
( mm_struct\)\);) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 399 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
( \(mm != NULL\) {) s
5 388 M
(        list_init\(&\(mm->mmap_list\)\);) s
5 377 M
(        mm->mmap_cache = NULL;) s
5 366 M
(        mm->pgdir = NULL;) s
5 355 M
(        mm->map_count = 0;) s
5 333 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 333 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 333 M
( \(swap_init_ok\) swap_init_mm\(mm\);) s
5 322 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 322 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 322 M
( mm->sm_priv = NULL;) s
5 311 M
(        ) s
5 300 M
(        set_mm_count\(mm, 0\);) s
5 289 M
(        sem_init\(&\(mm->mm_sem\), 1\);) s
5 278 M
(    }    ) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 267 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 267 M
( mm;) s
5 256 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 234 M
(// vma_create - alloc a vma_struct & initialize it. \(addr range: vm_start~vm_end\)) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 223 M
( vma_struct *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 212 M
(vma_create) s
/F-gs-font 10 10 SF
0 setgray
65 212 M
(\(uintptr_t vm_start, uintptr_t vm_end, uint32_t vm_flags\) {) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 201 M
( vma_struct *vma = kmalloc\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
227 201 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
263 201 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
269 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
305 201 M
( vma_struct\)\);) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 179 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 179 M
( \(vma != NULL\) {) s
5 168 M
(        vma->vm_start = vm_start;) s
5 157 M
(        vma->vm_end = vm_end;) s
5 146 M
(        vma->vm_flags = vm_flags;) s
5 135 M
(    }) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 124 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 124 M
( vma;) s
5 113 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 80 M
(// find_vma - find a vma  \(vma->vm_start <= addr <= vma_vm_end\)) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( vma_struct *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 58 M
(find_vma) s
/F-gs-font 10 10 SF
0 setgray
53 58 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 58 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 58 M
( mm_struct *mm, uintptr_t addr\) {) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 47 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
( vma_struct *vma = NULL;) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 36 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 36 M
( \(mm != NULL\) {) s
5 25 M
(        vma = mm->mmap_cache;) s
5 14 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 14 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
( \(!\(vma != NULL && vma->vm_start <= addr && vma->vm_end > addr\)\) {) s
5 3 M
(                bool found = 0;) s
_R
S
%%Page: (244) 244
%%BeginPageSetup
_S
18 36 translate
/pagenum 244 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(                list_entry_t *list = &\(mm->mmap_list\), *le = list;) s
5 696 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 696 M
(while) s
/F-gs-font 10 10 SF
0 setgray
131 696 M
( \(\(le = list_next\(le\)\) != list\) {) s
5 685 M
(                    vma = le2vma\(le, list_link\);) s
5 674 M
(                    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 674 M
(if) s
/F-gs-font 10 10 SF
0 setgray
137 674 M
( \(vma->vm_start<=addr && addr < vma->vm_end\) {) s
5 663 M
(                        found = 1;) s
5 652 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 652 M
(break) s
/F-gs-font 10 10 SF
0 setgray
179 652 M
(;) s
5 641 M
(                    }) s
5 630 M
(                }) s
5 619 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 619 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 619 M
( \(!found\) {) s
5 608 M
(                    vma = NULL;) s
5 597 M
(                }) s
5 586 M
(        }) s
5 575 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 575 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 575 M
( \(vma != NULL\) {) s
5 564 M
(            mm->mmap_cache = vma;) s
5 553 M
(        }) s
5 542 M
(    }) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 531 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 531 M
( vma;) s
5 520 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 487 M
(// check_vma_overlap - check if vma1 overlaps vma2 ?) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 476 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 476 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 476 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 465 M
(check_vma_overlap) s
/F-gs-font 10 10 SF
0 setgray
107 465 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 465 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
149 465 M
( vma_struct *prev, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
263 465 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
299 465 M
( vma_struct *next\) {) s
5 454 M
(    assert\(prev->vm_start < prev->vm_end\);) s
5 443 M
(    assert\(prev->vm_end <= next->vm_start\);) s
5 432 M
(    assert\(next->vm_start < next->vm_end\);) s
5 421 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 388 M
(// insert_vma_struct -insert vma in mm's list link) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 377 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 366 M
(insert_vma_struct) s
/F-gs-font 10 10 SF
0 setgray
107 366 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 366 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
149 366 M
( mm_struct *mm, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 366 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
281 366 M
( vma_struct *vma\) {) s
5 355 M
(    assert\(vma->vm_start < vma->vm_end\);) s
5 344 M
(    list_entry_t *list = &\(mm->mmap_list\);) s
5 333 M
(    list_entry_t *le_prev = list, *le_next;) s
5 311 M
(        list_entry_t *le = list;) s
5 300 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 300 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 300 M
( \(\(le = list_next\(le\)\) != list\) {) s
5 289 M
(            ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 289 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 289 M
( vma_struct *mmap_prev = le2vma\(le, list_link\);) s
5 278 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 278 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 278 M
( \(mmap_prev->vm_start > vma->vm_start\) {) s
5 267 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 267 M
(break) s
/F-gs-font 10 10 SF
0 setgray
131 267 M
(;) s
5 256 M
(            }) s
5 245 M
(            le_prev = le;) s
5 234 M
(        }) s
5 212 M
(    le_next = list_next\(le_prev\);) s
5 190 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 190 M
(/* check overlap */) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 179 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 179 M
( \(le_prev != list\) {) s
5 168 M
(        check_vma_overlap\(le2vma\(le_prev, list_link\), vma\);) s
5 157 M
(    }) s
5 146 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 146 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( \(le_next != list\) {) s
5 135 M
(        check_vma_overlap\(vma, le2vma\(le_next, list_link\)\);) s
5 124 M
(    }) s
5 102 M
(    vma->vm_mm = mm;) s
5 91 M
(    list_add_after\(le_prev, &\(vma->list_link\)\);) s
5 69 M
(    mm->map_count ++;) s
5 58 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 36 M
(// mm_destroy - free mm and mm internal fields) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 14 M
(mm_destroy) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 14 M
( mm_struct *mm\) {) s
5 3 M
(    assert\(mm_count\(mm\) == 0\);) s
_R
S
%%Page: (245) 245
%%BeginPageSetup
_S
18 36 translate
/pagenum 245 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 696 M
(    list_entry_t *list = &\(mm->mmap_list\), *le;) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 685 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 685 M
( \(\(le = list_next\(list\)\) != list\) {) s
5 674 M
(        list_del\(le\);) s
5 663 M
(        kfree\(le2vma\(le, list_link\)\);  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
239 663 M
(//kfree vma        ) s
/F-gs-font 10 10 SF
0 setgray
5 652 M
(    }) s
5 641 M
(    kfree\(mm\); ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
95 641 M
(//kfree mm) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(    mm=NULL;) s
5 619 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 597 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 586 M
(mm_map) s
/F-gs-font 10 10 SF
0 setgray
41 586 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 586 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 586 M
( mm_struct *mm, uintptr_t addr, size_t len, uint32_t vm_flags,) s
5 575 M
(       ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 575 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 575 M
( vma_struct **vma_store\) {) s
5 564 M
(    uintptr_t start = ROUNDDOWN\(addr, PGSIZE\), end = ROUNDUP\(addr + len, PGSIZE\);) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 553 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 553 M
( \(!USER_ACCESS\(start, end\)\) {) s
5 542 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 542 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 542 M
( -E_INVAL;) s
5 531 M
(    }) s
5 509 M
(    assert\(mm != NULL\);) s
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 487 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( ret = -E_INVAL;) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 465 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 465 M
( vma_struct *vma;) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( \(\(vma = find_vma\(mm, start\)\) != NULL && end > vma->vm_start\) {) s
5 443 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 443 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 443 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 443 M
(out) s
/F-gs-font 10 10 SF
0 setgray
101 443 M
(;) s
5 432 M
(    }) s
5 421 M
(    ret = -E_NO_MEM;) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 399 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
( \(\(vma = vma_create\(start, end, vm_flags\)\) == NULL\) {) s
5 388 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 388 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 388 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 388 M
(out) s
/F-gs-font 10 10 SF
0 setgray
101 388 M
(;) s
5 377 M
(    }) s
5 366 M
(    insert_vma_struct\(mm, vma\);) s
5 355 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 355 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 355 M
( \(vma_store != NULL\) {) s
5 344 M
(        *vma_store = vma;) s
5 333 M
(    }) s
5 322 M
(    ret = 0;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 300 M
(out) s
/F-gs-font 10 10 SF
0 setgray
23 300 M
(:) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 289 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 289 M
( ret;) s
5 278 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 256 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 245 M
(dup_mmap) s
/F-gs-font 10 10 SF
0 setgray
53 245 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 245 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 245 M
( mm_struct *to, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 245 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
227 245 M
( mm_struct *from\) {) s
5 234 M
(    assert\(to != NULL && from != NULL\);) s
5 223 M
(    list_entry_t *list = &\(from->mmap_list\), *le = list;) s
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 212 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 212 M
( \(\(le = list_prev\(le\)\) != list\) {) s
5 201 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 201 M
( vma_struct *vma, *nvma;) s
5 190 M
(        vma = le2vma\(le, list_link\);) s
5 179 M
(        nvma = vma_create\(vma->vm_start, vma->vm_end, vma->vm_flags\);) s
5 168 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 168 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 168 M
( \(nvma == NULL\) {) s
5 157 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 157 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 157 M
( -E_NO_MEM;) s
5 146 M
(        }) s
5 124 M
(        insert_vma_struct\(to, nvma\);) s
5 102 M
(        bool share = 0;) s
5 91 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 91 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 91 M
( \(copy_range\(to->pgdir, from->pgdir, vma->vm_start, vma->vm_end, share\) != 0\) {) s
5 80 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 80 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 80 M
( -E_NO_MEM;) s
5 69 M
(        }) s
5 58 M
(    }) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 47 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
( 0;) s
5 36 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 3 M
(exit_mmap) s
/F-gs-font 10 10 SF
0 setgray
59 3 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 3 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 3 M
( mm_struct *mm\) {) s
_R
S
%%Page: (246) 246
%%BeginPageSetup
_S
18 36 translate
/pagenum 246 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    assert\(mm != NULL && mm_count\(mm\) == 0\);) s
5 696 M
(    pde_t *pgdir = mm->pgdir;) s
5 685 M
(    list_entry_t *list = &\(mm->mmap_list\), *le = list;) s
5 674 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 674 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 674 M
( \(\(le = list_next\(le\)\) != list\) {) s
5 663 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 663 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 663 M
( vma_struct *vma = le2vma\(le, list_link\);) s
5 652 M
(        unmap_range\(pgdir, vma->vm_start, vma->vm_end\);) s
5 641 M
(    }) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 630 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 630 M
( \(\(le = list_next\(le\)\) != list\) {) s
5 619 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 619 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 619 M
( vma_struct *vma = le2vma\(le, list_link\);) s
5 608 M
(        exit_range\(pgdir, vma->vm_start, vma->vm_end\);) s
5 597 M
(    }) s
5 586 M
(}) s
5 564 M
(bool) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 553 M
(copy_from_user) s
/F-gs-font 10 10 SF
0 setgray
89 553 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 553 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 553 M
( mm_struct *mm, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 553 M
(void) s
/F-gs-font 10 10 SF
0 setgray
251 553 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
293 553 M
(const) s
/F-gs-font 10 10 SF
0 setgray
323 553 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
329 553 M
(void) s
/F-gs-font 10 10 SF
0 setgray
353 553 M
( *src, size_t len, bool writable\) {) s
5 542 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 542 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 542 M
( \(!user_mem_check\(mm, \(uintptr_t\)src, len, writable\)\) {) s
5 531 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 531 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 531 M
( 0;) s
5 520 M
(    }) s
5 509 M
(    memcpy\(dst, src, len\);) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 498 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 498 M
( 1;) s
5 487 M
(}) s
5 465 M
(bool) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 454 M
(copy_to_user) s
/F-gs-font 10 10 SF
0 setgray
77 454 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 454 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 454 M
( mm_struct *mm, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 454 M
(void) s
/F-gs-font 10 10 SF
0 setgray
239 454 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
281 454 M
(const) s
/F-gs-font 10 10 SF
0 setgray
311 454 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
317 454 M
(void) s
/F-gs-font 10 10 SF
0 setgray
341 454 M
( *src, size_t len\) {) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 443 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
( \(!user_mem_check\(mm, \(uintptr_t\)dst, len, 1\)\) {) s
5 432 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 432 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 432 M
( 0;) s
5 421 M
(    }) s
5 410 M
(    memcpy\(dst, src, len\);) s
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 399 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 399 M
( 1;) s
5 388 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 366 M
(// vmm_init - initialize virtual memory management) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 355 M
(//          - now just call check_vmm to check correctness of vmm) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 344 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 333 M
(vmm_init) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 333 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 333 M
(\) {) s
5 322 M
(    check_vmm\(\);) s
5 311 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 289 M
(// check_vmm - check correctness of vmm) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 278 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 278 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 278 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 267 M
(check_vmm) s
/F-gs-font 10 10 SF
0 setgray
59 267 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 267 M
(void) s
/F-gs-font 10 10 SF
0 setgray
89 267 M
(\) {) s
5 256 M
(    size_t nr_free_pages_store = nr_free_pages\(\);) s
5 245 M
(    ) s
5 234 M
(    check_vma_struct\(\);) s
5 223 M
(    check_pgfault\(\);) s
5 201 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 201 M
(//assert\(nr_free_pages_store == nr_free_pages\(\)\);) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 179 M
("check_vmm\(\) succeeded.\\n") s
/F-gs-font 10 10 SF
0 setgray
233 179 M
(\);) s
5 168 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 146 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 135 M
(check_vma_struct) s
/F-gs-font 10 10 SF
0 setgray
101 135 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 135 M
(void) s
/F-gs-font 10 10 SF
0 setgray
131 135 M
(\) {) s
5 124 M
(    size_t nr_free_pages_store = nr_free_pages\(\);) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 102 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 102 M
( mm_struct *mm = mm_create\(\);) s
5 91 M
(    assert\(mm != NULL\);) s
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 69 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( step1 = 10, step2 = step1 * 10;) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 47 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( i;) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 36 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( \(i = step1; i >= 1; i --\) {) s
5 25 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 25 M
( vma_struct *vma = vma_create\(i * 5, i * 5 + 2, 0\);) s
5 14 M
(        assert\(vma != NULL\);) s
5 3 M
(        insert_vma_struct\(mm, vma\);) s
_R
S
%%Page: (247) 247
%%BeginPageSetup
_S
18 36 translate
/pagenum 247 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    }) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 685 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
( \(i = step1 + 1; i <= step2; i ++\) {) s
5 674 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 674 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 674 M
( vma_struct *vma = vma_create\(i * 5, i * 5 + 2, 0\);) s
5 663 M
(        assert\(vma != NULL\);) s
5 652 M
(        insert_vma_struct\(mm, vma\);) s
5 641 M
(    }) s
5 619 M
(    list_entry_t *le = list_next\(&\(mm->mmap_list\)\);) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 597 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( \(i = 1; i <= step2; i ++\) {) s
5 586 M
(        assert\(le != &\(mm->mmap_list\)\);) s
5 575 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 575 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 575 M
( vma_struct *mmap = le2vma\(le, list_link\);) s
5 564 M
(        assert\(mmap->vm_start == i * 5 && mmap->vm_end == i * 5 + 2\);) s
5 553 M
(        le = list_next\(le\);) s
5 542 M
(    }) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 520 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
( \(i = 5; i <= 5 * step2; i +=5\) {) s
5 509 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 509 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 509 M
( vma_struct *vma1 = find_vma\(mm, i\);) s
5 498 M
(        assert\(vma1 != NULL\);) s
5 487 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 487 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 487 M
( vma_struct *vma2 = find_vma\(mm, i+1\);) s
5 476 M
(        assert\(vma2 != NULL\);) s
5 465 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 465 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 465 M
( vma_struct *vma3 = find_vma\(mm, i+2\);) s
5 454 M
(        assert\(vma3 == NULL\);) s
5 443 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 443 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 443 M
( vma_struct *vma4 = find_vma\(mm, i+3\);) s
5 432 M
(        assert\(vma4 == NULL\);) s
5 421 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 421 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 421 M
( vma_struct *vma5 = find_vma\(mm, i+4\);) s
5 410 M
(        assert\(vma5 == NULL\);) s
5 388 M
(        assert\(vma1->vm_start == i  && vma1->vm_end == i  + 2\);) s
5 377 M
(        assert\(vma2->vm_start == i  && vma2->vm_end == i  + 2\);) s
5 366 M
(    }) s
5 344 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 344 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 344 M
( \(i =4; i>=0; i--\) {) s
5 333 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 333 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 333 M
( vma_struct *vma_below_5= find_vma\(mm,i\);) s
5 322 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 322 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 322 M
( \(vma_below_5 != NULL \) {) s
5 311 M
(           cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
119 311 M
("vma_below_5: i %x, start %x, end %x\\n") s
/F-gs-font 10 10 SF
0 setgray
353 311 M
(,i, vma_below_5->vm_start, vma_below) s
5 300 M
(_5->vm_end\); ) s
5 289 M
(        }) s
5 278 M
(        assert\(vma_below_5 == NULL\);) s
5 267 M
(    }) s
5 245 M
(    mm_destroy\(mm\);) s
5 223 M
(  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
17 223 M
(//  assert\(nr_free_pages_store == nr_free_pages\(\)\);) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 201 M
("check_vma_struct\(\) succeeded!\\n") s
/F-gs-font 10 10 SF
0 setgray
275 201 M
(\);) s
5 190 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 168 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 168 M
( mm_struct *check_mm_struct;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 146 M
(// check_pgfault - check correctness of pgfault handler) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 135 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 135 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 135 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 124 M
(check_pgfault) s
/F-gs-font 10 10 SF
0 setgray
83 124 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 124 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 124 M
(\) {) s
5 113 M
(    size_t nr_free_pages_store = nr_free_pages\(\);) s
5 91 M
(    check_mm_struct = mm_create\(\);) s
5 80 M
(    assert\(check_mm_struct != NULL\);) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 58 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 58 M
( mm_struct *mm = check_mm_struct;) s
5 47 M
(    pde_t *pgdir = mm->pgdir = boot_pgdir;) s
5 36 M
(    assert\(pgdir[0] == 0\);) s
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
( vma_struct *vma = vma_create\(0, PTSIZE, VM_WRITE\);) s
5 3 M
(    assert\(vma != NULL\);) s
_R
S
%%Page: (248) 248
%%BeginPageSetup
_S
18 36 translate
/pagenum 248 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 696 M
(    insert_vma_struct\(mm, vma\);) s
5 674 M
(    uintptr_t addr = 0x100;) s
5 663 M
(    assert\(find_vma\(mm, addr\) == vma\);) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( i, sum = 0;) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 630 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( \(i = 0; i < 100; i ++\) {) s
5 619 M
(        *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 619 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 619 M
( *\)\(addr + i\) = i;) s
5 608 M
(        sum += i;) s
5 597 M
(    }) s
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 586 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( \(i = 0; i < 100; i ++\) {) s
5 575 M
(        sum -= *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 575 M
(char) s
/F-gs-font 10 10 SF
0 setgray
131 575 M
( *\)\(addr + i\);) s
5 564 M
(    }) s
5 553 M
(    assert\(sum == 0\);) s
5 531 M
(    page_remove\(pgdir, ROUNDDOWN\(addr, PGSIZE\)\);) s
5 520 M
(    free_page\(pde2page\(pgdir[0]\)\);) s
5 509 M
(    pgdir[0] = 0;) s
5 487 M
(    mm->pgdir = NULL;) s
5 476 M
(    mm_destroy\(mm\);) s
5 465 M
(    check_mm_struct = NULL;) s
5 443 M
(    assert\(nr_free_pages_store == nr_free_pages\(\)\);) s
5 421 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 421 M
("check_pgfault\(\) succeeded!\\n") s
/F-gs-font 10 10 SF
0 setgray
257 421 M
(\);) s
5 410 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 399 M
(//page fault number) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 388 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
53 388 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 388 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
107 388 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 388 M
(int) s
/F-gs-font 10 10 SF
0 setgray
131 388 M
( pgfault_num=0;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 366 M
(/* do_pgfault - interrupt handler to process the page fault execption) s
5 355 M
( * @mm         : the control struct for a set of vma using the same PDT) s
5 344 M
( * @error_code : the error code recorded in trapframe->tf_err which is setted by x86 hardware) s
5 333 M
( * @addr       : the addr which causes a memory access exception, \(the contents of the CR2 reg) s
5 322 M
(ister\)) s
5 311 M
( *) s
5 300 M
( * CALL GRAPH: trap--> trap_dispatch-->pgfault_handler-->do_pgfault) s
5 289 M
( * The processor provides ucore's do_pgfault function with two items of information to aid in ) s
5 278 M
(diagnosing) s
5 267 M
( * the exception and recovering from it.) s
5 256 M
( *   \(1\) The contents of the CR2 register. The processor loads the CR2 register with the) s
5 245 M
( *       32-bit linear address that generated the exception. The do_pgfault fun can) s
5 234 M
( *       use this address to locate the corresponding page directory and page-table) s
5 223 M
( *       entries.) s
5 212 M
( *   \(2\) An error code on the kernel stack. The error code for a page fault has a format diffe) s
5 201 M
(rent from) s
5 190 M
( *       that for other exceptions. The error code tells the exception handler three things:) s
5 179 M
( *         -- The P flag   \(bit 0\) indicates whether the exception was due to a not-present pa) s
5 168 M
(ge \(0\)) s
5 157 M
( *            or to either an access rights violation or the use of a reserved bit \(1\).) s
5 146 M
( *         -- The W/R flag \(bit 1\) indicates whether the memory access that caused the excepti) s
5 135 M
(on) s
5 124 M
( *            was a read \(0\) or write \(1\).) s
5 113 M
( *         -- The U/S flag \(bit 2\) indicates whether the processor was executing at user mode ) s
5 102 M
(\(1\)) s
5 91 M
( *            or supervisor mode \(0\) at the time of the exception.) s
5 80 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 58 M
(do_pgfault) s
/F-gs-font 10 10 SF
0 setgray
65 58 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 58 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 58 M
( mm_struct *mm, uint32_t error_code, uintptr_t addr\) {) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 47 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( ret = -E_INVAL;) s
5 36 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 36 M
(//try to find a vma which include addr) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 25 M
( vma_struct *vma = find_vma\(mm, addr\);) s
5 3 M
(    pgfault_num++;) s
_R
S
%%Page: (249) 249
%%BeginPageSetup
_S
18 36 translate
/pagenum 249 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 707 M
(//If the addr is in the range of a mm's vma?) s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 696 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 696 M
( \(vma == NULL || vma->vm_start > addr\) {) s
5 685 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 685 M
("not valid addr %x, and  can not find it in vma\\n") s
/F-gs-font 10 10 SF
0 setgray
401 685 M
(, addr\);) s
5 674 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 674 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 674 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 674 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
119 674 M
(;) s
5 663 M
(    }) s
5 652 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 652 M
(//check the error_code) s
/F-gs-font 10 10 SF
0 setgray
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 641 M
(switch) s
/F-gs-font 10 10 SF
0 setgray
65 641 M
( \(error_code & 3\) {) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
29 630 M
(default) s
/F-gs-font 10 10 SF
0 setgray
71 630 M
(:) s
5 619 M
(            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
77 619 M
(/* error code flag : default is 3 \( W/R=1, P=1\): write, present */) s
/F-gs-font 10 10 SF
0 setgray
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 608 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 608 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 608 M
(2) s
/F-gs-font 10 10 SF
0 setgray
65 608 M
(: ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
77 608 M
(/* error code flag : \(W/R=1, P=0\): write, not present */) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 597 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 597 M
( \(!\(vma->vm_flags & VM_WRITE\)\) {) s
5 586 M
(            cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
125 586 M
("do_pgfault failed: error code flag = write AND not present, but the addr') s
5 575 M
(s vma cannot write\\n") s
/F-gs-font 10 10 SF
0 setgray
131 575 M
(\);) s
5 564 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 564 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 564 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 564 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
143 564 M
(;) s
5 553 M
(        }) s
5 542 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 542 M
(break) s
/F-gs-font 10 10 SF
0 setgray
83 542 M
(;) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 531 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 531 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 531 M
(1) s
/F-gs-font 10 10 SF
0 setgray
65 531 M
(: ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
77 531 M
(/* error code flag : \(W/R=0, P=1\): read, present */) s
/F-gs-font 10 10 SF
0 setgray
5 520 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 520 M
("do_pgfault failed: error code flag = read AND present\\n") s
/F-gs-font 10 10 SF
0 setgray
443 520 M
(\);) s
5 509 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 509 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 509 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 509 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
119 509 M
(;) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 498 M
(case) s
/F-gs-font 10 10 SF
0 setgray
53 498 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
59 498 M
(0) s
/F-gs-font 10 10 SF
0 setgray
65 498 M
(: ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
77 498 M
(/* error code flag : \(W/R=0, P=0\): read, not present */) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 487 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 487 M
( \(!\(vma->vm_flags & \(VM_READ | VM_EXEC\)\)\) {) s
5 476 M
(            cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
125 476 M
("do_pgfault failed: error code flag = read AND not present, but the addr's) s
5 465 M
( vma cannot read or exec\\n") s
/F-gs-font 10 10 SF
0 setgray
167 465 M
(\);) s
5 454 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 454 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 454 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 454 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
143 454 M
(;) s
5 443 M
(        }) s
5 432 M
(    }) s
5 421 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 421 M
(/* IF \(write an existed addr \) OR) s
5 410 M
(     *    \(write an non_existed addr && addr is writable\) OR) s
5 399 M
(     *    \(read  an non_existed addr && addr is readable\)) s
5 388 M
(     * THEN) s
5 377 M
(     *    continue process) s
5 366 M
(     */) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(    uint32_t perm = PTE_U;) s
5 344 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 344 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 344 M
( \(vma->vm_flags & VM_WRITE\) {) s
5 333 M
(        perm |= PTE_W;) s
5 322 M
(    }) s
5 311 M
(    addr = ROUNDDOWN\(addr, PGSIZE\);) s
5 289 M
(    ret = -E_NO_MEM;) s
5 267 M
(    pte_t *ptep=NULL;) s
5 256 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 256 M
(/*LAB3 EXERCISE 1: YOUR CODE) s
5 245 M
(    * Maybe you want help comment, BELOW comments can help you finish the code) s
5 234 M
(    *) s
5 223 M
(    * Some Useful MACROs and DEFINEs, you can use them in below implementation.) s
5 212 M
(    * MACROs or Functions:) s
5 201 M
(    *   get_pte : get an pte and return the kernel virtual address of this pte for la) s
5 190 M
(    *             if the PT contians this pte didn't exist, alloc a page for PT \(notice the 3t) s
5 179 M
(h parameter '1'\)) s
5 168 M
(    *   pgdir_alloc_page : call alloc_page & page_insert functions to allocate a page size mem) s
5 157 M
(ory & setup) s
5 146 M
(    *             an addr map pa<--->la with linear address la and the PDT pgdir) s
5 135 M
(    * DEFINES:) s
5 124 M
(    *   VM_WRITE  : If vma->vm_flags & VM_WRITE == 1/0, then the vma is writable/non writable) s
5 113 M
(    *   PTE_W           0x002                   // page table/directory entry flags bit : Writ) s
5 102 M
(eable) s
5 91 M
(    *   PTE_U           0x004                   // page table/directory entry flags bit : User) s
5 80 M
( can access) s
5 69 M
(    * VARIABLES:) s
5 58 M
(    *   mm->pgdir : the PDT of these vma) s
5 47 M
(    *) s
5 36 M
(    */) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(if) s
/F-gs-font 10 10 SF
0 setgray
23 25 M
( 0) s
5 14 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 14 M
(/*LAB3 EXERCISE 1: YOUR CODE*/) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(    ptep = ???              ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 3 M
(//\(1\) try to find a pte, if pte's PT\(Page Table\) isn't existed, th) s
_R
S
%%Page: (250) 250
%%BeginPageSetup
_S
18 36 translate
/pagenum 250 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
(en create a PT.) s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 696 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 696 M
( \(*ptep == 0\) {) s
5 685 M
(                            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 685 M
(//\(2\) if the phy addr isn't exist, then alloc a page & map the phy) s
5 674 M
( addr with logical addr) s
/F-gs-font 10 10 SF
0 setgray
5 652 M
(    }) s
5 641 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 641 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 641 M
( {) s
5 630 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 630 M
(/*LAB3 EXERCISE 2: YOUR CODE) s
5 619 M
(    * Now we think this pte is a  swap entry, we should load data from disk to a page with phy) s
5 608 M
( addr,) s
5 597 M
(    * and map the phy addr with logical addr, trigger swap manager to record the access situat) s
5 586 M
(ion of this page.) s
5 575 M
(    *) s
5 564 M
(    *  Some Useful MACROs and DEFINEs, you can use them in below implementation.) s
5 553 M
(    *  MACROs or Functions:) s
5 542 M
(    *    swap_in\(mm, addr, &page\) : alloc a memory page, then according to the swap entry in P) s
5 531 M
(TE for addr,) s
5 520 M
(    *                               find the addr of disk page, read the content of disk page ) s
5 509 M
(into this memroy page) s
5 498 M
(    *    page_insert \357\274\\232 build the map of phy addr of an Page with the linear addr la) s
5 487 M
(    *    swap_map_swappable \357\274\\232 set the page swappable) s
5 476 M
(    */) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 465 M
(/*) s
5 454 M
(     * LAB5 CHALLENGE \( the implmentation Copy on Write\)) s
5 443 M
(                There are 2 situlations when code comes here.) s
5 432 M
(                  1\) *ptep & PTE_P == 1, it means one process try to write a readonly page. ) s
5 421 M
(                     If the vma includes this addr is writable, then we can set the page writa) s
5 410 M
(ble by rewrite the *ptep.) s
5 399 M
(                     This method could be used to implement the Copy on Write \(COW\) thchnology) s
5 388 M
(\(a fast fork process method\).) s
5 377 M
(                  2\) *ptep & PTE_P == 0 & but *ptep!=0, it means this pte is a  swap entry.) s
5 366 M
(                     We should add the LAB3's results here.) s
5 355 M
(     */) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 344 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 344 M
(\(swap_init_ok\) {) s
5 333 M
(            ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 333 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 333 M
( Page *page=NULL;) s
5 322 M
(                                    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 322 M
(//\(1\357\274\\211According to the mm AND addr, try to load the co) s
5 311 M
(ntent of right disk page) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(                                    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 300 M
(//    into the memory which page managed.) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(                                    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 289 M
(//\(2\) According to the mm, addr AND page, setup the map of) s
5 278 M
( phy addr <---> logical addr) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(                                    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 267 M
(//\(3\) make the page swappable.) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(                                    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 256 M
(//\(4\) [NOTICE]: you myabe need to update your lab3's imple) s
5 245 M
(mentation for LAB5's normal execution.) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(        }) s
5 223 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 223 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 223 M
( {) s
5 212 M
(            cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
125 212 M
("no swap_init_ok but ptep is %x, failed\\n") s
/F-gs-font 10 10 SF
0 setgray
377 212 M
(,*ptep\);) s
5 201 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 201 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 201 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 201 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
143 201 M
(;) s
5 190 M
(        }) s
5 179 M
(   }) s
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 157 M
(// try to find a pte, if pte's PT\(Page Table\) isn't existed, then create a PT.) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 146 M
(// \(notice the 3th parameter '1'\)) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 135 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 135 M
( \(\(ptep = get_pte\(mm->pgdir, addr, 1\)\) == NULL\) {) s
5 124 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 124 M
("get_pte in do_pgfault failed\\n") s
/F-gs-font 10 10 SF
0 setgray
293 124 M
(\);) s
5 113 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 113 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 113 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 113 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
119 113 M
(;) s
5 102 M
(    }) s
5 91 M
(    ) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 80 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 80 M
( \(*ptep == 0\) { ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
137 80 M
(// if the phy addr isn't exist, then alloc a page & map the phy addr wit) s
5 69 M
(h logical addr) s
/F-gs-font 10 10 SF
0 setgray
5 58 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 58 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 58 M
( \(pgdir_alloc_page\(mm->pgdir, addr, perm\) == NULL\) {) s
5 47 M
(            cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
125 47 M
("pgdir_alloc_page in do_pgfault failed\\n") s
/F-gs-font 10 10 SF
0 setgray
371 47 M
(\);) s
5 36 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 36 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 36 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 36 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
143 36 M
(;) s
5 25 M
(        }) s
5 14 M
(    }) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 3 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 3 M
( {) s
_R
S
%%Page: (251) 251
%%BeginPageSetup
_S
18 36 translate
/pagenum 251 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 707 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 707 M
( Page *page=NULL;) s
5 696 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 696 M
("do pgfault: ptep %x, pte %x\\n") s
/F-gs-font 10 10 SF
0 setgray
287 696 M
(,ptep, *ptep\);) s
5 685 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 685 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 685 M
( \(*ptep & PTE_P\) {) s
5 674 M
(            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
77 674 M
(//if process write to this existed readonly page \(PTE_P means existed\), then shoul) s
5 663 M
(d be here now.) s
/F-gs-font 10 10 SF
0 setgray
5 652 M
(            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
77 652 M
(//we can implement the delayed memory space copy for fork child process \(AKA copy ) s
5 641 M
(on write, COW\).) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
77 630 M
(//we didn't implement now, we will do it in future.) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
(            panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 619 M
("error write a non-writable pte") s
/F-gs-font 10 10 SF
0 setgray
305 619 M
(\);) s
5 608 M
(            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
77 608 M
(//page = pte2page\(*ptep\);) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(        } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 597 M
(else) s
/F-gs-font 10 10 SF
0 setgray
89 597 M
({) s
5 586 M
(           ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
71 586 M
(// if this pte is a swap entry, then load data from disk to a page with phy addr) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(           ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
71 575 M
(// and call page_insert to map the phy addr with logical addr) s
/F-gs-font 10 10 SF
0 setgray
5 564 M
(           ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
71 564 M
(if) s
/F-gs-font 10 10 SF
0 setgray
83 564 M
(\(swap_init_ok\) {               ) s
5 553 M
(               ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
95 553 M
(if) s
/F-gs-font 10 10 SF
0 setgray
107 553 M
( \(\(ret = swap_in\(mm, addr, &page\)\) != 0\) {) s
5 542 M
(                   cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
167 542 M
("swap_in in do_pgfault failed\\n") s
/F-gs-font 10 10 SF
0 setgray
359 542 M
(\);) s
5 531 M
(                   ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
119 531 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
143 531 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
149 531 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
185 531 M
(;) s
5 520 M
(               }    ) s
5 498 M
(           }  ) s
5 487 M
(           ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
71 487 M
(else) s
/F-gs-font 10 10 SF
0 setgray
95 487 M
( {) s
5 476 M
(            cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
125 476 M
("no swap_init_ok but ptep is %x, failed\\n") s
/F-gs-font 10 10 SF
0 setgray
377 476 M
(,*ptep\);) s
5 465 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 465 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
101 465 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
107 465 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
143 465 M
(;) s
5 454 M
(           }) s
5 443 M
(       } ) s
5 432 M
(       page_insert\(mm->pgdir, page, addr, perm\);) s
5 421 M
(       swap_map_swappable\(mm, addr, page, 1\);) s
5 410 M
(       page->pra_vaddr = addr;) s
5 399 M
(   }) s
5 388 M
(   ret = 0;) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 377 M
(failed) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
(:) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 366 M
( ret;) s
5 355 M
(}) s
5 333 M
(bool) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 322 M
(user_mem_check) s
/F-gs-font 10 10 SF
0 setgray
89 322 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 322 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 322 M
( mm_struct *mm, uintptr_t addr, size_t len, bool write\) {) s
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 311 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 311 M
( \(mm != NULL\) {) s
5 300 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 300 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 300 M
( \(!USER_ACCESS\(addr, addr + len\)\) {) s
5 289 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 289 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 289 M
( 0;) s
5 278 M
(        }) s
5 267 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 267 M
( vma_struct *vma;) s
5 256 M
(        uintptr_t start = addr, end = addr + len;) s
5 245 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 245 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 245 M
( \(start < end\) {) s
5 234 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 234 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 234 M
( \(\(vma = find_vma\(mm, start\)\) == NULL || start < vma->vm_start\) {) s
5 223 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 223 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 223 M
( 0;) s
5 212 M
(            }) s
5 201 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 201 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 201 M
( \(!\(vma->vm_flags & \(\(write\) ? VM_WRITE : VM_READ\)\)\) {) s
5 190 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 190 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 190 M
( 0;) s
5 179 M
(            }) s
5 168 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 168 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 168 M
( \(write && \(vma->vm_flags & VM_STACK\)\) {) s
5 157 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 157 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 157 M
( \(start < vma->vm_start + PGSIZE\) { ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
329 157 M
(//check stack start & size) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(                    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 146 M
(return) s
/F-gs-font 10 10 SF
0 setgray
161 146 M
( 0;) s
5 135 M
(                }) s
5 124 M
(            }) s
5 113 M
(            start = vma->vm_end;) s
5 102 M
(        }) s
5 91 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 91 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 91 M
( 1;) s
5 80 M
(    }) s
5 69 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 69 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 69 M
( KERN_ACCESS\(addr, addr + len\);) s
5 58 M
(}) s
5 36 M
(bool) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 25 M
(copy_string) s
/F-gs-font 10 10 SF
0 setgray
71 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 25 M
( mm_struct *mm, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
209 25 M
(char) s
/F-gs-font 10 10 SF
0 setgray
233 25 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
275 25 M
(const) s
/F-gs-font 10 10 SF
0 setgray
305 25 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
311 25 M
(char) s
/F-gs-font 10 10 SF
0 setgray
335 25 M
( *src, size_t maxn\) {) s
5 14 M
(    size_t alen, part = ROUNDDOWN\(\(uintptr_t\)src + PGSIZE, PGSIZE\) - \(uintptr_t\)src;) s
5 3 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 3 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 3 M
( \(1\) {) s
_R
S
%%Page: (252) 252
%%BeginPageSetup
_S
18 36 translate
/pagenum 252 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 707 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
( \(part > maxn\) {) s
5 696 M
(            part = maxn;) s
5 685 M
(        }) s
5 674 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 674 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 674 M
( \(!user_mem_check\(mm, \(uintptr_t\)src, part, 0\)\) {) s
5 663 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 663 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 663 M
( 0;) s
5 652 M
(        }) s
5 641 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 641 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 641 M
( \(\(alen = strnlen\(src, part\)\) < part\) {) s
5 630 M
(            memcpy\(dst, src, alen + 1\);) s
5 619 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 619 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 619 M
( 1;) s
5 608 M
(        }) s
5 597 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 597 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 597 M
( \(part == maxn\) {) s
5 586 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 586 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 586 M
( 0;) s
5 575 M
(        }) s
5 564 M
(        memcpy\(dst, src, part\);) s
5 553 M
(        dst += part, src += part, maxn -= part;) s
5 542 M
(        part = PGSIZE;) s
5 531 M
(    }) s
5 520 M
(}) s
5 509 M
([ucore/lab8_result/kern/mm/pmm.c] ++++++++++++++++++++++++++++++) s
5 498 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 498 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 498 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 498 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 487 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 487 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 487 M
(<x86.h>) s
/F-gs-font 10 10 SF
0 setgray
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 476 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 476 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 465 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 465 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 454 M
(<mmu.h>) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 443 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 443 M
(<memlayout.h>) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 432 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 432 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 432 M
(<pmm.h>) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 421 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 421 M
(<default_pmm.h>) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 410 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 410 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 410 M
(<sync.h>) s
/F-gs-font 10 10 SF
0 setgray
5 399 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 399 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 399 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 399 M
(<error.h>) s
/F-gs-font 10 10 SF
0 setgray
5 388 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 388 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 388 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 388 M
(<swap.h>) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 377 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 377 M
(<vmm.h>) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 366 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 366 M
(<kmalloc.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 344 M
(/* *) s
5 333 M
( * Task State Segment:) s
5 322 M
( *) s
5 311 M
( * The TSS may reside anywhere in memory. A special segment register called) s
5 300 M
( * the Task Register \(TR\) holds a segment selector that points a valid TSS) s
5 289 M
( * segment descriptor which resides in the GDT. Therefore, to use a TSS) s
5 278 M
( * the following must be done in function gdt_init:) s
5 267 M
( *   - create a TSS descriptor entry in GDT) s
5 256 M
( *   - add enough information to the TSS in memory as needed) s
5 245 M
( *   - load the TR register with a segment selector for that segment) s
5 234 M
( *) s
5 223 M
( * There are several fileds in TSS for specifying the new stack pointer when a) s
5 212 M
( * privilege level change happens. But only the fields SS0 and ESP0 are useful) s
5 201 M
( * in our os kernel.) s
5 190 M
( *) s
5 179 M
( * The field SS0 contains the stack segment selector for CPL = 0, and the ESP0) s
5 168 M
( * contains the new ESP value for CPL = 0. When an interrupt happens in protected) s
5 157 M
( * mode, the x86 CPU will look in the TSS for SS0 and ESP0 and load their value) s
5 146 M
( * into SS and ESP respectively.) s
5 135 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 124 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 124 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 124 M
( taskstate ts = {0};) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 102 M
(// virtual address of physicall page array) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 91 M
( Page *pages;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 80 M
(// amount of physical memory \(in pages\)) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(size_t npage = 0;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 47 M
(// virtual address of boot-time page directory) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 36 M
( pde_t __boot_pgdir;) s
5 25 M
(pde_t *boot_pgdir = &__boot_pgdir;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 14 M
(// physical address of boot-time page directory) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(uintptr_t boot_cr3;) s
_R
S
%%Page: (253) 253
%%BeginPageSetup
_S
18 36 translate
/pagenum 253 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 696 M
(// physical memory management) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 685 M
(const) s
/F-gs-font 10 10 SF
0 setgray
35 685 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 685 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
77 685 M
( pmm_manager *pmm_manager;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 663 M
(/* *) s
5 652 M
( * The page directory entry corresponding to the virtual address range) s
5 641 M
( * [VPT, VPT + PTSIZE\) points to the page directory itself. Thus, the page) s
5 630 M
( * directory is treated as a page table as well as a page directory.) s
5 619 M
( *) s
5 608 M
( * One result of treating the page directory as a page table is that all PTEs) s
5 597 M
( * can be accessed though a "virtual page table" at virtual address VPT. And the) s
5 586 M
( * PTE for number n is stored in vpt[n].) s
5 575 M
( *) s
5 564 M
( * A second consequence is that the contents of the current page directory will) s
5 553 M
( * always available at virtual address PGADDR\(PDX\(VPT\), PDX\(VPT\), 0\), to which) s
5 542 M
( * vpd is set bellow.) s
5 531 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
5 520 M
(pte_t * ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 520 M
(const) s
/F-gs-font 10 10 SF
0 setgray
83 520 M
( vpt = \(pte_t *\)VPT;) s
5 509 M
(pde_t * ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 509 M
(const) s
/F-gs-font 10 10 SF
0 setgray
83 509 M
( vpd = \(pde_t *\)PGADDR\(PDX\(VPT\), PDX\(VPT\), 0\);) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 487 M
(/* *) s
5 476 M
( * Global Descriptor Table:) s
5 465 M
( *) s
5 454 M
( * The kernel and user segments are identical \(except for the DPL\). To load) s
5 443 M
( * the %ss register, the CPL must equal the DPL. Thus, we must duplicate the) s
5 432 M
( * segments for the user and the kernel. Defined as follows:) s
5 421 M
( *   - 0x0 :  unused \(always faults -- for trapping NULL far pointers\)) s
5 410 M
( *   - 0x8 :  kernel code segment) s
5 399 M
( *   - 0x10:  kernel data segment) s
5 388 M
( *   - 0x18:  user code segment) s
5 377 M
( *   - 0x20:  user data segment) s
5 366 M
( *   - 0x28:  defined for tss, initialized in gdt_init) s
5 355 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 344 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 344 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 344 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 344 M
( segdesc gdt[] = {) s
5 333 M
(    SEG_NULL,) s
5 322 M
(    [SEG_KTEXT] = SEG\(STA_X | STA_R, 0x0, 0xFFFFFFFF, DPL_KERNEL\),) s
5 311 M
(    [SEG_KDATA] = SEG\(STA_W, 0x0, 0xFFFFFFFF, DPL_KERNEL\),) s
5 300 M
(    [SEG_UTEXT] = SEG\(STA_X | STA_R, 0x0, 0xFFFFFFFF, DPL_USER\),) s
5 289 M
(    [SEG_UDATA] = SEG\(STA_W, 0x0, 0xFFFFFFFF, DPL_USER\),) s
5 278 M
(    [SEG_TSS]   = SEG_NULL,) s
5 267 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 245 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 245 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 245 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 245 M
( pseudodesc gdt_pd = {) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 234 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
65 234 M
(\(gdt\) - 1, \(uintptr_t\)gdt) s
5 223 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 201 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 201 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 201 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 201 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
77 201 M
(check_alloc_page) s
/F-gs-font 10 10 SF
0 setgray
173 201 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 201 M
(void) s
/F-gs-font 10 10 SF
0 setgray
203 201 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 190 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 190 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 190 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 190 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
77 190 M
(check_pgdir) s
/F-gs-font 10 10 SF
0 setgray
143 190 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 190 M
(void) s
/F-gs-font 10 10 SF
0 setgray
173 190 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 179 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 179 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 179 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 179 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
77 179 M
(check_boot_pgdir) s
/F-gs-font 10 10 SF
0 setgray
173 179 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
179 179 M
(void) s
/F-gs-font 10 10 SF
0 setgray
203 179 M
(\);) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 157 M
(/* *) s
5 146 M
( * lgdt - load the global descriptor table register and reset the) s
5 135 M
( * data/code segement registers for kernel.) s
5 124 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 113 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 113 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 102 M
(lgdt) s
/F-gs-font 10 10 SF
0 setgray
29 102 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 102 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
71 102 M
( pseudodesc *pd\) {) s
5 91 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 91 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 91 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 91 M
("lgdt \(%0\)") s
/F-gs-font 10 10 SF
0 setgray
179 91 M
( :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
203 91 M
("r") s
/F-gs-font 10 10 SF
0 setgray
221 91 M
( \(pd\)\);) s
5 80 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 80 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 80 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 80 M
("movw %%ax, %%gs") s
/F-gs-font 10 10 SF
0 setgray
215 80 M
( :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
239 80 M
("a") s
/F-gs-font 10 10 SF
0 setgray
257 80 M
( \(USER_DS\)\);) s
5 69 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 69 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 69 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 69 M
("movw %%ax, %%fs") s
/F-gs-font 10 10 SF
0 setgray
215 69 M
( :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
239 69 M
("a") s
/F-gs-font 10 10 SF
0 setgray
257 69 M
( \(USER_DS\)\);) s
5 58 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 58 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 58 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 58 M
("movw %%ax, %%es") s
/F-gs-font 10 10 SF
0 setgray
215 58 M
( :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
239 58 M
("a") s
/F-gs-font 10 10 SF
0 setgray
257 58 M
( \(KERNEL_DS\)\);) s
5 47 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 47 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 47 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 47 M
("movw %%ax, %%ds") s
/F-gs-font 10 10 SF
0 setgray
215 47 M
( :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
239 47 M
("a") s
/F-gs-font 10 10 SF
0 setgray
257 47 M
( \(KERNEL_DS\)\);) s
5 36 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 36 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 36 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 36 M
("movw %%ax, %%ss") s
/F-gs-font 10 10 SF
0 setgray
215 36 M
( :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
239 36 M
("a") s
/F-gs-font 10 10 SF
0 setgray
257 36 M
( \(KERNEL_DS\)\);) s
5 25 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 25 M
(// reload cs) s
/F-gs-font 10 10 SF
0 setgray
5 14 M
(    asm ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 14 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
101 14 M
( \() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
113 14 M
("ljmp %0, $1f\\n 1:\\n") s
/F-gs-font 10 10 SF
0 setgray
239 14 M
( :: ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
263 14 M
("i") s
/F-gs-font 10 10 SF
0 setgray
281 14 M
( \(KERNEL_CS\)\);) s
5 3 M
(}) s
_R
S
%%Page: (254) 254
%%BeginPageSetup
_S
18 36 translate
/pagenum 254 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 696 M
(/* *) s
5 685 M
( * load_esp0 - change the ESP0 in default task state segment,) s
5 674 M
( * so that we can use different kernel stack when we trap frame) s
5 663 M
( * user to kernel.) s
5 652 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 641 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 630 M
(load_esp0) s
/F-gs-font 10 10 SF
0 setgray
59 630 M
(\(uintptr_t esp0\) {) s
5 619 M
(    ts.ts_esp0 = esp0;) s
5 608 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 586 M
(/* gdt_init - initialize the default GDT and TSS */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 575 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 564 M
(gdt_init) s
/F-gs-font 10 10 SF
0 setgray
53 564 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 564 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 564 M
(\) {) s
5 553 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 553 M
(// set boot kernel stack and default SS0) s
/F-gs-font 10 10 SF
0 setgray
5 542 M
(    load_esp0\(\(uintptr_t\)bootstacktop\);) s
5 531 M
(    ts.ts_ss0 = KERNEL_DS;) s
5 509 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 509 M
(// initialize the TSS filed of the gdt) s
/F-gs-font 10 10 SF
0 setgray
5 498 M
(    gdt[SEG_TSS] = SEGTSS\(STS_T32A, \(uintptr_t\)&ts, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
317 498 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
353 498 M
(\(ts\), DPL_KERNEL\);) s
5 476 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 476 M
(// reload all segment registers) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(    lgdt\(&gdt_pd\);) s
5 443 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 443 M
(// load the TSS) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(    ltr\(GD_TSS\);) s
5 421 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 399 M
(//init_pmm_manager - initialize a pmm_manager instance) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 388 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 388 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 388 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 377 M
(init_pmm_manager) s
/F-gs-font 10 10 SF
0 setgray
101 377 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 377 M
(void) s
/F-gs-font 10 10 SF
0 setgray
131 377 M
(\) {) s
5 366 M
(    pmm_manager = &default_pmm_manager;) s
5 355 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 355 M
("memory management: %s\\n") s
/F-gs-font 10 10 SF
0 setgray
227 355 M
(, pmm_manager->name\);) s
5 344 M
(    pmm_manager->init\(\);) s
5 333 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 311 M
(//init_memmap - call pmm->init_memmap to build Page struct for free memory  ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 300 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 300 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 300 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 289 M
(init_memmap) s
/F-gs-font 10 10 SF
0 setgray
71 289 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 289 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 289 M
( Page *base, size_t n\) {) s
5 278 M
(    pmm_manager->init_memmap\(base, n\);) s
5 267 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 245 M
(//alloc_pages - call pmm->alloc_pages to allocate a continuous n*PAGESIZE memory ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 234 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 234 M
( Page *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 223 M
(alloc_pages) s
/F-gs-font 10 10 SF
0 setgray
71 223 M
(\(size_t n\) {) s
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 212 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 212 M
( Page *page=NULL;) s
5 201 M
(    bool intr_flag;) s
5 190 M
(    ) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 179 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 179 M
( \(1\)) s
5 168 M
(    {) s
5 157 M
(         local_intr_save\(intr_flag\);) s
5 146 M
(         {) s
5 135 M
(              page = pmm_manager->alloc_pages\(n\);) s
5 124 M
(         }) s
5 113 M
(         local_intr_restore\(intr_flag\);) s
5 91 M
(         ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
59 91 M
(if) s
/F-gs-font 10 10 SF
0 setgray
71 91 M
( \(page != NULL || n > 1 || swap_init_ok == 0\) ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
347 91 M
(break) s
/F-gs-font 10 10 SF
0 setgray
377 91 M
(;) s
5 80 M
(         ) s
5 69 M
(         ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 69 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
95 69 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 69 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 69 M
( mm_struct *check_mm_struct;) s
5 58 M
(         ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
59 58 M
(//cprintf\("page %x, call swap_out in alloc_pages %d\\n",page, n\);) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(         swap_out\(check_mm_struct, n, 0\);) s
5 36 M
(    }) s
5 25 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 25 M
(//cprintf\("n %d,get page %x, No %d in alloc_pages\\n",n,page,\(page-pages\)\);) s
/F-gs-font 10 10 SF
0 setgray
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 14 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 14 M
( page;) s
5 3 M
(}) s
_R
S
%%Page: (255) 255
%%BeginPageSetup
_S
18 36 translate
/pagenum 255 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 696 M
(//free_pages - call pmm->free_pages to free a continuous n*PAGESIZE memory ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 685 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 674 M
(free_pages) s
/F-gs-font 10 10 SF
0 setgray
65 674 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 674 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 674 M
( Page *base, size_t n\) {) s
5 663 M
(    bool intr_flag;) s
5 652 M
(    local_intr_save\(intr_flag\);) s
5 641 M
(    {) s
5 630 M
(        pmm_manager->free_pages\(base, n\);) s
5 619 M
(    }) s
5 608 M
(    local_intr_restore\(intr_flag\);) s
5 597 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 575 M
(//nr_free_pages - call pmm->nr_free_pages to get the size \(nr*PAGESIZE\) ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 564 M
(//of current free memory) s
/F-gs-font 10 10 SF
0 setgray
5 553 M
(size_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 542 M
(nr_free_pages) s
/F-gs-font 10 10 SF
0 setgray
83 542 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 542 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 542 M
(\) {) s
5 531 M
(    size_t ret;) s
5 520 M
(    bool intr_flag;) s
5 509 M
(    local_intr_save\(intr_flag\);) s
5 498 M
(    {) s
5 487 M
(        ret = pmm_manager->nr_free_pages\(\);) s
5 476 M
(    }) s
5 465 M
(    local_intr_restore\(intr_flag\);) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 454 M
( ret;) s
5 443 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 421 M
(/* pmm_init - initialize the physical memory management */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 410 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 410 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 410 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 399 M
(page_init) s
/F-gs-font 10 10 SF
0 setgray
59 399 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 399 M
(void) s
/F-gs-font 10 10 SF
0 setgray
89 399 M
(\) {) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 388 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 388 M
( e820map *memmap = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 388 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
221 388 M
( e820map *\)\(0x8000 + KERNBASE\);) s
5 377 M
(    uint64_t maxpa = 0;) s
5 355 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 355 M
("e820map:\\n") s
/F-gs-font 10 10 SF
0 setgray
149 355 M
(\);) s
5 344 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 344 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 344 M
( i;) s
5 333 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 333 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 333 M
( \(i = 0; i < memmap->nr_map; i ++\) {) s
5 322 M
(        uint64_t begin = memmap->map[i].addr, end = begin + memmap->map[i].size;) s
5 311 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 311 M
("  memory: %08llx, [%08llx, %08llx], type = %d.\\n") s
/F-gs-font 10 10 SF
0 setgray
401 311 M
(,) s
5 300 M
(                memmap->map[i].size, begin, end - 1, memmap->map[i].type\);) s
5 289 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 289 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 289 M
( \(memmap->map[i].type == E820_ARM\) {) s
5 278 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 278 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 278 M
( \(maxpa < end && begin < KMEMSIZE\) {) s
5 267 M
(                maxpa = end;) s
5 256 M
(            }) s
5 245 M
(        }) s
5 234 M
(    }) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 223 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 223 M
( \(maxpa > KMEMSIZE\) {) s
5 212 M
(        maxpa = KMEMSIZE;) s
5 201 M
(    }) s
5 179 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 179 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
65 179 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 179 M
(char) s
/F-gs-font 10 10 SF
0 setgray
95 179 M
( end[];) s
5 157 M
(    npage = maxpa / PGSIZE;) s
5 146 M
(    pages = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 146 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 146 M
( Page *\)ROUNDUP\(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
221 146 M
(void) s
/F-gs-font 10 10 SF
0 setgray
245 146 M
( *\)end, PGSIZE\);) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 124 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( \(i = 0; i < npage; i ++\) {) s
5 113 M
(        SetPageReserved\(pages + i\);) s
5 102 M
(    }) s
5 80 M
(    uintptr_t freemem = PADDR\(\(uintptr_t\)pages + ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
299 80 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
335 80 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
341 80 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
377 80 M
( Page\) * npage\);) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 58 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( \(i = 0; i < memmap->nr_map; i ++\) {) s
5 47 M
(        uint64_t begin = memmap->map[i].addr, end = begin + memmap->map[i].size;) s
5 36 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 36 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 36 M
( \(memmap->map[i].type == E820_ARM\) {) s
5 25 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 25 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 25 M
( \(begin < freemem\) {) s
5 14 M
(                begin = freemem;) s
5 3 M
(            }) s
_R
S
%%Page: (256) 256
%%BeginPageSetup
_S
18 36 translate
/pagenum 256 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 707 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 707 M
( \(end > KMEMSIZE\) {) s
5 696 M
(                end = KMEMSIZE;) s
5 685 M
(            }) s
5 674 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 674 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 674 M
( \(begin < end\) {) s
5 663 M
(                begin = ROUNDUP\(begin, PGSIZE\);) s
5 652 M
(                end = ROUNDDOWN\(end, PGSIZE\);) s
5 641 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 641 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 641 M
( \(begin < end\) {) s
5 630 M
(                    init_memmap\(pa2page\(begin\), \(end - begin\) / PGSIZE\);) s
5 619 M
(                }) s
5 608 M
(            }) s
5 597 M
(        }) s
5 586 M
(    }) s
5 575 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 553 M
(//boot_map_segment - setup&enable the paging mechanism) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 542 M
(// parameters) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 531 M
(//  la:   linear address of this memory need to map \(after x86 segment map\)) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 520 M
(//  size: memory size) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 509 M
(//  pa:   physical address of this memory) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 498 M
(//  perm: permission of this memory  ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 487 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 487 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 476 M
(boot_map_segment) s
/F-gs-font 10 10 SF
0 setgray
101 476 M
(\(pde_t *pgdir, uintptr_t la, size_t size, uintptr_t pa, uint32_t perm\) {) s
5 465 M
(    assert\(PGOFF\(la\) == PGOFF\(pa\)\);) s
5 454 M
(    size_t n = ROUNDUP\(size + PGOFF\(la\), PGSIZE\) / PGSIZE;) s
5 443 M
(    la = ROUNDDOWN\(la, PGSIZE\);) s
5 432 M
(    pa = ROUNDDOWN\(pa, PGSIZE\);) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 421 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( \(; n > 0; n --, la += PGSIZE, pa += PGSIZE\) {) s
5 410 M
(        pte_t *ptep = get_pte\(pgdir, la, 1\);) s
5 399 M
(        assert\(ptep != NULL\);) s
5 388 M
(        *ptep = pa | PTE_P | perm;) s
5 377 M
(    }) s
5 366 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 344 M
(//boot_alloc_page - allocate one page using pmm->alloc_pages\(1\) ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 333 M
(// return value: the kernel virtual address of this allocated page) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 322 M
(//note: this function is used to get the memory for PDT\(Page Directory Table\)&PT\(Page Table\)) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 311 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 311 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 311 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 311 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 300 M
(boot_alloc_page) s
/F-gs-font 10 10 SF
0 setgray
95 300 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 300 M
(void) s
/F-gs-font 10 10 SF
0 setgray
125 300 M
(\) {) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 289 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 289 M
( Page *p = alloc_page\(\);) s
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 278 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 278 M
( \(p == NULL\) {) s
5 267 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 267 M
("boot_alloc_page failed.\\n") s
/F-gs-font 10 10 SF
0 setgray
251 267 M
(\);) s
5 256 M
(    }) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 245 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 245 M
( page2kva\(p\);) s
5 234 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 212 M
(//pmm_init - setup a pmm to manage physical memory, build PDT&PT to setup paging mechanism ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 201 M
(//         - check the correctness of pmm & paging mechanism, print PDT&PT) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 190 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 179 M
(pmm_init) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 179 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 179 M
(\) {) s
5 168 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 168 M
(// We've already enabled paging) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(    boot_cr3 = PADDR\(boot_pgdir\);) s
5 135 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 135 M
(//We need to alloc/free the physical memory \(granularity is 4KB or other size\). ) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 124 M
(//So a framework of physical memory manager \(struct pmm_manager\)is defined in pmm.h) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 113 M
(//First we should init a physical memory manager\(pmm\) based on the framework.) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 102 M
(//Then pmm can alloc/free the physical memory. ) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 91 M
(//Now the first_fit/best_fit/worst_fit/buddy_system pmm are available.) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(    init_pmm_manager\(\);) s
5 58 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 58 M
(// detect physical memory space, reserve already used memory,) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 47 M
(// then use pmm->init_memmap to create free page list) s
/F-gs-font 10 10 SF
0 setgray
5 36 M
(    page_init\(\);) s
5 14 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 14 M
(//use pmm->check to verify the correctness of the alloc/free function in a pmm) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(    check_alloc_page\(\);) s
_R
S
%%Page: (257) 257
%%BeginPageSetup
_S
18 36 translate
/pagenum 257 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 696 M
(    check_pgdir\(\);) s
5 674 M
(    static_assert\(KERNBASE % PTSIZE == 0 && KERNTOP % PTSIZE == 0\);) s
5 652 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 652 M
(// recursively insert boot_pgdir in itself) s
/F-gs-font 10 10 SF
0 setgray
5 641 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 641 M
(// to form a virtual page table at virtual address VPT) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(    boot_pgdir[PDX\(VPT\)] = PADDR\(boot_pgdir\) | PTE_P | PTE_W;) s
5 608 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 608 M
(// map all physical memory to linear memory with base linear addr KERNBASE) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 597 M
(// linear_addr KERNBASE ~ KERNBASE + KMEMSIZE = phy_addr 0 ~ KMEMSIZE) s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(    boot_map_segment\(boot_pgdir, KERNBASE, KMEMSIZE, 0, PTE_W\);) s
5 564 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 564 M
(// Since we are using bootloader's GDT,) s
/F-gs-font 10 10 SF
0 setgray
5 553 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 553 M
(// we should reload gdt \(second time, the last time\) to get user segments and the TSS) s
/F-gs-font 10 10 SF
0 setgray
5 542 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 542 M
(// map virtual_addr 0 ~ 4G = linear_addr 0 ~ 4G) s
/F-gs-font 10 10 SF
0 setgray
5 531 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 531 M
(// then set kernel stack \(ss:esp\) in TSS, setup TSS in gdt, load TSS) s
/F-gs-font 10 10 SF
0 setgray
5 520 M
(    gdt_init\(\);) s
5 498 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 498 M
(//now the basic virtual memory map\(see memalyout.h\) is established.) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 487 M
(//check the correctness of the basic virtual memory map.) s
/F-gs-font 10 10 SF
0 setgray
5 476 M
(    check_boot_pgdir\(\);) s
5 454 M
(    print_pgdir\(\);) s
5 443 M
(    ) s
5 432 M
(    kmalloc_init\(\);) s
5 410 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 388 M
(//get_pte - get pte and return the kernel virtual address of this pte for la) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 377 M
(//        - if the PT contians this pte didn't exist, alloc a page for PT) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 366 M
(// parameter:) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 355 M
(//  pgdir:  the kernel virtual base address of PDT) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 344 M
(//  la:     the linear address need to map) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 333 M
(//  create: a logical value to decide if alloc a page for PT) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 322 M
(// return vaule: the kernel virtual address of this pte) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(pte_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 300 M
(get_pte) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
(\(pde_t *pgdir, uintptr_t la, bool create\) {) s
5 289 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 289 M
(/* LAB2 EXERCISE 2: YOUR CODE) s
5 278 M
(     *) s
5 267 M
(     * If you need to visit a physical address, please use KADDR\(\)) s
5 256 M
(     * please read pmm.h for useful macros) s
5 245 M
(     *) s
5 234 M
(     * Maybe you want help comment, BELOW comments can help you finish the code) s
5 223 M
(     *) s
5 212 M
(     * Some Useful MACROs and DEFINEs, you can use them in below implementation.) s
5 201 M
(     * MACROs or Functions:) s
5 190 M
(     *   PDX\(la\) = the index of page directory entry of VIRTUAL ADDRESS la.) s
5 179 M
(     *   KADDR\(pa\) : takes a physical address and returns the corresponding kernel virtual add) s
5 168 M
(ress.) s
5 157 M
(     *   set_page_ref\(page,1\) : means the page be referenced by one time) s
5 146 M
(     *   page2pa\(page\): get the physical address of memory which this \(struct Page *\) page  ma) s
5 135 M
(nages) s
5 124 M
(     *   struct Page * alloc_page\(\) : allocation a page) s
5 113 M
(     *   memset\(void *s, char c, size_t n\) : sets the first n bytes of the memory area pointed) s
5 102 M
( by s) s
5 91 M
(     *                                       to the specified value c.) s
5 80 M
(     * DEFINEs:) s
5 69 M
(     *   PTE_P           0x001                   // page table/directory entry flags bit : Pre) s
5 58 M
(sent) s
5 47 M
(     *   PTE_W           0x002                   // page table/directory entry flags bit : Wri) s
5 36 M
(teable) s
5 25 M
(     *   PTE_U           0x004                   // page table/directory entry flags bit : Use) s
5 14 M
(r can access) s
5 3 M
(     */) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (258) 258
%%BeginPageSetup
_S
18 36 translate
/pagenum 258 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(if) s
/F-gs-font 10 10 SF
0 setgray
23 707 M
( 0) s
5 696 M
(    pde_t *pdep = NULL;   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 696 M
(// \(1\) find page directory entry) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 685 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( \(0\) {              ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 685 M
(// \(2\) check if entry is not present) s
/F-gs-font 10 10 SF
0 setgray
5 674 M
(                          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 674 M
(// \(3\) check if creating is needed, then alloc page for page table) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(                          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 663 M
(// CAUTION: this page is used for page table, not for common data pa) s
5 652 M
(ge) s
/F-gs-font 10 10 SF
0 setgray
5 641 M
(                          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 641 M
(// \(4\) set page reference) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(        uintptr_t pa = 0; ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 630 M
(// \(5\) get linear address of page) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
(                          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 619 M
(// \(6\) clear page content using memset) s
/F-gs-font 10 10 SF
0 setgray
5 608 M
(                          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 608 M
(// \(7\) set page directory entry's permission) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(    }) s
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 586 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 586 M
( NULL;          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
161 586 M
(// \(8\) return page table entry) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
5 564 M
(    pde_t *pdep = &pgdir[PDX\(la\)];) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 553 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 553 M
( \(!\(*pdep & PTE_P\)\) {) s
5 542 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 542 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 542 M
( Page *page;) s
5 531 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 531 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 531 M
( \(!create || \(page = alloc_page\(\)\) == NULL\) {) s
5 520 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 520 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 520 M
( NULL;) s
5 509 M
(        }) s
5 498 M
(        set_page_ref\(page, 1\);) s
5 487 M
(        uintptr_t pa = page2pa\(page\);) s
5 476 M
(        memset\(KADDR\(pa\), 0, PGSIZE\);) s
5 465 M
(        *pdep = pa | PTE_U | PTE_W | PTE_P;) s
5 454 M
(    }) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 443 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 443 M
( &\(\(pte_t *\)KADDR\(PDE_ADDR\(*pdep\)\)\)[PTX\(la\)];) s
5 432 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 410 M
(//get_page - get related Page struct for linear address la using PDT pgdir) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 399 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 399 M
( Page *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 388 M
(get_page) s
/F-gs-font 10 10 SF
0 setgray
53 388 M
(\(pde_t *pgdir, uintptr_t la, pte_t **ptep_store\) {) s
5 377 M
(    pte_t *ptep = get_pte\(pgdir, la, 0\);) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 366 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 366 M
( \(ptep_store != NULL\) {) s
5 355 M
(        *ptep_store = ptep;) s
5 344 M
(    }) s
5 333 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 333 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 333 M
( \(ptep != NULL && *ptep & PTE_P\) {) s
5 322 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 322 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 322 M
( pte2page\(*ptep\);) s
5 311 M
(    }) s
5 300 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 300 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 300 M
( NULL;) s
5 289 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 267 M
(//page_remove_pte - free an Page sturct which is related linear address la) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 256 M
(//                - and clean\(invalidate\) pte which is related linear address la) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 245 M
(//note: PT is changed, so the TLB need to be invalidate ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 234 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 234 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 234 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 223 M
(page_remove_pte) s
/F-gs-font 10 10 SF
0 setgray
95 223 M
(\(pde_t *pgdir, uintptr_t la, pte_t *ptep\) {) s
5 212 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 212 M
(/* LAB2 EXERCISE 3: YOUR CODE) s
5 201 M
(     *) s
5 190 M
(     * Please check if ptep is valid, and tlb must be manually updated if mapping is updated) s
5 179 M
(     *) s
5 168 M
(     * Maybe you want help comment, BELOW comments can help you finish the code) s
5 157 M
(     *) s
5 146 M
(     * Some Useful MACROs and DEFINEs, you can use them in below implementation.) s
5 135 M
(     * MACROs or Functions:) s
5 124 M
(     *   struct Page *page pte2page\(*ptep\): get the according page from the value of a ptep) s
5 113 M
(     *   free_page : free a page) s
5 102 M
(     *   page_ref_dec\(page\) : decrease page->ref. NOTICE: ff page->ref == 0 , then this page s) s
5 91 M
(hould be free.) s
5 80 M
(     *   tlb_invalidate\(pde_t *pgdir, uintptr_t la\) : Invalidate a TLB entry, but only if the ) s
5 69 M
(page tables being) s
5 58 M
(     *                        edited are the ones currently in use by the processor.) s
5 47 M
(     * DEFINEs:) s
5 36 M
(     *   PTE_P           0x001                   // page table/directory entry flags bit : Pre) s
5 25 M
(sent) s
5 14 M
(     */) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(if) s
/F-gs-font 10 10 SF
0 setgray
23 3 M
( 0) s
_R
S
%%Page: (259) 259
%%BeginPageSetup
_S
18 36 translate
/pagenum 259 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 707 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 707 M
( \(0\) {                      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
209 707 M
(//\(1\) check if page directory is present) s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 696 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 696 M
( Page *page = NULL; ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
209 696 M
(//\(2\) find corresponding page to pte) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(                                  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
209 685 M
(//\(3\) decrease page reference) s
/F-gs-font 10 10 SF
0 setgray
5 674 M
(                                  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
209 674 M
(//\(4\) and free this page when page reference reachs 0) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(                                  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
209 663 M
(//\(5\) clear second page table entry) s
/F-gs-font 10 10 SF
0 setgray
5 652 M
(                                  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
209 652 M
(//\(6\) flush tlb) s
/F-gs-font 10 10 SF
0 setgray
5 641 M
(    }) s
5 630 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 630 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 619 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
( \(*ptep & PTE_P\) {) s
5 608 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 608 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 608 M
( Page *page = pte2page\(*ptep\);) s
5 597 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 597 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 597 M
( \(page_ref_dec\(page\) == 0\) {) s
5 586 M
(            free_page\(page\);) s
5 575 M
(        }) s
5 564 M
(        *ptep = 0;) s
5 553 M
(        tlb_invalidate\(pgdir, la\);) s
5 542 M
(    }) s
5 531 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 509 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 498 M
(unmap_range) s
/F-gs-font 10 10 SF
0 setgray
71 498 M
(\(pde_t *pgdir, uintptr_t start, uintptr_t end\) {) s
5 487 M
(    assert\(start % PGSIZE == 0 && end % PGSIZE == 0\);) s
5 476 M
(    assert\(USER_ACCESS\(start, end\)\);) s
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 454 M
(do) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( {) s
5 443 M
(        pte_t *ptep = get_pte\(pgdir, start, 0\);) s
5 432 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 432 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 432 M
( \(ptep == NULL\) {) s
5 421 M
(            start = ROUNDDOWN\(start + PTSIZE, PTSIZE\);) s
5 410 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 410 M
(continue) s
/F-gs-font 10 10 SF
0 setgray
125 410 M
( ;) s
5 399 M
(        }) s
5 388 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 388 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 388 M
( \(*ptep != 0\) {) s
5 377 M
(            page_remove_pte\(pgdir, start, ptep\);) s
5 366 M
(        }) s
5 355 M
(        start += PGSIZE;) s
5 344 M
(    } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
41 344 M
(while) s
/F-gs-font 10 10 SF
0 setgray
71 344 M
( \(start != 0 && start < end\);) s
5 333 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 311 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 300 M
(exit_range) s
/F-gs-font 10 10 SF
0 setgray
65 300 M
(\(pde_t *pgdir, uintptr_t start, uintptr_t end\) {) s
5 289 M
(    assert\(start % PGSIZE == 0 && end % PGSIZE == 0\);) s
5 278 M
(    assert\(USER_ACCESS\(start, end\)\);) s
5 256 M
(    start = ROUNDDOWN\(start, PTSIZE\);) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 245 M
(do) s
/F-gs-font 10 10 SF
0 setgray
41 245 M
( {) s
5 234 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 234 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 234 M
( pde_idx = PDX\(start\);) s
5 223 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 223 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 223 M
( \(pgdir[pde_idx] & PTE_P\) {) s
5 212 M
(            free_page\(pde2page\(pgdir[pde_idx]\)\);) s
5 201 M
(            pgdir[pde_idx] = 0;) s
5 190 M
(        }) s
5 179 M
(        start += PTSIZE;) s
5 168 M
(    } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
41 168 M
(while) s
/F-gs-font 10 10 SF
0 setgray
71 168 M
( \(start != 0 && start < end\);) s
5 157 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 146 M
(/* copy_range - copy content of memory \(start, end\) of one process A to another process B) s
5 135 M
( * @to:    the addr of process B's Page Directory) s
5 124 M
( * @from:  the addr of process A's Page Directory) s
5 113 M
( * @share: flags to indicate to dup OR share. We just use dup method, so it didn't be used.) s
5 102 M
( *) s
5 91 M
( * CALL GRAPH: copy_mm-->dup_mmap-->copy_range) s
5 80 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 58 M
(copy_range) s
/F-gs-font 10 10 SF
0 setgray
65 58 M
(\(pde_t *to, pde_t *from, uintptr_t start, uintptr_t end, bool share\) {) s
5 47 M
(    assert\(start % PGSIZE == 0 && end % PGSIZE == 0\);) s
5 36 M
(    assert\(USER_ACCESS\(start, end\)\);) s
5 25 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 25 M
(// copy content by page unit.) s
/F-gs-font 10 10 SF
0 setgray
5 14 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 14 M
(do) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( {) s
5 3 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 3 M
(//call get_pte to find process A's pte according to the addr start) s
_R
S
%%Page: (260) 260
%%BeginPageSetup
_S
18 36 translate
/pagenum 260 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
/F-gs-font 10 10 SF
0 setgray
5 707 M
(        pte_t *ptep = get_pte\(from, start, 0\), *nptep;) s
5 696 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 696 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 696 M
( \(ptep == NULL\) {) s
5 685 M
(            start = ROUNDDOWN\(start + PTSIZE, PTSIZE\);) s
5 674 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 674 M
(continue) s
/F-gs-font 10 10 SF
0 setgray
125 674 M
( ;) s
5 663 M
(        }) s
5 652 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 652 M
(//call get_pte to find process B's pte according to the addr start. If pte is NULL, ju) s
5 641 M
(st alloc a PT) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 630 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 630 M
( \(*ptep & PTE_P\) {) s
5 619 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 619 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 619 M
( \(\(nptep = get_pte\(to, start, 1\)\) == NULL\) {) s
5 608 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 608 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 608 M
( -E_NO_MEM;) s
5 597 M
(            }) s
5 586 M
(        uint32_t perm = \(*ptep & PTE_USER\);) s
5 575 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 575 M
(//get page from ptep) s
/F-gs-font 10 10 SF
0 setgray
5 564 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 564 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 564 M
( Page *page = pte2page\(*ptep\);) s
5 553 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 553 M
(// alloc a page for process B) s
/F-gs-font 10 10 SF
0 setgray
5 542 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 542 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 542 M
( Page *npage=alloc_page\(\);) s
5 531 M
(        assert\(page!=NULL\);) s
5 520 M
(        assert\(npage!=NULL\);) s
5 509 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 509 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 509 M
( ret=0;) s
5 498 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 498 M
(/* LAB5:EXERCISE2 YOUR CODE) s
5 487 M
(         * replicate content of page to npage, build the map of phy addr of nage with the line) s
5 476 M
(ar addr start) s
5 465 M
(         *) s
5 454 M
(         * Some Useful MACROs and DEFINEs, you can use them in below implementation.) s
5 443 M
(         * MACROs or Functions:) s
5 432 M
(         *    page2kva\(struct Page *page\): return the kernel vritual addr of memory which page) s
5 421 M
( managed \(SEE pmm.h\)) s
5 410 M
(         *    page_insert: build the map of phy addr of an Page with the linear addr la) s
5 399 M
(         *    memcpy: typical memory copy function) s
5 388 M
(         *) s
5 377 M
(         * \(1\) find src_kvaddr: the kernel virtual address of page) s
5 366 M
(         * \(2\) find dst_kvaddr: the kernel virtual address of npage) s
5 355 M
(         * \(3\) memory copy from src_kvaddr to dst_kvaddr, size is PGSIZE) s
5 344 M
(         * \(4\) build the map of phy addr of  nage with the linear addr start) s
5 333 M
(         */) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 322 M
(void) s
/F-gs-font 10 10 SF
0 setgray
77 322 M
( * kva_src = page2kva\(page\);) s
5 311 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 311 M
(void) s
/F-gs-font 10 10 SF
0 setgray
77 311 M
( * kva_dst = page2kva\(npage\);) s
5 300 M
(    ) s
5 289 M
(        memcpy\(kva_dst, kva_src, PGSIZE\);) s
5 267 M
(        ret = page_insert\(to, npage, start, perm\);) s
5 256 M
(        assert\(ret == 0\);) s
5 245 M
(        }) s
5 234 M
(        start += PGSIZE;) s
5 223 M
(    } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
41 223 M
(while) s
/F-gs-font 10 10 SF
0 setgray
71 223 M
( \(start != 0 && start < end\);) s
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 212 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 212 M
( 0;) s
5 201 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 179 M
(//page_remove - free an Page which is related linear address la and has an validated pte) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 168 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 157 M
(page_remove) s
/F-gs-font 10 10 SF
0 setgray
71 157 M
(\(pde_t *pgdir, uintptr_t la\) {) s
5 146 M
(    pte_t *ptep = get_pte\(pgdir, la, 0\);) s
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 135 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 135 M
( \(ptep != NULL\) {) s
5 124 M
(        page_remove_pte\(pgdir, la, ptep\);) s
5 113 M
(    }) s
5 102 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 80 M
(//page_insert - build the map of phy addr of an Page with the linear addr la) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 69 M
(// paramemters:) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 58 M
(//  pgdir: the kernel virtual base address of PDT) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 47 M
(//  page:  the Page which need to map) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 36 M
(//  la:    the linear address need to map) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 25 M
(//  perm:  the permission of this Page which is setted in related pte) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 14 M
(// return value: always 0) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 3 M
(//note: PT is changed, so the TLB need to be invalidate ) s
_R
S
%%Page: (261) 261
%%BeginPageSetup
_S
18 36 translate
/pagenum 261 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 696 M
(page_insert) s
/F-gs-font 10 10 SF
0 setgray
71 696 M
(\(pde_t *pgdir, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
161 696 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
197 696 M
( Page *page, uintptr_t la, uint32_t perm\) {) s
5 685 M
(    pte_t *ptep = get_pte\(pgdir, la, 1\);) s
5 674 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 674 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 674 M
( \(ptep == NULL\) {) s
5 663 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 663 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 663 M
( -E_NO_MEM;) s
5 652 M
(    }) s
5 641 M
(    page_ref_inc\(page\);) s
5 630 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 630 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 630 M
( \(*ptep & PTE_P\) {) s
5 619 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 619 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 619 M
( Page *p = pte2page\(*ptep\);) s
5 608 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 608 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 608 M
( \(p == page\) {) s
5 597 M
(            page_ref_dec\(page\);) s
5 586 M
(        }) s
5 575 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 575 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 575 M
( {) s
5 564 M
(            page_remove_pte\(pgdir, la, ptep\);) s
5 553 M
(        }) s
5 542 M
(    }) s
5 531 M
(    *ptep = page2pa\(page\) | PTE_P | perm;) s
5 520 M
(    tlb_invalidate\(pgdir, la\);) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 509 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
( 0;) s
5 498 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 476 M
(// invalidate a TLB entry, but only if the page tables being) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 465 M
(// edited are the ones currently in use by the processor.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 443 M
(tlb_invalidate) s
/F-gs-font 10 10 SF
0 setgray
89 443 M
(\(pde_t *pgdir, uintptr_t la\) {) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 432 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 432 M
( \(rcr3\(\) == PADDR\(pgdir\)\) {) s
5 421 M
(        invlpg\(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 421 M
(void) s
/F-gs-font 10 10 SF
0 setgray
125 421 M
( *\)la\);) s
5 410 M
(    }) s
5 399 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 377 M
(// pgdir_alloc_page - call alloc_page & page_insert functions to ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 366 M
(//                  - allocate a page size memory & setup an addr map) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 355 M
(//                  - pa<->la with linear address la and the PDT pgdir) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 344 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 344 M
( Page *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 333 M
(pgdir_alloc_page) s
/F-gs-font 10 10 SF
0 setgray
101 333 M
(\(pde_t *pgdir, uintptr_t la, uint32_t perm\) {) s
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 322 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 322 M
( Page *page = alloc_page\(\);) s
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 311 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 311 M
( \(page != NULL\) {) s
5 300 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 300 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 300 M
( \(page_insert\(pgdir, page, la, perm\) != 0\) {) s
5 289 M
(            free_page\(page\);) s
5 278 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 278 M
(return) s
/F-gs-font 10 10 SF
0 setgray
113 278 M
( NULL;) s
5 267 M
(        }) s
5 256 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 256 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 256 M
( \(swap_init_ok\){) s
5 245 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 245 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 245 M
(\(check_mm_struct!=NULL\) {) s
5 234 M
(                swap_map_swappable\(check_mm_struct, la, page, 0\);) s
5 223 M
(                page->pra_vaddr=la;) s
5 212 M
(                assert\(page_ref\(page\) == 1\);) s
5 201 M
(                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
101 201 M
(//cprintf\("get No. %d  page: pra_vaddr %x, pra_link.prev %x, pra_link_next %x ) s
5 190 M
(in pgdir_alloc_page\\n", \(page-pages\), page->pra_vaddr,page->pra_page_link.prev, page->pra_page) s
5 179 M
(_link.next\);) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(            } ) s
5 157 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 157 M
(else) s
/F-gs-font 10 10 SF
0 setgray
101 157 M
(  {  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
131 157 M
(//now current is existed, should fix it in the future) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
101 146 M
(//swap_map_swappable\(current->mm, la, page, 0\);) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
101 135 M
(//page->pra_vaddr=la;) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
101 124 M
(//assert\(page_ref\(page\) == 1\);) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
101 113 M
(//panic\("pgdir_alloc_page: no pages. now current is existed, should fix it in ) s
5 102 M
(the future\\n"\);) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(            }) s
5 80 M
(        }) s
5 58 M
(    }) s
5 36 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 36 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 36 M
( page;) s
5 25 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 3 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (262) 262
%%BeginPageSetup
_S
18 36 translate
/pagenum 262 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 707 M
(check_alloc_page) s
/F-gs-font 10 10 SF
0 setgray
101 707 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
131 707 M
(\) {) s
5 696 M
(    pmm_manager->check\(\);) s
5 685 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 685 M
("check_alloc_page\(\) succeeded!\\n") s
/F-gs-font 10 10 SF
0 setgray
275 685 M
(\);) s
5 674 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 652 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 652 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 652 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 641 M
(check_pgdir) s
/F-gs-font 10 10 SF
0 setgray
71 641 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 641 M
(void) s
/F-gs-font 10 10 SF
0 setgray
101 641 M
(\) {) s
5 630 M
(    assert\(npage <= KMEMSIZE / PGSIZE\);) s
5 619 M
(    assert\(boot_pgdir != NULL && \(uint32_t\)PGOFF\(boot_pgdir\) == 0\);) s
5 608 M
(    assert\(get_page\(boot_pgdir, 0x0, NULL\) == NULL\);) s
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 586 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 586 M
( Page *p1, *p2;) s
5 575 M
(    p1 = alloc_page\(\);) s
5 564 M
(    assert\(page_insert\(boot_pgdir, p1, 0x0, 0\) == 0\);) s
5 542 M
(    pte_t *ptep;) s
5 531 M
(    assert\(\(ptep = get_pte\(boot_pgdir, 0x0, 0\)\) != NULL\);) s
5 520 M
(    assert\(pte2page\(*ptep\) == p1\);) s
5 509 M
(    assert\(page_ref\(p1\) == 1\);) s
5 487 M
(    ptep = &\(\(pte_t *\)KADDR\(PDE_ADDR\(boot_pgdir[0]\)\)\)[1];) s
5 476 M
(    assert\(get_pte\(boot_pgdir, PGSIZE, 0\) == ptep\);) s
5 454 M
(    p2 = alloc_page\(\);) s
5 443 M
(    assert\(page_insert\(boot_pgdir, p2, PGSIZE, PTE_U | PTE_W\) == 0\);) s
5 432 M
(    assert\(\(ptep = get_pte\(boot_pgdir, PGSIZE, 0\)\) != NULL\);) s
5 421 M
(    assert\(*ptep & PTE_U\);) s
5 410 M
(    assert\(*ptep & PTE_W\);) s
5 399 M
(    assert\(boot_pgdir[0] & PTE_U\);) s
5 388 M
(    assert\(page_ref\(p2\) == 1\);) s
5 366 M
(    assert\(page_insert\(boot_pgdir, p1, PGSIZE, 0\) == 0\);) s
5 355 M
(    assert\(page_ref\(p1\) == 2\);) s
5 344 M
(    assert\(page_ref\(p2\) == 0\);) s
5 333 M
(    assert\(\(ptep = get_pte\(boot_pgdir, PGSIZE, 0\)\) != NULL\);) s
5 322 M
(    assert\(pte2page\(*ptep\) == p1\);) s
5 311 M
(    assert\(\(*ptep & PTE_U\) == 0\);) s
5 289 M
(    page_remove\(boot_pgdir, 0x0\);) s
5 278 M
(    assert\(page_ref\(p1\) == 1\);) s
5 267 M
(    assert\(page_ref\(p2\) == 0\);) s
5 245 M
(    page_remove\(boot_pgdir, PGSIZE\);) s
5 234 M
(    assert\(page_ref\(p1\) == 0\);) s
5 223 M
(    assert\(page_ref\(p2\) == 0\);) s
5 201 M
(    assert\(page_ref\(pde2page\(boot_pgdir[0]\)\) == 1\);) s
5 190 M
(    free_page\(pde2page\(boot_pgdir[0]\)\);) s
5 179 M
(    boot_pgdir[0] = 0;) s
5 157 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 157 M
("check_pgdir\(\) succeeded!\\n") s
/F-gs-font 10 10 SF
0 setgray
245 157 M
(\);) s
5 146 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 124 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 124 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 113 M
(check_boot_pgdir) s
/F-gs-font 10 10 SF
0 setgray
101 113 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 113 M
(void) s
/F-gs-font 10 10 SF
0 setgray
131 113 M
(\) {) s
5 102 M
(    pte_t *ptep;) s
5 91 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 91 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( i;) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 80 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( \(i = 0; i < npage; i += PGSIZE\) {) s
5 69 M
(        assert\(\(ptep = get_pte\(boot_pgdir, \(uintptr_t\)KADDR\(i\), 0\)\) != NULL\);) s
5 58 M
(        assert\(PTE_ADDR\(*ptep\) == i\);) s
5 47 M
(    }) s
5 25 M
(    assert\(PDE_ADDR\(boot_pgdir[PDX\(VPT\)]\) == PADDR\(boot_pgdir\)\);) s
5 3 M
(    assert\(boot_pgdir[0] == 0\);) s
_R
S
%%Page: (263) 263
%%BeginPageSetup
_S
18 36 translate
/pagenum 263 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 696 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 696 M
( Page *p;) s
5 685 M
(    p = alloc_page\(\);) s
5 674 M
(    assert\(page_insert\(boot_pgdir, p, 0x100, PTE_W\) == 0\);) s
5 663 M
(    assert\(page_ref\(p\) == 1\);) s
5 652 M
(    assert\(page_insert\(boot_pgdir, p, 0x100 + PGSIZE, PTE_W\) == 0\);) s
5 641 M
(    assert\(page_ref\(p\) == 2\);) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 619 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 619 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 619 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 619 M
( *str = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 619 M
("ucore: Hello world!!") s
/F-gs-font 10 10 SF
0 setgray
269 619 M
(;) s
5 608 M
(    strcpy\(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 608 M
(void) s
/F-gs-font 10 10 SF
0 setgray
101 608 M
( *\)0x100, str\);) s
5 597 M
(    assert\(strcmp\(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 597 M
(void) s
/F-gs-font 10 10 SF
0 setgray
143 597 M
( *\)0x100, \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
209 597 M
(void) s
/F-gs-font 10 10 SF
0 setgray
233 597 M
( *\)\(0x100 + PGSIZE\)\) == 0\);) s
5 575 M
(    *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 575 M
(char) s
/F-gs-font 10 10 SF
0 setgray
65 575 M
( *\)\(page2kva\(p\) + 0x100\) = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
227 575 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
251 575 M
(;) s
5 564 M
(    assert\(strlen\(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 564 M
(const) s
/F-gs-font 10 10 SF
0 setgray
149 564 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 564 M
(char) s
/F-gs-font 10 10 SF
0 setgray
179 564 M
( *\)0x100\) == 0\);) s
5 542 M
(    free_page\(p\);) s
5 531 M
(    free_page\(pde2page\(boot_pgdir[0]\)\);) s
5 520 M
(    boot_pgdir[0] = 0;) s
5 498 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 498 M
("check_boot_pgdir\(\) succeeded!\\n") s
/F-gs-font 10 10 SF
0 setgray
275 498 M
(\);) s
5 487 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 465 M
(//perm2str - use string 'u,r,w,-' to present the permission) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 454 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 454 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 454 M
(char) s
/F-gs-font 10 10 SF
0 setgray
107 454 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 443 M
(perm2str) s
/F-gs-font 10 10 SF
0 setgray
53 443 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 443 M
( perm\) {) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 432 M
(static) s
/F-gs-font 10 10 SF
0 setgray
65 432 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 432 M
(char) s
/F-gs-font 10 10 SF
0 setgray
95 432 M
( str[4];) s
5 421 M
(    str[0] = \(perm & PTE_U\) ? ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
185 421 M
('u') s
/F-gs-font 10 10 SF
0 setgray
203 421 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
221 421 M
('-') s
/F-gs-font 10 10 SF
0 setgray
239 421 M
(;) s
5 410 M
(    str[1] = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 410 M
('r') s
/F-gs-font 10 10 SF
0 setgray
101 410 M
(;) s
5 399 M
(    str[2] = \(perm & PTE_W\) ? ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
185 399 M
('w') s
/F-gs-font 10 10 SF
0 setgray
203 399 M
( : ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
221 399 M
('-') s
/F-gs-font 10 10 SF
0 setgray
239 399 M
(;) s
5 388 M
(    str[3] = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 388 M
('\\0') s
/F-gs-font 10 10 SF
0 setgray
107 388 M
(;) s
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 377 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 377 M
( str;) s
5 366 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 344 M
(//get_pgtable_items - In [left, right] range of PDT or PT, find a continuous linear addr space) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 333 M
(//                  - \(left_store*X_SIZE~right_store*X_SIZE\) for PDT or PT) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 322 M
(//                  - X_SIZE=PTSIZE=4M, if PDT; X_SIZE=PGSIZE=4K, if PT) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 311 M
(// paramemters:) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 300 M
(//  left:        no use ???) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 289 M
(//  right:       the high side of table's range) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 278 M
(//  start:       the low side of table's range) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 267 M
(//  table:       the beginning addr of table) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 256 M
(//  left_store:  the pointer of the high side of table's next range) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 245 M
(//  right_store: the pointer of the low side of table's next range) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 234 M
(// return value: 0 - not a invalid item range, perm - a valid item range with perm permission ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 223 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 223 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 212 M
(get_pgtable_items) s
/F-gs-font 10 10 SF
0 setgray
107 212 M
(\(size_t left, size_t right, size_t start, uintptr_t *table, size_t *left_stor) s
5 201 M
(e, size_t *right_store\) {) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 190 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 190 M
( \(start >= right\) {) s
5 179 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 179 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 179 M
( 0;) s
5 168 M
(    }) s
5 157 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 157 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 157 M
( \(start < right && !\(table[start] & PTE_P\)\) {) s
5 146 M
(        start ++;) s
5 135 M
(    }) s
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 124 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 124 M
( \(start < right\) {) s
5 113 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 113 M
( \(left_store != NULL\) {) s
5 102 M
(            *left_store = start;) s
5 91 M
(        }) s
5 80 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 80 M
( perm = \(table[start ++] & PTE_USER\);) s
5 69 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 69 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 69 M
( \(start < right && \(table[start] & PTE_USER\) == perm\) {) s
5 58 M
(            start ++;) s
5 47 M
(        }) s
5 36 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 36 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 36 M
( \(right_store != NULL\) {) s
5 25 M
(            *right_store = start;) s
5 14 M
(        }) s
5 3 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 3 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 3 M
( perm;) s
_R
S
%%Page: (264) 264
%%BeginPageSetup
_S
18 36 translate
/pagenum 264 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    }) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 696 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 696 M
( 0;) s
5 685 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 663 M
(//print_pgdir - print the PDT&PT) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 652 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 641 M
(print_pgdir) s
/F-gs-font 10 10 SF
0 setgray
71 641 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 641 M
(void) s
/F-gs-font 10 10 SF
0 setgray
101 641 M
(\) {) s
5 630 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 630 M
("-------------------- BEGIN --------------------\\n") s
/F-gs-font 10 10 SF
0 setgray
383 630 M
(\);) s
5 619 M
(    size_t left, right = 0, perm;) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 608 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 608 M
( \(\(perm = get_pgtable_items\(0, NPDEENTRY, right, vpd, &left, &right\)\) != 0\) {) s
5 597 M
(        cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
101 597 M
("PDE\(%03x\) %08x-%08x %08x %s\\n") s
/F-gs-font 10 10 SF
0 setgray
287 597 M
(, right - left,) s
5 586 M
(                left * PTSIZE, right * PTSIZE, \(right - left\) * PTSIZE, perm2str\(perm\)\);) s
5 575 M
(        size_t l, r = left * NPTEENTRY;) s
5 564 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 564 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 564 M
( \(\(perm = get_pgtable_items\(left * NPTEENTRY, right * NPTEENTRY, r, vpt, &l, &r\)\)) s
5 553 M
( != 0\) {) s
5 542 M
(            cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
125 542 M
("  |-- PTE\(%05x\) %08x-%08x %08x %s\\n") s
/F-gs-font 10 10 SF
0 setgray
347 542 M
(, r - l,) s
5 531 M
(                    l * PGSIZE, r * PGSIZE, \(r - l\) * PGSIZE, perm2str\(perm\)\);) s
5 520 M
(        }) s
5 509 M
(    }) s
5 498 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 498 M
("--------------------- END ---------------------\\n") s
/F-gs-font 10 10 SF
0 setgray
383 498 M
(\);) s
5 487 M
(}) s
5 476 M
([ucore/lab8_result/kern/mm/default_pmm.c] ++++++++++++++++++++++++++++++) s
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 465 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 465 M
(<pmm.h>) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 454 M
(<list.h>) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 443 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 443 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 432 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 432 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 432 M
(<default_pmm.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 410 M
(/*  In the First Fit algorithm, the allocator keeps a list of free blocks) s
5 399 M
( * \(known as the free list\). Once receiving a allocation request for memory,) s
5 388 M
( * it scans along the list for the first block that is large enough to satisfy) s
5 377 M
( * the request. If the chosen block is significantly larger than requested, it) s
5 366 M
( * is usually splitted, and the remainder will be added into the list as) s
5 355 M
( * another free block.) s
5 344 M
( *  Please refer to Page 196~198, Section 8.2 of Yan Wei Min's Chinese book) s
5 333 M
( * "Data Structure -- C programming language".) s
5 322 M
(*/) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 311 M
(// LAB2 EXERCISE 1: YOUR CODE) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 300 M
(// you should rewrite functions: `default_init`, `default_init_memmap`,) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 289 M
(// `default_alloc_pages`, `default_free_pages`.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 278 M
(/*) s
5 267 M
( * Details of FFMA) s
5 256 M
( * \(1\) Preparation:) s
5 245 M
( *  In order to implement the First-Fit Memory Allocation \(FFMA\), we should) s
5 234 M
( * manage the free memory blocks using a list. The struct `free_area_t` is used) s
5 223 M
( * for the management of free memory blocks.) s
5 212 M
( *  First, you should get familiar with the struct `list` in list.h. Struct) s
5 201 M
( * `list` is a simple doubly linked list implementation. You should know how to) s
5 190 M
( * USE `list_init`, `list_add`\(`list_add_after`\), `list_add_before`, `list_del`,) s
5 179 M
( * `list_next`, `list_prev`.) s
5 168 M
( *  There's a tricky method that is to transform a general `list` struct to a) s
5 157 M
( * special struct \(such as struct `page`\), using the following MACROs: `le2page`) s
5 146 M
( * \(in memlayout.h\), \(and in future labs: `le2vma` \(in vmm.h\), `le2proc` \(in) s
5 135 M
( * proc.h\), etc\).) s
5 124 M
( * \(2\) `default_init`:) s
5 113 M
( *  You can reuse the demo `default_init` function to initialize the `free_list`) s
5 102 M
( * and set `nr_free` to 0. `free_list` is used to record the free memory blocks.) s
5 91 M
( * `nr_free` is the total number of the free memory blocks.) s
5 80 M
( * \(3\) `default_init_memmap`:) s
5 69 M
( *  CALL GRAPH: `kern_init` --> `pmm_init` --> `page_init` --> `init_memmap` -->) s
5 58 M
( * `pmm_manager` --> `init_memmap`.) s
5 47 M
( *  This function is used to initialize a free block \(with parameter `addr_base`,) s
5 36 M
( * `page_number`\). In order to initialize a free block, firstly, you should) s
5 25 M
( * initialize each page \(defined in memlayout.h\) in this free block. This) s
5 14 M
( * procedure includes:) s
5 3 M
( *  - Setting the bit `PG_property` of `p->flags`, which means this page is) s
_R
S
%%Page: (265) 265
%%BeginPageSetup
_S
18 36 translate
/pagenum 265 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
( * valid. P.S. In function `pmm_init` \(in pmm.c\), the bit `PG_reserved` of) s
5 696 M
( * `p->flags` is already set.) s
5 685 M
( *  - If this page is free and is not the first page of a free block,) s
5 674 M
( * `p->property` should be set to 0.) s
5 663 M
( *  - If this page is free and is the first page of a free block, `p->property`) s
5 652 M
( * should be set to be the total number of pages in the block.) s
5 641 M
( *  - `p->ref` should be 0, because now `p` is free and has no reference.) s
5 630 M
( *  After that, We can use `p->page_link` to link this page into `free_list`.) s
5 619 M
( * \(e.g.: `list_add_before\(&free_list, &\(p->page_link\)\);` \)) s
5 608 M
( *  Finally, we should update the sum of the free memory blocks: `nr_free += n`.) s
5 597 M
( * \(4\) `default_alloc_pages`:) s
5 586 M
( *  Search for the first free block \(block size >= n\) in the free list and reszie) s
5 575 M
( * the block found, returning the address of this block as the address required by) s
5 564 M
( * `malloc`.) s
5 553 M
( *  \(4.1\)) s
5 542 M
( *      So you should search the free list like this:) s
5 531 M
( *          list_entry_t le = &free_list;) s
5 520 M
( *          while\(\(le=list_next\(le\)\) != &free_list\) {) s
5 509 M
( *          ...) s
5 498 M
( *      \(4.1.1\)) s
5 487 M
( *          In the while loop, get the struct `page` and check if `p->property`) s
5 476 M
( *      \(recording the num of free pages in this block\) >= n.) s
5 465 M
( *              struct Page *p = le2page\(le, page_link\);) s
5 454 M
( *              if\(p->property >= n\){ ...) s
5 443 M
( *      \(4.1.2\)) s
5 432 M
( *          If we find this `p`, it means we've found a free block with its size) s
5 421 M
( *      >= n, whose first `n` pages can be malloced. Some flag bits of this page) s
5 410 M
( *      should be set as the following: `PG_reserved = 1`, `PG_property = 0`.) s
5 399 M
( *      Then, unlink the pages from `free_list`.) s
5 388 M
( *          \(4.1.2.1\)) s
5 377 M
( *              If `p->property > n`, we should re-calculate number of the rest) s
5 366 M
( *          pages of this free block. \(e.g.: `le2page\(le,page_link\)\)->property) s
5 355 M
( *          = p->property - n;`\)) s
5 344 M
( *          \(4.1.3\)) s
5 333 M
( *              Re-caluclate `nr_free` \(number of the the rest of all free block\).) s
5 322 M
( *          \(4.1.4\)) s
5 311 M
( *              return `p`.) s
5 300 M
( *      \(4.2\)) s
5 289 M
( *          If we can not find a free block with its size >=n, then return NULL.) s
5 278 M
( * \(5\) `default_free_pages`:) s
5 267 M
( *  re-link the pages into the free list, and may merge small free blocks into) s
5 256 M
( * the big ones.) s
5 245 M
( *  \(5.1\)) s
5 234 M
( *      According to the base address of the withdrawed blocks, search the free) s
5 223 M
( *  list for its correct position \(with address from low to high\), and insert) s
5 212 M
( *  the pages. \(May use `list_next`, `le2page`, `list_add_before`\)) s
5 201 M
( *  \(5.2\)) s
5 190 M
( *      Reset the fields of the pages, such as `p->ref` and `p->flags` \(PageProperty\)) s
5 179 M
( *  \(5.3\)) s
5 168 M
( *      Try to merge blocks at lower or higher addresses. Notice: This should) s
5 157 M
( *  change some pages' `p->property` correctly.) s
5 146 M
( */) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(free_area_t free_area;) s
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 113 M
(free_list) s
/F-gs-font 10 10 SF
0 setgray
107 113 M
( \(free_area.free_list\)) s
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 102 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 102 M
(nr_free) s
/F-gs-font 10 10 SF
0 setgray
95 102 M
( \(free_area.nr_free\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 80 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 80 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 80 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 69 M
(default_init) s
/F-gs-font 10 10 SF
0 setgray
77 69 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 69 M
(void) s
/F-gs-font 10 10 SF
0 setgray
107 69 M
(\) {) s
5 58 M
(    list_init\(&free_list\);) s
5 47 M
(    nr_free = 0;) s
5 36 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 14 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 3 M
(default_init_memmap) s
/F-gs-font 10 10 SF
0 setgray
119 3 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 3 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
161 3 M
( Page *base, size_t n\) {) s
_R
S
%%Page: (266) 266
%%BeginPageSetup
_S
18 36 translate
/pagenum 266 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    assert\(n > 0\);) s
5 696 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 696 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 696 M
( Page *p = base;) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 685 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
( \(; p != base + n; p ++\) {) s
5 674 M
(        assert\(PageReserved\(p\)\);) s
5 663 M
(        p->flags = p->property = 0;) s
5 652 M
(        set_page_ref\(p, 0\);) s
5 641 M
(    }) s
5 630 M
(    base->property = n;) s
5 619 M
(    SetPageProperty\(base\);) s
5 608 M
(    nr_free += n;) s
5 597 M
(    list_add_before\(&free_list, &\(base->page_link\)\);) s
5 586 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 564 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 564 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 564 M
( Page *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 553 M
(default_alloc_pages) s
/F-gs-font 10 10 SF
0 setgray
119 553 M
(\(size_t n\) {) s
5 542 M
(    assert\(n > 0\);) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 531 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( \(n > nr_free\) {) s
5 520 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 520 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 520 M
( NULL;) s
5 509 M
(    }) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 498 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 498 M
( Page *page = NULL;) s
5 487 M
(    list_entry_t *le = &free_list;) s
5 476 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 476 M
(// TODO: optimize \(next-fit\)) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 465 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 465 M
( \(\(le = list_next\(le\)\) != &free_list\) {) s
5 454 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 454 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 454 M
( Page *p = le2page\(le, page_link\);) s
5 443 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 443 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 443 M
( \(p->property >= n\) {) s
5 432 M
(            page = p;) s
5 421 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 421 M
(break) s
/F-gs-font 10 10 SF
0 setgray
107 421 M
(;) s
5 410 M
(        }) s
5 399 M
(    }) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 388 M
( \(page != NULL\) {) s
5 377 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 377 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 377 M
( \(page->property > n\) {) s
5 366 M
(            ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 366 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 366 M
( Page *p = page + n;) s
5 355 M
(            p->property = page->property - n;) s
5 344 M
(            SetPageProperty\(p\);) s
5 333 M
(            list_add_after\(&\(page->page_link\), &\(p->page_link\)\);) s
5 322 M
(        }) s
5 311 M
(        list_del\(&\(page->page_link\)\);) s
5 300 M
(        nr_free -= n;) s
5 289 M
(        ClearPageProperty\(page\);) s
5 278 M
(    }) s
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 267 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 267 M
( page;) s
5 256 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 234 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 234 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 234 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 223 M
(default_free_pages) s
/F-gs-font 10 10 SF
0 setgray
113 223 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 223 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
155 223 M
( Page *base, size_t n\) {) s
5 212 M
(    assert\(n > 0\);) s
5 201 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 201 M
( Page *p = base;) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 190 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( \(; p != base + n; p ++\) {) s
5 179 M
(        assert\(!PageReserved\(p\) && !PageProperty\(p\)\);) s
5 168 M
(        p->flags = 0;) s
5 157 M
(        set_page_ref\(p, 0\);) s
5 146 M
(    }) s
5 135 M
(    base->property = n;) s
5 124 M
(    SetPageProperty\(base\);) s
5 113 M
(    list_entry_t *le = list_next\(&free_list\);) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 102 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 102 M
( \(le != &free_list\) {) s
5 91 M
(        p = le2page\(le, page_link\);) s
5 80 M
(        le = list_next\(le\);) s
5 69 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 69 M
(// TODO: optimize) s
/F-gs-font 10 10 SF
0 setgray
5 58 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 58 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 58 M
( \(base + base->property == p\) {) s
5 47 M
(            base->property += p->property;) s
5 36 M
(            ClearPageProperty\(p\);) s
5 25 M
(            list_del\(&\(p->page_link\)\);) s
5 14 M
(        }) s
5 3 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 3 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 3 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
83 3 M
(if) s
/F-gs-font 10 10 SF
0 setgray
95 3 M
( \(p + p->property == base\) {) s
_R
S
%%Page: (267) 267
%%BeginPageSetup
_S
18 36 translate
/pagenum 267 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(            p->property += base->property;) s
5 696 M
(            ClearPageProperty\(base\);) s
5 685 M
(            base = p;) s
5 674 M
(            list_del\(&\(p->page_link\)\);) s
5 663 M
(        }) s
5 652 M
(    }) s
5 641 M
(    nr_free += n;) s
5 630 M
(    le = list_next\(&free_list\);) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 619 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 619 M
( \(le != &free_list\) {) s
5 608 M
(        p = le2page\(le, page_link\);) s
5 597 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 597 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 597 M
( \(base + base->property <= p\) {) s
5 586 M
(            assert\(base + base->property != p\);) s
5 575 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 575 M
(break) s
/F-gs-font 10 10 SF
0 setgray
107 575 M
(;) s
5 564 M
(        }) s
5 553 M
(        le = list_next\(le\);) s
5 542 M
(    }) s
5 531 M
(    list_add_before\(le, &\(base->page_link\)\);) s
5 520 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 498 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 498 M
( size_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 487 M
(default_nr_free_pages) s
/F-gs-font 10 10 SF
0 setgray
131 487 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 487 M
(void) s
/F-gs-font 10 10 SF
0 setgray
161 487 M
(\) {) s
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 476 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 476 M
( nr_free;) s
5 465 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 443 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 443 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 443 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 432 M
(basic_check) s
/F-gs-font 10 10 SF
0 setgray
71 432 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 432 M
(void) s
/F-gs-font 10 10 SF
0 setgray
101 432 M
(\) {) s
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 421 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 421 M
( Page *p0, *p1, *p2;) s
5 410 M
(    p0 = p1 = p2 = NULL;) s
5 399 M
(    assert\(\(p0 = alloc_page\(\)\) != NULL\);) s
5 388 M
(    assert\(\(p1 = alloc_page\(\)\) != NULL\);) s
5 377 M
(    assert\(\(p2 = alloc_page\(\)\) != NULL\);) s
5 355 M
(    assert\(p0 != p1 && p0 != p2 && p1 != p2\);) s
5 344 M
(    assert\(page_ref\(p0\) == 0 && page_ref\(p1\) == 0 && page_ref\(p2\) == 0\);) s
5 322 M
(    assert\(page2pa\(p0\) < npage * PGSIZE\);) s
5 311 M
(    assert\(page2pa\(p1\) < npage * PGSIZE\);) s
5 300 M
(    assert\(page2pa\(p2\) < npage * PGSIZE\);) s
5 278 M
(    list_entry_t free_list_store = free_list;) s
5 267 M
(    list_init\(&free_list\);) s
5 256 M
(    assert\(list_empty\(&free_list\)\);) s
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 234 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 234 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 234 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 234 M
( nr_free_store = nr_free;) s
5 223 M
(    nr_free = 0;) s
5 201 M
(    assert\(alloc_page\(\) == NULL\);) s
5 179 M
(    free_page\(p0\);) s
5 168 M
(    free_page\(p1\);) s
5 157 M
(    free_page\(p2\);) s
5 146 M
(    assert\(nr_free == 3\);) s
5 124 M
(    assert\(\(p0 = alloc_page\(\)\) != NULL\);) s
5 113 M
(    assert\(\(p1 = alloc_page\(\)\) != NULL\);) s
5 102 M
(    assert\(\(p2 = alloc_page\(\)\) != NULL\);) s
5 80 M
(    assert\(alloc_page\(\) == NULL\);) s
5 58 M
(    free_page\(p0\);) s
5 47 M
(    assert\(!list_empty\(&free_list\)\);) s
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 25 M
( Page *p;) s
5 14 M
(    assert\(\(p = alloc_page\(\)\) == p0\);) s
5 3 M
(    assert\(alloc_page\(\) == NULL\);) s
_R
S
%%Page: (268) 268
%%BeginPageSetup
_S
18 36 translate
/pagenum 268 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 696 M
(    assert\(nr_free == 0\);) s
5 685 M
(    free_list = free_list_store;) s
5 674 M
(    nr_free = nr_free_store;) s
5 652 M
(    free_page\(p\);) s
5 641 M
(    free_page\(p1\);) s
5 630 M
(    free_page\(p2\);) s
5 619 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 597 M
(// LAB2: below code is used to check the first fit allocation algorithm \(your EXERCISE 1\) ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 586 M
(// NOTICE: You SHOULD NOT CHANGE basic_check, default_check functions!) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 575 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 564 M
(default_check) s
/F-gs-font 10 10 SF
0 setgray
83 564 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 564 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 564 M
(\) {) s
5 553 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 553 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( count = 0, total = 0;) s
5 542 M
(    list_entry_t *le = &free_list;) s
5 531 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 531 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 531 M
( \(\(le = list_next\(le\)\) != &free_list\) {) s
5 520 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 520 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 520 M
( Page *p = le2page\(le, page_link\);) s
5 509 M
(        assert\(PageProperty\(p\)\);) s
5 498 M
(        count ++, total += p->property;) s
5 487 M
(    }) s
5 476 M
(    assert\(total == nr_free_pages\(\)\);) s
5 454 M
(    basic_check\(\);) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 432 M
( Page *p0 = alloc_pages\(5\), *p1, *p2;) s
5 421 M
(    assert\(p0 != NULL\);) s
5 410 M
(    assert\(!PageProperty\(p0\)\);) s
5 388 M
(    list_entry_t free_list_store = free_list;) s
5 377 M
(    list_init\(&free_list\);) s
5 366 M
(    assert\(list_empty\(&free_list\)\);) s
5 355 M
(    assert\(alloc_page\(\) == NULL\);) s
5 333 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 333 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 333 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 333 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 333 M
( nr_free_store = nr_free;) s
5 322 M
(    nr_free = 0;) s
5 300 M
(    free_pages\(p0 + 2, 3\);) s
5 289 M
(    assert\(alloc_pages\(4\) == NULL\);) s
5 278 M
(    assert\(PageProperty\(p0 + 2\) && p0[2].property == 3\);) s
5 267 M
(    assert\(\(p1 = alloc_pages\(3\)\) != NULL\);) s
5 256 M
(    assert\(alloc_page\(\) == NULL\);) s
5 245 M
(    assert\(p0 + 2 == p1\);) s
5 223 M
(    p2 = p0 + 1;) s
5 212 M
(    free_page\(p0\);) s
5 201 M
(    free_pages\(p1, 3\);) s
5 190 M
(    assert\(PageProperty\(p0\) && p0->property == 1\);) s
5 179 M
(    assert\(PageProperty\(p1\) && p1->property == 3\);) s
5 157 M
(    assert\(\(p0 = alloc_page\(\)\) == p2 - 1\);) s
5 146 M
(    free_page\(p0\);) s
5 135 M
(    assert\(\(p0 = alloc_pages\(2\)\) == p2 + 1\);) s
5 113 M
(    free_pages\(p0, 2\);) s
5 102 M
(    free_page\(p2\);) s
5 80 M
(    assert\(\(p0 = alloc_pages\(5\)\) != NULL\);) s
5 69 M
(    assert\(alloc_page\(\) == NULL\);) s
5 47 M
(    assert\(nr_free == 0\);) s
5 36 M
(    nr_free = nr_free_store;) s
5 14 M
(    free_list = free_list_store;) s
5 3 M
(    free_pages\(p0, 5\);) s
_R
S
%%Page: (269) 269
%%BeginPageSetup
_S
18 36 translate
/pagenum 269 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 696 M
(    le = &free_list;) s
5 685 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 685 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 685 M
( \(\(le = list_next\(le\)\) != &free_list\) {) s
5 674 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 674 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 674 M
( Page *p = le2page\(le, page_link\);) s
5 663 M
(        count --, total -= p->property;) s
5 652 M
(    }) s
5 641 M
(    assert\(count == 0\);) s
5 630 M
(    assert\(total == 0\);) s
5 619 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 597 M
(const) s
/F-gs-font 10 10 SF
0 setgray
35 597 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 597 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
77 597 M
( pmm_manager default_pmm_manager = {) s
5 586 M
(    .name = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 586 M
("default_pmm_manager") s
/F-gs-font 10 10 SF
0 setgray
203 586 M
(,) s
5 575 M
(    .init = default_init,) s
5 564 M
(    .init_memmap = default_init_memmap,) s
5 553 M
(    .alloc_pages = default_alloc_pages,) s
5 542 M
(    .free_pages = default_free_pages,) s
5 531 M
(    .nr_free_pages = default_nr_free_pages,) s
5 520 M
(    .check = default_check,) s
5 509 M
(};) s
5 498 M
([ucore/lab8_result/kern/mm/vmm.h] ++++++++++++++++++++++++++++++) s
5 487 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 487 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 487 M
(__KERN_MM_VMM_H__) s
/F-gs-font 10 10 SF
0 setgray
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 476 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 476 M
(__KERN_MM_VMM_H__) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 454 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 443 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 443 M
(<list.h>) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 432 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 432 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 432 M
(<memlayout.h>) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 421 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 421 M
(<sync.h>) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 410 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 410 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 410 M
(<proc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 399 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 399 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 399 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 399 M
(<sem.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 377 M
(//pre define) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 366 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 366 M
( mm_struct;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 344 M
(// the virtual continuous memory area\(vma\)) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 333 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 333 M
( vma_struct {) s
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 322 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 322 M
( mm_struct *vm_mm; ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
179 322 M
(// the set of vma using the same PDT ) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(    uintptr_t vm_start;      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
179 311 M
(//    start addr of vma    ) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(    uintptr_t vm_end;        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
179 300 M
(// end addr of vma) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(    uint32_t vm_flags;       ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
179 289 M
(// flags of vma) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
(    list_entry_t list_link;  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
179 278 M
(// linear list link which sorted by start addr of vma) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(};) s
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 245 M
(le2vma) s
/F-gs-font 10 10 SF
0 setgray
89 245 M
(\(le, member\)                  \\) s
5 234 M
(    to_struct\(\(le\), struct vma_struct, member\)) s
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 212 M
(VM_READ) s
/F-gs-font 10 10 SF
0 setgray
95 212 M
(                 0x00000001) s
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 201 M
(VM_WRITE) s
/F-gs-font 10 10 SF
0 setgray
101 201 M
(                0x00000002) s
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 190 M
(VM_EXEC) s
/F-gs-font 10 10 SF
0 setgray
95 190 M
(                 0x00000004) s
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 179 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 179 M
(VM_STACK) s
/F-gs-font 10 10 SF
0 setgray
101 179 M
(                0x00000008) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 157 M
(// the control struct for a set of vma using the same PDT) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( mm_struct {) s
5 135 M
(    list_entry_t mmap_list;        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
215 135 M
(// linear list link which sorted by start addr of vma) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 124 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 124 M
( vma_struct *mmap_cache; ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
215 124 M
(// current accessed vma, used for speed purpose) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(    pde_t *pgdir;                  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
215 113 M
(// the PDT of these vma) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 102 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 102 M
( map_count;                 ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
215 102 M
(// the count of these vma) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 91 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 91 M
( *sm_priv;                 ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
215 91 M
(// the private data for swap manager) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( mm_count;                  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
215 80 M
(// the number ofprocess which shared the mm) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(    semaphore_t mm_sem;            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
215 69 M
(// mutex for using dup_mmap fun to duplicat the mm ) s
/F-gs-font 10 10 SF
0 setgray
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 58 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( locked_by;                 ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
215 58 M
(// the lock owner process's pid) s
/F-gs-font 10 10 SF
0 setgray
5 36 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( vma_struct *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 14 M
(find_vma) s
/F-gs-font 10 10 SF
0 setgray
167 14 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
209 14 M
( mm_struct *mm, uintptr_t addr\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 3 M
( vma_struct *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 3 M
(vma_create) s
/F-gs-font 10 10 SF
0 setgray
179 3 M
(\(uintptr_t vm_start, uintptr_t vm_end, uint32_t vm_flags\);) s
_R
S
%%Page: (270) 270
%%BeginPageSetup
_S
18 36 translate
/pagenum 270 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 707 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 707 M
(insert_vma_struct) s
/F-gs-font 10 10 SF
0 setgray
137 707 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 707 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
179 707 M
( mm_struct *mm, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
275 707 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
311 707 M
( vma_struct *vma\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 685 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( mm_struct *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
113 685 M
(mm_create) s
/F-gs-font 10 10 SF
0 setgray
167 685 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 685 M
(void) s
/F-gs-font 10 10 SF
0 setgray
197 685 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 674 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 674 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 674 M
(mm_destroy) s
/F-gs-font 10 10 SF
0 setgray
95 674 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 674 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 674 M
( mm_struct *mm\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 652 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 652 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 652 M
(vmm_init) s
/F-gs-font 10 10 SF
0 setgray
83 652 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 652 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 652 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 641 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 641 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 641 M
(mm_map) s
/F-gs-font 10 10 SF
0 setgray
65 641 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 641 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 641 M
( mm_struct *mm, uintptr_t addr, size_t len, uint32_t vm_flags,) s
5 630 M
(           ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 630 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 630 M
( vma_struct **vma_store\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 619 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 619 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 619 M
(do_pgfault) s
/F-gs-font 10 10 SF
0 setgray
89 619 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 619 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 619 M
( mm_struct *mm, uint32_t error_code, uintptr_t addr\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 597 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 597 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 597 M
(mm_unmap) s
/F-gs-font 10 10 SF
0 setgray
77 597 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 597 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 597 M
( mm_struct *mm, uintptr_t addr, size_t len\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 586 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 586 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 586 M
(dup_mmap) s
/F-gs-font 10 10 SF
0 setgray
77 586 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 586 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 586 M
( mm_struct *to, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 586 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
251 586 M
( mm_struct *from\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 575 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 575 M
(exit_mmap) s
/F-gs-font 10 10 SF
0 setgray
89 575 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 575 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 575 M
( mm_struct *mm\);) s
5 564 M
(uintptr_t ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
65 564 M
(get_unmapped_area) s
/F-gs-font 10 10 SF
0 setgray
167 564 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 564 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
209 564 M
( mm_struct *mm, size_t len\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 553 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 553 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 553 M
(mm_brk) s
/F-gs-font 10 10 SF
0 setgray
65 553 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 553 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
107 553 M
( mm_struct *mm, uintptr_t addr, size_t len\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 531 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 531 M
(volatile) s
/F-gs-font 10 10 SF
0 setgray
95 531 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 531 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
149 531 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 531 M
(int) s
/F-gs-font 10 10 SF
0 setgray
173 531 M
( pgfault_num;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 520 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 520 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 520 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 520 M
( mm_struct *check_mm_struct;) s
5 498 M
(bool ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 498 M
(user_mem_check) s
/F-gs-font 10 10 SF
0 setgray
119 498 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 498 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
161 498 M
( mm_struct *mm, uintptr_t start, size_t len, bool write\);) s
5 487 M
(bool ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 487 M
(copy_from_user) s
/F-gs-font 10 10 SF
0 setgray
119 487 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 487 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
161 487 M
( mm_struct *mm, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 487 M
(void) s
/F-gs-font 10 10 SF
0 setgray
281 487 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
323 487 M
(const) s
/F-gs-font 10 10 SF
0 setgray
353 487 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
359 487 M
(void) s
/F-gs-font 10 10 SF
0 setgray
383 487 M
( *src, size_t len, bool writabl) s
5 476 M
(e\);) s
5 465 M
(bool ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 465 M
(copy_to_user) s
/F-gs-font 10 10 SF
0 setgray
107 465 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 465 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
149 465 M
( mm_struct *mm, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
245 465 M
(void) s
/F-gs-font 10 10 SF
0 setgray
269 465 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
311 465 M
(const) s
/F-gs-font 10 10 SF
0 setgray
341 465 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
347 465 M
(void) s
/F-gs-font 10 10 SF
0 setgray
371 465 M
( *src, size_t len\);) s
5 454 M
(bool ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 454 M
(copy_string) s
/F-gs-font 10 10 SF
0 setgray
101 454 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 454 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 454 M
( mm_struct *mm, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
239 454 M
(char) s
/F-gs-font 10 10 SF
0 setgray
263 454 M
( *dst, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
305 454 M
(const) s
/F-gs-font 10 10 SF
0 setgray
335 454 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
341 454 M
(char) s
/F-gs-font 10 10 SF
0 setgray
365 454 M
( *src, size_t maxn\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 432 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 432 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 432 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 421 M
(mm_count) s
/F-gs-font 10 10 SF
0 setgray
53 421 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 421 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 421 M
( mm_struct *mm\) {) s
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 410 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 410 M
( mm->mm_count;) s
5 399 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 377 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 377 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 366 M
(set_mm_count) s
/F-gs-font 10 10 SF
0 setgray
77 366 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 366 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 366 M
( mm_struct *mm, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 366 M
(int) s
/F-gs-font 10 10 SF
0 setgray
233 366 M
( val\) {) s
5 355 M
(    mm->mm_count = val;) s
5 344 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 322 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 322 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 322 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 311 M
(mm_count_inc) s
/F-gs-font 10 10 SF
0 setgray
77 311 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 311 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 311 M
( mm_struct *mm\) {) s
5 300 M
(    mm->mm_count += 1;) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 289 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 289 M
( mm->mm_count;) s
5 278 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 256 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 256 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 256 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 245 M
(mm_count_dec) s
/F-gs-font 10 10 SF
0 setgray
77 245 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 245 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 245 M
( mm_struct *mm\) {) s
5 234 M
(    mm->mm_count -= 1;) s
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 223 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 223 M
( mm->mm_count;) s
5 212 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 190 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 190 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 190 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 179 M
(lock_mm) s
/F-gs-font 10 10 SF
0 setgray
47 179 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 179 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 179 M
( mm_struct *mm\) {) s
5 168 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 168 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 168 M
( \(mm != NULL\) {) s
5 157 M
(        down\(&\(mm->mm_sem\)\);) s
5 146 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 146 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 146 M
( \(current != NULL\) {) s
5 135 M
(            mm->locked_by = current->pid;) s
5 124 M
(        }) s
5 113 M
(    }) s
5 102 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 80 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 80 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 80 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 69 M
(unlock_mm) s
/F-gs-font 10 10 SF
0 setgray
59 69 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 69 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 69 M
( mm_struct *mm\) {) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 58 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 58 M
( \(mm != NULL\) {) s
5 47 M
(        up\(&\(mm->mm_sem\)\);) s
5 36 M
(        mm->locked_by = 0;) s
5 25 M
(    }) s
5 14 M
(}) s
_R
S
%%Page: (271) 271
%%BeginPageSetup
_S
18 36 translate
/pagenum 271 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 707 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 707 M
(/* !__KERN_MM_VMM_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
([ucore/lab8_result/kern/mm/swap_fifo.c] ++++++++++++++++++++++++++++++) s
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 674 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 674 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 663 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 663 M
(<x86.h>) s
/F-gs-font 10 10 SF
0 setgray
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 652 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 652 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 641 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 641 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 641 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 641 M
(<string.h>) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 630 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 630 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 630 M
(<swap.h>) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 619 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 619 M
(<swap_fifo.h>) s
/F-gs-font 10 10 SF
0 setgray
5 608 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 608 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 608 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 608 M
(<list.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 586 M
(/* [wikipedia]The simplest Page Replacement Algorithm\(PRA\) is a FIFO algorithm. The first-in, ) s
5 575 M
(first-out) s
5 564 M
( * page replacement algorithm is a low-overhead algorithm that requires little book-keeping on) s
5 553 M
( * the part of the operating system. The idea is obvious from the name - the operating system) s
5 542 M
( * keeps track of all the pages in memory in a queue, with the most recent arrival at the back) s
5 531 M
(,) s
5 520 M
( * and the earliest arrival in front. When a page needs to be replaced, the page at the front) s
5 509 M
( * of the queue \(the oldest page\) is selected. While FIFO is cheap and intuitive, it performs) s
5 498 M
( * poorly in practical application. Thus, it is rarely used in its unmodified form. This) s
5 487 M
( * algorithm experiences Belady's anomaly.) s
5 476 M
( *) s
5 465 M
( * Details of FIFO PRA) s
5 454 M
( * \(1\) Prepare: In order to implement FIFO PRA, we should manage all swappable pages, so we ca) s
5 443 M
(n) s
5 432 M
( *              link these pages into pra_list_head according the time order. At first you sho) s
5 421 M
(uld) s
5 410 M
( *              be familiar to the struct list in list.h. struct list is a simple doubly linke) s
5 399 M
(d list) s
5 388 M
( *              implementation. You should know howto USE: list_init, list_add\(list_add_after\)) s
5 377 M
(,) s
5 366 M
( *              list_add_before, list_del, list_next, list_prev. Another tricky method is to t) s
5 355 M
(ransform) s
5 344 M
( *              a general list struct to a special struct \(such as struct page\). You can find ) s
5 333 M
(some MACRO:) s
5 322 M
( *              le2page \(in memlayout.h\), \(in future labs: le2vma \(in vmm.h\), le2proc \(in proc) s
5 311 M
(.h\),etc.) s
5 300 M
( */) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
(list_entry_t pra_list_head;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 267 M
(/*) s
5 256 M
( * \(2\) _fifo_init_mm: init pra_list_head and let  mm->sm_priv point to the addr of pra_list_he) s
5 245 M
(ad.) s
5 234 M
( *              Now, From the memory control struct mm_struct, we can access FIFO PRA) s
5 223 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 212 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 212 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 212 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 201 M
(_fifo_init_mm) s
/F-gs-font 10 10 SF
0 setgray
83 201 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 201 M
( mm_struct *mm\)) s
5 190 M
({     ) s
5 179 M
(     list_init\(&pra_list_head\);) s
5 168 M
(     mm->sm_priv = &pra_list_head;) s
5 157 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 157 M
(//cprintf\(" mm->sm_priv %x in fifo_init_mm\\n",mm->sm_priv\);) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 146 M
(return) s
/F-gs-font 10 10 SF
0 setgray
71 146 M
( 0;) s
5 135 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 124 M
(/*) s
5 113 M
( * \(3\)_fifo_map_swappable: According FIFO PRA, we should link the most recent arrival page at ) s
5 102 M
(the back of pra_list_head qeueue) s
5 91 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 80 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 80 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 80 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 69 M
(_fifo_map_swappable) s
/F-gs-font 10 10 SF
0 setgray
119 69 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 69 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
161 69 M
( mm_struct *mm, uintptr_t addr, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
353 69 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
389 69 M
( Page *page, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
467 69 M
(int) s
/F-gs-font 10 10 SF
0 setgray
485 69 M
( swap_in\)) s
5 58 M
({) s
5 47 M
(    list_entry_t *head=\(list_entry_t*\) mm->sm_priv;) s
5 36 M
(    list_entry_t *entry=&\(page->pra_page_link\);) s
5 25 M
( ) s
5 14 M
(    assert\(entry != NULL && head != NULL\);) s
5 3 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 3 M
(//record the page access situlation) s
_R
S
%%Page: (272) 272
%%BeginPageSetup
_S
18 36 translate
/pagenum 272 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
/F-gs-font 10 10 SF
0 setgray
5 707 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 707 M
(/*LAB3 EXERCISE 2: YOUR CODE*/) s
/F-gs-font 10 10 SF
0 setgray
209 707 M
( ) s
5 696 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 696 M
(//\(1\)link the most recent arrival page at the back of the pra_list_head qeueue.) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(    list_add\(head, entry\);) s
5 674 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 674 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 674 M
( 0;) s
5 663 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 652 M
(/*) s
5 641 M
( *  \(4\)_fifo_swap_out_victim: According FIFO PRA, we should unlink the  earliest arrival page ) s
5 630 M
(in front of pra_list_head qeueue,) s
5 619 M
( *                            then assign the value of *ptr_page to the addr of this page.) s
5 608 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 597 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 597 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 586 M
(_fifo_swap_out_victim) s
/F-gs-font 10 10 SF
0 setgray
131 586 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 586 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
173 586 M
( mm_struct *mm, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
269 586 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
305 586 M
( Page ** ptr_page, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
419 586 M
(int) s
/F-gs-font 10 10 SF
0 setgray
437 586 M
( in_tick\)) s
5 575 M
({) s
5 564 M
(     list_entry_t *head=\(list_entry_t*\) mm->sm_priv;) s
5 553 M
(         assert\(head != NULL\);) s
5 542 M
(     assert\(in_tick==0\);) s
5 531 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 531 M
(/* Select the victim */) s
/F-gs-font 10 10 SF
0 setgray
5 520 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 520 M
(/*LAB3 EXERCISE 2: YOUR CODE*/) s
/F-gs-font 10 10 SF
0 setgray
215 520 M
( ) s
5 509 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 509 M
(//\(1\)  unlink the  earliest arrival page in front of pra_list_head qeueue) s
/F-gs-font 10 10 SF
0 setgray
5 498 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 498 M
(//\(2\)  assign the value of *ptr_page to the addr of this page) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 487 M
(/* Select the tail */) s
/F-gs-font 10 10 SF
0 setgray
5 476 M
(     list_entry_t *le = head->prev;) s
5 465 M
(     assert\(head!=le\);) s
5 454 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 454 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
71 454 M
( Page *p = le2page\(le, pra_page_link\);) s
5 443 M
(     list_del\(le\);) s
5 432 M
(     assert\(p !=NULL\);) s
5 421 M
(     *ptr_page = p;) s
5 410 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 410 M
(return) s
/F-gs-font 10 10 SF
0 setgray
71 410 M
( 0;) s
5 399 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 377 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 377 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 366 M
(_fifo_check_swap) s
/F-gs-font 10 10 SF
0 setgray
101 366 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 366 M
(void) s
/F-gs-font 10 10 SF
0 setgray
131 366 M
(\) {) s
5 355 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 355 M
("write Virt Page c in fifo_check_swap\\n") s
/F-gs-font 10 10 SF
0 setgray
317 355 M
(\);) s
5 344 M
(    *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 344 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
89 344 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 344 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 344 M
( *\)0x3000 = 0x0c;) s
5 333 M
(    assert\(pgfault_num==4\);) s
5 322 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 322 M
("write Virt Page a in fifo_check_swap\\n") s
/F-gs-font 10 10 SF
0 setgray
317 322 M
(\);) s
5 311 M
(    *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 311 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
89 311 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 311 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 311 M
( *\)0x1000 = 0x0a;) s
5 300 M
(    assert\(pgfault_num==4\);) s
5 289 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 289 M
("write Virt Page d in fifo_check_swap\\n") s
/F-gs-font 10 10 SF
0 setgray
317 289 M
(\);) s
5 278 M
(    *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 278 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
89 278 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 278 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 278 M
( *\)0x4000 = 0x0d;) s
5 267 M
(    assert\(pgfault_num==4\);) s
5 256 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 256 M
("write Virt Page b in fifo_check_swap\\n") s
/F-gs-font 10 10 SF
0 setgray
317 256 M
(\);) s
5 245 M
(    *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 245 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
89 245 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 245 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 245 M
( *\)0x2000 = 0x0b;) s
5 234 M
(    assert\(pgfault_num==4\);) s
5 223 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 223 M
("write Virt Page e in fifo_check_swap\\n") s
/F-gs-font 10 10 SF
0 setgray
317 223 M
(\);) s
5 212 M
(    *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 212 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
89 212 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 212 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 212 M
( *\)0x5000 = 0x0e;) s
5 201 M
(    assert\(pgfault_num==5\);) s
5 190 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 190 M
("write Virt Page b in fifo_check_swap\\n") s
/F-gs-font 10 10 SF
0 setgray
317 190 M
(\);) s
5 179 M
(    *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 179 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
89 179 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 179 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 179 M
( *\)0x2000 = 0x0b;) s
5 168 M
(    assert\(pgfault_num==5\);) s
5 157 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 157 M
("write Virt Page a in fifo_check_swap\\n") s
/F-gs-font 10 10 SF
0 setgray
317 157 M
(\);) s
5 146 M
(    *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 146 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
89 146 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 146 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 146 M
( *\)0x1000 = 0x0a;) s
5 135 M
(    assert\(pgfault_num==6\);) s
5 124 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 124 M
("write Virt Page b in fifo_check_swap\\n") s
/F-gs-font 10 10 SF
0 setgray
317 124 M
(\);) s
5 113 M
(    *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 113 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
89 113 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 113 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 113 M
( *\)0x2000 = 0x0b;) s
5 102 M
(    assert\(pgfault_num==7\);) s
5 91 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 91 M
("write Virt Page c in fifo_check_swap\\n") s
/F-gs-font 10 10 SF
0 setgray
317 91 M
(\);) s
5 80 M
(    *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 80 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
89 80 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 80 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 80 M
( *\)0x3000 = 0x0c;) s
5 69 M
(    assert\(pgfault_num==8\);) s
5 58 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 58 M
("write Virt Page d in fifo_check_swap\\n") s
/F-gs-font 10 10 SF
0 setgray
317 58 M
(\);) s
5 47 M
(    *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 47 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
89 47 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 47 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 47 M
( *\)0x4000 = 0x0d;) s
5 36 M
(    assert\(pgfault_num==9\);) s
5 25 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 25 M
("write Virt Page e in fifo_check_swap\\n") s
/F-gs-font 10 10 SF
0 setgray
317 25 M
(\);) s
5 14 M
(    *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 14 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
89 14 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 14 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 14 M
( *\)0x5000 = 0x0e;) s
5 3 M
(    assert\(pgfault_num==10\);) s
_R
S
%%Page: (273) 273
%%BeginPageSetup
_S
18 36 translate
/pagenum 273 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 707 M
("write Virt Page a in fifo_check_swap\\n") s
/F-gs-font 10 10 SF
0 setgray
317 707 M
(\);) s
5 696 M
(    assert\(*\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 696 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
131 696 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 696 M
(char) s
/F-gs-font 10 10 SF
0 setgray
161 696 M
( *\)0x1000 == 0x0a\);) s
5 685 M
(    *\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 685 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
89 685 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 685 M
(char) s
/F-gs-font 10 10 SF
0 setgray
119 685 M
( *\)0x1000 = 0x0a;) s
5 674 M
(    assert\(pgfault_num==11\);) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 663 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 663 M
( 0;) s
5 652 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 619 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 619 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 608 M
(_fifo_init) s
/F-gs-font 10 10 SF
0 setgray
65 608 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 608 M
(void) s
/F-gs-font 10 10 SF
0 setgray
95 608 M
(\)) s
5 597 M
({) s
5 586 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 586 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 586 M
( 0;) s
5 575 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 553 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 553 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 553 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 542 M
(_fifo_set_unswappable) s
/F-gs-font 10 10 SF
0 setgray
131 542 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 542 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
173 542 M
( mm_struct *mm, uintptr_t addr\)) s
5 531 M
({) s
5 520 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 520 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
( 0;) s
5 509 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 487 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 487 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 476 M
(_fifo_tick_event) s
/F-gs-font 10 10 SF
0 setgray
101 476 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 476 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 476 M
( mm_struct *mm\)) s
5 465 M
({ ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
17 465 M
(return) s
/F-gs-font 10 10 SF
0 setgray
53 465 M
( 0; }) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 432 M
( swap_manager swap_manager_fifo =) s
5 421 M
({) s
5 410 M
(     .name            = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
149 410 M
("fifo swap manager") s
/F-gs-font 10 10 SF
0 setgray
263 410 M
(,) s
5 399 M
(     .init            = &_fifo_init,) s
5 388 M
(     .init_mm         = &_fifo_init_mm,) s
5 377 M
(     .tick_event      = &_fifo_tick_event,) s
5 366 M
(     .map_swappable   = &_fifo_map_swappable,) s
5 355 M
(     .set_unswappable = &_fifo_set_unswappable,) s
5 344 M
(     .swap_out_victim = &_fifo_swap_out_victim,) s
5 333 M
(     .check_swap      = &_fifo_check_swap,) s
5 322 M
(};) s
5 311 M
([ucore/lab8_result/kern/mm/memlayout.h] ++++++++++++++++++++++++++++++) s
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 300 M
(__KERN_MM_MEMLAYOUT_H__) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 289 M
(__KERN_MM_MEMLAYOUT_H__) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 267 M
(/* This file contains the definitions for memory management in our OS. */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 245 M
(/* global segment number */) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 234 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 234 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 234 M
(SEG_KTEXT) s
/F-gs-font 10 10 SF
0 setgray
107 234 M
(   1) s
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 223 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 223 M
(SEG_KDATA) s
/F-gs-font 10 10 SF
0 setgray
107 223 M
(   2) s
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 212 M
(SEG_UTEXT) s
/F-gs-font 10 10 SF
0 setgray
107 212 M
(   3) s
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 201 M
(SEG_UDATA) s
/F-gs-font 10 10 SF
0 setgray
107 201 M
(   4) s
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 190 M
(SEG_TSS) s
/F-gs-font 10 10 SF
0 setgray
95 190 M
(     5) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 168 M
(/* global descrptor numbers */) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 157 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 157 M
(GD_KTEXT) s
/F-gs-font 10 10 SF
0 setgray
101 157 M
(    \(\(SEG_KTEXT\) << 3\)      // kernel text) s
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 146 M
(GD_KDATA) s
/F-gs-font 10 10 SF
0 setgray
101 146 M
(    \(\(SEG_KDATA\) << 3\)      // kernel data) s
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 135 M
(GD_UTEXT) s
/F-gs-font 10 10 SF
0 setgray
101 135 M
(    \(\(SEG_UTEXT\) << 3\)      // user text) s
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 124 M
(GD_UDATA) s
/F-gs-font 10 10 SF
0 setgray
101 124 M
(    \(\(SEG_UDATA\) << 3\)      // user data) s
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 113 M
(GD_TSS) s
/F-gs-font 10 10 SF
0 setgray
89 113 M
(      \(\(SEG_TSS\) << 3\)        // task segment selector) s
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 91 M
(DPL_KERNEL) s
/F-gs-font 10 10 SF
0 setgray
113 91 M
(  \(0\)) s
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 80 M
(DPL_USER) s
/F-gs-font 10 10 SF
0 setgray
101 80 M
(    \(3\)) s
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 58 M
(KERNEL_CS) s
/F-gs-font 10 10 SF
0 setgray
107 58 M
(   \(\(GD_KTEXT\) | DPL_KERNEL\)) s
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 47 M
(KERNEL_DS) s
/F-gs-font 10 10 SF
0 setgray
107 47 M
(   \(\(GD_KDATA\) | DPL_KERNEL\)) s
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 36 M
(USER_CS) s
/F-gs-font 10 10 SF
0 setgray
95 36 M
(     \(\(GD_UTEXT\) | DPL_USER\)) s
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 25 M
(USER_DS) s
/F-gs-font 10 10 SF
0 setgray
95 25 M
(     \(\(GD_UDATA\) | DPL_USER\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 3 M
(/* *) s
_R
S
%%Page: (274) 274
%%BeginPageSetup
_S
18 36 translate
/pagenum 274 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
( * Virtual memory map:                                          Permissions) s
5 696 M
( *                                                              kernel/user) s
5 685 M
( *) s
5 674 M
( *     4G ------------------> +---------------------------------+) s
5 663 M
( *                            |                                 |) s
5 652 M
( *                            |         Empty Memory \(*\)        |) s
5 641 M
( *                            |                                 |) s
5 630 M
( *                            +---------------------------------+ 0xFB000000) s
5 619 M
( *                            |   Cur. Page Table \(Kern, RW\)    | RW/-- PTSIZE) s
5 608 M
( *     VPT -----------------> +---------------------------------+ 0xFAC00000) s
5 597 M
( *                            |        Invalid Memory \(*\)       | --/--) s
5 586 M
( *     KERNTOP -------------> +---------------------------------+ 0xF8000000) s
5 575 M
( *                            |                                 |) s
5 564 M
( *                            |    Remapped Physical Memory     | RW/-- KMEMSIZE) s
5 553 M
( *                            |                                 |) s
5 542 M
( *     KERNBASE ------------> +---------------------------------+ 0xC0000000) s
5 531 M
( *                            |        Invalid Memory \(*\)       | --/--) s
5 520 M
( *     USERTOP -------------> +---------------------------------+ 0xB0000000) s
5 509 M
( *                            |           User stack            |) s
5 498 M
( *                            +---------------------------------+) s
5 487 M
( *                            |                                 |) s
5 476 M
( *                            :                                 :) s
5 465 M
( *                            |         ~~~~~~~~~~~~~~~~        |) s
5 454 M
( *                            :                                 :) s
5 443 M
( *                            |                                 |) s
5 432 M
( *                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~) s
5 421 M
( *                            |       User Program & Heap       |) s
5 410 M
( *     UTEXT ---------------> +---------------------------------+ 0x00800000) s
5 399 M
( *                            |        Invalid Memory \(*\)       | --/--) s
5 388 M
( *                            |  - - - - - - - - - - - - - - -  |) s
5 377 M
( *                            |    User STAB Data \(optional\)    |) s
5 366 M
( *     USERBASE, USTAB------> +---------------------------------+ 0x00200000) s
5 355 M
( *                            |        Invalid Memory \(*\)       | --/--) s
5 344 M
( *     0 -------------------> +---------------------------------+ 0x00000000) s
5 333 M
( * \(*\) Note: The kernel ensures that "Invalid Memory" is *never* mapped.) s
5 322 M
( *     "Empty Memory" is normally unmapped, but user programs may map pages) s
5 311 M
( *     there if desired.) s
5 300 M
( *) s
5 289 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 267 M
(/* All physical memory mapped at this address */) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 256 M
(KERNBASE) s
/F-gs-font 10 10 SF
0 setgray
101 256 M
(            0xC0000000) s
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 245 M
(KMEMSIZE) s
/F-gs-font 10 10 SF
0 setgray
101 245 M
(            0x38000000                  // the maximum amount of physical memo) s
5 234 M
(ry) s
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 223 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 223 M
(KERNTOP) s
/F-gs-font 10 10 SF
0 setgray
95 223 M
(             \(KERNBASE + KMEMSIZE\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 201 M
(/* *) s
5 190 M
( * Virtual page table. Entry PDX[VPT] in the PD \(Page Directory\) contains) s
5 179 M
( * a pointer to the page directory itself, thereby turning the PD into a page) s
5 168 M
( * table, which maps all the PTEs \(Page Table Entry\) containing the page mappings) s
5 157 M
( * for the entire virtual address space into that 4 Meg region starting at VPT.) s
5 146 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 135 M
(VPT) s
/F-gs-font 10 10 SF
0 setgray
71 135 M
(                 0xFAC00000) s
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 113 M
(KSTACKPAGE) s
/F-gs-font 10 10 SF
0 setgray
113 113 M
(          2                           // # of pages in kernel stack) s
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 102 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 102 M
(KSTACKSIZE) s
/F-gs-font 10 10 SF
0 setgray
113 102 M
(          \(KSTACKPAGE * PGSIZE\)       // sizeof kernel stack) s
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 80 M
(USERTOP) s
/F-gs-font 10 10 SF
0 setgray
95 80 M
(             0xB0000000) s
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 69 M
(USTACKTOP) s
/F-gs-font 10 10 SF
0 setgray
107 69 M
(           USERTOP) s
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 58 M
(USTACKPAGE) s
/F-gs-font 10 10 SF
0 setgray
113 58 M
(          256                         // # of pages in user stack) s
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 47 M
(USTACKSIZE) s
/F-gs-font 10 10 SF
0 setgray
113 47 M
(          \(USTACKPAGE * PGSIZE\)       // sizeof user stack) s
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 25 M
(USERBASE) s
/F-gs-font 10 10 SF
0 setgray
101 25 M
(            0x00200000) s
5 14 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 14 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 14 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 14 M
(UTEXT) s
/F-gs-font 10 10 SF
0 setgray
83 14 M
(               0x00800000                  // where user programs generally begin) s
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 3 M
(USTAB) s
/F-gs-font 10 10 SF
0 setgray
83 3 M
(               USERBASE                    // the location of the user STABS data) s
_R
S
%%Page: (275) 275
%%BeginPageSetup
_S
18 36 translate
/pagenum 275 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
( structure) s
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 685 M
(USER_ACCESS) s
/F-gs-font 10 10 SF
0 setgray
119 685 M
(\(start, end\)                     \\) s
5 674 M
(\(USERBASE <= \(start\) && \(start\) < \(end\) && \(end\) <= USERTOP\)) s
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 652 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 652 M
(KERN_ACCESS) s
/F-gs-font 10 10 SF
0 setgray
119 652 M
(\(start, end\)                     \\) s
5 641 M
(\(KERNBASE <= \(start\) && \(start\) < \(end\) && \(end\) <= KERNTOP\)) s
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 619 M
(__ASSEMBLER__) s
/F-gs-font 10 10 SF
0 setgray
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 597 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 597 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 586 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 586 M
(<atomic.h>) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 575 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 575 M
(<list.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 553 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( uintptr_t pte_t;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 542 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 542 M
( uintptr_t pde_t;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 531 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( pte_t swap_entry_t; ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 531 M
(//the pte can also be a swap entry) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 509 M
(// some constants for bios interrupt 15h AX = 0xE820) s
/F-gs-font 10 10 SF
0 setgray
5 498 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 498 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 498 M
(E820MAX) s
/F-gs-font 10 10 SF
0 setgray
95 498 M
(             20      // number of entries in E820MAP) s
5 487 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 487 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 487 M
(E820_ARM) s
/F-gs-font 10 10 SF
0 setgray
101 487 M
(            1       // address range memory) s
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 476 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 476 M
(E820_ARR) s
/F-gs-font 10 10 SF
0 setgray
101 476 M
(            2       // address range reserved) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( e820map {) s
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 443 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( nr_map;) s
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 432 M
( {) s
5 421 M
(        uint64_t addr;) s
5 410 M
(        uint64_t size;) s
5 399 M
(        uint32_t type;) s
5 388 M
(    } __attribute__\(\(packed\)\) map[E820MAX];) s
5 377 M
(};) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 355 M
(/* *) s
5 344 M
( * struct Page - Page descriptor structures. Each Page describes one) s
5 333 M
( * physical page. In kern/mm/pmm.h, you can find lots of useful functions) s
5 322 M
( * that convert Page to other data types, such as phyical address.) s
5 311 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 300 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 300 M
( Page {) s
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 289 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( ref;                        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 289 M
(// page frame's reference counter) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
(    uint32_t flags;                 ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 278 M
(// array of flags that describe the status of the page fra) s
5 267 M
(me) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 256 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 256 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 256 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 256 M
( property;          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 256 M
(// used in buddy system, stores the order \(the X in 2^X\) o) s
5 245 M
(f the continuous memory block) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 234 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 234 M
( zone_num;                   ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 234 M
(// used in buddy system, the No. of zone which the page be) s
5 223 M
(longs to) s
/F-gs-font 10 10 SF
0 setgray
5 212 M
(    list_entry_t page_link;         ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 212 M
(// free list link) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(    list_entry_t pra_page_link;     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 201 M
(// used for pra \(page replace algorithm\)) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(    uintptr_t pra_vaddr;            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 190 M
(// used for pra \(page replace algorithm\)) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(};) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 157 M
(/* Flags describing the status of a page frame */) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 146 M
(PG_reserved) s
/F-gs-font 10 10 SF
0 setgray
119 146 M
(                 0       // the page descriptor is reserved for kernel or u) s
5 135 M
(nusable) s
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 124 M
(PG_property) s
/F-gs-font 10 10 SF
0 setgray
119 124 M
(                 1       // the member 'property' is valid) s
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 102 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 102 M
(SetPageReserved) s
/F-gs-font 10 10 SF
0 setgray
143 102 M
(\(page\)       set_bit\(PG_reserved, &\(\(page\)->flags\)\)) s
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 91 M
(ClearPageReserved) s
/F-gs-font 10 10 SF
0 setgray
155 91 M
(\(page\)     clear_bit\(PG_reserved, &\(\(page\)->flags\)\)) s
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 80 M
(PageReserved) s
/F-gs-font 10 10 SF
0 setgray
125 80 M
(\(page\)          test_bit\(PG_reserved, &\(\(page\)->flags\)\)) s
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 69 M
(SetPageProperty) s
/F-gs-font 10 10 SF
0 setgray
143 69 M
(\(page\)       set_bit\(PG_property, &\(\(page\)->flags\)\)) s
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 58 M
(ClearPageProperty) s
/F-gs-font 10 10 SF
0 setgray
155 58 M
(\(page\)     clear_bit\(PG_property, &\(\(page\)->flags\)\)) s
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 47 M
(PageProperty) s
/F-gs-font 10 10 SF
0 setgray
125 47 M
(\(page\)          test_bit\(PG_property, &\(\(page\)->flags\)\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 25 M
(// convert list entry to page) s
/F-gs-font 10 10 SF
0 setgray
5 14 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 14 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 14 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 14 M
(le2page) s
/F-gs-font 10 10 SF
0 setgray
95 14 M
(\(le, member\)                 \\) s
5 3 M
(    to_struct\(\(le\), struct Page, member\)) s
_R
S
%%Page: (276) 276
%%BeginPageSetup
_S
18 36 translate
/pagenum 276 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 696 M
(/* free_area_t - maintains a doubly linked list to record free \(unused\) pages */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 685 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 685 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 685 M
( {) s
5 674 M
(    list_entry_t free_list;         ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 674 M
(// the list header) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 663 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 663 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 663 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 663 M
( nr_free;           ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 663 M
(// # of free pages in this free list) s
/F-gs-font 10 10 SF
0 setgray
5 652 M
(} free_area_t;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 630 M
(/* for slab style kmalloc */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 619 M
(//#define PG_slab                     2       // page frame is included in a slab) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 608 M
(//#define SetPageSlab\(page\)           set_bit\(PG_slab, &\(\(page\)->flags\)\)) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 597 M
(//#define ClearPageSlab\(page\)         clear_bit\(PG_slab, &\(\(page\)->flags\)\)) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 586 M
(//#define PageSlab\(page\)              test_bit\(PG_slab, &\(\(page\)->flags\)\)) s
/F-gs-font 10 10 SF
0 setgray
5 564 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 564 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 564 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 564 M
(/* !__ASSEMBLER__ */) s
/F-gs-font 10 10 SF
0 setgray
5 542 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 542 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 542 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 542 M
(/* !__KERN_MM_MEMLAYOUT_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 520 M
([ucore/lab8_result/kern/mm/pmm.h] ++++++++++++++++++++++++++++++) s
5 509 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 509 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 509 M
(__KERN_MM_PMM_H__) s
/F-gs-font 10 10 SF
0 setgray
5 498 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 498 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 498 M
(__KERN_MM_PMM_H__) s
/F-gs-font 10 10 SF
0 setgray
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 476 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 476 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 465 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 465 M
(<mmu.h>) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 454 M
(<memlayout.h>) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 443 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 443 M
(<atomic.h>) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 432 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 432 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 432 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 410 M
(// pmm_manager is a physical memory management class. A special pmm manager - XXX_pmm_manager) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 399 M
(// only needs to implement the methods in pmm_manager class, then XXX_pmm_manager can be used) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 388 M
(// by ucore to manage the total physical memory space.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 377 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
( pmm_manager {) s
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 366 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 366 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 366 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 366 M
( *name;                                 ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
329 366 M
(// XXX_pmm_manager's name) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 355 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 355 M
( \(*init\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 355 M
(void) s
/F-gs-font 10 10 SF
0 setgray
131 355 M
(\);                               ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
329 355 M
(// initialize internal description&manag) s
5 344 M
(ement data structure) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(                                                      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
329 333 M
(// \(free block list, number of free bloc) s
5 322 M
(k\) of XXX_pmm_manager ) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 311 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 311 M
( \(*init_memmap\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 311 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
185 311 M
( Page *base, size_t n\); ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
329 311 M
(// setup description&management data str) s
5 300 M
(uctcure according to) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(                                                      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
329 289 M
(// the initial free physical memory spac) s
5 278 M
(e ) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 267 M
( Page *\(*alloc_pages\)\(size_t n\);            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
329 267 M
(// allocate >=n pages, depend on the all) s
5 256 M
(ocation algorithm ) s
/F-gs-font 10 10 SF
0 setgray
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 245 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 245 M
( \(*free_pages\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
143 245 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
179 245 M
( Page *base, size_t n\);  ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
329 245 M
(// free >=n pages with "base" addr of Pa) s
5 234 M
(ge descriptor structures\(memlayout.h\)) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(    size_t \(*nr_free_pages\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 223 M
(void) s
/F-gs-font 10 10 SF
0 setgray
197 223 M
(\);                    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
329 223 M
(// return the number of free pages ) s
/F-gs-font 10 10 SF
0 setgray
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 212 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 212 M
( \(*check\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 212 M
(void) s
/F-gs-font 10 10 SF
0 setgray
137 212 M
(\);                              ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
329 212 M
(// check the correctness of XXX_pmm_mana) s
5 201 M
(ger ) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 168 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 168 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 168 M
(const) s
/F-gs-font 10 10 SF
0 setgray
77 168 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 168 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 168 M
( pmm_manager *pmm_manager;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 157 M
( pde_t *boot_pgdir;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 146 M
( uintptr_t boot_cr3;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 124 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 124 M
(pmm_init) s
/F-gs-font 10 10 SF
0 setgray
83 124 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 124 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 124 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 102 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 102 M
( Page *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
83 102 M
(alloc_pages) s
/F-gs-font 10 10 SF
0 setgray
149 102 M
(\(size_t n\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 91 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 91 M
(free_pages) s
/F-gs-font 10 10 SF
0 setgray
95 91 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 91 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 91 M
( Page *base, size_t n\);) s
5 80 M
(size_t ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
47 80 M
(nr_free_pages) s
/F-gs-font 10 10 SF
0 setgray
125 80 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 80 M
(void) s
/F-gs-font 10 10 SF
0 setgray
155 80 M
(\);) s
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 58 M
(alloc_page) s
/F-gs-font 10 10 SF
0 setgray
113 58 M
(\(\) alloc_pages\(1\)) s
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 47 M
(free_page) s
/F-gs-font 10 10 SF
0 setgray
107 47 M
(\(page\) free_pages\(page, 1\)) s
5 25 M
(pte_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
47 25 M
(get_pte) s
/F-gs-font 10 10 SF
0 setgray
89 25 M
(\(pde_t *pgdir, uintptr_t la, bool create\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( Page *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
83 14 M
(get_page) s
/F-gs-font 10 10 SF
0 setgray
131 14 M
(\(pde_t *pgdir, uintptr_t la, pte_t **ptep_store\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 3 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 3 M
(page_remove) s
/F-gs-font 10 10 SF
0 setgray
101 3 M
(\(pde_t *pgdir, uintptr_t la\);) s
_R
S
%%Page: (277) 277
%%BeginPageSetup
_S
18 36 translate
/pagenum 277 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 707 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 707 M
(page_insert) s
/F-gs-font 10 10 SF
0 setgray
95 707 M
(\(pde_t *pgdir, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
185 707 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
221 707 M
( Page *page, uintptr_t la, uint32_t perm\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 685 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 685 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 685 M
(load_esp0) s
/F-gs-font 10 10 SF
0 setgray
89 685 M
(\(uintptr_t esp0\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 674 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 674 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 674 M
(tlb_invalidate) s
/F-gs-font 10 10 SF
0 setgray
119 674 M
(\(pde_t *pgdir, uintptr_t la\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 663 M
( Page *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
83 663 M
(pgdir_alloc_page) s
/F-gs-font 10 10 SF
0 setgray
179 663 M
(\(pde_t *pgdir, uintptr_t la, uint32_t perm\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 652 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 652 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 652 M
(unmap_range) s
/F-gs-font 10 10 SF
0 setgray
101 652 M
(\(pde_t *pgdir, uintptr_t start, uintptr_t end\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 641 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 641 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 641 M
(exit_range) s
/F-gs-font 10 10 SF
0 setgray
95 641 M
(\(pde_t *pgdir, uintptr_t start, uintptr_t end\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 630 M
(int) s
/F-gs-font 10 10 SF
0 setgray
23 630 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
29 630 M
(copy_range) s
/F-gs-font 10 10 SF
0 setgray
89 630 M
(\(pde_t *to, pde_t *from, uintptr_t start, uintptr_t end, bool share\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 608 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 608 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 608 M
(print_pgdir) s
/F-gs-font 10 10 SF
0 setgray
101 608 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 608 M
(void) s
/F-gs-font 10 10 SF
0 setgray
131 608 M
(\);) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 586 M
(/* *) s
5 575 M
( * PADDR - takes a kernel virtual address \(an address that points above KERNBASE\),) s
5 564 M
( * where the machine's maximum 256MB of physical memory is mapped and returns the) s
5 553 M
( * corresponding physical address.  It panics if you pass it a non-kernel virtual address.) s
5 542 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 531 M
(PADDR) s
/F-gs-font 10 10 SF
0 setgray
83 531 M
(\(kva\) \({                                                   \\) s
5 520 M
(            uintptr_t __m_kva = \(uintptr_t\)\(kva\);                       \\) s
5 509 M
(            if \(__m_kva < KERNBASE\) {                                   \\) s
5 498 M
(                panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 498 M
("PADDR called with invalid kva %08lx") s
/F-gs-font 10 10 SF
0 setgray
359 498 M
(, __m_kva\);  \\) s
5 487 M
(            }                                                           \\) s
5 476 M
(            __m_kva - KERNBASE;                                         \\) s
5 465 M
(        }\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 443 M
(/* *) s
5 432 M
( * KADDR - takes a physical address and returns the corresponding kernel virtual) s
5 421 M
( * address. It panics if you pass an invalid physical address.) s
5 410 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
5 399 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 399 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 399 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 399 M
(KADDR) s
/F-gs-font 10 10 SF
0 setgray
83 399 M
(\(pa\) \({                                                    \\) s
5 388 M
(            uintptr_t __m_pa = \(pa\);                                    \\) s
5 377 M
(            size_t __m_ppn = PPN\(__m_pa\);                               \\) s
5 366 M
(            if \(__m_ppn >= npage\) {                                     \\) s
5 355 M
(                panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
137 355 M
("KADDR called with invalid pa %08lx") s
/F-gs-font 10 10 SF
0 setgray
353 355 M
(, __m_pa\);    \\) s
5 344 M
(            }                                                           \\) s
5 333 M
(            \(void *\) \(__m_pa + KERNBASE\);                               \\) s
5 322 M
(        }\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 300 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 300 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 300 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 300 M
( Page *pages;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( size_t npage;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( inline ppn_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 256 M
(page2ppn) s
/F-gs-font 10 10 SF
0 setgray
53 256 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 256 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 256 M
( Page *page\) {) s
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 245 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 245 M
( page - pages;) s
5 234 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 212 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 212 M
( inline uintptr_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 201 M
(page2pa) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 201 M
( Page *page\) {) s
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 190 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 190 M
( page2ppn\(page\) << PGSHIFT;) s
5 179 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 157 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 157 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 157 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 157 M
( Page *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 146 M
(pa2page) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
(\(uintptr_t pa\) {) s
5 135 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 135 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 135 M
( \(PPN\(pa\) >= npage\) {) s
5 124 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 124 M
("pa2page called with invalid pa") s
/F-gs-font 10 10 SF
0 setgray
281 124 M
(\);) s
5 113 M
(    }) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 102 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 102 M
( &pages[PPN\(pa\)];) s
5 91 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 69 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 69 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 58 M
(page2kva) s
/F-gs-font 10 10 SF
0 setgray
53 58 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 58 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 58 M
( Page *page\) {) s
5 47 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 47 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 47 M
( KADDR\(page2pa\(page\)\);) s
5 36 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 14 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 14 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 14 M
( Page *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 3 M
(kva2page) s
/F-gs-font 10 10 SF
0 setgray
53 3 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 3 M
( *kva\) {) s
_R
S
%%Page: (278) 278
%%BeginPageSetup
_S
18 36 translate
/pagenum 278 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 707 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
( pa2page\(PADDR\(kva\)\);) s
5 696 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 674 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 674 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 674 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 674 M
( Page *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 663 M
(pte2page) s
/F-gs-font 10 10 SF
0 setgray
53 663 M
(\(pte_t pte\) {) s
5 652 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 652 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 652 M
( \(!\(pte & PTE_P\)\) {) s
5 641 M
(        panic\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 641 M
("pte2page called with invalid pte") s
/F-gs-font 10 10 SF
0 setgray
293 641 M
(\);) s
5 630 M
(    }) s
5 619 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 619 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 619 M
( pa2page\(PTE_ADDR\(pte\)\);) s
5 608 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 586 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 586 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 586 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 586 M
( Page *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 575 M
(pde2page) s
/F-gs-font 10 10 SF
0 setgray
53 575 M
(\(pde_t pde\) {) s
5 564 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 564 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 564 M
( pa2page\(PDE_ADDR\(pde\)\);) s
5 553 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 531 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 531 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 531 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 520 M
(page_ref) s
/F-gs-font 10 10 SF
0 setgray
53 520 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 520 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
95 520 M
( Page *page\) {) s
5 509 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 509 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
( page->ref;) s
5 498 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 476 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 476 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 476 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 465 M
(set_page_ref) s
/F-gs-font 10 10 SF
0 setgray
77 465 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 465 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 465 M
( Page *page, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
197 465 M
(int) s
/F-gs-font 10 10 SF
0 setgray
215 465 M
( val\) {) s
5 454 M
(    page->ref = val;) s
5 443 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 421 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 421 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 421 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 410 M
(page_ref_inc) s
/F-gs-font 10 10 SF
0 setgray
77 410 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 410 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 410 M
( Page *page\) {) s
5 399 M
(    page->ref += 1;) s
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 388 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 388 M
( page->ref;) s
5 377 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 355 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 355 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 355 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 344 M
(page_ref_dec) s
/F-gs-font 10 10 SF
0 setgray
77 344 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 344 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
119 344 M
( Page *page\) {) s
5 333 M
(    page->ref -= 1;) s
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 322 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 322 M
( page->ref;) s
5 311 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 289 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 289 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 289 M
(char) s
/F-gs-font 10 10 SF
0 setgray
71 289 M
( bootstack[], bootstacktop[];) s
5 267 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 267 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 267 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 267 M
(/* !__KERN_MM_PMM_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 245 M
([ucore/lab8_result/kern/mm/kmalloc.c] ++++++++++++++++++++++++++++++) s
5 234 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 234 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 234 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 234 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 223 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 223 M
(<list.h>) s
/F-gs-font 10 10 SF
0 setgray
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 212 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 212 M
(<memlayout.h>) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 201 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 201 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 190 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 190 M
(<kmalloc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 179 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 179 M
(<sync.h>) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 168 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 168 M
(<pmm.h>) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 157 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 157 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 135 M
(/*) s
5 124 M
( * SLOB Allocator: Simple List Of Blocks) s
5 113 M
( *) s
5 102 M
( * Matt Mackall <mpm@selenic.com> 12/30/03) s
5 91 M
( *) s
5 80 M
( * How SLOB works:) s
5 69 M
( *) s
5 58 M
( * The core of SLOB is a traditional K&R style heap allocator, with) s
5 47 M
( * support for returning aligned objects. The granularity of this) s
5 36 M
( * allocator is 8 bytes on x86, though it's perhaps possible to reduce) s
5 25 M
( * this to 4 if it's deemed worth the effort. The slob heap is a) s
5 14 M
( * singly-linked list of pages from __get_free_page, grown on demand) s
5 3 M
( * and allocation from the heap is currently first-fit.) s
_R
S
%%Page: (279) 279
%%BeginPageSetup
_S
18 36 translate
/pagenum 279 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
( *) s
5 696 M
( * Above this is an implementation of kmalloc/kfree. Blocks returned) s
5 685 M
( * from kmalloc are 8-byte aligned and prepended with a 8-byte header.) s
5 674 M
( * If kmalloc is asked for objects of PAGE_SIZE or larger, it calls) s
5 663 M
( * __get_free_pages directly so that it can return page-aligned blocks) s
5 652 M
( * and keeps a linked list of such pages and their orders. These) s
5 641 M
( * objects are detected in kfree\(\) by their page alignment.) s
5 630 M
( *) s
5 619 M
( * SLAB is emulated on top of SLOB by simply calling constructors and) s
5 608 M
( * destructors for every SLAB allocation. Objects are returned with) s
5 597 M
( * the 8-byte alignment unless the SLAB_MUST_HWCACHE_ALIGN flag is) s
5 586 M
( * set, in which case the low-level allocator will fragment blocks to) s
5 575 M
( * create the proper alignment. Again, objects of page-size or greater) s
5 564 M
( * are allocated by calling __get_free_pages. As SLAB objects know) s
5 553 M
( * their size, no separate size bookkeeping is necessary and there is) s
5 542 M
( * essentially no allocation space overhead.) s
5 531 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 498 M
(//some helper) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 487 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 487 M
(spin_lock_irqsave) s
/F-gs-font 10 10 SF
0 setgray
155 487 M
(\(l, f\) local_intr_save\(f\)) s
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 476 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 476 M
(spin_unlock_irqrestore) s
/F-gs-font 10 10 SF
0 setgray
185 476 M
(\(l, f\) local_intr_restore\(f\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 465 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 465 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 465 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
101 465 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 465 M
(int) s
/F-gs-font 10 10 SF
0 setgray
125 465 M
( gfp_t;) s
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 454 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 454 M
(PAGE_SIZE) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 443 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 443 M
(PAGE_SIZE) s
/F-gs-font 10 10 SF
0 setgray
107 443 M
( PGSIZE) s
5 432 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 432 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 410 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 410 M
(L1_CACHE_BYTES) s
/F-gs-font 10 10 SF
0 setgray
5 399 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 399 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 399 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 399 M
(L1_CACHE_BYTES) s
/F-gs-font 10 10 SF
0 setgray
137 399 M
( 64) s
5 388 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 388 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 366 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 366 M
(ALIGN) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 355 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 355 M
(ALIGN) s
/F-gs-font 10 10 SF
0 setgray
83 355 M
(\(addr,size\)   \(\(\(addr\)+\(size\)-1\)&\(~\(\(size\)-1\)\)\) ) s
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 311 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 311 M
( slob_block {) s
5 300 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 300 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 300 M
( units;) s
5 289 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 289 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 289 M
( slob_block *next;) s
5 278 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 267 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 267 M
( slob_block slob_t;) s
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 245 M
(SLOB_UNIT) s
/F-gs-font 10 10 SF
0 setgray
107 245 M
( sizeof\(slob_t\)) s
5 234 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 234 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 234 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 234 M
(SLOB_UNITS) s
/F-gs-font 10 10 SF
0 setgray
113 234 M
(\(size\) \(\(\(size\) + SLOB_UNIT - 1\)/SLOB_UNIT\)) s
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 223 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 223 M
(SLOB_ALIGN) s
/F-gs-font 10 10 SF
0 setgray
113 223 M
( L1_CACHE_BYTES) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 201 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 201 M
( bigblock {) s
5 190 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 190 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 190 M
( order;) s
5 179 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 179 M
(void) s
/F-gs-font 10 10 SF
0 setgray
77 179 M
( *pages;) s
5 168 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 168 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 168 M
( bigblock *next;) s
5 157 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 146 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 146 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 146 M
( bigblock bigblock_t;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 124 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 124 M
( slob_t arena = { .next = &arena, .units = 1 };) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 113 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( slob_t *slobfree = &arena;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 102 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 102 M
( bigblock_t *bigblocks;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 69 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 69 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 69 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 69 M
(* ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
83 69 M
(__slob_get_free_pages) s
/F-gs-font 10 10 SF
0 setgray
209 69 M
(\(gfp_t gfp, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
281 69 M
(int) s
/F-gs-font 10 10 SF
0 setgray
299 69 M
( order\)) s
5 58 M
({) s
5 47 M
(  ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
17 47 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
53 47 M
( Page * page = alloc_pages\(1 << order\);) s
5 36 M
(  ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
17 36 M
(if) s
/F-gs-font 10 10 SF
0 setgray
29 36 M
(\(!page\)) s
5 25 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 25 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 25 M
( NULL;) s
5 14 M
(  ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
17 14 M
(return) s
/F-gs-font 10 10 SF
0 setgray
53 14 M
( page2kva\(page\);) s
5 3 M
(}) s
_R
S
%%Page: (280) 280
%%BeginPageSetup
_S
18 36 translate
/pagenum 280 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 696 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 696 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 696 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 696 M
(__slob_get_free_page) s
/F-gs-font 10 10 SF
0 setgray
173 696 M
(\(gfp\) __slob_get_free_pages\(gfp, 0\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 674 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 674 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 674 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 674 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
119 674 M
(__slob_free_pages) s
/F-gs-font 10 10 SF
0 setgray
221 674 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 674 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
275 674 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
281 674 M
(long) s
/F-gs-font 10 10 SF
0 setgray
305 674 M
( kva, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
341 674 M
(int) s
/F-gs-font 10 10 SF
0 setgray
359 674 M
( order\)) s
5 663 M
({) s
5 652 M
(  free_pages\(kva2page\(kva\), 1 << order\);) s
5 641 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 619 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 619 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 619 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 619 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
77 619 M
(slob_free) s
/F-gs-font 10 10 SF
0 setgray
131 619 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 619 M
(void) s
/F-gs-font 10 10 SF
0 setgray
161 619 M
( *b, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
191 619 M
(int) s
/F-gs-font 10 10 SF
0 setgray
209 619 M
( size\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 597 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 597 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 597 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
83 597 M
(slob_alloc) s
/F-gs-font 10 10 SF
0 setgray
143 597 M
(\(size_t size, gfp_t gfp, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
293 597 M
(int) s
/F-gs-font 10 10 SF
0 setgray
311 597 M
( align\)) s
5 586 M
({) s
5 575 M
(  assert\( \(size + SLOB_UNIT\) < PAGE_SIZE \);) s
5 553 M
(        slob_t *prev, *cur, *aligned = 0;) s
5 542 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 542 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 542 M
( delta = 0, units = SLOB_UNITS\(size\);) s
5 531 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 531 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
101 531 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 531 M
(long) s
/F-gs-font 10 10 SF
0 setgray
131 531 M
( flags;) s
5 509 M
(        spin_lock_irqsave\(&slob_lock, flags\);) s
5 498 M
(        prev = slobfree;) s
5 487 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 487 M
(for) s
/F-gs-font 10 10 SF
0 setgray
71 487 M
( \(cur = prev->next; ; prev = cur, cur = cur->next\) {) s
5 476 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 476 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 476 M
( \(align\) {) s
5 465 M
(                        aligned = \(slob_t *\)ALIGN\(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
311 465 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
359 465 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
365 465 M
(long) s
/F-gs-font 10 10 SF
0 setgray
389 465 M
(\)cur, align\);) s
5 454 M
(                        delta = aligned - cur;) s
5 443 M
(                }) s
5 432 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 432 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 432 M
( \(cur->units >= units + delta\) { ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
311 432 M
(/* room enough? */) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 421 M
(if) s
/F-gs-font 10 10 SF
0 setgray
161 421 M
( \(delta\) { ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
227 421 M
(/* need to fragment head to align? */) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(                                aligned->units = cur->units - delta;) s
5 399 M
(                                aligned->next = cur->next;) s
5 388 M
(                                cur->next = aligned;) s
5 377 M
(                                cur->units = delta;) s
5 366 M
(                                prev = cur;) s
5 355 M
(                                cur = aligned;) s
5 344 M
(                        }) s
5 322 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 322 M
(if) s
/F-gs-font 10 10 SF
0 setgray
161 322 M
( \(cur->units == units\) ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
299 322 M
(/* exact fit? */) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(                                prev->next = cur->next; ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
341 311 M
(/* unlink */) s
/F-gs-font 10 10 SF
0 setgray
5 300 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 300 M
(else) s
/F-gs-font 10 10 SF
0 setgray
173 300 M
( { ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
191 300 M
(/* fragment */) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(                                prev->next = cur + units;) s
5 278 M
(                                prev->next->units = cur->units - units;) s
5 267 M
(                                prev->next->next = cur->next;) s
5 256 M
(                                cur->units = units;) s
5 245 M
(                        }) s
5 223 M
(                        slobfree = prev;) s
5 212 M
(                        spin_unlock_irqrestore\(&slob_lock, flags\);) s
5 201 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 201 M
(return) s
/F-gs-font 10 10 SF
0 setgray
185 201 M
( cur;) s
5 190 M
(                }) s
5 179 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 179 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 179 M
( \(cur == slobfree\) {) s
5 168 M
(                        spin_unlock_irqrestore\(&slob_lock, flags\);) s
5 146 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 146 M
(if) s
/F-gs-font 10 10 SF
0 setgray
161 146 M
( \(size == PAGE_SIZE\) ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
287 146 M
(/* trying to shrink arena? */) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 135 M
(return) s
/F-gs-font 10 10 SF
0 setgray
233 135 M
( 0;) s
5 113 M
(                        cur = \(slob_t *\)__slob_get_free_page\(gfp\);) s
5 102 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 102 M
(if) s
/F-gs-font 10 10 SF
0 setgray
161 102 M
( \(!cur\)) s
5 91 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 91 M
(return) s
/F-gs-font 10 10 SF
0 setgray
233 91 M
( 0;) s
5 69 M
(                        slob_free\(cur, PAGE_SIZE\);) s
5 58 M
(                        spin_lock_irqsave\(&slob_lock, flags\);) s
5 47 M
(                        cur = slobfree;) s
5 36 M
(                }) s
5 25 M
(        }) s
5 14 M
(}) s
_R
S
%%Page: (281) 281
%%BeginPageSetup
_S
18 36 translate
/pagenum 281 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 707 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 707 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
77 707 M
(slob_free) s
/F-gs-font 10 10 SF
0 setgray
131 707 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
161 707 M
( *block, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
215 707 M
(int) s
/F-gs-font 10 10 SF
0 setgray
233 707 M
( size\)) s
5 696 M
({) s
5 685 M
(        slob_t *cur, *b = \(slob_t *\)block;) s
5 674 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 674 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
101 674 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 674 M
(long) s
/F-gs-font 10 10 SF
0 setgray
131 674 M
( flags;) s
5 652 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 652 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 652 M
( \(!block\)) s
5 641 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 641 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 641 M
(;) s
5 619 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 619 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 619 M
( \(size\)) s
5 608 M
(                b->units = SLOB_UNITS\(size\);) s
5 586 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 586 M
(/* Find reinsertion point */) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(        spin_lock_irqsave\(&slob_lock, flags\);) s
5 564 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 564 M
(for) s
/F-gs-font 10 10 SF
0 setgray
71 564 M
( \(cur = slobfree; !\(b > cur && b < cur->next\); cur = cur->next\)) s
5 553 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 553 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 553 M
( \(cur >= cur->next && \(b > cur || b < cur->next\)\)) s
5 542 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 542 M
(break) s
/F-gs-font 10 10 SF
0 setgray
179 542 M
(;) s
5 520 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 520 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
( \(b + b->units == cur->next\) {) s
5 509 M
(                b->units += cur->next->units;) s
5 498 M
(                b->next = cur->next->next;) s
5 487 M
(        } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 487 M
(else) s
/F-gs-font 10 10 SF
0 setgray
5 476 M
(                b->next = cur->next;) s
5 454 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 454 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 454 M
( \(cur + cur->units == b\) {) s
5 443 M
(                cur->units += b->units;) s
5 432 M
(                cur->next = b->next;) s
5 421 M
(        } ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 421 M
(else) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(                cur->next = b;) s
5 388 M
(        slobfree = cur;) s
5 366 M
(        spin_unlock_irqrestore\(&slob_lock, flags\);) s
5 355 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 311 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 311 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 311 M
(check_slab) s
/F-gs-font 10 10 SF
0 setgray
95 311 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 311 M
(void) s
/F-gs-font 10 10 SF
0 setgray
125 311 M
(\) {) s
5 300 M
(  cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 300 M
("check_slab\(\) success\\n") s
/F-gs-font 10 10 SF
0 setgray
209 300 M
(\);) s
5 289 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 267 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 256 M
(slab_init) s
/F-gs-font 10 10 SF
0 setgray
59 256 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 256 M
(void) s
/F-gs-font 10 10 SF
0 setgray
89 256 M
(\) {) s
5 245 M
(  cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
65 245 M
("use SLOB allocator\\n") s
/F-gs-font 10 10 SF
0 setgray
197 245 M
(\);) s
5 234 M
(  check_slab\(\);) s
5 223 M
(}) s
5 201 M
(inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 201 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 201 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 190 M
(kmalloc_init) s
/F-gs-font 10 10 SF
0 setgray
77 190 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 190 M
(void) s
/F-gs-font 10 10 SF
0 setgray
107 190 M
(\) {) s
5 179 M
(    slab_init\(\);) s
5 168 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 168 M
("kmalloc_init\(\) succeeded!\\n") s
/F-gs-font 10 10 SF
0 setgray
251 168 M
(\);) s
5 157 M
(}) s
5 135 M
(size_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 124 M
(slab_allocated) s
/F-gs-font 10 10 SF
0 setgray
89 124 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 124 M
(void) s
/F-gs-font 10 10 SF
0 setgray
119 124 M
(\) {) s
5 113 M
(  ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
17 113 M
(return) s
/F-gs-font 10 10 SF
0 setgray
53 113 M
( 0;) s
5 102 M
(}) s
5 80 M
(size_t) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 69 M
(kallocated) s
/F-gs-font 10 10 SF
0 setgray
65 69 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 69 M
(void) s
/F-gs-font 10 10 SF
0 setgray
95 69 M
(\) {) s
5 58 M
(   ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
23 58 M
(return) s
/F-gs-font 10 10 SF
0 setgray
59 58 M
( slab_allocated\(\);) s
5 47 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 25 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
65 25 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
71 25 M
(find_order) s
/F-gs-font 10 10 SF
0 setgray
131 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 25 M
(int) s
/F-gs-font 10 10 SF
0 setgray
155 25 M
( size\)) s
5 14 M
({) s
5 3 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 3 M
(int) s
/F-gs-font 10 10 SF
0 setgray
71 3 M
( order = 0;) s
_R
S
%%Page: (282) 282
%%BeginPageSetup
_S
18 36 translate
/pagenum 282 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 707 M
(for) s
/F-gs-font 10 10 SF
0 setgray
71 707 M
( \( ; size > 4096 ; size >>=1\)) s
5 696 M
(                order++;) s
5 685 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 685 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 685 M
( order;) s
5 674 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 652 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 652 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 652 M
(void) s
/F-gs-font 10 10 SF
0 setgray
71 652 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
83 652 M
(__kmalloc) s
/F-gs-font 10 10 SF
0 setgray
137 652 M
(\(size_t size, gfp_t gfp\)) s
5 641 M
({) s
5 630 M
(        slob_t *m;) s
5 619 M
(        bigblock_t *bb;) s
5 608 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 608 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
101 608 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 608 M
(long) s
/F-gs-font 10 10 SF
0 setgray
131 608 M
( flags;) s
5 586 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 586 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 586 M
( \(size < PAGE_SIZE - SLOB_UNIT\) {) s
5 575 M
(                m = slob_alloc\(size + SLOB_UNIT, gfp, 0\);) s
5 564 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 564 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 564 M
( m ? \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 564 M
(void) s
/F-gs-font 10 10 SF
0 setgray
197 564 M
( *\)\(m + 1\) : 0;) s
5 553 M
(        }) s
5 531 M
(        bb = slob_alloc\() s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 531 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
185 531 M
(\(bigblock_t\), gfp, 0\);) s
5 520 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 520 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 520 M
( \(!bb\)) s
5 509 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 509 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 509 M
( 0;) s
5 487 M
(        bb->order = find_order\(size\);) s
5 476 M
(        bb->pages = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
131 476 M
(void) s
/F-gs-font 10 10 SF
0 setgray
155 476 M
( *\)__slob_get_free_pages\(gfp, bb->order\);) s
5 454 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 454 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 454 M
( \(bb->pages\) {) s
5 443 M
(                spin_lock_irqsave\(&block_lock, flags\);) s
5 432 M
(                bb->next = bigblocks;) s
5 421 M
(                bigblocks = bb;) s
5 410 M
(                spin_unlock_irqrestore\(&block_lock, flags\);) s
5 399 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 399 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 399 M
( bb->pages;) s
5 388 M
(        }) s
5 366 M
(        slob_free\(bb, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
137 366 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
173 366 M
(\(bigblock_t\)\);) s
5 355 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 355 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 355 M
( 0;) s
5 344 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 322 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 322 M
( *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 311 M
(kmalloc) s
/F-gs-font 10 10 SF
0 setgray
47 311 M
(\(size_t size\)) s
5 300 M
({) s
5 289 M
(  ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
17 289 M
(return) s
/F-gs-font 10 10 SF
0 setgray
53 289 M
( __kmalloc\(size, 0\);) s
5 278 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 245 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 245 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 245 M
(kfree) s
/F-gs-font 10 10 SF
0 setgray
65 245 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 245 M
(void) s
/F-gs-font 10 10 SF
0 setgray
95 245 M
( *block\)) s
5 234 M
({) s
5 223 M
(        bigblock_t *bb, **last = &bigblocks;) s
5 212 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 212 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
101 212 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 212 M
(long) s
/F-gs-font 10 10 SF
0 setgray
131 212 M
( flags;) s
5 190 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 190 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 190 M
( \(!block\)) s
5 179 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 179 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 179 M
(;) s
5 157 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 157 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 157 M
( \(!\(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 157 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
143 157 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 157 M
(long) s
/F-gs-font 10 10 SF
0 setgray
173 157 M
(\)block & \(PAGE_SIZE-1\)\)\) {) s
5 146 M
(                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
101 146 M
(/* might be on the big block list */) s
/F-gs-font 10 10 SF
0 setgray
5 135 M
(                spin_lock_irqsave\(&block_lock, flags\);) s
5 124 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 124 M
(for) s
/F-gs-font 10 10 SF
0 setgray
119 124 M
( \(bb = bigblocks; bb; last = &bb->next, bb = bb->next\) {) s
5 113 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
161 113 M
( \(bb->pages == block\) {) s
5 102 M
(                                *last = bb->next;) s
5 91 M
(                                spin_unlock_irqrestore\(&block_lock, flags\);) s
5 80 M
(                                __slob_free_pages\(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
311 80 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
359 80 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
365 80 M
(long) s
/F-gs-font 10 10 SF
0 setgray
389 80 M
(\)block, bb->order\);) s
5 69 M
(                                slob_free\(bb, ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
281 69 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
317 69 M
(\(bigblock_t\)\);) s
5 58 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 58 M
(return) s
/F-gs-font 10 10 SF
0 setgray
233 58 M
(;) s
5 47 M
(                        }) s
5 36 M
(                }) s
5 25 M
(                spin_unlock_irqrestore\(&block_lock, flags\);) s
5 14 M
(        }) s
_R
S
%%Page: (283) 283
%%BeginPageSetup
_S
18 36 translate
/pagenum 283 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        slob_free\(\(slob_t *\)block - 1, 0\);) s
5 696 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 696 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 696 M
(;) s
5 685 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 652 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
53 652 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 652 M
(int) s
/F-gs-font 10 10 SF
0 setgray
77 652 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
83 652 M
(ksize) s
/F-gs-font 10 10 SF
0 setgray
113 652 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 652 M
(const) s
/F-gs-font 10 10 SF
0 setgray
149 652 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
155 652 M
(void) s
/F-gs-font 10 10 SF
0 setgray
179 652 M
( *block\)) s
5 641 M
({) s
5 630 M
(        bigblock_t *bb;) s
5 619 M
(        ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 619 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
101 619 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 619 M
(long) s
/F-gs-font 10 10 SF
0 setgray
131 619 M
( flags;) s
5 597 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 597 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 597 M
( \(!block\)) s
5 586 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 586 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 586 M
( 0;) s
5 564 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 564 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 564 M
( \(!\(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 564 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
143 564 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
149 564 M
(long) s
/F-gs-font 10 10 SF
0 setgray
173 564 M
(\)block & \(PAGE_SIZE-1\)\)\) {) s
5 553 M
(                spin_lock_irqsave\(&block_lock, flags\);) s
5 542 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 542 M
(for) s
/F-gs-font 10 10 SF
0 setgray
119 542 M
( \(bb = bigblocks; bb; bb = bb->next\)) s
5 531 M
(                        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
149 531 M
(if) s
/F-gs-font 10 10 SF
0 setgray
161 531 M
( \(bb->pages == block\) {) s
5 520 M
(                                spin_unlock_irqrestore\(&slob_lock, flags\);) s
5 509 M
(                                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
197 509 M
(return) s
/F-gs-font 10 10 SF
0 setgray
233 509 M
( PAGE_SIZE << bb->order;) s
5 498 M
(                        }) s
5 487 M
(                spin_unlock_irqrestore\(&block_lock, flags\);) s
5 476 M
(        }) s
5 454 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 454 M
(return) s
/F-gs-font 10 10 SF
0 setgray
89 454 M
( \(\(slob_t *\)block - 1\)->units * SLOB_UNIT;) s
5 443 M
(}) s
5 399 M
([ucore/lab8_result/kern/mm/swap_fifo.h] ++++++++++++++++++++++++++++++) s
5 388 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 388 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 388 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 388 M
(__KERN_MM_SWAP_FIFO_H__) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 377 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 377 M
(__KERN_MM_SWAP_FIFO_H__) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 355 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 355 M
(<swap.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 344 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 344 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 344 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 344 M
( swap_manager swap_manager_fifo;) s
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
([ucore/lab8_result/kern/mm/mmu.h] ++++++++++++++++++++++++++++++) s
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 300 M
(__KERN_MM_MMU_H__) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 289 M
(__KERN_MM_MMU_H__) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 267 M
(/* Eflags register */) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 256 M
(FL_CF) s
/F-gs-font 10 10 SF
0 setgray
83 256 M
(           0x00000001  // Carry Flag) s
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 245 M
(FL_PF) s
/F-gs-font 10 10 SF
0 setgray
83 245 M
(           0x00000004  // Parity Flag) s
5 234 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 234 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 234 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 234 M
(FL_AF) s
/F-gs-font 10 10 SF
0 setgray
83 234 M
(           0x00000010  // Auxiliary carry Flag) s
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 223 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 223 M
(FL_ZF) s
/F-gs-font 10 10 SF
0 setgray
83 223 M
(           0x00000040  // Zero Flag) s
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 212 M
(FL_SF) s
/F-gs-font 10 10 SF
0 setgray
83 212 M
(           0x00000080  // Sign Flag) s
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 201 M
(FL_TF) s
/F-gs-font 10 10 SF
0 setgray
83 201 M
(           0x00000100  // Trap Flag) s
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 190 M
(FL_IF) s
/F-gs-font 10 10 SF
0 setgray
83 190 M
(           0x00000200  // Interrupt Flag) s
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 179 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 179 M
(FL_DF) s
/F-gs-font 10 10 SF
0 setgray
83 179 M
(           0x00000400  // Direction Flag) s
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 168 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 168 M
(FL_OF) s
/F-gs-font 10 10 SF
0 setgray
83 168 M
(           0x00000800  // Overflow Flag) s
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 157 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 157 M
(FL_IOPL_MASK) s
/F-gs-font 10 10 SF
0 setgray
125 157 M
(    0x00003000  // I/O Privilege Level bitmask) s
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 146 M
(FL_IOPL_0) s
/F-gs-font 10 10 SF
0 setgray
107 146 M
(       0x00000000  //   IOPL == 0) s
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 135 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 135 M
(FL_IOPL_1) s
/F-gs-font 10 10 SF
0 setgray
107 135 M
(       0x00001000  //   IOPL == 1) s
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 124 M
(FL_IOPL_2) s
/F-gs-font 10 10 SF
0 setgray
107 124 M
(       0x00002000  //   IOPL == 2) s
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 113 M
(FL_IOPL_3) s
/F-gs-font 10 10 SF
0 setgray
107 113 M
(       0x00003000  //   IOPL == 3) s
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 102 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 102 M
(FL_NT) s
/F-gs-font 10 10 SF
0 setgray
83 102 M
(           0x00004000  // Nested Task) s
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 91 M
(FL_RF) s
/F-gs-font 10 10 SF
0 setgray
83 91 M
(           0x00010000  // Resume Flag) s
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 80 M
(FL_VM) s
/F-gs-font 10 10 SF
0 setgray
83 80 M
(           0x00020000  // Virtual 8086 mode) s
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 69 M
(FL_AC) s
/F-gs-font 10 10 SF
0 setgray
83 69 M
(           0x00040000  // Alignment Check) s
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 58 M
(FL_VIF) s
/F-gs-font 10 10 SF
0 setgray
89 58 M
(          0x00080000  // Virtual Interrupt Flag) s
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 47 M
(FL_VIP) s
/F-gs-font 10 10 SF
0 setgray
89 47 M
(          0x00100000  // Virtual Interrupt Pending) s
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 36 M
(FL_ID) s
/F-gs-font 10 10 SF
0 setgray
83 36 M
(           0x00200000  // ID flag) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 14 M
(/* Application segment type bits */) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 3 M
(STA_X) s
/F-gs-font 10 10 SF
0 setgray
83 3 M
(           0x8         // Executable segment) s
_R
S
%%Page: (284) 284
%%BeginPageSetup
_S
18 36 translate
/pagenum 284 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 707 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 707 M
(STA_E) s
/F-gs-font 10 10 SF
0 setgray
83 707 M
(           0x4         // Expand down \(non-executable segments\)) s
5 696 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 696 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 696 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 696 M
(STA_C) s
/F-gs-font 10 10 SF
0 setgray
83 696 M
(           0x4         // Conforming code segment \(executable only\)) s
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 685 M
(STA_W) s
/F-gs-font 10 10 SF
0 setgray
83 685 M
(           0x2         // Writeable \(non-executable segments\)) s
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 674 M
(STA_R) s
/F-gs-font 10 10 SF
0 setgray
83 674 M
(           0x2         // Readable \(executable segments\)) s
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 663 M
(STA_A) s
/F-gs-font 10 10 SF
0 setgray
83 663 M
(           0x1         // Accessed) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 641 M
(/* System segment type bits */) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 630 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 630 M
(STS_T16A) s
/F-gs-font 10 10 SF
0 setgray
101 630 M
(        0x1         // Available 16-bit TSS) s
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 619 M
(STS_LDT) s
/F-gs-font 10 10 SF
0 setgray
95 619 M
(         0x2         // Local Descriptor Table) s
5 608 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 608 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 608 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 608 M
(STS_T16B) s
/F-gs-font 10 10 SF
0 setgray
101 608 M
(        0x3         // Busy 16-bit TSS) s
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 597 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 597 M
(STS_CG16) s
/F-gs-font 10 10 SF
0 setgray
101 597 M
(        0x4         // 16-bit Call Gate) s
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 586 M
(STS_TG) s
/F-gs-font 10 10 SF
0 setgray
89 586 M
(          0x5         // Task Gate / Coum Transmitions) s
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 575 M
(STS_IG16) s
/F-gs-font 10 10 SF
0 setgray
101 575 M
(        0x6         // 16-bit Interrupt Gate) s
5 564 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 564 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 564 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 564 M
(STS_TG16) s
/F-gs-font 10 10 SF
0 setgray
101 564 M
(        0x7         // 16-bit Trap Gate) s
5 553 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 553 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 553 M
(STS_T32A) s
/F-gs-font 10 10 SF
0 setgray
101 553 M
(        0x9         // Available 32-bit TSS) s
5 542 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 542 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 542 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 542 M
(STS_T32B) s
/F-gs-font 10 10 SF
0 setgray
101 542 M
(        0xB         // Busy 32-bit TSS) s
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 531 M
(STS_CG32) s
/F-gs-font 10 10 SF
0 setgray
101 531 M
(        0xC         // 32-bit Call Gate) s
5 520 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 520 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 520 M
(STS_IG32) s
/F-gs-font 10 10 SF
0 setgray
101 520 M
(        0xE         // 32-bit Interrupt Gate) s
5 509 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 509 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 509 M
(STS_TG32) s
/F-gs-font 10 10 SF
0 setgray
101 509 M
(        0xF         // 32-bit Trap Gate) s
5 487 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 487 M
(ifdef) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
47 487 M
(__ASSEMBLER__) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 465 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 465 M
(SEG_NULL) s
/F-gs-font 10 10 SF
0 setgray
101 465 M
(                                                \\) s
5 454 M
(    .word 0, 0;                                                 \\) s
5 443 M
(    .byte 0, 0, 0, 0) s
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 421 M
(SEG_ASM) s
/F-gs-font 10 10 SF
0 setgray
95 421 M
(\(type,base,lim\)                                  \\) s
5 410 M
(    .word \(\(\(lim\) >> 12\) & 0xffff\), \(\(base\) & 0xffff\);          \\) s
5 399 M
(    .byte \(\(\(base\) >> 16\) & 0xff\), \(0x90 | \(type\)\),             \\) s
5 388 M
(        \(0xC0 | \(\(\(lim\) >> 28\) & 0xf\)\), \(\(\(base\) >> 24\) & 0xff\)) s
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(else) s
/F-gs-font 10 10 SF
0 setgray
35 366 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
41 366 M
(/* not __ASSEMBLER__ */) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 344 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 322 M
(/* Gate descriptors for interrupts and traps */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 311 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 311 M
( gatedesc {) s
5 300 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 300 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 300 M
( gd_off_15_0 : 16;      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 300 M
(// low 16 bits of offset in segment) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 289 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 289 M
( gd_ss : 16;            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 289 M
(// segment selector) s
/F-gs-font 10 10 SF
0 setgray
5 278 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 278 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 278 M
( gd_args : 5;           ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 278 M
(// # args, 0 for interrupt/trap gates) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 267 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 267 M
( gd_rsv1 : 3;           ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 267 M
(// reserved\(should be zero I guess\)) s
/F-gs-font 10 10 SF
0 setgray
5 256 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 256 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 256 M
( gd_type : 4;           ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 256 M
(// type\(STS_{TG,IG32,TG32}\)) s
/F-gs-font 10 10 SF
0 setgray
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 245 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 245 M
( gd_s : 1;              ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 245 M
(// must be 0 \(system\)) s
/F-gs-font 10 10 SF
0 setgray
5 234 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 234 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 234 M
( gd_dpl : 2;            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 234 M
(// descriptor\(meaning new\) privilege level) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 223 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 223 M
( gd_p : 1;              ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 223 M
(// Present) s
/F-gs-font 10 10 SF
0 setgray
5 212 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 212 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 212 M
( gd_off_31_16 : 16;     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 212 M
(// high bits of offset in segment) s
/F-gs-font 10 10 SF
0 setgray
5 201 M
(};) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 179 M
(/* *) s
5 168 M
( * Set up a normal interrupt/trap gate descriptor) s
5 157 M
( *   - istrap: 1 for a trap \(= exception\) gate, 0 for an interrupt gate) s
5 146 M
( *   - sel: Code segment selector for interrupt/trap handler) s
5 135 M
( *   - off: Offset in code segment for interrupt/trap handler) s
5 124 M
( *   - dpl: Descriptor Privilege Level - the privilege level required) s
5 113 M
( *          for software to invoke this interrupt/trap gate explicitly) s
5 102 M
( *          using an int instruction.) s
5 91 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 80 M
(SETGATE) s
/F-gs-font 10 10 SF
0 setgray
95 80 M
(\(gate, istrap, sel, off, dpl\) {               \\) s
5 69 M
(        \(gate\).gd_off_15_0 = \(uint32_t\)\(off\) & 0xffff;      \\) s
5 58 M
(        \(gate\).gd_ss = \(sel\);                                \\) s
5 47 M
(        \(gate\).gd_args = 0;                                 \\) s
5 36 M
(        \(gate\).gd_rsv1 = 0;                                 \\) s
5 25 M
(        \(gate\).gd_type = \(istrap\) ? STS_TG32 : STS_IG32;    \\) s
5 14 M
(        \(gate\).gd_s = 0;                                    \\) s
5 3 M
(        \(gate\).gd_dpl = \(dpl\);                              \\) s
_R
S
%%Page: (285) 285
%%BeginPageSetup
_S
18 36 translate
/pagenum 285 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(        \(gate\).gd_p = 1;                                    \\) s
5 696 M
(        \(gate\).gd_off_31_16 = \(uint32_t\)\(off\) >> 16;        \\) s
5 685 M
(    }) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 663 M
(/* Set up a call gate descriptor */) s
/F-gs-font 10 10 SF
0 setgray
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 652 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 652 M
(SETCALLGATE) s
/F-gs-font 10 10 SF
0 setgray
119 652 M
(\(gate, ss, off, dpl\) {                   \\) s
5 641 M
(        \(gate\).gd_off_15_0 = \(uint32_t\)\(off\) & 0xffff;      \\) s
5 630 M
(        \(gate\).gd_ss = \(ss\);                                \\) s
5 619 M
(        \(gate\).gd_args = 0;                                 \\) s
5 608 M
(        \(gate\).gd_rsv1 = 0;                                 \\) s
5 597 M
(        \(gate\).gd_type = STS_CG32;                          \\) s
5 586 M
(        \(gate\).gd_s = 0;                                    \\) s
5 575 M
(        \(gate\).gd_dpl = \(dpl\);                              \\) s
5 564 M
(        \(gate\).gd_p = 1;                                    \\) s
5 553 M
(        \(gate\).gd_off_31_16 = \(uint32_t\)\(off\) >> 16;        \\) s
5 542 M
(    }) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 520 M
(/* segment descriptors */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 509 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 509 M
( segdesc {) s
5 498 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 498 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 498 M
( sd_lim_15_0 : 16;      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 498 M
(// low bits of segment limit) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 487 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 487 M
( sd_base_15_0 : 16;     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 487 M
(// low bits of segment base address) s
/F-gs-font 10 10 SF
0 setgray
5 476 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 476 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 476 M
( sd_base_23_16 : 8;     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 476 M
(// middle bits of segment base address) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 465 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 465 M
( sd_type : 4;           ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 465 M
(// segment type \(see STS_ constants\)) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 454 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 454 M
( sd_s : 1;              ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 454 M
(// 0 = system, 1 = application) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 443 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 443 M
( sd_dpl : 2;            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 443 M
(// descriptor Privilege Level) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 432 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 432 M
( sd_p : 1;              ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 432 M
(// present) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 421 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 421 M
( sd_lim_19_16 : 4;      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 421 M
(// high bits of segment limit) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 410 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 410 M
( sd_avl : 1;            ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 410 M
(// unused \(available for software use\)) s
/F-gs-font 10 10 SF
0 setgray
5 399 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 399 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 399 M
( sd_rsv1 : 1;           ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 399 M
(// reserved) s
/F-gs-font 10 10 SF
0 setgray
5 388 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 388 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 388 M
( sd_db : 1;             ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 388 M
(// 0 = 16-bit segment, 1 = 32-bit segment) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 377 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 377 M
( sd_g : 1;              ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 377 M
(// granularity: limit scaled by 4K when set) s
/F-gs-font 10 10 SF
0 setgray
5 366 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 366 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 366 M
( sd_base_31_24 : 8;     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
221 366 M
(// high bits of segment base address) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(};) s
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 333 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 333 M
(SEG_NULL) s
/F-gs-font 10 10 SF
0 setgray
101 333 M
(                                            \\) s
5 322 M
(    \(struct segdesc\) {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}) s
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 300 M
(SEG) s
/F-gs-font 10 10 SF
0 setgray
71 300 M
(\(type, base, lim, dpl\)                           \\) s
5 289 M
(    \(struct segdesc\) {                                      \\) s
5 278 M
(        \(\(lim\) >> 12\) & 0xffff, \(base\) & 0xffff,            \\) s
5 267 M
(        \(\(base\) >> 16\) & 0xff, type, 1, dpl, 1,             \\) s
5 256 M
(        \(unsigned\)\(lim\) >> 28, 0, 0, 1, 1,                  \\) s
5 245 M
(        \(unsigned\) \(base\) >> 24                             \\) s
5 234 M
(    }) s
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 212 M
(SEGTSS) s
/F-gs-font 10 10 SF
0 setgray
89 212 M
(\(type, base, lim, dpl\)                        \\) s
5 201 M
(    \(struct segdesc\) {                                      \\) s
5 190 M
(        \(lim\) & 0xffff, \(base\) & 0xffff,                    \\) s
5 179 M
(        \(\(base\) >> 16\) & 0xff, type, 0, dpl, 1,             \\) s
5 168 M
(        \(unsigned\) \(lim\) >> 16, 0, 0, 1, 0,                 \\) s
5 157 M
(        \(unsigned\) \(base\) >> 24                             \\) s
5 146 M
(    }) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 124 M
(/* task state segment format \(as described by the Pentium architecture book\) */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 113 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( taskstate {) s
5 102 M
(    uint32_t ts_link;       ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 102 M
(// old ts selector) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(    uintptr_t ts_esp0;      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 91 M
(// stack pointers and segment selectors) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(    uint16_t ts_ss0;        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 80 M
(// after an increase in privilege level) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(    uint16_t ts_padding1;) s
5 58 M
(    uintptr_t ts_esp1;) s
5 47 M
(    uint16_t ts_ss1;) s
5 36 M
(    uint16_t ts_padding2;) s
5 25 M
(    uintptr_t ts_esp2;) s
5 14 M
(    uint16_t ts_ss2;) s
5 3 M
(    uint16_t ts_padding3;) s
_R
S
%%Page: (286) 286
%%BeginPageSetup
_S
18 36 translate
/pagenum 286 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    uintptr_t ts_cr3;       ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 707 M
(// page directory base) s
/F-gs-font 10 10 SF
0 setgray
5 696 M
(    uintptr_t ts_eip;       ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 696 M
(// saved state from last task switch) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(    uint32_t ts_eflags;) s
5 674 M
(    uint32_t ts_eax;        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 674 M
(// more saved state \(registers\)) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(    uint32_t ts_ecx;) s
5 652 M
(    uint32_t ts_edx;) s
5 641 M
(    uint32_t ts_ebx;) s
5 630 M
(    uintptr_t ts_esp;) s
5 619 M
(    uintptr_t ts_ebp;) s
5 608 M
(    uint32_t ts_esi;) s
5 597 M
(    uint32_t ts_edi;) s
5 586 M
(    uint16_t ts_es;         ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 586 M
(// even more saved state \(segment selectors\)) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(    uint16_t ts_padding4;) s
5 564 M
(    uint16_t ts_cs;) s
5 553 M
(    uint16_t ts_padding5;) s
5 542 M
(    uint16_t ts_ss;) s
5 531 M
(    uint16_t ts_padding6;) s
5 520 M
(    uint16_t ts_ds;) s
5 509 M
(    uint16_t ts_padding7;) s
5 498 M
(    uint16_t ts_fs;) s
5 487 M
(    uint16_t ts_padding8;) s
5 476 M
(    uint16_t ts_gs;) s
5 465 M
(    uint16_t ts_padding9;) s
5 454 M
(    uint16_t ts_ldt;) s
5 443 M
(    uint16_t ts_padding10;) s
5 432 M
(    uint16_t ts_t;          ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 432 M
(// trap on task switch) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(    uint16_t ts_iomb;       ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
173 421 M
(// i/o map base address) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(} __attribute__\(\(packed\)\);) s
5 388 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 388 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 388 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 388 M
(/* !__ASSEMBLER__ */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 366 M
(// A linear address 'la' has a three-part structure as follows:) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 355 M
(//) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 344 M
(// +--------10------+-------10-------+---------12----------+) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 333 M
(// | Page Directory |   Page Table   | Offset within Page  |) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 322 M
(// |      Index     |     Index      |                     |) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 311 M
(// +----------------+----------------+---------------------+) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 300 M
(//  \\--- PDX\(la\) --/ \\--- PTX\(la\) --/ \\---- PGOFF\(la\) ----/) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 289 M
(//  \\----------- PPN\(la\) -----------/) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 278 M
(//) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 267 M
(// The PDX, PTX, PGOFF, and PPN macros decompose linear addresses as shown.) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 256 M
(// To construct a linear address la from PDX\(la\), PTX\(la\), and PGOFF\(la\),) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 245 M
(// use PGADDR\(PDX\(la\), PTX\(la\), PGOFF\(la\)\).) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 223 M
(// page directory index) s
/F-gs-font 10 10 SF
0 setgray
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 212 M
(PDX) s
/F-gs-font 10 10 SF
0 setgray
71 212 M
(\(la\) \(\(\(\(uintptr_t\)\(la\)\) >> PDXSHIFT\) & 0x3FF\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 190 M
(// page table index) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 179 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 179 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 179 M
(PTX) s
/F-gs-font 10 10 SF
0 setgray
71 179 M
(\(la\) \(\(\(\(uintptr_t\)\(la\)\) >> PTXSHIFT\) & 0x3FF\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 157 M
(// page number field of address) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 146 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 146 M
(PPN) s
/F-gs-font 10 10 SF
0 setgray
71 146 M
(\(la\) \(\(\(uintptr_t\)\(la\)\) >> PTXSHIFT\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 124 M
(// offset in page) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 113 M
(PGOFF) s
/F-gs-font 10 10 SF
0 setgray
83 113 M
(\(la\) \(\(\(uintptr_t\)\(la\)\) & 0xFFF\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 91 M
(// construct linear address from indexes and offset) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 80 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 80 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 80 M
(PGADDR) s
/F-gs-font 10 10 SF
0 setgray
89 80 M
(\(d, t, o\) \(\(uintptr_t\)\(\(d\) << PDXSHIFT | \(t\) << PTXSHIFT | \(o\)\)\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 58 M
(// address in page table or page directory entry) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 47 M
(PTE_ADDR) s
/F-gs-font 10 10 SF
0 setgray
101 47 M
(\(pte\)   \(\(uintptr_t\)\(pte\) & ~0xFFF\)) s
5 36 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 36 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 36 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 36 M
(PDE_ADDR) s
/F-gs-font 10 10 SF
0 setgray
101 36 M
(\(pde\)   PTE_ADDR\(pde\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 14 M
(/* page directory and page table constants */) s
/F-gs-font 10 10 SF
0 setgray
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 3 M
(NPDEENTRY) s
/F-gs-font 10 10 SF
0 setgray
107 3 M
(       1024                    // page directory entries per page directory) s
_R
S
%%Page: (287) 287
%%BeginPageSetup
_S
18 36 translate
/pagenum 287 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 707 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 707 M
(NPTEENTRY) s
/F-gs-font 10 10 SF
0 setgray
107 707 M
(       1024                    // page table entries per page table) s
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 685 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 685 M
(PGSIZE) s
/F-gs-font 10 10 SF
0 setgray
89 685 M
(          4096                    // bytes mapped by a page) s
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 674 M
(PGSHIFT) s
/F-gs-font 10 10 SF
0 setgray
95 674 M
(         12                      // log2\(PGSIZE\)) s
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 663 M
(PTSIZE) s
/F-gs-font 10 10 SF
0 setgray
89 663 M
(          \(PGSIZE * NPTEENTRY\)    // bytes mapped by a page directory entry) s
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 652 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 652 M
(PTSHIFT) s
/F-gs-font 10 10 SF
0 setgray
95 652 M
(         22                      // log2\(PTSIZE\)) s
5 630 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 630 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 630 M
(PTXSHIFT) s
/F-gs-font 10 10 SF
0 setgray
101 630 M
(        12                      // offset of PTX in a linear address) s
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 619 M
(PDXSHIFT) s
/F-gs-font 10 10 SF
0 setgray
101 619 M
(        22                      // offset of PDX in a linear address) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 597 M
(/* page table/directory entry flags */) s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 586 M
(PTE_P) s
/F-gs-font 10 10 SF
0 setgray
83 586 M
(           0x001                   // Present) s
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 575 M
(PTE_W) s
/F-gs-font 10 10 SF
0 setgray
83 575 M
(           0x002                   // Writeable) s
5 564 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 564 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 564 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 564 M
(PTE_U) s
/F-gs-font 10 10 SF
0 setgray
83 564 M
(           0x004                   // User) s
5 553 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 553 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 553 M
(PTE_PWT) s
/F-gs-font 10 10 SF
0 setgray
95 553 M
(         0x008                   // Write-Through) s
5 542 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 542 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 542 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 542 M
(PTE_PCD) s
/F-gs-font 10 10 SF
0 setgray
95 542 M
(         0x010                   // Cache-Disable) s
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 531 M
(PTE_A) s
/F-gs-font 10 10 SF
0 setgray
83 531 M
(           0x020                   // Accessed) s
5 520 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 520 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 520 M
(PTE_D) s
/F-gs-font 10 10 SF
0 setgray
83 520 M
(           0x040                   // Dirty) s
5 509 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 509 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 509 M
(PTE_PS) s
/F-gs-font 10 10 SF
0 setgray
89 509 M
(          0x080                   // Page Size) s
5 498 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 498 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 498 M
(PTE_MBZ) s
/F-gs-font 10 10 SF
0 setgray
95 498 M
(         0x180                   // Bits must be zero) s
5 487 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 487 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 487 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 487 M
(PTE_AVAIL) s
/F-gs-font 10 10 SF
0 setgray
107 487 M
(       0xE00                   // Available for software use) s
5 476 M
(                                                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 476 M
(// The PTE_AVAIL bits aren't used by the kerne) s
5 465 M
(l or interpreted by the) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(                                                ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
293 454 M
(// hardware, so user processes are allowed to ) s
5 443 M
(set them arbitrarily.) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 421 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 421 M
(PTE_USER) s
/F-gs-font 10 10 SF
0 setgray
101 421 M
(        \(PTE_U | PTE_W | PTE_P\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 399 M
(/* Control Register flags */) s
/F-gs-font 10 10 SF
0 setgray
5 388 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 388 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 388 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 388 M
(CR0_PE) s
/F-gs-font 10 10 SF
0 setgray
89 388 M
(          0x00000001              // Protection Enable) s
5 377 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 377 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 377 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 377 M
(CR0_MP) s
/F-gs-font 10 10 SF
0 setgray
89 377 M
(          0x00000002              // Monitor coProcessor) s
5 366 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 366 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 366 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 366 M
(CR0_EM) s
/F-gs-font 10 10 SF
0 setgray
89 366 M
(          0x00000004              // Emulation) s
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 355 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 355 M
(CR0_TS) s
/F-gs-font 10 10 SF
0 setgray
89 355 M
(          0x00000008              // Task Switched) s
5 344 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 344 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 344 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 344 M
(CR0_ET) s
/F-gs-font 10 10 SF
0 setgray
89 344 M
(          0x00000010              // Extension Type) s
5 333 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 333 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 333 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 333 M
(CR0_NE) s
/F-gs-font 10 10 SF
0 setgray
89 333 M
(          0x00000020              // Numeric Errror) s
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 322 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 322 M
(CR0_WP) s
/F-gs-font 10 10 SF
0 setgray
89 322 M
(          0x00010000              // Write Protect) s
5 311 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 311 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 311 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 311 M
(CR0_AM) s
/F-gs-font 10 10 SF
0 setgray
89 311 M
(          0x00040000              // Alignment Mask) s
5 300 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 300 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 300 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 300 M
(CR0_NW) s
/F-gs-font 10 10 SF
0 setgray
89 300 M
(          0x20000000              // Not Writethrough) s
5 289 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 289 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 289 M
(CR0_CD) s
/F-gs-font 10 10 SF
0 setgray
89 289 M
(          0x40000000              // Cache Disable) s
5 278 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 278 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 278 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 278 M
(CR0_PG) s
/F-gs-font 10 10 SF
0 setgray
89 278 M
(          0x80000000              // Paging) s
5 256 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 256 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 256 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 256 M
(CR4_PCE) s
/F-gs-font 10 10 SF
0 setgray
95 256 M
(         0x00000100              // Performance counter enable) s
5 245 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 245 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 245 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 245 M
(CR4_MCE) s
/F-gs-font 10 10 SF
0 setgray
95 245 M
(         0x00000040              // Machine Check Enable) s
5 234 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 234 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 234 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 234 M
(CR4_PSE) s
/F-gs-font 10 10 SF
0 setgray
95 234 M
(         0x00000010              // Page Size Extensions) s
5 223 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 223 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 223 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 223 M
(CR4_DE) s
/F-gs-font 10 10 SF
0 setgray
89 223 M
(          0x00000008              // Debugging Extensions) s
5 212 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 212 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 212 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 212 M
(CR4_TSD) s
/F-gs-font 10 10 SF
0 setgray
95 212 M
(         0x00000004              // Time Stamp Disable) s
5 201 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 201 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 201 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 201 M
(CR4_PVI) s
/F-gs-font 10 10 SF
0 setgray
95 201 M
(         0x00000002              // Protected-Mode Virtual Interrupts) s
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 190 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 190 M
(CR4_VME) s
/F-gs-font 10 10 SF
0 setgray
95 190 M
(         0x00000001              // V86 Mode Extensions) s
5 168 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 168 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 168 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 168 M
(/* !__KERN_MM_MMU_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
([ucore/lab8_result/kern/schedule/default_sched.c] ++++++++++++++++++++++++++++++) s
5 135 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 135 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 135 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 135 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 124 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 124 M
(<list.h>) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 113 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 113 M
(<proc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 102 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 102 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 102 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 102 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
5 91 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 91 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 91 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 91 M
(<default_sched.h>) s
/F-gs-font 10 10 SF
0 setgray
5 69 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 69 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 69 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 69 M
(USE_SKEW_HEAP) s
/F-gs-font 10 10 SF
0 setgray
131 69 M
( 1) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 47 M
(/* You should define the BigStride constant here*/) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 36 M
(/* LAB6: YOUR CODE */) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 25 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 25 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 25 M
(BIG_STRIDE) s
/F-gs-font 10 10 SF
0 setgray
113 25 M
(    0x7FFFFFFF ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
203 25 M
(/* ??? */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 3 M
(/* The compare function for two skew_heap_node_t's and the) s
_R
S
%%Page: (288) 288
%%BeginPageSetup
_S
18 36 translate
/pagenum 288 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
( * corresponding procs*/) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 696 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 696 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 696 M
(int) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 685 M
(proc_stride_comp_f) s
/F-gs-font 10 10 SF
0 setgray
113 685 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
119 685 M
(void) s
/F-gs-font 10 10 SF
0 setgray
143 685 M
( *a, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
173 685 M
(void) s
/F-gs-font 10 10 SF
0 setgray
197 685 M
( *b\)) s
5 674 M
({) s
5 663 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 663 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
71 663 M
( proc_struct *p = le2proc\(a, lab6_run_pool\);) s
5 652 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 652 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
71 652 M
( proc_struct *q = le2proc\(b, lab6_run_pool\);) s
5 641 M
(     int32_t c = p->lab6_stride - q->lab6_stride;) s
5 630 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 630 M
(if) s
/F-gs-font 10 10 SF
0 setgray
47 630 M
( \(c > 0\) ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 630 M
(return) s
/F-gs-font 10 10 SF
0 setgray
137 630 M
( 1;) s
5 619 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 619 M
(else) s
/F-gs-font 10 10 SF
0 setgray
59 619 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 619 M
(if) s
/F-gs-font 10 10 SF
0 setgray
77 619 M
( \(c == 0\) ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
137 619 M
(return) s
/F-gs-font 10 10 SF
0 setgray
173 619 M
( 0;) s
5 608 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 608 M
(else) s
/F-gs-font 10 10 SF
0 setgray
59 608 M
( ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 608 M
(return) s
/F-gs-font 10 10 SF
0 setgray
101 608 M
( -1;) s
5 597 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 575 M
(/*) s
5 564 M
( * stride_init initializes the run-queue rq with correct assignment for) s
5 553 M
( * member variables, including:) s
5 542 M
( *) s
5 531 M
( *   - run_list: should be a empty list after initialization.) s
5 520 M
( *   - lab6_run_pool: NULL) s
5 509 M
( *   - proc_num: 0) s
5 498 M
( *   - max_time_slice: no need here, the variable would be assigned by the caller.) s
5 487 M
( *) s
5 476 M
( * hint: see proj13.1/libs/list.h for routines of the list structures.) s
5 465 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 454 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 454 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 454 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 443 M
(stride_init) s
/F-gs-font 10 10 SF
0 setgray
71 443 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 443 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 443 M
( run_queue *rq\) {) s
5 432 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 432 M
(/* LAB6: YOUR CODE */) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(     list_init\(&\(rq->run_list\)\);) s
5 410 M
(     rq->lab6_run_pool = NULL;) s
5 399 M
(     rq->proc_num = 0;) s
5 388 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 366 M
(/*) s
5 355 M
( * stride_enqueue inserts the process ``proc'' into the run-queue) s
5 344 M
( * ``rq''. The procedure should verify/initialize the relevant members) s
5 333 M
( * of ``proc'', and then put the ``lab6_run_pool'' node into the) s
5 322 M
( * queue\(since we use priority queue here\). The procedure should also) s
5 311 M
( * update the meta date in ``rq'' structure.) s
5 300 M
( *) s
5 289 M
( * proc->time_slice denotes the time slices allocation for the) s
5 278 M
( * process, which should set to rq->max_time_slice.) s
5 267 M
( * ) s
5 256 M
( * hint: see proj13.1/libs/skew_heap.h for routines of the priority) s
5 245 M
( * queue structures.) s
5 234 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 223 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 223 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 223 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 212 M
(stride_enqueue) s
/F-gs-font 10 10 SF
0 setgray
89 212 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 212 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 212 M
( run_queue *rq, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 212 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
263 212 M
( proc_struct *proc\) {) s
5 201 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 201 M
(/* LAB6: YOUR CODE */) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 190 M
(if) s
/F-gs-font 10 10 SF
0 setgray
23 190 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
29 190 M
(USE_SKEW_HEAP) s
/F-gs-font 10 10 SF
0 setgray
5 179 M
(     rq->lab6_run_pool =) s
5 168 M
(          skew_heap_insert\(rq->lab6_run_pool, &\(proc->lab6_run_pool\), proc_stride_comp_f\);) s
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(else) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(     assert\(list_empty\(&\(proc->run_link\)\)\);) s
5 135 M
(     list_add_before\(&\(rq->run_list\), &\(proc->run_link\)\);) s
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( \(proc->time_slice == 0 || proc->time_slice > rq->max_time_slice\) {) s
5 102 M
(          proc->time_slice = rq->max_time_slice;) s
5 91 M
(     }) s
5 80 M
(     proc->rq = rq;) s
5 69 M
(     rq->proc_num ++;) s
5 58 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 36 M
(/*) s
5 25 M
( * stride_dequeue removes the process ``proc'' from the run-queue) s
5 14 M
( * ``rq'', the operation would be finished by the skew_heap_remove) s
5 3 M
( * operations. Remember to update the ``rq'' structure.) s
_R
S
%%Page: (289) 289
%%BeginPageSetup
_S
18 36 translate
/pagenum 289 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/Courier-Oblique 10 10 SUF
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
0.698039 0.133333 0.133333 setrgbcolor
5 707 M
( *) s
5 696 M
( * hint: see proj13.1/libs/skew_heap.h for routines of the priority) s
5 685 M
( * queue structures.) s
5 674 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 663 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 663 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 663 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 652 M
(stride_dequeue) s
/F-gs-font 10 10 SF
0 setgray
89 652 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 652 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
131 652 M
( run_queue *rq, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 652 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
263 652 M
( proc_struct *proc\) {) s
5 641 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 641 M
(/* LAB6: YOUR CODE */) s
/F-gs-font 10 10 SF
0 setgray
5 630 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 630 M
(if) s
/F-gs-font 10 10 SF
0 setgray
23 630 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
29 630 M
(USE_SKEW_HEAP) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
(     rq->lab6_run_pool =) s
5 608 M
(          skew_heap_remove\(rq->lab6_run_pool, &\(proc->lab6_run_pool\), proc_stride_comp_f\);) s
5 597 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 597 M
(else) s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(     assert\(!list_empty\(&\(proc->run_link\)\) && proc->rq == rq\);) s
5 575 M
(     list_del_init\(&\(proc->run_link\)\);) s
5 564 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 564 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
5 553 M
(     rq->proc_num --;) s
5 542 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 531 M
(/*) s
5 520 M
( * stride_pick_next pick the element from the ``run-queue'', with the) s
5 509 M
( * minimum value of stride, and returns the corresponding process) s
5 498 M
( * pointer. The process pointer would be calculated by macro le2proc,) s
5 487 M
( * see proj13.1/kern/process/proc.h for definition. Return NULL if) s
5 476 M
( * there is no process in the queue.) s
5 465 M
( *) s
5 454 M
( * When one proc structure is selected, remember to update the stride) s
5 443 M
( * property of the proc. \(stride += BIG_STRIDE / priority\)) s
5 432 M
( *) s
5 421 M
( * hint: see proj13.1/libs/skew_heap.h for routines of the priority) s
5 410 M
( * queue structures.) s
5 399 M
( */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 388 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 388 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 388 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 388 M
( proc_struct *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 377 M
(stride_pick_next) s
/F-gs-font 10 10 SF
0 setgray
101 377 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 377 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 377 M
( run_queue *rq\) {) s
5 366 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 366 M
(/* LAB6: YOUR CODE */) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 355 M
(if) s
/F-gs-font 10 10 SF
0 setgray
23 355 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
29 355 M
(USE_SKEW_HEAP) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 344 M
(if) s
/F-gs-font 10 10 SF
0 setgray
47 344 M
( \(rq->lab6_run_pool == NULL\) ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
221 344 M
(return) s
/F-gs-font 10 10 SF
0 setgray
257 344 M
( NULL;) s
5 333 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 333 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
71 333 M
( proc_struct *p = le2proc\(rq->lab6_run_pool, lab6_run_pool\);) s
5 322 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 322 M
(else) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(     list_entry_t *le = list_next\(&\(rq->run_list\)\);) s
5 289 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 289 M
(if) s
/F-gs-font 10 10 SF
0 setgray
47 289 M
( \(le == &rq->run_list\)) s
5 278 M
(          ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 278 M
(return) s
/F-gs-font 10 10 SF
0 setgray
101 278 M
( NULL;) s
5 267 M
(     ) s
5 256 M
(     ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 256 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
71 256 M
( proc_struct *p = le2proc\(le, run_link\);) s
5 245 M
(     le = list_next\(le\);) s
5 234 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 234 M
(while) s
/F-gs-font 10 10 SF
0 setgray
65 234 M
( \(le != &rq->run_list\)) s
5 223 M
(     {) s
5 212 M
(          ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 212 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 212 M
( proc_struct *q = le2proc\(le, run_link\);) s
5 201 M
(          ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
65 201 M
(if) s
/F-gs-font 10 10 SF
0 setgray
77 201 M
( \(\(int32_t\)\(p->lab6_stride - q->lab6_stride\) > 0\)) s
5 190 M
(               p = q;) s
5 179 M
(          le = list_next\(le\);) s
5 168 M
(     }) s
5 157 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 157 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
5 146 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 146 M
(if) s
/F-gs-font 10 10 SF
0 setgray
47 146 M
( \(p->lab6_priority == 0\)) s
5 135 M
(          p->lab6_stride += BIG_STRIDE;) s
5 124 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 124 M
(else) s
/F-gs-font 10 10 SF
0 setgray
59 124 M
( p->lab6_stride += BIG_STRIDE / p->lab6_priority;) s
5 113 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 113 M
(return) s
/F-gs-font 10 10 SF
0 setgray
71 113 M
( p;) s
5 102 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 80 M
(/*) s
5 69 M
( * stride_proc_tick works with the tick event of current process. You) s
5 58 M
( * should check whether the time slices for current process is) s
5 47 M
( * exhausted and update the proc struct ``proc''. proc->time_slice) s
5 36 M
( * denotes the time slices left for current) s
5 25 M
( * process. proc->need_resched is the flag variable for process) s
5 14 M
( * switching.) s
5 3 M
( */) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (290) 290
%%BeginPageSetup
_S
18 36 translate
/pagenum 290 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 707 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 696 M
(stride_proc_tick) s
/F-gs-font 10 10 SF
0 setgray
101 696 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 696 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 696 M
( run_queue *rq, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
239 696 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
275 696 M
( proc_struct *proc\) {) s
5 685 M
(     ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
35 685 M
(/* LAB6: YOUR CODE */) s
/F-gs-font 10 10 SF
0 setgray
5 674 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 674 M
(if) s
/F-gs-font 10 10 SF
0 setgray
47 674 M
( \(proc->time_slice > 0\) {) s
5 663 M
(          proc->time_slice --;) s
5 652 M
(     }) s
5 641 M
(     ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
35 641 M
(if) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( \(proc->time_slice == 0\) {) s
5 630 M
(          proc->need_resched = 1;) s
5 619 M
(     }) s
5 608 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 586 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 586 M
( sched_class default_sched_class = {) s
5 575 M
(     .name = ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
83 575 M
("stride_scheduler") s
/F-gs-font 10 10 SF
0 setgray
191 575 M
(,) s
5 564 M
(     .init = stride_init,) s
5 553 M
(     .enqueue = stride_enqueue,) s
5 542 M
(     .dequeue = stride_dequeue,) s
5 531 M
(     .pick_next = stride_pick_next,) s
5 520 M
(     .proc_tick = stride_proc_tick,) s
5 509 M
(};) s
5 487 M
([ucore/lab8_result/kern/schedule/sched.c] ++++++++++++++++++++++++++++++) s
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 476 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 476 M
(<list.h>) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 465 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 465 M
(<sync.h>) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 454 M
(<proc.h>) s
/F-gs-font 10 10 SF
0 setgray
5 443 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 443 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 443 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 443 M
(<sched.h>) s
/F-gs-font 10 10 SF
0 setgray
5 432 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 432 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 432 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 432 M
(<stdio.h>) s
/F-gs-font 10 10 SF
0 setgray
5 421 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 421 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 421 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 421 M
(<assert.h>) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 410 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 410 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 410 M
(<default_sched.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 388 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 388 M
( list_entry_t timer_list;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 366 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 366 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 366 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 366 M
( sched_class *sched_class;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 344 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 344 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 344 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 344 M
( run_queue *rq;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 322 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 322 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 322 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 311 M
(sched_class_enqueue) s
/F-gs-font 10 10 SF
0 setgray
119 311 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 311 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
161 311 M
( proc_struct *proc\) {) s
5 300 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 300 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 300 M
( \(proc != idleproc\) {) s
5 289 M
(        sched_class->enqueue\(rq, proc\);) s
5 278 M
(    }) s
5 267 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 245 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 245 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 245 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 234 M
(sched_class_dequeue) s
/F-gs-font 10 10 SF
0 setgray
119 234 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 234 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
161 234 M
( proc_struct *proc\) {) s
5 223 M
(    sched_class->dequeue\(rq, proc\);) s
5 212 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 190 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 190 M
( inline ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 190 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
125 190 M
( proc_struct *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 179 M
(sched_class_pick_next) s
/F-gs-font 10 10 SF
0 setgray
131 179 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 179 M
(void) s
/F-gs-font 10 10 SF
0 setgray
161 179 M
(\) {) s
5 168 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 168 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 168 M
( sched_class->pick_next\(rq\);) s
5 157 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 135 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 135 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 135 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 124 M
(sched_class_proc_tick) s
/F-gs-font 10 10 SF
0 setgray
131 124 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 124 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
173 124 M
( proc_struct *proc\) {) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 113 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 113 M
( \(proc != idleproc\) {) s
5 102 M
(        sched_class->proc_tick\(rq, proc\);) s
5 91 M
(    }) s
5 80 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 80 M
(else) s
/F-gs-font 10 10 SF
0 setgray
53 80 M
( {) s
5 69 M
(        proc->need_resched = 1;) s
5 58 M
(    }) s
5 47 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 25 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 25 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 25 M
( run_queue __rq;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (291) 291
%%BeginPageSetup
_S
18 36 translate
/pagenum 291 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 707 M
(sched_init) s
/F-gs-font 10 10 SF
0 setgray
65 707 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
71 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
95 707 M
(\) {) s
5 696 M
(    list_init\(&timer_list\);) s
5 674 M
(    sched_class = &default_sched_class;) s
5 652 M
(    rq = &__rq;) s
5 641 M
(    rq->max_time_slice = 5;) s
5 630 M
(    sched_class->init\(rq\);) s
5 608 M
(    cprintf\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
77 608 M
("sched class: %s\\n") s
/F-gs-font 10 10 SF
0 setgray
191 608 M
(, sched_class->name\);) s
5 597 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 575 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 564 M
(wakeup_proc) s
/F-gs-font 10 10 SF
0 setgray
71 564 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
77 564 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
113 564 M
( proc_struct *proc\) {) s
5 553 M
(    assert\(proc->state != PROC_ZOMBIE\);) s
5 542 M
(    bool intr_flag;) s
5 531 M
(    local_intr_save\(intr_flag\);) s
5 520 M
(    {) s
5 509 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 509 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
( \(proc->state != PROC_RUNNABLE\) {) s
5 498 M
(            proc->state = PROC_RUNNABLE;) s
5 487 M
(            proc->wait_state = 0;) s
5 476 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 476 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 476 M
( \(proc != current\) {) s
5 465 M
(                sched_class_enqueue\(proc\);) s
5 454 M
(            }) s
5 443 M
(        }) s
5 432 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 432 M
(else) s
/F-gs-font 10 10 SF
0 setgray
77 432 M
( {) s
5 421 M
(            warn\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
107 421 M
("wakeup runnable process.\\n") s
/F-gs-font 10 10 SF
0 setgray
275 421 M
(\);) s
5 410 M
(        }) s
5 399 M
(    }) s
5 388 M
(    local_intr_restore\(intr_flag\);) s
5 377 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 355 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 344 M
(schedule) s
/F-gs-font 10 10 SF
0 setgray
53 344 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 344 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 344 M
(\) {) s
5 333 M
(    bool intr_flag;) s
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 322 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 322 M
( proc_struct *next;) s
5 311 M
(    local_intr_save\(intr_flag\);) s
5 300 M
(    {) s
5 289 M
(        current->need_resched = 0;) s
5 278 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 278 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 278 M
( \(current->state == PROC_RUNNABLE\) {) s
5 267 M
(            sched_class_enqueue\(current\);) s
5 256 M
(        }) s
5 245 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 245 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 245 M
( \(\(next = sched_class_pick_next\(\)\) != NULL\) {) s
5 234 M
(            sched_class_dequeue\(next\);) s
5 223 M
(        }) s
5 212 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 212 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 212 M
( \(next == NULL\) {) s
5 201 M
(            next = idleproc;) s
5 190 M
(        }) s
5 179 M
(        next->runs ++;) s
5 168 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 168 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 168 M
( \(next != current\) {) s
5 157 M
(            proc_run\(next\);) s
5 146 M
(        }) s
5 135 M
(    }) s
5 124 M
(    local_intr_restore\(intr_flag\);) s
5 113 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 91 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 80 M
(add_timer) s
/F-gs-font 10 10 SF
0 setgray
59 80 M
(\(timer_t *timer\) {) s
5 69 M
(    bool intr_flag;) s
5 58 M
(    local_intr_save\(intr_flag\);) s
5 47 M
(    {) s
5 36 M
(        assert\(timer->expires > 0 && timer->proc != NULL\);) s
5 25 M
(        assert\(list_empty\(&\(timer->timer_link\)\)\);) s
5 14 M
(        list_entry_t *le = list_next\(&timer_list\);) s
5 3 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 3 M
(while) s
/F-gs-font 10 10 SF
0 setgray
83 3 M
( \(le != &timer_list\) {) s
_R
S
%%Page: (292) 292
%%BeginPageSetup
_S
18 36 translate
/pagenum 292 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(            timer_t *next = le2timer\(le, timer_link\);) s
5 696 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 696 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 696 M
( \(timer->expires < next->expires\) {) s
5 685 M
(                next->expires -= timer->expires;) s
5 674 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 674 M
(break) s
/F-gs-font 10 10 SF
0 setgray
131 674 M
(;) s
5 663 M
(            }) s
5 652 M
(            timer->expires -= next->expires;) s
5 641 M
(            le = list_next\(le\);) s
5 630 M
(        }) s
5 619 M
(        list_add_before\(le, &\(timer->timer_link\)\);) s
5 608 M
(    }) s
5 597 M
(    local_intr_restore\(intr_flag\);) s
5 586 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 564 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 553 M
(del_timer) s
/F-gs-font 10 10 SF
0 setgray
59 553 M
(\(timer_t *timer\) {) s
5 542 M
(    bool intr_flag;) s
5 531 M
(    local_intr_save\(intr_flag\);) s
5 520 M
(    {) s
5 509 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 509 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
( \(!list_empty\(&\(timer->timer_link\)\)\) {) s
5 498 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 498 M
(if) s
/F-gs-font 10 10 SF
0 setgray
89 498 M
( \(timer->expires != 0\) {) s
5 487 M
(                list_entry_t *le = list_next\(&\(timer->timer_link\)\);) s
5 476 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 476 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 476 M
( \(le != &timer_list\) {) s
5 465 M
(                    timer_t *next = le2timer\(le, timer_link\);) s
5 454 M
(                    next->expires += timer->expires;) s
5 443 M
(                }) s
5 432 M
(            }) s
5 421 M
(            list_del_init\(&\(timer->timer_link\)\);) s
5 410 M
(        }) s
5 399 M
(    }) s
5 388 M
(    local_intr_restore\(intr_flag\);) s
5 377 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 355 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 344 M
(run_timer_list) s
/F-gs-font 10 10 SF
0 setgray
89 344 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 344 M
(void) s
/F-gs-font 10 10 SF
0 setgray
119 344 M
(\) {) s
5 333 M
(    bool intr_flag;) s
5 322 M
(    local_intr_save\(intr_flag\);) s
5 311 M
(    {) s
5 300 M
(        list_entry_t *le = list_next\(&timer_list\);) s
5 289 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 289 M
(if) s
/F-gs-font 10 10 SF
0 setgray
65 289 M
( \(le != &timer_list\) {) s
5 278 M
(            timer_t *timer = le2timer\(le, timer_link\);) s
5 267 M
(            assert\(timer->expires != 0\);) s
5 256 M
(            timer->expires --;) s
5 245 M
(            ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
77 245 M
(while) s
/F-gs-font 10 10 SF
0 setgray
107 245 M
( \(timer->expires == 0\) {) s
5 234 M
(                le = list_next\(le\);) s
5 223 M
(                ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 223 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
137 223 M
( proc_struct *proc = timer->proc;) s
5 212 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 212 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 212 M
( \(proc->wait_state != 0\) {) s
5 201 M
(                    assert\(proc->wait_state & WT_INTERRUPTED\);) s
5 190 M
(                }) s
5 179 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 179 M
(else) s
/F-gs-font 10 10 SF
0 setgray
125 179 M
( {) s
5 168 M
(                    warn\() s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
155 168 M
("process %d's wait_state == 0.\\n") s
/F-gs-font 10 10 SF
0 setgray
353 168 M
(, proc->pid\);) s
5 157 M
(                }) s
5 146 M
(                wakeup_proc\(proc\);) s
5 135 M
(                del_timer\(timer\);) s
5 124 M
(                ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
101 124 M
(if) s
/F-gs-font 10 10 SF
0 setgray
113 124 M
( \(le == &timer_list\) {) s
5 113 M
(                    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
125 113 M
(break) s
/F-gs-font 10 10 SF
0 setgray
155 113 M
(;) s
5 102 M
(                }) s
5 91 M
(                timer = le2timer\(le, timer_link\);) s
5 80 M
(            }) s
5 69 M
(        }) s
5 58 M
(        sched_class_proc_tick\(current\);) s
5 47 M
(    }) s
5 36 M
(    local_intr_restore\(intr_flag\);) s
5 25 M
(}) s
5 14 M
([ucore/lab8_result/kern/schedule/sched.h] ++++++++++++++++++++++++++++++) s
5 3 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 3 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 3 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 3 M
(__KERN_SCHEDULE_SCHED_H__) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (293) 293
%%BeginPageSetup
_S
18 36 translate
/pagenum 293 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 707 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 707 M
(__KERN_SCHEDULE_SCHED_H__) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 685 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 685 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 674 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 674 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 674 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 674 M
(<list.h>) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 663 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 663 M
(<skew_heap.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 641 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 641 M
( proc_struct;) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 619 M
(typedef) s
/F-gs-font 10 10 SF
0 setgray
47 619 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
53 619 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
89 619 M
( {) s
5 608 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 608 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 608 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 608 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 608 M
( expires;) s
5 597 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 597 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 597 M
( proc_struct *proc;) s
5 586 M
(    list_entry_t timer_link;) s
5 575 M
(} timer_t;) s
5 553 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 553 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 553 M
(le2timer) s
/F-gs-font 10 10 SF
0 setgray
101 553 M
(\(le, member\)            \\) s
5 542 M
(to_struct\(\(le\), timer_t, member\)) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 520 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 520 M
( inline timer_t *) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 509 M
(timer_init) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
(\(timer_t *timer, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
167 509 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
203 509 M
( proc_struct *proc, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
323 509 M
(int) s
/F-gs-font 10 10 SF
0 setgray
341 509 M
( expires\) {) s
5 498 M
(    timer->expires = expires;) s
5 487 M
(    timer->proc = proc;) s
5 476 M
(    list_init\(&\(timer->timer_link\)\);) s
5 465 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 465 M
(return) s
/F-gs-font 10 10 SF
0 setgray
65 465 M
( timer;) s
5 454 M
(}) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 432 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 432 M
( run_queue;) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 410 M
(// The introduction of scheduling classes is borrrowed from Linux, and makes the ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 399 M
(// core scheduler quite extensible. These classes \(the scheduler modules\) encapsulate ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 388 M
(// the scheduling policies. ) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 377 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 377 M
( sched_class {) s
5 366 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 366 M
(// the name of sched_class) s
/F-gs-font 10 10 SF
0 setgray
5 355 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 355 M
(const) s
/F-gs-font 10 10 SF
0 setgray
59 355 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 355 M
(char) s
/F-gs-font 10 10 SF
0 setgray
89 355 M
( *name;) s
5 344 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 344 M
(// Init the run queue) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 333 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 333 M
( \(*init\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 333 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 333 M
( run_queue *rq\);) s
5 322 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 322 M
(// put the proc into runqueue, and this function must be called with rq_lock) s
/F-gs-font 10 10 SF
0 setgray
5 311 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 311 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 311 M
( \(*enqueue\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 311 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
161 311 M
( run_queue *rq, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 311 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
293 311 M
( proc_struct *proc\);) s
5 300 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 300 M
(// get the proc out runqueue, and this function must be called with rq_lock) s
/F-gs-font 10 10 SF
0 setgray
5 289 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 289 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 289 M
( \(*dequeue\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 289 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
161 289 M
( run_queue *rq, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
257 289 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
293 289 M
( proc_struct *proc\);) s
5 278 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 278 M
(// choose the next runnable task) s
/F-gs-font 10 10 SF
0 setgray
5 267 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 267 M
( proc_struct *\(*pick_next\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
227 267 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
263 267 M
( run_queue *rq\);) s
5 256 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 256 M
(// dealer of the time-tick) s
/F-gs-font 10 10 SF
0 setgray
5 245 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 245 M
(void) s
/F-gs-font 10 10 SF
0 setgray
53 245 M
( \(*proc_tick\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
137 245 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
173 245 M
( run_queue *rq, ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
269 245 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
305 245 M
( proc_struct *proc\);) s
5 234 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 234 M
(/* for SMP support in the future) s
5 223 M
(     *  load_balance) s
5 212 M
(     *     void \(*load_balance\)\(struct rq* rq\);) s
5 201 M
(     *  get some proc from this rq, used in load_balance,) s
5 190 M
(     *  return value is the num of gotten proc) s
5 179 M
(     *  int \(*get_proc\)\(struct rq* rq, struct proc* procs_moved[]\);) s
5 168 M
(     */) s
/F-gs-font 10 10 SF
0 setgray
5 157 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 135 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
41 135 M
( run_queue {) s
5 124 M
(    list_entry_t run_list;) s
5 113 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 113 M
(unsigned) s
/F-gs-font 10 10 SF
0 setgray
77 113 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
83 113 M
(int) s
/F-gs-font 10 10 SF
0 setgray
101 113 M
( proc_num;) s
5 102 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 102 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 102 M
( max_time_slice;) s
5 91 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 91 M
(// For LAB6 ONLY) s
/F-gs-font 10 10 SF
0 setgray
5 80 M
(    skew_heap_entry_t *lab6_run_pool;) s
5 69 M
(};) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 47 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 47 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 47 M
(sched_init) s
/F-gs-font 10 10 SF
0 setgray
95 47 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
101 47 M
(void) s
/F-gs-font 10 10 SF
0 setgray
125 47 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 36 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 36 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 36 M
(wakeup_proc) s
/F-gs-font 10 10 SF
0 setgray
101 36 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
107 36 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
143 36 M
( proc_struct *proc\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 25 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 25 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 25 M
(schedule) s
/F-gs-font 10 10 SF
0 setgray
83 25 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
89 25 M
(void) s
/F-gs-font 10 10 SF
0 setgray
113 25 M
(\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 14 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 14 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 14 M
(add_timer) s
/F-gs-font 10 10 SF
0 setgray
89 14 M
(\(timer_t *timer\);) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 3 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 3 M
(del_timer) s
/F-gs-font 10 10 SF
0 setgray
89 3 M
(\(timer_t *timer\);) s
_R
S
%%Page: (294) 294
%%BeginPageSetup
_S
18 36 translate
/pagenum 294 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
29 707 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
35 707 M
(run_timer_list) s
/F-gs-font 10 10 SF
0 setgray
119 707 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
125 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
149 707 M
(\);) s
5 685 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 685 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 685 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 685 M
(/* !__KERN_SCHEDULE_SCHED_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
([ucore/lab8_result/kern/schedule/default_sched.h] ++++++++++++++++++++++++++++++) s
5 652 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 652 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 652 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 652 M
(__KERN_SCHEDULE_SCHED_RR_H__) s
/F-gs-font 10 10 SF
0 setgray
5 641 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 641 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 641 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 641 M
(__KERN_SCHEDULE_SCHED_RR_H__) s
/F-gs-font 10 10 SF
0 setgray
5 619 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 619 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 619 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 619 M
(<sched.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 597 M
(extern) s
/F-gs-font 10 10 SF
0 setgray
41 597 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 597 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
83 597 M
( sched_class default_sched_class;) s
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 575 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 575 M
(/* !__KERN_SCHEDULE_SCHED_RR_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 553 M
([ucore/lab8_result/boot/bootasm.S] ++++++++++++++++++++++++++++++) s
5 542 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 542 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 542 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 542 M
(<asm.h>) s
/F-gs-font 10 10 SF
0 setgray
5 520 M
(# ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
17 520 M
(Start) s
/F-gs-font 10 10 SF
0 setgray
47 520 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 520 M
(the) s
/F-gs-font 10 10 SF
0 setgray
71 520 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
77 520 M
(CPU) s
/F-gs-font 10 10 SF
0 setgray
95 520 M
(: ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
107 520 M
(switch) s
/F-gs-font 10 10 SF
0 setgray
143 520 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
149 520 M
(to) s
/F-gs-font 10 10 SF
0 setgray
161 520 M
( 32-) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
185 520 M
(bit) s
/F-gs-font 10 10 SF
0 setgray
203 520 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
209 520 M
(protected) s
/F-gs-font 10 10 SF
0 setgray
263 520 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
269 520 M
(mode) s
/F-gs-font 10 10 SF
0 setgray
293 520 M
(, ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
305 520 M
(jump) s
/F-gs-font 10 10 SF
0 setgray
329 520 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
335 520 M
(into) s
/F-gs-font 10 10 SF
0 setgray
359 520 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
365 520 M
(C) s
/F-gs-font 10 10 SF
0 setgray
371 520 M
(.) s
5 509 M
(# ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
17 509 M
(The) s
/F-gs-font 10 10 SF
0 setgray
35 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
41 509 M
(BIOS) s
/F-gs-font 10 10 SF
0 setgray
65 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
71 509 M
(loads) s
/F-gs-font 10 10 SF
0 setgray
101 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
107 509 M
(this) s
/F-gs-font 10 10 SF
0 setgray
131 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
137 509 M
(code) s
/F-gs-font 10 10 SF
0 setgray
161 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
167 509 M
(from) s
/F-gs-font 10 10 SF
0 setgray
191 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
197 509 M
(the) s
/F-gs-font 10 10 SF
0 setgray
215 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
221 509 M
(first) s
/F-gs-font 10 10 SF
0 setgray
251 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
257 509 M
(sector) s
/F-gs-font 10 10 SF
0 setgray
293 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
299 509 M
(of) s
/F-gs-font 10 10 SF
0 setgray
311 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
317 509 M
(the) s
/F-gs-font 10 10 SF
0 setgray
335 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
341 509 M
(hard) s
/F-gs-font 10 10 SF
0 setgray
365 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
371 509 M
(disk) s
/F-gs-font 10 10 SF
0 setgray
395 509 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
401 509 M
(into) s
/F-gs-font 10 10 SF
0 setgray
5 498 M
(# ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
17 498 M
(memory) s
/F-gs-font 10 10 SF
0 setgray
53 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
59 498 M
(at) s
/F-gs-font 10 10 SF
0 setgray
71 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
77 498 M
(physical) s
/F-gs-font 10 10 SF
0 setgray
125 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
131 498 M
(address) s
/F-gs-font 10 10 SF
0 setgray
173 498 M
( 0x7c00 ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
221 498 M
(and) s
/F-gs-font 10 10 SF
0 setgray
239 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
245 498 M
(starts) s
/F-gs-font 10 10 SF
0 setgray
281 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
287 498 M
(executing) s
/F-gs-font 10 10 SF
0 setgray
341 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
347 498 M
(in) s
/F-gs-font 10 10 SF
0 setgray
359 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
365 498 M
(real) s
/F-gs-font 10 10 SF
0 setgray
389 498 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
395 498 M
(mode) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
(# ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
17 487 M
(with) s
/F-gs-font 10 10 SF
0 setgray
41 487 M
( %) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 487 M
(cs) s
/F-gs-font 10 10 SF
0 setgray
65 487 M
(=0 %) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
89 487 M
(ip) s
/F-gs-font 10 10 SF
0 setgray
101 487 M
(=7c00.) s
5 465 M
(.set PROT_MODE_CSEG,        0x8                     # kernel code segment selector) s
5 454 M
(.set PROT_MODE_DSEG,        0x10                    # kernel data segment selector) s
5 443 M
(.set CR0_PE_ON,             0x1                     # protected mode enable flag) s
5 432 M
(.set SMAP,                  0x534d4150) s
5 410 M
(# ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
17 410 M
(start) s
/F-gs-font 10 10 SF
0 setgray
47 410 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 410 M
(address) s
/F-gs-font 10 10 SF
0 setgray
95 410 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
101 410 M
(should) s
/F-gs-font 10 10 SF
0 setgray
137 410 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
143 410 M
(be) s
/F-gs-font 10 10 SF
0 setgray
155 410 M
( 0:7c00, ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
209 410 M
(in) s
/F-gs-font 10 10 SF
0 setgray
221 410 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
227 410 M
(real) s
/F-gs-font 10 10 SF
0 setgray
251 410 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
257 410 M
(mode) s
/F-gs-font 10 10 SF
0 setgray
281 410 M
(, ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
293 410 M
(the) s
/F-gs-font 10 10 SF
0 setgray
311 410 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
317 410 M
(beginning) s
/F-gs-font 10 10 SF
0 setgray
371 410 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
377 410 M
(address) s
/F-gs-font 10 10 SF
0 setgray
419 410 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
425 410 M
(of) s
/F-gs-font 10 10 SF
0 setgray
437 410 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
443 410 M
(the) s
/F-gs-font 10 10 SF
0 setgray
461 410 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
467 410 M
(running) s
/F-gs-font 10 10 SF
0 setgray
509 410 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
515 410 M
(bootloade) s
5 399 M
(r) s
/F-gs-font 10 10 SF
0 setgray
5 388 M
(.globl start) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 377 M
(start) s
/F-gs-font 10 10 SF
0 setgray
35 377 M
(:) s
5 366 M
(.code16                                             # Assemble ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
383 366 M
(for) s
/F-gs-font 10 10 SF
0 setgray
401 366 M
( 16-bit mode) s
5 355 M
(    cli                                             # Disable interrupts) s
5 344 M
(    cld                                             # String operations increment) s
5 322 M
(    # Set up the important data segment registers \(DS, ES, SS\).) s
5 311 M
(    xorw %ax, %ax                                   # Segment number zero) s
5 300 M
(    movw %ax, %ds                                   # -> Data Segment) s
5 289 M
(    movw %ax, %es                                   # -> Extra Segment) s
5 278 M
(    movw %ax, %ss                                   # -> Stack Segment) s
5 256 M
(    # Enable A20:) s
5 245 M
(    #  For backwards compatibility with the earliest PCs, physical) s
5 234 M
(    #  address line 20 is tied low, so that addresses higher than) s
5 223 M
(    #  1MB wrap around to zero by ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
209 223 M
(default) s
/F-gs-font 10 10 SF
0 setgray
251 223 M
(. This code undoes this.) s
5 212 M
(seta20.1:) s
5 201 M
(    inb $0x64, %al                                  # Wait ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
359 201 M
(for) s
/F-gs-font 10 10 SF
0 setgray
377 201 M
( not busy) s
5 190 M
(    testb $0x2, %al) s
5 179 M
(    jnz seta20.1) s
5 157 M
(    movb $0xd1, %al                                 # 0xd1 -> port 0x64) s
5 146 M
(    outb %al, $0x64) s
5 124 M
(seta20.2:) s
5 113 M
(    inb $0x64, %al                                  # Wait ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
359 113 M
(for) s
/F-gs-font 10 10 SF
0 setgray
377 113 M
( not busy) s
5 102 M
(    testb $0x2, %al) s
5 91 M
(    jnz seta20.2) s
5 69 M
(    movb $0xdf, %al                                 # 0xdf -> port 0x60) s
5 58 M
(    outb %al, $0x60) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 36 M
(probe_memory) s
/F-gs-font 10 10 SF
0 setgray
77 36 M
(:) s
5 25 M
(    movl $0, 0x8000) s
5 14 M
(    xorl %ebx, %ebx) s
5 3 M
(    movw $0x8004, %di) s
_R
S
%%Page: (295) 295
%%BeginPageSetup
_S
18 36 translate
/pagenum 295 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 707 M
(start_probe) s
/F-gs-font 10 10 SF
0 setgray
71 707 M
(:) s
5 696 M
(    movl $0xE820, %eax) s
5 685 M
(    movl $20, %ecx) s
5 674 M
(    movl $SMAP, %edx) s
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 663 M
(int) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( $0x15) s
5 652 M
(    jnc cont) s
5 641 M
(    movw $12345, 0x8000) s
5 630 M
(    jmp finish_probe) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 619 M
(cont) s
/F-gs-font 10 10 SF
0 setgray
29 619 M
(:) s
5 608 M
(    addw $20, %di) s
5 597 M
(    incl 0x8000) s
5 586 M
(    cmpl $0, %ebx) s
5 575 M
(    jnz start_probe) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 564 M
(finish_probe) s
/F-gs-font 10 10 SF
0 setgray
77 564 M
(:) s
5 542 M
(    # Switch from real to protected mode, using a bootstrap GDT) s
5 531 M
(    # and segment translation that makes virtual addresses) s
5 520 M
(    # identical to physical addresses, so that the) s
5 509 M
(    # effective memory map does not change during the ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
329 509 M
(switch) s
/F-gs-font 10 10 SF
0 setgray
365 509 M
(.) s
5 498 M
(    lgdt gdtdesc) s
5 487 M
(    movl %cr0, %eax) s
5 476 M
(    orl $CR0_PE_ON, %eax) s
5 465 M
(    movl %eax, %cr0) s
5 443 M
(    # Jump to next instruction, but in 32-bit code segment.) s
5 432 M
(    # Switches processor into 32-bit mode.) s
5 421 M
(    ljmp $PROT_MODE_CSEG, $protcseg) s
5 399 M
(.code32                                             # Assemble ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
383 399 M
(for) s
/F-gs-font 10 10 SF
0 setgray
401 399 M
( 32-bit mode) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 388 M
(protcseg) s
/F-gs-font 10 10 SF
0 setgray
53 388 M
(:) s
5 377 M
(    # Set up the protected-mode data segment registers) s
5 366 M
(    movw $PROT_MODE_DSEG, %ax                       # Our data segment selector) s
5 355 M
(    movw %ax, %ds                                   # -> DS: Data Segment) s
5 344 M
(    movw %ax, %es                                   # -> ES: Extra Segment) s
5 333 M
(    movw %ax, %fs                                   # -> FS) s
5 322 M
(    movw %ax, %gs                                   # -> GS) s
5 311 M
(    movw %ax, %ss                                   # -> SS: Stack Segment) s
5 289 M
(    # Set up the stack pointer and call into C. The stack region is from 0--start\(0x7c00\)) s
5 278 M
(    movl $0x0, %ebp) s
5 267 M
(    movl $start, %esp) s
5 256 M
(    call bootmain) s
5 234 M
(    # If bootmain returns \(it shouldn't\), loop.) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 223 M
(spin) s
/F-gs-font 10 10 SF
0 setgray
29 223 M
(:) s
5 212 M
(    jmp spin) s
5 190 M
(.data) s
5 179 M
(# ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
17 179 M
(Bootstrap) s
/F-gs-font 10 10 SF
0 setgray
71 179 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
77 179 M
(GDT) s
/F-gs-font 10 10 SF
0 setgray
5 168 M
(.p2align 2                                          # force 4 byte alignment) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 157 M
(gdt) s
/F-gs-font 10 10 SF
0 setgray
23 157 M
(:) s
5 146 M
(    SEG_NULLASM                                     # null seg) s
5 135 M
(    SEG_ASM\(STA_X|STA_R, 0x0, 0xffffffff\)           # code seg ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
383 135 M
(for) s
/F-gs-font 10 10 SF
0 setgray
401 135 M
( bootloader and kernel) s
5 124 M
(    SEG_ASM\(STA_W, 0x0, 0xffffffff\)                 # data seg ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
383 124 M
(for) s
/F-gs-font 10 10 SF
0 setgray
401 124 M
( bootloader and kernel) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 102 M
(gdtdesc) s
/F-gs-font 10 10 SF
0 setgray
47 102 M
(:) s
5 91 M
(    .word 0x17                                      # ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
329 91 M
(sizeof) s
/F-gs-font 10 10 SF
0 setgray
365 91 M
(\(gdt\) - 1) s
5 80 M
(    .) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
35 80 M
(long) s
/F-gs-font 10 10 SF
0 setgray
59 80 M
( gdt                                       # address gdt) s
5 69 M
([ucore/lab8_result/boot/asm.h] ++++++++++++++++++++++++++++++) s
5 58 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 58 M
(ifndef) s
/F-gs-font 10 10 SF
0 setgray
47 58 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 58 M
(__BOOT_ASM_H__) s
/F-gs-font 10 10 SF
0 setgray
5 47 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 47 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 47 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 47 M
(__BOOT_ASM_H__) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 25 M
(/* Assembler macros to create x86 segments */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 3 M
(/* Normal segment */) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (296) 296
%%BeginPageSetup
_S
18 36 translate
/pagenum 296 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 707 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 707 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 707 M
(SEG_NULLASM) s
/F-gs-font 10 10 SF
0 setgray
119 707 M
(                                             \\) s
5 696 M
(    .word 0, 0;                                                 \\) s
5 685 M
(    .byte 0, 0, 0, 0) s
5 663 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 663 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 663 M
( ) s
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
53 663 M
(SEG_ASM) s
/F-gs-font 10 10 SF
0 setgray
95 663 M
(\(type,base,lim\)                                  \\) s
5 652 M
(    .word \(\(\(lim\) >> 12\) & 0xffff\), \(\(base\) & 0xffff\);          \\) s
5 641 M
(    .byte \(\(\(base\) >> 16\) & 0xff\), \(0x90 | \(type\)\),             \\) s
5 630 M
(        \(0xC0 | \(\(\(lim\) >> 28\) & 0xf\)\), \(\(\(base\) >> 24\) & 0xff\)) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 597 M
(/* Application segment type bits */) s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 586 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 586 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 586 M
(STA_X) s
/F-gs-font 10 10 SF
0 setgray
83 586 M
(       0x8     // Executable segment) s
5 575 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 575 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 575 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 575 M
(STA_E) s
/F-gs-font 10 10 SF
0 setgray
83 575 M
(       0x4     // Expand down \(non-executable segments\)) s
5 564 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 564 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 564 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 564 M
(STA_C) s
/F-gs-font 10 10 SF
0 setgray
83 564 M
(       0x4     // Conforming code segment \(executable only\)) s
5 553 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 553 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 553 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 553 M
(STA_W) s
/F-gs-font 10 10 SF
0 setgray
83 553 M
(       0x2     // Writeable \(non-executable segments\)) s
5 542 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 542 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 542 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 542 M
(STA_R) s
/F-gs-font 10 10 SF
0 setgray
83 542 M
(       0x2     // Readable \(executable segments\)) s
5 531 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 531 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 531 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 531 M
(STA_A) s
/F-gs-font 10 10 SF
0 setgray
83 531 M
(       0x1     // Accessed) s
5 509 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 509 M
(endif) s
/F-gs-font 10 10 SF
0 setgray
41 509 M
( ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
47 509 M
(/* !__BOOT_ASM_H__ */) s
/F-gs-font 10 10 SF
0 setgray
5 487 M
([ucore/lab8_result/boot/bootmain.c] ++++++++++++++++++++++++++++++) s
5 476 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 476 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 476 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 476 M
(<defs.h>) s
/F-gs-font 10 10 SF
0 setgray
5 465 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 465 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 465 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 465 M
(<x86.h>) s
/F-gs-font 10 10 SF
0 setgray
5 454 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 454 M
(include) s
/F-gs-font 10 10 SF
0 setgray
53 454 M
( ) s
/Courier-Bold 10 10 SUF
0.737255 0.560784 0.560784 setrgbcolor
59 454 M
(<elf.h>) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 432 M
(/* *********************************************************************) s
5 421 M
( * This a dirt simple boot loader, whose sole job is to boot) s
5 410 M
( * an ELF kernel image from the first IDE hard disk.) s
5 399 M
( *) s
5 388 M
( * DISK LAYOUT) s
5 377 M
( *  * This program\(bootasm.S and bootmain.c\) is the bootloader.) s
5 366 M
( *    It should be stored in the first sector of the disk.) s
5 355 M
( *) s
5 344 M
( *  * The 2nd sector onward holds the kernel image.) s
5 333 M
( *) s
5 322 M
( *  * The kernel image must be in ELF format.) s
5 311 M
( *) s
5 300 M
( * BOOT UP STEPS) s
5 289 M
( *  * when the CPU boots it loads the BIOS into memory and executes it) s
5 278 M
( *) s
5 267 M
( *  * the BIOS intializes devices, sets of the interrupt routines, and) s
5 256 M
( *    reads the first sector of the boot device\(e.g., hard-drive\)) s
5 245 M
( *    into memory and jumps to it.) s
5 234 M
( *) s
5 223 M
( *  * Assuming this boot loader is stored in the first sector of the) s
5 212 M
( *    hard-drive, this code takes over...) s
5 201 M
( *) s
5 190 M
( *  * control starts in bootasm.S -- which sets up protected mode,) s
5 179 M
( *    and a stack so C code then run, then calls bootmain\(\)) s
5 168 M
( *) s
5 157 M
( *  * bootmain\(\) in this file takes over, reads in the kernel and jumps to it.) s
5 146 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
5 124 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 124 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 124 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 124 M
(SECTSIZE) s
/F-gs-font 10 10 SF
0 setgray
101 124 M
(        512) s
5 113 M
(#) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
11 113 M
(define) s
/F-gs-font 10 10 SF
0 setgray
47 113 M
( ) s
/Courier 10 10 SUF
0.721569 0.52549 0.043137 setrgbcolor
53 113 M
(ELFHDR) s
/F-gs-font 10 10 SF
0 setgray
89 113 M
(          \(\(struct elfhdr *\)0x10000\)      // scratch space) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 91 M
(/* waitdisk - wait for disk ready */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 80 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 80 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 80 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 69 M
(waitdisk) s
/F-gs-font 10 10 SF
0 setgray
53 69 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 69 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 69 M
(\) {) s
5 58 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 58 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 58 M
( \(\(inb\(0x1F7\) & 0xC0\) != 0x40\)) s
5 47 M
(        ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
53 47 M
(/* do nothing */) s
/F-gs-font 10 10 SF
0 setgray
149 47 M
(;) s
5 36 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 14 M
(/* readsect - read a single sector at @secno into @dst */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 3 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 3 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 3 M
(void) s
/F-gs-font 10 10 SF
0 setgray
_R
S
%%Page: (297) 297
%%BeginPageSetup
_S
18 36 translate
/pagenum 297 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 707 M
(readsect) s
/F-gs-font 10 10 SF
0 setgray
53 707 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 707 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 707 M
( *dst, uint32_t secno\) {) s
5 696 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 696 M
(// wait for disk to be ready) s
/F-gs-font 10 10 SF
0 setgray
5 685 M
(    waitdisk\(\);) s
5 663 M
(    outb\(0x1F2, 1\);                         ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
269 663 M
(// count = 1) s
/F-gs-font 10 10 SF
0 setgray
5 652 M
(    outb\(0x1F3, secno & 0xFF\);) s
5 641 M
(    outb\(0x1F4, \(secno >> 8\) & 0xFF\);) s
5 630 M
(    outb\(0x1F5, \(secno >> 16\) & 0xFF\);) s
5 619 M
(    outb\(0x1F6, \(\(secno >> 24\) & 0xF\) | 0xE0\);) s
5 608 M
(    outb\(0x1F7, 0x20\);                      ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
269 608 M
(// cmd 0x20 - read sectors) s
/F-gs-font 10 10 SF
0 setgray
5 586 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 586 M
(// wait for disk to be ready) s
/F-gs-font 10 10 SF
0 setgray
5 575 M
(    waitdisk\(\);) s
5 553 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 553 M
(// read a sector) s
/F-gs-font 10 10 SF
0 setgray
5 542 M
(    insl\(0x1F0, dst, SECTSIZE / 4\);) s
5 531 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 509 M
(/* *) s
5 498 M
( * readseg - read @count bytes at @offset from kernel into virtual address @va,) s
5 487 M
( * might copy more than asked.) s
5 476 M
( * */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 465 M
(static) s
/F-gs-font 10 10 SF
0 setgray
41 465 M
( ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
47 465 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 454 M
(readseg) s
/F-gs-font 10 10 SF
0 setgray
47 454 M
(\(uintptr_t va, uint32_t count, uint32_t offset\) {) s
5 443 M
(    uintptr_t end_va = va + count;) s
5 421 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 421 M
(// round down to sector boundary) s
/F-gs-font 10 10 SF
0 setgray
5 410 M
(    va -= offset % SECTSIZE;) s
5 388 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 388 M
(// translate from bytes to sectors; kernel starts at sector 1) s
/F-gs-font 10 10 SF
0 setgray
5 377 M
(    uint32_t secno = \(offset / SECTSIZE\) + 1;) s
5 355 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 355 M
(// If this is too slow, we could read lots of sectors at a time.) s
/F-gs-font 10 10 SF
0 setgray
5 344 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 344 M
(// We'd write more to memory than asked, but it doesn't matter --) s
/F-gs-font 10 10 SF
0 setgray
5 333 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 333 M
(// we load in increasing order.) s
/F-gs-font 10 10 SF
0 setgray
5 322 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 322 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 322 M
( \(; va < end_va; va += SECTSIZE, secno ++\) {) s
5 311 M
(        readsect\(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
113 311 M
(void) s
/F-gs-font 10 10 SF
0 setgray
137 311 M
( *\)va, secno\);) s
5 300 M
(    }) s
5 289 M
(}) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 267 M
(/* bootmain - the entry of bootloader */) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
5 256 M
(void) s
/F-gs-font 10 10 SF
0 setgray
/Courier-Bold 10 10 SUF
0 0 1 setrgbcolor
5 245 M
(bootmain) s
/F-gs-font 10 10 SF
0 setgray
53 245 M
(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
59 245 M
(void) s
/F-gs-font 10 10 SF
0 setgray
83 245 M
(\) {) s
5 234 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 234 M
(// read the 1st page off disk) s
/F-gs-font 10 10 SF
0 setgray
5 223 M
(    readseg\(\(uintptr_t\)ELFHDR, SECTSIZE * 8, 0\);) s
5 201 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 201 M
(// is this a valid ELF?) s
/F-gs-font 10 10 SF
0 setgray
5 190 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 190 M
(if) s
/F-gs-font 10 10 SF
0 setgray
41 190 M
( \(ELFHDR->e_magic != ELF_MAGIC\) {) s
5 179 M
(        ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
53 179 M
(goto) s
/F-gs-font 10 10 SF
0 setgray
77 179 M
( ) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
83 179 M
(bad) s
/F-gs-font 10 10 SF
0 setgray
101 179 M
(;) s
5 168 M
(    }) s
5 146 M
(    ) s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
29 146 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
65 146 M
( proghdr *ph, *eph;) s
5 124 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 124 M
(// load each program segment \(ignores ph flags\)) s
/F-gs-font 10 10 SF
0 setgray
5 113 M
(    ph = \() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
65 113 M
(struct) s
/F-gs-font 10 10 SF
0 setgray
101 113 M
( proghdr *\)\(\(uintptr_t\)ELFHDR + ELFHDR->e_phoff\);) s
5 102 M
(    eph = ph + ELFHDR->e_phnum;) s
5 91 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 91 M
(for) s
/F-gs-font 10 10 SF
0 setgray
47 91 M
( \(; ph < eph; ph ++\) {) s
5 80 M
(        readseg\(ph->p_va & 0xFFFFFF, ph->p_memsz, ph->p_offset\);) s
5 69 M
(    }) s
5 47 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 47 M
(// call the entry point from the ELF header) s
/F-gs-font 10 10 SF
0 setgray
5 36 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 36 M
(// note: does not return) s
/F-gs-font 10 10 SF
0 setgray
5 25 M
(    \(\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
41 25 M
(void) s
/F-gs-font 10 10 SF
0 setgray
65 25 M
( \(*\)\() s
/Courier-Bold 10 10 SUF
0.133333 0.545098 0.133333 setrgbcolor
95 25 M
(void) s
/F-gs-font 10 10 SF
0 setgray
119 25 M
(\)\)\(ELFHDR->e_entry & 0xFFFFFF\)\)\(\);) s
/Courier-Bold 10 10 SUF
0.372549 0.619608 0.627451 setrgbcolor
5 3 M
(bad) s
/F-gs-font 10 10 SF
0 setgray
23 3 M
(:) s
_R
S
%%Page: (298) 298
%%BeginPageSetup
_S
18 36 translate
/pagenum 298 def
/fname (lab8_result.txt) def
/fdir (.) def
/ftail (lab8_result.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 707 M
(    outw\(0x8A00, 0x8A00\);) s
5 696 M
(    outw\(0x8A00, 0x8E00\);) s
5 674 M
(    ) s
/Courier-Oblique 10 10 SUF
0.698039 0.133333 0.133333 setrgbcolor
29 674 M
(/* do nothing */) s
/F-gs-font 10 10 SF
0 setgray
5 663 M
(    ) s
/Courier-Bold 10 10 SUF
0.627451 0.12549 0.941176 setrgbcolor
29 663 M
(while) s
/F-gs-font 10 10 SF
0 setgray
59 663 M
( \(1\);) s
5 652 M
(}) s
_R
S
%%Trailer
%%Pages: 298
%%DocumentNeededResources: font Courier-Oblique Courier-Bold Courier 
%%EOF
